/*! For license information please see transformed.js.LICENSE.txt */
(()=>{var t={856:(t,e,n)=>{"use strict";n.d(e,{Z:()=>_});var r,i,o=n(622),a=n(574),s=n(924),u=n(861),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new a.LL("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",p=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),d=new u.Yd("@firebase/app"),v=function(){function t(t,e,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,a.p$)(t),this.container=new s.H0(e.name),this._addComponent(new s.wA("app",(function(){return u}),"PUBLIC"));try{for(var c=(0,o.XA)(this.firebase_.INTERNAL.components.values()),l=c.next();!l.done;l=c.next()){var h=l.value;this._addComponent(h)}}catch(t){r={error:t}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=f),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){d.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();v.prototype.name&&v.prototype.options||v.prototype.delete||console.log("dc");var y=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var s=o.name;if("string"!=typeof s||!s)throw l.create("bad-app-name",{appName:String(s)});if((0,a.r3)(e,s))throw l.create("duplicate-app",{appName:s});var u=new t(n,o,r);return e[s]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=p[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void d.warn(u.join(" "))}c(new s.wA(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.Ub,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument",{appName:name});(0,u.Am)(t,e)},apps:null,SDK_VERSION:"8.0.1",INTERNAL:{registerComponent:c,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!(0,a.r3)(e,t))throw l.create("no-app",{appName:t});return e[t]}function c(s){var u,c,h=s.name;if(n.has(h))return d.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===s.type?r[h]:null;if(n.set(h,s),"PUBLIC"===s.type){var f=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[h])throw l.create("invalid-app-argument",{appName:h});return t[h]()};void 0!==s.serviceProps&&(0,a.ZB)(f,s.serviceProps),r[h]=f,t.prototype[h]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,h).apply(this,s.multipleInstances?t:[])}}try{for(var p=(0,o.XA)(Object.keys(e)),v=p.next();!v.done;v=p.next()){var y=v.value;e[y]._addComponent(s)}}catch(t){u={error:t}}finally{try{v&&!v.done&&(c=p.return)&&c.call(p)}finally{if(u)throw u.error}}return"PUBLIC"===s.type?r[h]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(v);return e.INTERNAL=(0,o.pi)((0,o.pi)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,a.ZB)(e,t)},createSubscribe:a.ne,ErrorFactory:a.LL,deepExtend:a.ZB}),e}(),m=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if((0,a.jU)()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var g=self.firebase.SDK_VERSION;g&&g.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=y.initializeApp;y.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,a.UG)()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var w=y;!function(t,e){t.INTERNAL.registerComponent(new s.wA("platform-logger",(function(t){return new m(t)}),"PRIVATE")),t.registerVersion(h,"0.6.13",void 0),t.registerVersion("fire-js","")}(w);const _=w},924:(t,e,n)=>{"use strict";n.d(e,{wA:()=>o,H0:()=>u,zt:()=>s});var r=n(622),i=n(574),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),a="[DEFAULT]",s=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=a);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.BH;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=(0,r.pi)({identifier:a,optional:!1},t),n=e.identifier,i=e.optional,o=this.normalizeInstanceIdentifier(n);try{var s=this.getOrInitializeService(o);if(!s){if(i)return null;throw Error("Service "+this.name+" is not available")}return s}catch(t){if(i)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService(a)}catch(t){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=(0,r.CR)(o.value,2),u=s[0],c=s[1],l=this.normalizeInstanceIdentifier(u);try{var h=this.getOrInitializeService(l);c.resolve(h)}catch(t){}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=a),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,(function(){var t;return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.fl)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===a?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:a:t},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},991:(t,e,n)=>{"use strict";var r=n(856),i=n(622),o=n(574),a=n(861),s=n(924);t=n.hmd(t);var u,c=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,o.Pz)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,o.cI)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),l=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return(0,o.r3)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),h=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new c(e)}}catch(t){}return new l},f=h("localStorage"),p=h("sessionStorage"),d=new a.Yd("@firebase/database"),v=(u=1,function(){return u++}),y=function(t){var e=(0,o.dS)(t),n=new o.gQ;n.update(e);var r=n.digest();return o.US.encodeByteArray(r)},m=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=m.apply(null,i):n+="object"==typeof i?(0,o.Pz)(i):i,n+=" "}return n},g=null,b=!0,w=function(t,e){(0,o.hu)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(d.logLevel=a.in.VERBOSE,g=d.log.bind(d),e&&p.set("logging_enabled",!0)):"function"==typeof t?g=t:(g=null,p.remove("logging_enabled"))},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===b&&(b=!1,null===g&&!0===p.get("logging_enabled")&&w(!0)),g){var n=m.apply(null,t);g(n)}},E=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];_.apply(void 0,(0,i.fl)([t],e))}},I=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+m.apply(void 0,(0,i.fl)(t));d.error(n)},T=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+m.apply(void 0,(0,i.fl)(t));throw d.error(n),new Error(n)},S=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+m.apply(void 0,(0,i.fl)(t));d.warn(n)},C=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},k="[MIN_NAME]",N="[MAX_NAME]",A=function(t,e){if(t===e)return 0;if(t===k||e===N)return-1;if(e===k||t===N)return 1;var n=K(t),r=K(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},P=function(t,e){return t===e?0:t<e?-1:1},O=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+(0,o.Pz)(e))},x=function(t){if("object"!=typeof t||null===t)return(0,o.Pz)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=(0,o.Pz)(e[i]),r+=":",r+=x(t[e[i]]);return r+"}"},R=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function D(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var L,M,F,j,U,V,q,B,z,W,G=function(t){(0,o.hu)(!C(t),"Invalid JSON number");var e,n,r,i,a;0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(e?1:0),s.reverse();var u=s.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(u.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},H=new RegExp("^-?(0*)\\d{1,10}$"),K=function(t){if(H.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},Q=function(t){try{t()}catch(t){setTimeout((function(){var e=t.stack||"";throw S("Exception was thrown by user callback.",e),t}),Math.floor(0))}},J=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},Y=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!1,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=A(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),X=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=(0,o.ug)(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=(0,o.ug)(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=(0,o.ug)(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),$="firebaseio.com",Z="websocket",tt="long_polling",et=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=f.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&f.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if((0,o.hu)("string"==typeof t,"typeof type must == string"),(0,o.hu)("object"==typeof e,"typeof params must == object"),t===Z)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==tt)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return D(e,(function(t,e){r.push(t+"="+e)})),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}(),nt=function(t,e){var n=rt(t),r=n.namespace;"firebase.com"===n.domain&&T(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||T("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&S("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new et(n.host,n.secure,r,e,i,"",r!==n.subdomain),path:new Y(n.pathString)}},rt=function(t){var e="",n="",r="",o="",a="",s=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(o=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(h,f)));var p=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var o=(0,i.XA)(t.split("&")),a=o.next();!a.done;a=o.next()){var s=a.value;if(0!==s.length){var u=s.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):S("Invalid query segment '"+s+"' in query '"+t+"'")}}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(s="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var d=e.slice(0,l);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var v=e.indexOf(".");r=e.substring(0,v).toLowerCase(),n=e.substring(v+1),a=r}"ns"in p&&(a=p.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:s,scheme:u,pathString:o,namespace:a}},it=/[\[\].#$\/\u0000-\u001F\u007F]/,ot=/[\[\].#$\u0000-\u001F\u007F]/,at=10485760,st=function(t){return"string"==typeof t&&0!==t.length&&!it.test(t)},ut=function(t){return"string"==typeof t&&0!==t.length&&!ot.test(t)},ct=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!C(t)||t&&"object"==typeof t&&(0,o.r3)(t,".sv")},lt=function(t,e,n,r,i){i&&void 0===n||ht((0,o.gK)(t,e,i),n,r)},ht=function(t,e,n){var r=n instanceof Y?new X(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(C(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>at/3&&(0,o.ug)(e)>at)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,a=!1;if(D(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(a=!0,!st(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),ht(t,n,r),r.pop()})),i&&a)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},ft=function(t,e,n,r,i){if(!i||void 0!==n){var a=(0,o.gK)(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(a+" must be an object containing the children to replace.");var s=[];D(n,(function(t,e){var n=new Y(t);if(ht(a,e,r.child(n)),".priority"===n.getBack()&&!ct(e))throw new Error(a+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!st(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Y.comparePaths);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&a.contains(r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(a,s)}},pt=function(t,e,n,r){if(!r||void 0!==n){if(C(n))throw new Error((0,o.gK)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ct(n))throw new Error((0,o.gK)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},dt=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,o.gK)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},vt=function(t,e,n,r){if(!(r&&void 0===n||st(n)))throw new Error((0,o.gK)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},yt=function(t,e,n,r){if(!(r&&void 0===n||ut(n)))throw new Error((0,o.gK)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},mt=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),yt(t,e,n,r)},gt=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},bt=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!st(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),ut(t)}(r))throw new Error((0,o.gK)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},wt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error((0,o.gK)(t,e,r)+"must be a boolean.")},_t=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){(0,o.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,o.Wj)("OnDisconnect.cancel",1,t,!0);var e=new o.BH;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){(0,o.Dv)("OnDisconnect.remove",0,1,arguments.length),gt("OnDisconnect.remove",this.path_),(0,o.Wj)("OnDisconnect.remove",1,t,!0);var e=new o.BH;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){(0,o.Dv)("OnDisconnect.set",1,2,arguments.length),gt("OnDisconnect.set",this.path_),lt("OnDisconnect.set",1,t,this.path_,!1),(0,o.Wj)("OnDisconnect.set",2,e,!0);var n=new o.BH;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){(0,o.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),gt("OnDisconnect.setWithPriority",this.path_),lt("OnDisconnect.setWithPriority",1,t,this.path_,!1),pt("OnDisconnect.setWithPriority",2,e,!1),(0,o.Wj)("OnDisconnect.setWithPriority",3,n,!0);var r=new o.BH;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if((0,o.Dv)("OnDisconnect.update",1,2,arguments.length),gt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,S("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ft("OnDisconnect.update",1,t,this.path_,!1),(0,o.Wj)("OnDisconnect.update",2,e,!0);var i=new o.BH;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),Et=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return(0,o.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),It=(L="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",M=0,F=[],function(t){var e,n=t===M;M=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=L.charAt(t%64),t=Math.floor(t/64);(0,o.hu)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===F[e];e--)F[e]=0;F[e]++}else for(e=0;e<12;e++)F[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=L.charAt(F[e]);return(0,o.hu)(20===i.length,"nextPushId: Length should be 20."),i}),Tt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),St=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Tt(k,t),r=new Tt(k,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Tt.MIN},t}(),Ct=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return j},set:function(t){j=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return A(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw(0,o.g5)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Tt.MIN},e.prototype.maxPost=function(){return new Tt(N,j)},e.prototype.makePost=function(t,e){return(0,o.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Tt(t,j)},e.prototype.toString=function(){return".key"},e}(St),kt=new Ct,Nt=function(t){return"number"==typeof t?"number:"+G(t):"string:"+t},At=function(t){if(t.isLeafNode()){var e=t.val();(0,o.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,o.r3)(e,".sv"),"Priority must be a string or number.")}else(0,o.hu)(t===U||t.isEmpty(),"priority of unexpected type.");(0,o.hu)(t===U||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Pt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,(0,o.hu)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),At(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return V},set:function(t){V=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:((0,o.hu)(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Nt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?G(this.value_):this.value_,this.lazyHash_=y(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:((0,o.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),a=t.VALUE_TYPE_ORDER.indexOf(r);return(0,o.hu)(i>=0,"Unknown leaf type: "+n),(0,o.hu)(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Ot=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?A(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Tt.MIN},e.prototype.maxPost=function(){return new Tt(N,new Pt("[PRIORITY-POST]",B))},e.prototype.makePost=function(t,e){var n=q(t);return new Tt(e,new Pt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(St)),xt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Rt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Lt.EMPTY_NODE,this.right=null!=o?o:Lt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Lt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Lt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Dt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Rt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Lt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Rt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Rt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new xt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new xt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new xt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new xt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Dt,t}(),Mt=Math.log(2),Ft=function(){function t(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Mt,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),jt=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,a,s=r-e;if(0===s)return null;if(1===s)return o=t[e],a=n?n(o):o,new Rt(a,o.node,Rt.BLACK,null,null);var u=parseInt(s/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],a=n?n(o):o,new Rt(a,o.node,Rt.BLACK,c,l)},o=function(e){for(var r=null,o=null,a=t.length,s=function(e,r){var o=a-e,s=a;a-=e;var c=i(o+1,s),l=t[o],h=n?n(l):l;u(new Rt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?s(h,Rt.BLACK):(s(h,Rt.BLACK),s(h,Rt.RED))}return o}(new Ft(t.length));return new Lt(r||e,o)},Ut={},Vt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return(0,o.hu)(Ut&&Ot,"ChildrenNode.ts has not been loaded"),z=z||new t({".priority":Ut},{".priority":Ot})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=(0,o.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Lt?e:null},t.prototype.hasIndex=function(t){return(0,o.r3)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){(0,o.hu)(e!==kt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,a=[],s=!1,u=n.getIterator(Tt.Wrap),c=u.getNext();c;)s=s||e.isDefinedOn(c.node),a.push(c),c=u.getNext();r=s?jt(a,e.getCompare()):Ut;var l=e.toString(),h=(0,i.pi)({},this.indexSet_);h[l]=e;var f=(0,i.pi)({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t((0,o.UI)(this.indexes_,(function(t,i){var a=(0,o.DV)(r.indexSet_,i);if((0,o.hu)(a,"Missing index implementation for "+i),t===Ut){if(a.isDefinedOn(e.node)){for(var s=[],u=n.getIterator(Tt.Wrap),c=u.getNext();c;)c.name!==e.name&&s.push(c),c=u.getNext();return s.push(e),jt(s,a.getCompare())}return Ut}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Tt(e.name,l))),h.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t((0,o.UI)(this.indexes_,(function(t){if(t===Ut)return t;var r=n.get(e.name);return r?t.remove(new Tt(e.name,r)):t})),this.indexSet_)},t}();function qt(t,e){return A(t.name,e.name)}function Bt(t,e){return A(t,e)}var zt=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&At(this.priorityNode_),this.children_.isEmpty()&&(0,o.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return W||(W=new t(new Lt(Bt),null,Vt.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||W},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?W:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if((0,o.hu)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Tt(e,n),i=void 0,a=void 0;n.isEmpty()?(i=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),a=this.indexMap_.addToIndexes(r,this.children_));var s=i.isEmpty()?W:this.priorityNode_;return new t(i,s,a)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;(0,o.hu)(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Ot,(function(a,s){n[a]=s.val(e),r++,o&&t.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1})),!e&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Nt(this.getPriority().val())+":"),this.forEachChild(Ot,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":y(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Tt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Tt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Tt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,Tt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,Tt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Wt?-1:0},t.prototype.withIndex=function(e){if(e===kt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===kt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Ot),r=e.getIterator(Ot),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===kt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Wt=new(function(t){function e(){return t.call(this,new Lt(Bt),zt.EMPTY_NODE,Vt.Default)||this}return(0,i.ZT)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return zt.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(zt));function Gt(t,e){if(void 0===e&&(e=null),null===t)return zt.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),(0,o.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Pt(t,Gt(e));if(t instanceof Array){var n=zt.EMPTY_NODE;return D(t,(function(e,r){if((0,o.r3)(t,e)&&"."!==e.substring(0,1)){var i=Gt(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(Gt(e))}var r=[],i=!1;if(D(t,(function(t,e){if("."!==t.substring(0,1)){var n=Gt(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Tt(t,n)))}})),0===r.length)return zt.EMPTY_NODE;var a=jt(r,qt,(function(t){return t.name}),Bt);if(i){var s=jt(r,Ot.getCompare());return new zt(a,Gt(e),new Vt({".priority":s},{".priority":Ot}))}return new zt(a,Gt(e),Vt.Default)}Object.defineProperties(Tt,{MIN:{value:new Tt(k,zt.EMPTY_NODE)},MAX:{value:new Tt(N,Wt)}}),Ct.__EMPTY_NODE=zt.EMPTY_NODE,Pt.__childrenNodeConstructor=zt,U=Wt,B=Wt,function(t){q=t}(Gt);var Ht,Kt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?A(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Tt.MIN},e.prototype.maxPost=function(){return Tt.MAX},e.prototype.makePost=function(t,e){var n=Gt(t);return new Tt(e,n)},e.prototype.toString=function(){return".value"},e}(St)),Qt=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,(0,o.hu)(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return(0,i.ZT)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?A(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=Gt(t),r=zt.EMPTY_NODE.updateChild(this.indexPath_,n);return new Tt(e,r)},e.prototype.maxPost=function(){var t=zt.EMPTY_NODE.updateChild(this.indexPath_,Wt);return new Tt(N,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(St),Jt=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return(0,o.Dv)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return(0,o.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return(0,o.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return(0,o.Dv)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){(0,o.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),yt("DataSnapshot.child",1,e,!1);var n=new Y(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Ot)},t.prototype.hasChild=function(t){(0,o.Dv)("DataSnapshot.hasChild",1,1,arguments.length),yt("DataSnapshot.hasChild",1,t,!1);var e=new Y(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return(0,o.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if((0,o.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,o.Wj)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return e(new t(i,n.ref_.child(r),Ot))}))},t.prototype.hasChildren=function(){return(0,o.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return(0,o.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return(0,o.Dv)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Yt=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,o.Pz)(this.snapshot.exportVal())},t}(),Xt=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),$t=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Yt("value",this,new Jt(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){(0,o.hu)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Xt(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),Zt=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,(0,o.r3)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Xt(this,t,e):null},t.prototype.createEvent=function(t,e){(0,o.hu)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Yt(t.type,this,new Jt(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){(0,o.hu)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var a=r[0],s=i[0];return!(s!==a||e.callbacks_[a]&&this.callbacks_[s]&&e.callbacks_[a]!==this.callbacks_[s])}return i.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),te=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return(0,o.hu)(Ht,"Reference.ts has not been loaded"),Ht},set:function(t){Ht=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===kt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==k)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==N)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Ot){if(null!=e&&!ct(e)||null!=n&&!ct(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,o.hu)(t.getIndex()instanceof Qt||t.getIndex()===Kt,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return(0,o.Dv)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){(0,o.Dv)("Query.on",2,4,arguments.length),dt("Query.on",1,e,!1),(0,o.Wj)("Query.on",2,n,!1);var a=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,a.cancel,a.context);else{var s={};s[e]=n,this.onChildEvent(s,a.cancel,a.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new $t(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new Zt(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){(0,o.Dv)("Query.off",0,3,arguments.length),dt("Query.off",1,t,!0),(0,o.Wj)("Query.off",2,e,!0),(0,o.lb)("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var a=e||null;r=new $t(a,null,n||null)}else t&&(e&&((i={})[t]=e),r=new Zt(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.once=function(e,n,r,i){var a=this;(0,o.Dv)("Query.once",1,4,arguments.length),dt("Query.once",1,e,!1),(0,o.Wj)("Query.once",2,n,!0);var s=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new o.BH;c.promise.catch((function(){}));var l=function(t){u&&(u=!1,a.off(e,l),n&&n.bind(s.context)(t),c.resolve(t))};return this.on(e,l,(function(t){a.off(e,l),s.cancel&&s.cancel.bind(s.context)(t),c.reject(t)})),c.promise},t.prototype.limitToFirst=function(e){if((0,o.Dv)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if((0,o.Dv)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if((0,o.Dv)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');yt("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new Y(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new Qt(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){(0,o.Dv)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(kt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){(0,o.Dv)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(Ot);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){(0,o.Dv)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(Kt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),(0,o.Dv)("Query.startAt",0,2,arguments.length),lt("Query.startAt",1,e,this.path,!0),vt("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),(0,o.Dv)("Query.endAt",0,2,arguments.length),lt("Query.endAt",1,e,this.path,!0),vt("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if((0,o.Dv)("Query.equalTo",1,2,arguments.length),lt("Query.equalTo",1,t,this.path,!1),vt("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return(0,o.Dv)("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return(0,o.Dv)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=x(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if((0,o.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=this.path.equals(e.path),a=this.queryIdentifier()===e.queryIdentifier();return r&&i&&a},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,(0,o.Wj)(t,3,r.cancel,!0),r.context=n,(0,o.lb)(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,o.gK)(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),ee=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),ne=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),re=function(t,e,n){return t&&"object"==typeof t?((0,o.hu)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?ie(t[".sv"],e,n):"object"==typeof t[".sv"]?oe(t[".sv"],e):void(0,o.hu)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},ie=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:(0,o.hu)(!1,"Unexpected server value: "+t)}},oe=function(t,e,n){t.hasOwnProperty("increment")||(0,o.hu)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&(0,o.hu)(!1,"Unexpected increment value: "+r);var i=e.node();if((0,o.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!=typeof a?r:a+r},ae=function(t,e,n,r){return ue(e,new ne(n,t),r)},se=function(t,e,n){return ue(t,new ee(e),n)};function ue(t,e,n){var r,i=t.getPriority().val(),o=re(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var a=t,s=re(a.getValue(),e,n);return s!==a.getValue()||o!==a.getPriority().val()?new Pt(s,Gt(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Pt(o))),u.forEachChild(Ot,(function(t,i){var o=ue(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}var ce,le=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=e.getFront();this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Ot,(function(t,e){n.remember(new Y(t),e)})),this.forget(t)}if(this.children.size>0){var r=t.getFront();return t=t.popFront(),this.children.has(r)&&this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,r){var i=new Y(t.toString()+"/"+n);r.forEachTree(i,e)}))},t.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},t}();!function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(ce||(ce={}));var he,fe,pe=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,(0,o.hu)(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),de=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=ce.ACK_USER_WRITE,this.source=pe.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return(0,o.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Y(e));return new t(Y.Empty,n,this.revert)}return(0,o.hu)(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),ve=function(){function t(t,e){void 0===e&&(he||(he=new Lt(P)),e=he),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return D(e,(function(t,e){n=n.set(new Y(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:Y.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new Y(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||t.Empty).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r,i=e.getFront(),o=(this.children.get(i)||t.Empty).setTree(e.popFront(),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(Y.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(t.child(r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,Y.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,Y.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_(Y.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(t.child(n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t.Empty=new t(null),t}(),ye=function(){function t(t,e){this.source=t,this.path=e,this.type=ce.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,Y.Empty):new t(this.source,this.path.popFront())},t}(),me=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=ce.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,Y.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),ge=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=ce.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new Y(e));return n.isEmpty()?null:n.value?new me(this.source,Y.Empty,n.value):new t(this.source,Y.Empty,n)}return(0,o.hu)(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),be=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),we=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new be(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new be(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new be(zt.EMPTY_NODE,!1,!1),new be(zt.EMPTY_NODE,!1,!1)),t}(),_e=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),Ee=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,a){(0,o.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=a&&(n.isEmpty()?t.hasChild(e)?a.trackChildChange(_e.childRemovedChange(e,s)):(0,o.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?a.trackChildChange(_e.childAddedChange(e,n)):a.trackChildChange(_e.childChangedChange(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Ot,(function(t,r){e.hasChild(t)||n.trackChildChange(_e.childRemovedChange(t,r))})),e.isLeafNode()||e.forEachChild(Ot,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(_e.childChangedChange(e,r,i))}else n.trackChildChange(_e.childAddedChange(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?zt.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),Ie=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;(0,o.hu)(e===_e.CHILD_ADDED||e===_e.CHILD_CHANGED||e===_e.CHILD_REMOVED,"Only child changes supported for tracking"),(0,o.hu)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===_e.CHILD_ADDED&&i===_e.CHILD_REMOVED)this.changeMap.set(n,_e.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===_e.CHILD_REMOVED&&i===_e.CHILD_ADDED)this.changeMap.delete(n);else if(e===_e.CHILD_REMOVED&&i===_e.CHILD_CHANGED)this.changeMap.set(n,_e.childRemovedChange(n,r.oldSnap));else if(e===_e.CHILD_CHANGED&&i===_e.CHILD_ADDED)this.changeMap.set(n,_e.childAddedChange(n,t.snapshotNode));else{if(e!==_e.CHILD_CHANGED||i!==_e.CHILD_CHANGED)throw(0,o.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,_e.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Te=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Se=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new be(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),Ce=function(t,e){this.viewCache=t,this.changes=e},ke=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){(0,o.hu)(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),(0,o.hu)(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var a,s,u=new Ie;if(n.type===ce.OVERWRITE){var c=n;c.source.fromUser?a=this.applyUserOverwrite_(e,c.path,c.snap,r,i,u):((0,o.hu)(c.source.fromServer,"Unknown source."),s=c.source.tagged||e.getServerCache().isFiltered()&&!c.path.isEmpty(),a=this.applyServerOverwrite_(e,c.path,c.snap,r,i,s,u))}else if(n.type===ce.MERGE){var l=n;l.source.fromUser?a=this.applyUserMerge_(e,l.path,l.children,r,i,u):((0,o.hu)(l.source.fromServer,"Unknown source."),s=l.source.tagged||e.getServerCache().isFiltered(),a=this.applyServerMerge_(e,l.path,l.children,r,i,s,u))}else if(n.type===ce.ACK_USER_WRITE){var h=n;a=h.revert?this.revertUserWrite_(e,h.path,r,i,u):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==ce.LISTEN_COMPLETE)throw(0,o.g5)("Unknown operation type: "+n.type);a=this.listenComplete_(e,n.path,r,u)}var f=u.getChanges();return t.maybeAddValueEvent_(e,a,f),new Ce(a,f)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(_e.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var a=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s=void 0,u=void 0;if(e.isEmpty())if((0,o.hu)(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var c=t.getCompleteServerSnap(),l=c instanceof zt?c:zt.EMPTY_NODE,h=n.calcCompleteEventChildren(l);s=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var f=n.calcCompleteEventCache(t.getCompleteServerSnap());s=this.filter_.updateFullNode(t.getEventCache().getNode(),f,i)}else{var p=e.getFront();if(".priority"===p){(0,o.hu)(1===e.getLength(),"Can't have a priority with additional path components");var d=a.getNode();u=t.getServerCache().getNode();var v=n.calcEventCacheAfterServerOverwrite(e,d,u);s=null!=v?this.filter_.updatePriority(d,v):a.getNode()}else{var y=e.popFront(),m=void 0;if(a.isCompleteForChild(p)){u=t.getServerCache().getNode();var g=n.calcEventCacheAfterServerOverwrite(e,a.getNode(),u);m=null!=g?a.getNode().getImmediateChild(p).updateChild(y,g):a.getNode().getImmediateChild(p)}else m=n.calcCompleteChild(p,t.getServerCache());s=null!=m?this.filter_.updateChild(a.getNode(),p,m,y,r,i):a.getNode()}}return t.updateEventSnap(s,a.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,a){var s,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())s=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);s=c.updateFullNode(u.getNode(),l,null)}else{var h=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var f=e.popFront(),p=u.getNode().getImmediateChild(h).updateChild(f,n);s=".priority"===h?c.updatePriority(u.getNode(),p):c.updateChild(u.getNode(),h,p,f,Te,null)}var d=t.updateServerSnap(s,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),v=new Se(r,d,i);return this.generateEventCacheAfterServerEvent_(d,e,r,v,a)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var a,s,u=t.getEventCache(),c=new Se(r,t,i);if(e.isEmpty())s=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),a=t.updateEventSnap(s,!0,this.filter_.filtersNodes());else{var l=e.getFront();if(".priority"===l)s=this.filter_.updatePriority(t.getEventCache().getNode(),n),a=t.updateEventSnap(s,u.isFullyInitialized(),u.isFiltered());else{var h=e.popFront(),f=u.getNode().getImmediateChild(l),p=void 0;if(h.isEmpty())p=n;else{var d=c.getCompleteChild(l);p=null!=d?".priority"===h.getBack()&&d.getChild(h.parent()).isEmpty()?d:d.updateChild(h,n):zt.EMPTY_NODE}if(f.equals(p))a=t;else{var v=this.filter_.updateChild(u.getNode(),l,p,h,c,o);a=t.updateEventSnap(v,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,a){var s=this,u=e;return r.foreach((function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())&&(u=s.applyUserOverwrite_(u,l,c,i,o,a))})),r.foreach((function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())||(u=s.applyUserOverwrite_(u,l,c,i,o,a))})),u},t.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,a){var s=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:ve.Empty.setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal((function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=s.applyMerge_(u,n);c=s.applyServerOverwrite_(c,new Y(e),h,r,i,o,a)}})),u.children.inorderTraversal((function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),f=s.applyMerge_(h,n);c=s.applyServerOverwrite_(c,new Y(e),f,r,i,o,a)}})),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var a=t.getServerCache().isFiltered(),s=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,s.getNode().getChild(e),r,i,a,o);if(e.isEmpty()){var u=ve.Empty;return s.getNode().forEachChild(kt,(function(t,e){u=u.set(new Y(t),e)})),this.applyServerMerge_(t,e,u,r,i,a,o)}return t}var c=ve.Empty;return n.foreach((function(t,n){var r=e.child(t);s.isCompleteForPath(r)&&(c=c.set(t,s.getNode().getChild(r)))})),this.applyServerMerge_(t,e,c,r,i,a,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Te,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var a;if(null!=n.shadowingWrite(e))return t;var s=new Se(n,t,r),u=t.getEventCache().getNode(),c=void 0;if(e.isEmpty()||".priority"===e.getFront()){var l=void 0;if(t.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();(0,o.hu)(h instanceof zt,"serverChildren would be complete if leaf node"),l=n.calcCompleteEventChildren(h)}l=l,c=this.filter_.updateFullNode(u,l,i)}else{var f=e.getFront(),p=n.calcCompleteChild(f,t.getServerCache());null==p&&t.getServerCache().isCompleteForChild(f)&&(p=u.getImmediateChild(f)),(c=null!=p?this.filter_.updateChild(u,f,p,e.popFront(),s,i):t.getEventCache().getNode().hasChild(f)?this.filter_.updateChild(u,f,zt.EMPTY_NODE,e.popFront(),s,i):u).isEmpty()&&t.getServerCache().isFullyInitialized()&&(a=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(c=this.filter_.updateFullNode(c,a,i))}return a=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(Y.Empty),t.updateEventSnap(c,a,this.filter_.filtersNodes())},t}(),Ne=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach((function(t){t.type===_e.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(_e.childMovedChange(t.childName,t.snapshotNode))})),this.generateEventsForType_(i,_e.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,_e.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,_e.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,_e.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,_e.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,a=n.filter((function(t){return t.type===e}));a.sort(this.compareChanges_.bind(this)),a.forEach((function(e){var n=o.materializeSingleChange_(e,i);r.forEach((function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))}))}))},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw(0,o.g5)("Should only compare child_ events.");var n=new Tt(t.childName,t.snapshotNode),r=new Tt(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),Ae=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new Ee(n.getIndex()),i=n.getNodeFilter();this.processor_=new ke(i);var o=e.getServerCache(),a=e.getEventCache(),s=r.updateFullNode(zt.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(zt.EMPTY_NODE,a.getNode(),null),c=new be(s,o.isFullyInitialized(),r.filtersNodes()),l=new be(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=new we(l,c),this.eventGenerator_=new Ne(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){(0,o.hu)(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(t){e=e;var i=t.createCancelEvent(e,r);i&&n.push(i)}))}if(t){for(var i=[],a=0;a<this.eventRegistrations_.length;++a){var s=this.eventRegistrations_[a];if(s.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(a+1));break}}else i.push(s)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===ce.MERGE&&null!==t.source.queryId&&((0,o.hu)(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),(0,o.hu)(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),(0,o.hu)(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Ot,(function(t,e){n.push(_e.childAddedChange(t,e))})),e.isFullyInitialized()&&n.push(_e.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,r)},t}(),Pe=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return(0,o.hu)(fe,"Reference.ts has not been loaded"),fe},set:function(t){(0,o.hu)(!fe,"__referenceConstructor has already been defined"),fe=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,a,s=t.source.queryId;if(null!==s){var u=this.views.get(s);return(0,o.hu)(null!=u,"SyncTree gave us an op for an invalid query."),u.applyOperation(t,e,n)}var c=[];try{for(var l=(0,i.XA)(this.views.values()),h=l.next();!h.done;h=l.next())u=h.value,c=c.concat(u.applyOperation(t,e,n))}catch(t){r={error:t}}finally{try{h&&!h.done&&(a=l.return)&&a.call(l)}finally{if(r)throw r.error}}return c},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),a=this.views.get(o);if(!a){var s=n.calcCompleteEventCache(i?r:null),u=!1;s?u=!0:r instanceof zt?(s=n.calcCompleteEventChildren(r),u=!1):(s=zt.EMPTY_NODE,u=!1);var c=new we(new be(s,u,!1),new be(r,i,!1));a=new Ae(t,c),this.views.set(o,a)}return a.addEventRegistration(e),a.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var o,a,s=e.queryIdentifier(),u=[],c=[],l=this.hasCompleteView();if("default"===s)try{for(var h=(0,i.XA)(this.views.entries()),f=h.next();!f.done;f=h.next()){var p=(0,i.CR)(f.value,2),d=p[0],v=p[1];c=c.concat(v.removeEventRegistration(n,r)),v.isEmpty()&&(this.views.delete(d),v.getQuery().getQueryParams().loadsAllData()||u.push(v.getQuery()))}}catch(t){o={error:t}}finally{try{f&&!f.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}else(v=this.views.get(s))&&(c=c.concat(v.removeEventRegistration(n,r)),v.isEmpty()&&(this.views.delete(s),v.getQuery().getQueryParams().loadsAllData()||u.push(v.getQuery())));return l&&!this.hasCompleteView()&&u.push(new t.__referenceConstructor(e.repo,e.path)),{removed:u,events:c}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=(0,i.XA)(this.views.values()),o=r.next();!o.done;o=r.next()){var a=o.value;a.getQuery().getQueryParams().loadsAllData()||n.push(a)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var o=(0,i.XA)(this.views.values()),a=o.next();!a.done;a=o.next()){var s=a.value;r=r||s.getCompleteServerCache(t)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=(0,i.XA)(this.views.values()),r=n.next();!r.done;r=n.next()){var o=r.value;if(o.getQuery().getQueryParams().loadsAllData())return o}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),Oe=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new ve(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,a=Y.relativePath(i,e);return o=o.updateChild(a,n),new t(this.writeTree_.set(i,o))}var s=new ve(n);return new t(this.writeTree_.setTree(e,s))},t.prototype.addWrites=function(t,e){var n=this;return D(e,(function(e,r){n=n.addWrite(t.child(e),r)})),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,ve.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(Y.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Ot,(function(e,n){t.push(new Tt(e,n))})):this.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Tt(e,n.value))})),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new ve(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(t){return xe(Y.Empty,this.writeTree_,t)},t.Empty=new t(new ve(null)),t}();function xe(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal((function(e,i){".priority"===e?((0,o.hu)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=xe(t.child(e),i,n)})),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(t.child(".priority"),r)),n}var Re=function(){function t(){this.visibleWrites_=Oe.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new De(t,this)},t.prototype.addOverwrite=function(t,e,n,r){(0,o.hu)(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){(0,o.hu)(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(e){return e.writeId===t}));(0,o.hu)(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,a=!1,s=this.allWrites_.length-1;i&&s>=0;){var u=this.allWrites_[s];u.visible&&(s>=n&&this.recordContainsPath_(u,r.path)?i=!1:r.path.contains(u.path)&&(a=!0)),s--}return!!i&&(a?(this.resetTree_(),!0):(r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):D(r.children,(function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))})),!0))},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);if(!i&&o.isEmpty())return n;if(i||null!=n||o.hasCompleteWrite(Y.Empty)){var a=t.layerTree_(this.allWrites_,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))}),e);return c=n||zt.EMPTY_NODE,a.apply(c)}return null}var s=this.visibleWrites_.getCompleteNode(e);if(null!=s)return s;var u=this.visibleWrites_.childCompoundWrite(e);if(u.isEmpty())return n;if(null!=n||u.hasCompleteWrite(Y.Empty)){var c=n||zt.EMPTY_NODE;return u.apply(c)}return null},t.prototype.calcCompleteEventChildren=function(t,e){var n=zt.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(Ot,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(Ot,(function(t,e){var r=i.childCompoundWrite(new Y(t)).apply(e);n=n.updateImmediateChild(t,r)})),i.getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){(0,o.hu)(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var a=this.visibleWrites_.childCompoundWrite(i);return a.isEmpty()?r.getChild(e):a.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var a,s=this.visibleWrites_.childCompoundWrite(t),u=s.getCompleteNode(Y.Empty);if(null!=u)a=u;else{if(null==e)return[];a=s.apply(e)}if((a=a.withIndex(o)).isEmpty()||a.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?a.getReverseIteratorFrom(n,o):a.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,Y.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=Oe.Empty,i=0;i<t.length;++i){var a=t[i];if(e(a)){var s=a.path,u=void 0;if(a.snap)n.contains(s)?(u=Y.relativePath(n,s),r=r.addWrite(u,a.snap)):s.contains(n)&&(u=Y.relativePath(s,n),r=r.addWrite(Y.Empty,a.snap.getChild(u)));else{if(!a.children)throw(0,o.g5)("WriteRecord should have .snap or .children");if(n.contains(s))u=Y.relativePath(n,s),r=r.addWrites(u,a.children);else if(s.contains(n))if((u=Y.relativePath(s,n)).isEmpty())r=r.addWrites(Y.Empty,a.children);else{var c=(0,o.DV)(a.children,u.getFront());if(c){var l=c.getChild(u.popFront());r=r.addWrite(Y.Empty,l)}}}}}return r},t}(),De=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),Le=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=ve.Empty,this.pendingWriteTree_=new Re,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new me(pe.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=ve.fromObject(e);return this.applyOperationToSyncPoints_(new ge(pe.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=ve.Empty;return null!=n.snap?r=r.set(Y.Empty,!0):D(n.children,(function(t,e){r=r.set(new Y(t),e)})),this.applyOperationToSyncPoints_(new de(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new me(pe.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=ve.fromObject(e);return this.applyOperationToSyncPoints_(new ge(pe.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new ye(pe.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),a=o.path,s=o.queryId,u=Y.relativePath(a,e),c=new me(pe.forServerTaggedQuery(s),u,n);return this.applyTaggedOperation_(a,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),a=o.path,s=o.queryId,u=Y.relativePath(a,e),c=ve.fromObject(n),l=new ge(pe.forServerTaggedQuery(s),u,c);return this.applyTaggedOperation_(a,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,a=i.queryId,s=Y.relativePath(o,e),u=new ye(pe.forServerTaggedQuery(a),s);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,a=!1;this.syncPointTree_.foreachOnPath(r,(function(t,e){var n=Y.relativePath(t,r);i=i||e.getCompleteServerCache(n),a=a||e.hasCompleteView()}));var s,u=this.syncPointTree_.get(r);u?(a=a||u.hasCompleteView(),i=i||u.getCompleteServerCache(Y.Empty)):(u=new Pe,this.syncPointTree_=this.syncPointTree_.set(r,u)),null!=i?s=!0:(s=!1,i=zt.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=e.getCompleteServerCache(Y.Empty);n&&(i=i.updateImmediateChild(t,n))})));var c=u.viewExistsForQuery(e);if(!c&&!e.getQueryParams().loadsAllData()){var l=t.makeQueryKey_(e);(0,o.hu)(!this.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap.set(l,h),this.tagToQueryMap.set(h,l)}var f=this.pendingWriteTree_.childWrites(r),p=u.addEventRegistration(e,n,f,i,s);if(!c&&!a){var d=u.viewForQuery(e);p=p.concat(this.setupListener_(e,d))}return p},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,a=this.syncPointTree_.get(o),s=[];if(a&&("default"===e.queryIdentifier()||a.viewExistsForQuery(e))){var u=a.removeEventRegistration(e,n,r);a.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;s=u.events;var l=-1!==c.findIndex((function(t){return t.getQueryParams().loadsAllData()})),h=this.syncPointTree_.findOnPath(o,(function(t,e){return e.hasCompleteView()}));if(l&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(f),d=0;d<p.length;++d){var v=p[d],y=v.getQuery(),m=this.createListenerForView_(v);this.listenProvider_.startListening(t.queryForListening_(y),this.tagForQuery_(y),m.hashFn,m.onComplete)}}!h&&c.length>0&&!r&&(l?this.listenProvider_.stopListening(t.queryForListening_(e),null):c.forEach((function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)}))),this.removeTags_(c)}return s},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,(function(e,n){var r=Y.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i}));return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),D(n,(function(t,e){r=r.concat(e)})),r}))},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),a=this.createListenerForView_(n),s=this.listenProvider_.startListening(t.queryForListening_(e),i,a.hashFn,a.onComplete),u=this.syncPointTree_.subtree(r);if(i)(0,o.hu)(!u.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold((function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map((function(t){return t.getQuery()})))),D(n,(function(t,e){r=r.concat(e)})),r})),l=0;l<c.length;++l){var h=c[l];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return s},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||zt.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return(0,o.hu)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Y(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);(0,o.hu)(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(Y.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(Y.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(Y.Empty));var o=[],a=t.path.getFront(),s=t.operationForChild(a),u=e.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,l=r.child(a);o=o.concat(this.applyOperationHelper_(s,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(Y.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(Y.Empty));var a=[];return e.children.inorderTraversal((function(e,o){var s=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(a=a.concat(i.applyOperationDescendantsHelper_(c,o,s,u)))})),o&&(a=a.concat(o.applyOperation(t,r,n))),a},t.nextQueryTag_=1,t}(),Me=function(){function t(){this.rootNode_=zt.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),Fe=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),(0,o.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return(0,o.p$)(this.counters_)},t}(),je=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Fe),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Ue=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=(0,i.pi)({},t);return this.last_&&D(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),Ve=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Ue(t);var n=1e4+2e4*Math.random();J(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;D(e,(function(e,i){i>0&&(0,o.r3)(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),J(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),qe=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new Be(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.equals(t)}))},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.contains(t)||t.contains(e)}))},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),Be=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();g&&_("event: "+e.toString()),Q(n)}}},t.prototype.getPath=function(){return this.path_},t}(),ze=function(){function t(t){this.allowedEvents_=t,this.listeners_={},(0,o.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=(0,i.fl)(this.listeners_[t]),o=0;o<r.length;o++)r[o].callback.apply(r[o].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){(0,o.hu)(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),We=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return(0,i.ZT)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return(0,o.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(ze),Ge=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||(0,o.uI)()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return(0,i.ZT)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return(0,o.hu)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(ze),He=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&Q((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),Ke="start",Qe="close",Je=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=E(t),this.stats_=je.getCollection(e),this.urlFn=function(t){return e.connectionURL(tt,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new He(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if((0,o.Yr)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Ye((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=(0,i.CR)(t,5),o=r[0],a=r[1],s=r[2];if(r[3],r[4],n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,o===Ke)n.id=a,n.password=s;else{if(o!==Qe)throw new Error("Unrecognized command received: "+o);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=(0,i.CR)(t,2),o=r[0],a=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(o,a)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf($)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!((0,o.Yr)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=(0,o.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=(0,o.h$)(e),r=R(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!(0,o.Yr)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=(0,o.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Ye=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,o.Yr)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=v(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(a='<script>document.domain="'+document.domain+'";<\/script>');var s="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(t){_("frame writing exception"),t.stack&&_(t.stack),_(t)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||_("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;(0,o.Yr)()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){_("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(t){}}),Math.floor(1))},t}(),Xe="";function $e(t){Xe=t}var Ze=null;"undefined"!=typeof MozWebSocket?Ze=MozWebSocket:"undefined"!=typeof WebSocket&&(Ze=WebSocket);var tn=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=E(this.connId),this.stats_=je.getCollection(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!(0,o.Yr)()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf($)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(Z,r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,f.set("previous_websocket_failure",!0);try{if((0,o.Yr)()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/5/"+Xe+"/"+process.platform+"/"+r,"X-Firebase-GMPID":this.applicationId||""}},a=process.env,s=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;s&&(i.proxy={origin:s}),this.mySock=new Ze(this.connURL,[],i)}else i={headers:{"X-Firebase-GMPID":this.applicationId||""}},this.mySock=new Ze(this.connURL,[],i)}catch(t){this.log_("Error instantiating WebSocket.");var u=t.message||t.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Ze&&!t.forceDisallow_},t.previouslyFailed=function(){return f.isInMemoryStorage||!0===f.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){f.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=(0,o.cI)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if((0,o.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=(0,o.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=R(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),en=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Je,tn]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,o=tn&&tn.isAvailable(),a=o&&!tn.previouslyFailed();if(e.webSocketOnly&&(o||S("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),a=!0),a)this.transports_=[tn];else{var s=this.transports_=[];try{for(var u=(0,i.XA)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&s.push(l)}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),nn=function(){function t(t,e,n,r,i,o,a,s){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=a,this.lastSessionId=s,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=E("c:"+this.id+":"),this.transportManager_=new en(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=J((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=O("t",t),n=O("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=O("t",t),n=O("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=O("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?I("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):I("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&S("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),J((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):J((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(f.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),rn=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),on=1e3,an=function(t){function e(n,r,i,a,s,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=s,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=E("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingPutCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=on,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!(0,o.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),We.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&Ge.getInstance().on("online",l.onOnline_,l),l}return(0,i.ZT)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r,a:t,b:e};this.log_((0,o.Pz)(i)),(0,o.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),a=t.path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),(0,o.hu)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),(0,o.hu)(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(a).set(i,s),this.connected_&&this.sendListen_(s)},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var a={p:i};t.tag&&(a.q=r.queryObject(),a.t=t.tag),a.h=t.hashFn(),this.sendRequest("q",a,(function(a){var s=a.d,u=a.s;e.warnOnListenWarnings_(s,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,s))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&(0,o.r3)(t,"w")){var n=(0,o.DV)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();S("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||(0,o.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=(0,o.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),(0,o.hu)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+(0,o.Pz)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):I("Unrecognized action received from server: "+(0,o.Pz)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;(0,o.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=on,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=on,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=on),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+e.nextConnectionId_++,s=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(t){(0,o.hu)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(f).then((function(t){c?_("getToken() completed but was canceled"):(_("getToken() completed. Creating connection."),s.authToken_=t&&t.accessToken,l=new nn(a,s.repoInfo_,s.applicationId_,n,r,i,(function(t){S(t+" ("+s.repoInfo_.toString()+")"),s.interrupt("server_kill")}),u))})).then(null,(function(e){s.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&S(e),h())}))}},e.prototype.interrupt=function(t){_("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){_("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,o.xb)(this.interruptReasons_)&&(this.reconnectDelay_=on,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return x(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new Y(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){_("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var o=(0,i.XA)(this.listens.values()),a=o.next();!a.done;a=o.next()){var s=a.value;try{for(var u=(n=void 0,(0,i.XA)(s.values())),c=u.next();!c.done;c=u.next()){var l=c.value;this.sendListen_(l)}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var f=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(f.action,f.pathString,f.data,f.onComplete)}},e.prototype.sendConnectStats_=function(){var t={},e="js";(0,o.Yr)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+Xe.replace(/\./g,"-")]=1,(0,o.uI)()?t["framework.cordova"]=1:(0,o.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=Ge.getInstance().currentlyOnline();return(0,o.xb)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(rn),sn=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=E("p:rest:"),i.listens_={},i}return(0,i.ZT)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:((0,o.hu)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var a=this,s=t.path.toString();this.log_("Listen called for "+s+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(s+".json",l,(function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&a.onDataUpdate_(s,n,!1,r),(0,o.DV)(a.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var a=i&&i.accessToken;a&&(e.auth=a);var s=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+(0,o.xO)(e);r.log_("Sending REST request for "+s);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+s+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=(0,o.cI)(u.responseText)}catch(t){S("Failed to parse JSON response for "+s+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&S("Got unsuccessful REST response for "+s+" Status: "+u.status),n(u.status);n=null}},u.open("GET",s,!0),u.send()}))},e}(rn),un="repo_interrupt",cn=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new qe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new le,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.start=function(){var t=this;if(this.stats_=je.getCollection(this.repoInfo_),this.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new sn(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var e=this.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,o.Pz)(e)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new an(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,e),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),this.statsReporter_=je.getOrCreateReporter(this.repoInfo_,(function(){return new Ve(t.stats_,t.server_)})),this.transactionsInit_(),this.infoData_=new Me,this.infoSyncTree_=new Le({startListening:function(e,n,r,i){var o=[],a=t.infoData_.getNode(e.path);return a.isEmpty()||(o=t.infoSyncTree_.applyServerOverwrite(e.path,a),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Le({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);t.eventQueue_.raiseEventsForChangedPath(e.path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})},t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new Y(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new Y(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var a=[];if(r)if(n){var s=(0,o.UI)(e,(function(t){return Gt(t)}));a=this.serverSyncTree_.applyTaggedQueryMerge(i,s,r)}else{var u=Gt(e);a=this.serverSyncTree_.applyTaggedQueryOverwrite(i,u,r)}else if(n){var c=(0,o.UI)(e,(function(t){return Gt(t)}));a=this.serverSyncTree_.applyServerMerge(i,c)}else{var l=Gt(e);a=this.serverSyncTree_.applyServerOverwrite(i,l)}var h=i;a.length>0&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,a)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;D(t,(function(t,n){e.updateInfo_(t,n)}))},t.prototype.updateInfo_=function(t,e){var n=new Y("/.info/"+t),r=Gt(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),a=Gt(e,n),s=this.serverSyncTree_.calcCompleteEventCache(t),u=se(a,s,o),c=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);this.eventQueue_.queueEvents(l),this.server_.put(t.toString(),a.val(!0),(function(e,n){var o="ok"===e;o||S("set at "+t+" failed: "+e);var a=i.serverSyncTree_.ackUserWrite(c,!o);i.eventQueue_.raiseEventsForChangedPath(t,a),i.callOnCompleteCallback(r,e,n)}));var h=this.abortTransactions_(t);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),a={};if(D(e,(function(e,n){i=!1,a[e]=ae(t.child(e),Gt(n),r.serverSyncTree_,o)})),i)_("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var s=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,a,s);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,(function(e,i){var o="ok"===e;o||S("update at "+t+" failed: "+e);var a=r.serverSyncTree_.ackUserWrite(s,!o),u=a.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,a),r.callOnCompleteCallback(n,e,i)})),D(e,(function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new le;this.onDisconnect_.forEachTree(Y.Empty,(function(r,i){var o=ae(r,i,t.serverSyncTree_,e);n.remember(r,o)}));var r=[];n.forEachTree(Y.Empty,(function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)})),this.onDisconnect_=new le,this.eventQueue_.raiseEventsForChangedPath(Y.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)}))},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=Gt(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),(function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)}))},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=Gt(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),(function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)}))},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if((0,o.xb)(e))return _("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,(function(i,o){"ok"===i&&D(e,(function(e,n){var i=Gt(n);r.onDisconnect_.remember(t.child(e),i)})),r.callOnCompleteCallback(n,i,o)}))},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(un)},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(un)},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new Ue(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0);D(e,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)}))}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),_.apply(void 0,(0,i.fl)([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&Q((function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}}))},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new _n(this))},enumerable:!1,configurable:!0}),t}(),ln=function(){function t(e){this.indexedFilter_=new Ee(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Tt(e,n))||(n=zt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=zt.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(zt.EMPTY_NODE);var i=this;return e.forEachChild(Ot,(function(t,e){i.matches(new Tt(t,e))||(r=r.updateImmediateChild(t,zt.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),hn=function(){function t(t){this.rangedFilter_=new ln(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Tt(e,n))||(n=zt.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=zt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=zt.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(zt.EMPTY_NODE);var s=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)a=i.getNext(),!h&&c(s,a)<=0&&(h=!0),h&&o<this.limit_&&c(a,u)<=0?o++:r=r.updateImmediateChild(a.name,zt.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var a;if(this.reverse_){var s=this.index_.getCompare();a=function(t,e){return s(e,t)}}else a=this.index_.getCompare();var u=t;(0,o.hu)(u.numChildren()===this.limit_,"");var c=new Tt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),p=r.getChildAfterChild(this.index_,l,this.reverse_);null!=p&&(p.name===e||u.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);var d=null==p?1:a(p,c);if(h&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(_e.childChangedChange(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(_e.childRemovedChange(e,f));var v=u.updateImmediateChild(e,zt.EMPTY_NODE);return null!=p&&this.rangedFilter_.matches(p)?(null!=i&&i.trackChildChange(_e.childAddedChange(p.name,p.node)),v.updateImmediateChild(p.name,p.node)):v}return n.isEmpty()?t:h&&a(l,c)>=0?(null!=i&&(i.trackChildChange(_e.childRemovedChange(l.name,l.node)),i.trackChildChange(_e.childAddedChange(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,zt.EMPTY_NODE)):t},t}(),fn=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ot}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return(0,o.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return(0,o.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:k},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return(0,o.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return(0,o.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:N},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return(0,o.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==Ot&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Ot},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new Ee(this.getIndex()):this.hasLimit()?new hn(this):new ln(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()||(this.index_===Ot?e=n.PRIORITY_INDEX:this.index_===Kt?e=n.VALUE_INDEX:this.index_===kt?e=n.KEY_INDEX:((0,o.hu)(this.index_ instanceof Qt,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=(0,o.Pz)(e),this.startSet_&&(r[n.START_AT]=(0,o.Pz)(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+(0,o.Pz)(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=(0,o.Pz)(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+(0,o.Pz)(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_)),r},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),pn=function(t){function e(e,n){if(!(e instanceof cn))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,fn.DEFAULT,!1)||this}return(0,i.ZT)(e,t),e.prototype.getKey=function(){return(0,o.Dv)("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return(0,o.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof Y||(null===this.path.getFront()?mt("Reference.child",1,t,!1):yt("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){(0,o.Dv)("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){(0,o.Dv)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){(0,o.Dv)("Reference.set",1,2,arguments.length),gt("Reference.set",this.path),lt("Reference.set",1,t,this.path,!1),(0,o.Wj)("Reference.set",2,e,!0);var n=new o.BH;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if((0,o.Dv)("Reference.update",1,2,arguments.length),gt("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,S("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ft("Reference.update",1,t,this.path,!1),(0,o.Wj)("Reference.update",2,e,!0);var i=new o.BH;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if((0,o.Dv)("Reference.setWithPriority",2,3,arguments.length),gt("Reference.setWithPriority",this.path),lt("Reference.setWithPriority",1,t,this.path,!1),pt("Reference.setWithPriority",2,e,!1),(0,o.Wj)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new o.BH;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return(0,o.Dv)("Reference.remove",0,1,arguments.length),gt("Reference.remove",this.path),(0,o.Wj)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if((0,o.Dv)("Reference.transaction",1,3,arguments.length),gt("Reference.transaction",this.path),(0,o.Wj)("Reference.transaction",1,t,!1),(0,o.Wj)("Reference.transaction",2,e,!0),wt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new o.BH;"function"==typeof e&&r.promise.catch((function(){}));var i=function(t,n,i){t?r.reject(t):r.resolve(new Et(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){(0,o.Dv)("Reference.setPriority",1,2,arguments.length),gt("Reference.setPriority",this.path),pt("Reference.setPriority",1,t,!1),(0,o.Wj)("Reference.setPriority",2,e,!0);var n=new o.BH;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){(0,o.Dv)("Reference.push",0,2,arguments.length),gt("Reference.push",this.path),lt("Reference.push",1,t,this.path,!0),(0,o.Wj)("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=It(r),a=this.child(i),s=this.child(i);return n=null!=t?a.set(t,e).then((function(){return s})):Promise.resolve(s),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch((function(){})),a},e.prototype.onDisconnect=function(){return gt("Reference.onDisconnect",this.path),new _t(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(te);te.__referenceConstructor=pn,Pe.__referenceConstructor=pn;var dn,vn=function(){this.children={},this.childCount=0,this.value=null},yn=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new vn),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof Y?e:new Y(e),r=this,i=n.getFront();null!==i;)r=new t(i,r,(0,o.DV)(r.node_.children,i)||new vn),i=(n=n.popFront()).getFront();return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){(0,o.hu)(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;D(this.node_.children,(function(r,i){e(new t(r,n,i))}))},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},t.prototype.path=function(){return new Y(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=(0,o.r3)(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}();!function(t){t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT"}(dn||(dn={})),cn.MAX_TRANSACTION_RETRIES_=25,cn.prototype.transactionsInit_=function(){this.transactionQueueTree_=new yn},cn.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},a=new pn(this,t);a.on("value",i);var s={path:t,update:e,onComplete:n,status:null,order:v(),applyLocally:r,retryCount:0,unwatcher:function(){a.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(t);s.currentInputSnapshot=u;var c=s.update(u.val());if(void 0===c){if(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete){var l=new Jt(s.currentInputSnapshot,new pn(this,s.path),Ot);s.onComplete(null,!1,l)}}else{ht("transaction failed: Data returned ",c,s.path),s.status=dn.RUN;var h=this.transactionQueueTree_.subTree(t),f=h.getValue()||[];f.push(s),h.setValue(f);var p=void 0;"object"==typeof c&&null!==c&&(0,o.r3)(c,".priority")?(p=(0,o.DV)(c,".priority"),(0,o.hu)(ct(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(this.serverSyncTree_.calcCompleteEventCache(t)||zt.EMPTY_NODE).getPriority().val(),p=p;var d=this.generateServerValues(),y=Gt(c,p),m=se(y,u,d);s.currentOutputSnapshotRaw=y,s.currentOutputSnapshotResolved=m,s.currentWriteId=this.getNextWriteId_();var g=this.serverSyncTree_.applyUserOverwrite(t,m,s.currentWriteId,s.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,g),this.sendReadyTransactions_()}},cn.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||zt.EMPTY_NODE},cn.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);(0,o.hu)(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return t.status===dn.RUN}))&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild((function(t){e.sendReadyTransactions_(t)}))},cn.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map((function(t){return t.currentWriteId})),i=this.getLatestState_(t,r),a=i,s=i.hash(),u=0;u<e.length;u++){var c=e[u];(0,o.hu)(c.status===dn.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=dn.SENT,c.retryCount++;var l=Y.relativePath(t,c.path);a=a.updateChild(l,c.currentOutputSnapshotRaw)}var h=a.val(!0),f=t;this.server_.put(f.toString(),h,(function(r){n.log_("transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=0;a<e.length;a++){if(e[a].status=dn.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[a].currentWriteId)),e[a].onComplete){var s=e[a].currentOutputSnapshotResolved,u=new pn(n,e[a].path),c=new Jt(s,u,Ot);o.push(e[a].onComplete.bind(null,null,!0,c))}e[a].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i),a=0;a<o.length;a++)Q(o[a])}else{if("datastale"===r)for(a=0;a<e.length;a++)e[a].status===dn.SENT_NEEDS_ABORT?e[a].status=dn.NEEDS_ABORT:e[a].status=dn.RUN;else for(S("transaction at "+f.toString()+" failed: "+r),a=0;a<e.length;a++)e[a].status=dn.NEEDS_ABORT,e[a].abortReason=r;n.rerunTransactions_(t)}}),s)},cn.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},cn.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n,r=[],i=[],a=t.filter((function(t){return t.status===dn.RUN})).map((function(t){return t.currentWriteId})),s=0;s<t.length;s++){var u=t[s],c=Y.relativePath(e,u.path),l=!1,h=void 0;if((0,o.hu)(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===dn.NEEDS_ABORT)l=!0,h=u.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(u.currentWriteId,!0));else if(u.status===dn.RUN)if(u.retryCount>=cn.MAX_TRANSACTION_RETRIES_)l=!0,h="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(u.currentWriteId,!0));else{var f=this.getLatestState_(u.path,a);u.currentInputSnapshot=f;var p=t[s].update(f.val());if(void 0!==p){ht("transaction failed: Data returned ",p,u.path);var d=Gt(p);"object"==typeof p&&null!=p&&(0,o.r3)(p,".priority")||(d=d.updatePriority(f.getPriority()));var v=u.currentWriteId,y=this.generateServerValues(),m=se(d,f,y);u.currentOutputSnapshotRaw=d,u.currentOutputSnapshotResolved=m,u.currentWriteId=this.getNextWriteId_(),a.splice(a.indexOf(v),1),i=(i=i.concat(this.serverSyncTree_.applyUserOverwrite(u.path,m,u.currentWriteId,u.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(v,!0))}else l=!0,h="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(u.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,i),i=[],l&&(t[s].status=dn.COMPLETED,n=t[s].unwatcher,setTimeout(n,Math.floor(0)),t[s].onComplete))if("nodata"===h){var g=new pn(this,t[s].path),b=t[s].currentInputSnapshot,w=new Jt(b,g,Ot);r.push(t[s].onComplete.bind(null,null,!1,w))}else r.push(t[s].onComplete.bind(null,new Error(h),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),s=0;s<r.length;s++)Q(r[s]);this.sendReadyTransactions_()}},cn.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},cn.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(t,e){return t.order-e.order})),e},cn.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},cn.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==dn.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},cn.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor((function(t){e.abortTransactionsOnNode_(t)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(t){e.abortTransactionsOnNode_(t)})),n},cn.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,a=0;a<e.length;a++)e[a].status===dn.SENT_NEEDS_ABORT||(e[a].status===dn.SENT?((0,o.hu)(i===a-1,"All SENT items should be at beginning of queue."),i=a,e[a].status=dn.SENT_NEEDS_ABORT,e[a].abortReason="set"):((0,o.hu)(e[a].status===dn.RUN,"Unexpected transaction status in abort"),e[a].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[a].currentWriteId,!0)),e[a].onComplete&&n.push(e[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r),a=0;a<n.length;a++)Q(n[a])}};var mn,gn=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(_("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',S(t)},t}(),bn=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),wn=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return mn||(mn=new t),mn},t.prototype.interrupt=function(){var t,e,n,r;try{for(var o=(0,i.XA)(Object.keys(this.repos_)),a=o.next();!a.done;a=o.next()){var s=a.value;try{for(var u=(n=void 0,(0,i.XA)(Object.keys(this.repos_[s]))),c=u.next();!c.done;c=u.next()){var l=c.value;this.repos_[s][l].interrupt()}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var o=(0,i.XA)(Object.keys(this.repos_)),a=o.next();!a.done;a=o.next()){var s=a.value;try{for(var u=(n=void 0,(0,i.XA)(Object.keys(this.repos_[s]))),c=u.next();!c.done;c=u.next()){var l=c.value;this.repos_[s][l].resume()}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new et(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new bn)},t.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||T("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,a=nt(i,r),s=a.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,i="http://"+u+"?ns="+s.namespace,s=(a=nt(i,r)).repoInfo):o=!a.repoInfo.secure;var c=r&&o?new bn:new gn(t,e);return bt("Invalid Firebase Database URL",1,a),a.path.isEmpty()||T("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(s,t,c).database},t.prototype.deleteRepo=function(t){var e=(0,o.DV)(this.repos_,t.app.name);e&&(0,o.DV)(e,t.key)===t||T("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},t.prototype.createRepo=function(t,e,n){var r=(0,o.DV)(this.repos_,e.name);r||(r={},this.repos_[e.name]=r);var i=(0,o.DV)(r,t.toURLString());return i&&T("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new cn(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),_n=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return(0,i.mG)(e,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){return this.checkDeleted_("delete"),wn.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]}))}))}},t instanceof cn||T("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new pn(this.repo_,Y.Empty)),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?T("Cannot call useEmulator() after instance has already been initialized."):wn.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),(0,o.Dv)("database.ref",0,1,arguments.length),t instanceof pn?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),(0,o.Dv)(e,1,1,arguments.length);var n=nt(t,this.repo_.repoInfo_.nodeAdmin);bt(e,1,n);var r=n.repoInfo;return r.isCustomHost()||r.host===this.repo_.repoInfo_.host||T(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&T("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){(0,o.Dv)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){(0,o.Dv)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),En=Object.freeze({__proto__:null,forceLongPolling:function(){tn.forceDisallow(),Je.forceAllow()},forceWebSockets:function(){Je.forceDisallow()},isWebSocketsAvailable:function(){return tn.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,i=t.customAuthImpl,o=t.namespace,a=t.nodeAdmin,u=void 0!==a&&a;$e(r);var c=new s.zt("auth-internal",new s.H0("database-standalone"));return c.setComponent(new s.wA("auth-internal",(function(){return i}),"PRIVATE")),{instance:wn.getInstance().databaseFromApp(e,c,n,u),namespace:o}}}),In=an;an.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},an.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Tn=nn,Sn=et,Cn=Object.freeze({__proto__:null,DataConnection:In,RealTimeConnection:Tn,hijackHash:function(t){var e=an.prototype.put;return an.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){an.prototype.put=e}},ConnectionTarget:Sn,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){wn.getInstance().forceRestClient(t)}}),kn=_n.ServerValue;!function(e){$e(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new s.wA("database",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return wn.getInstance().databaseFromApp(n,r,e)}),"PUBLIC").setServiceProps({Reference:pn,Query:te,Database:_n,DataSnapshot:Jt,enableLogging:w,INTERNAL:En,ServerValue:kn,TEST_ACCESS:Cn}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.7.1"),(0,o.Yr)()&&(t.exports=n)}(r.Z)},861:(t,e,n)=>{"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var i;n.d(e,{in:()=>o,Yd:()=>h,Ub:()=>f,Am:()=>p});var o,a=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(o||(o={}));var s={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),a=c[e];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[a].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,a.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?s[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function f(t){a.forEach((function(e){e.setLogLevel(t)}))}function p(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=s[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=a;r<i.length;r++)n(i[r])}},574:(t,e,n)=>{"use strict";n.d(e,{BH:()=>f,LL:()=>k,ZR:()=>C,gQ:()=>V,zI:()=>S,hu:()=>i,g5:()=>o,US:()=>s,h$:()=>u,$s:()=>Y,r3:()=>L,ne:()=>q,p$:()=>l,ZB:()=>h,gK:()=>G,z$:()=>p,GJ:()=>D,jU:()=>y,ru:()=>m,d:()=>b,xb:()=>F,w1:()=>w,hl:()=>I,uI:()=>d,UG:()=>v,Yr:()=>E,b$:()=>g,Mn:()=>_,w9:()=>R,cI:()=>P,UI:()=>j,xO:()=>U,DV:()=>M,ug:()=>J,dS:()=>Q,Pz:()=>O,Dv:()=>W,Wj:()=>H,lb:()=>K,eu:()=>T});var r=n(622),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,p=63&c;u||(p=64,a||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=a(t);return s.encodeByteArray(e,!0)},c=function(t){try{return s.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function p(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function d(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())}function v(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}function y(){return"object"==typeof self&&self.self===self}function m(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function g(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function b(){return p().indexOf("Electron/")>=0}function w(){var t=p();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function _(){return p().indexOf("MSAppHost/")>=0}function E(){return!1}function I(){return"indexedDB"in self&&null!=indexedDB}function T(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}function S(){return!(!navigator||!navigator.cookieEnabled)}var C=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,k.prototype.create),o}return(0,r.ZT)(e,t),e}(Error),k=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?N(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new C(i,s,r);return u},t}();function N(t,e){return t.replace(A,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var A=/\{\$([^}]+)}/g;function P(t){return JSON.parse(t)}function O(t){return JSON.stringify(t)}var x=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=P(c(o[0])||""),n=P(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}},R=function(t){var e=x(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},D=function(t){var e=x(t).claims;return"object"==typeof e&&!0===e.admin};function L(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function M(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function F(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function j(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function U(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var V=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++)r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782),i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295,h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i;this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function q(t,e){var n=new B(t,e);return n.subscribe.bind(n)}var B=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=z),void 0===r.error&&(r.error=z),void 0===r.complete&&(r.complete=z);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function z(){}var W=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function G(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+(r+" argument ")}function H(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(G(t,e,r)+"must be a valid function.")}function K(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(G(t,e,r)+"must be a valid context object.")}var Q=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var a=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(a<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},J=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function Y(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}},259:function(t,e){!function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function r(t,e,r){var i,o=new Promise((function(o,a){n(i=t[e].apply(t,r)).then(o,a)}));return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then((function(t){if(t)return new l(t,i.request)}))}function o(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function a(t,e,n,i){i.forEach((function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})}))}function s(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function u(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})}))}function c(t){this._index=t}function l(t,e){this._cursor=t,this._request=e}function h(t){this._store=t}function f(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function p(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new f(n)}function d(t){this._db=t}o(c,"_index",["name","keyPath","multiEntry","unique"]),a(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),a(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(l.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then((function(t){if(t)return new l(t,e._request)}))}))})})),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),a(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),s(f,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),s(p,"_db",IDBDatabase,["deleteObjectStore","close"]),d.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),s(d,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[h,c].forEach((function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[c,h].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(i){n.iterateCursor(t,(function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)}))}))})})),t.openDb=function(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new p(o.result,t.oldVersion,o.transaction))}),i.then((function(t){return new d(t)}))},t.deleteDb=function(t){return r(indexedDB,"deleteDatabase",[t])},Object.defineProperty(t,"__esModule",{value:!0})}(e)},337:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g},585:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var r=n(337);t=n.hmd(t);var i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&t&&!t.nodeType&&t,a=o&&o.exports===i&&r.Z.process;const s=function(){try{return o&&o.require&&o.require("util").types||a&&a.binding&&a.binding("util")}catch(t){}}()},649:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var r=n(337),i="object"==typeof self&&self&&self.Object===Object&&self;const o=r.Z||i||Function("return this")()},123:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var r=n(649);t=n.hmd(t);var i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&t&&!t.nodeType&&t,a=o&&o.exports===i?r.Z.Buffer:void 0;const s=(a?a.isBuffer:void 0)||function(){return!1}},347:t=>{"use strict";var e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,o){for(var a,s,u=i(t),c=1;c<arguments.length;c++){for(var l in a=Object(arguments[c]))n.call(a,l)&&(u[l]=a[l]);if(e){s=e(a);for(var h=0;h<s.length;h++)r.call(a,s[h])&&(u[s[h]]=a[s[h]])}}return u}},806:t=>{"use strict";function e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,n,r,i){n=n||"&",r=r||"=";var o={};if("string"!=typeof t||0===t.length)return o;var a=/\+/g;t=t.split(n);var s=1e3;i&&"number"==typeof i.maxKeys&&(s=i.maxKeys);var u=t.length;s>0&&u>s&&(u=s);for(var c=0;c<u;++c){var l,h,f,p,d=t[c].replace(a,"%20"),v=d.indexOf(r);v>=0?(l=d.substr(0,v),h=d.substr(v+1)):(l=d,h=""),f=decodeURIComponent(l),p=decodeURIComponent(h),e(o,f)?Array.isArray(o[f])?o[f].push(p):o[f]=[o[f],p]:o[f]=p}return o}},491:t=>{"use strict";var e=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,n,r,i){return n=n||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map((function(i){var o=encodeURIComponent(e(i))+r;return Array.isArray(t[i])?t[i].map((function(t){return o+encodeURIComponent(e(t))})).join(n):o+encodeURIComponent(e(t[i]))})).join(n):i?encodeURIComponent(e(i))+r+encodeURIComponent(e(t)):""}},126:(t,e,n)=>{"use strict";e.decode=e.parse=n(806),e.encode=e.stringify=n(491)},748:(t,e,n)=>{"use strict";var r=n(466),i=n(347),o=n(767);function a(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));var s=new Set,u={};function c(t,e){l(t,e),l(t+"Capture",e)}function l(t,e){for(u[t]=e,t=0;t<e.length;t++)s.add(e[t])}var h=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p=Object.prototype.hasOwnProperty,d={},v={};function y(t,e,n,r,i,o,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){m[t]=new y(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];m[e]=new y(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){m[t]=new y(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){m[t]=new y(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){m[t]=new y(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){m[t]=new y(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){m[t]=new y(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){m[t]=new y(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){m[t]=new y(t,5,!1,t.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function b(t){return t[1].toUpperCase()}function w(t,e,n,r){var i=m.hasOwnProperty(e)?m[e]:null;(null!==i?0===i.type:!r&&2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1]))||(function(t,e,n,r){if(null==e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!p.call(v,t)||!p.call(d,t)&&(f.test(t)?v[t]=!0:(d[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(g,b);m[e]=new y(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(g,b);m[e]=new y(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(g,b);m[e]=new y(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){m[t]=new y(t,1,!1,t.toLowerCase(),null,!1,!1)})),m.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){m[t]=new y(t,1,!1,t.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=60103,I=60106,T=60107,S=60108,C=60114,k=60109,N=60110,A=60112,P=60113,O=60120,x=60115,R=60116,D=60121,L=60128,M=60129,F=60130,j=60131;if("function"==typeof Symbol&&Symbol.for){var U=Symbol.for;E=U("react.element"),I=U("react.portal"),T=U("react.fragment"),S=U("react.strict_mode"),C=U("react.profiler"),k=U("react.provider"),N=U("react.context"),A=U("react.forward_ref"),P=U("react.suspense"),O=U("react.suspense_list"),x=U("react.memo"),R=U("react.lazy"),D=U("react.block"),U("react.scope"),L=U("react.opaque.id"),M=U("react.debug_trace_mode"),F=U("react.offscreen"),j=U("react.legacy_hidden")}var V,q="function"==typeof Symbol&&Symbol.iterator;function B(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=q&&t[q]||t["@@iterator"])?t:null}function z(t){if(void 0===V)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);V=e&&e[1]||""}return"\n"+V+t}var W=!1;function G(t,e){if(!t||W)return"";W=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(t){var r=t}Reflect.construct(t,[],e)}else{try{e.call()}catch(t){r=t}t.call(e.prototype)}else{try{throw Error()}catch(t){r=t}t()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var i=t.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s])return"\n"+i[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{W=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?z(t):""}function H(t){switch(t.tag){case 5:return z(t.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return G(t.type,!1);case 11:return G(t.type.render,!1);case 22:return G(t.type._render,!1);case 1:return G(t.type,!0);default:return""}}function K(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case T:return"Fragment";case I:return"Portal";case C:return"Profiler";case S:return"StrictMode";case P:return"Suspense";case O:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case N:return(t.displayName||"Context")+".Consumer";case k:return(t._context.displayName||"Context")+".Provider";case A:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case x:return K(t.type);case D:return K(t._render);case R:e=t._payload,t=t._init;try{return K(t(e))}catch(t){}}return null}function Q(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function J(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function Y(t){t._valueTracker||(t._valueTracker=function(t){var e=J(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function X(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=J(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function $(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Z(t,e){var n=e.checked;return i({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function tt(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=Q(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function et(t,e){null!=(e=e.checked)&&w(t,"checked",e,!1)}function nt(t,e){et(t,e);var n=Q(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?it(t,e.type,n):e.hasOwnProperty("defaultValue")&&it(t,e.type,Q(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function rt(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function it(t,e,n){"number"===e&&$(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function ot(t,e){return t=i({children:void 0},e),(e=function(t){var e="";return r.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function at(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Q(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function st(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(a(91));return i({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ut(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:Q(n)}}function ct(t,e){var n=Q(e.value),r=Q(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function lt(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}var ht="http://www.w3.org/1999/xhtml";function ft(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?ft(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var dt,vt,yt=(vt=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((dt=dt||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=dt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,r){MSApp.execUnsafeLocalFunction((function(){return vt(t,e)}))}:vt);function mt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var gt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bt=["Webkit","ms","Moz","O"];function wt(t,e,n){return null==e||"boolean"==typeof e||""===e?"":n||"number"!=typeof e||0===e||gt.hasOwnProperty(t)&&gt[t]?(""+e).trim():e+"px"}function _t(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=wt(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(gt).forEach((function(t){bt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),gt[e]=gt[t]}))}));var Et=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function It(t,e){if(e){if(Et[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(a(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(a(60));if("object"!=typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=e.style&&"object"!=typeof e.style)throw Error(a(62))}}function Tt(t,e){if(-1===t.indexOf("-"))return"string"==typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function St(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var Ct=null,kt=null,Nt=null;function At(t){if(t=$r(t)){if("function"!=typeof Ct)throw Error(a(280));var e=t.stateNode;e&&(e=ti(e),Ct(t.stateNode,t.type,e))}}function Pt(t){kt?Nt?Nt.push(t):Nt=[t]:kt=t}function Ot(){if(kt){var t=kt,e=Nt;if(Nt=kt=null,At(t),e)for(t=0;t<e.length;t++)At(e[t])}}function xt(t,e){return t(e)}function Rt(t,e,n,r,i){return t(e,n,r,i)}function Dt(){}var Lt=xt,Mt=!1,Ft=!1;function jt(){null===kt&&null===Nt||(Dt(),Ot())}function Ut(t,e){var n=t.stateNode;if(null===n)return null;var r=ti(n);if(null===r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!=typeof n)throw Error(a(231,e,typeof n));return n}var Vt=!1;if(h)try{var qt={};Object.defineProperty(qt,"passive",{get:function(){Vt=!0}}),window.addEventListener("test",qt,qt),window.removeEventListener("test",qt,qt)}catch(vt){Vt=!1}function Bt(t,e,n,r,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(t){this.onError(t)}}var zt=!1,Wt=null,Gt=!1,Ht=null,Kt={onError:function(t){zt=!0,Wt=t}};function Qt(t,e,n,r,i,o,a,s,u){zt=!1,Wt=null,Bt.apply(Kt,arguments)}function Jt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!=(1026&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Yt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&null!==(t=t.alternate)&&(e=t.memoizedState),null!==e)return e.dehydrated}return null}function Xt(t){if(Jt(t)!==t)throw Error(a(188))}function $t(t,e){for(var n=t.alternate;null!==e;){if(e===t||e===n)return!0;e=e.return}return!1}var Zt,te,ee,ne,re=!1,ie=[],oe=null,ae=null,se=null,ue=new Map,ce=new Map,le=[],he="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fe(t,e,n,r,i){return{blockedOn:t,domEventName:e,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function pe(t,e){switch(t){case"focusin":case"focusout":oe=null;break;case"dragenter":case"dragleave":ae=null;break;case"mouseover":case"mouseout":se=null;break;case"pointerover":case"pointerout":ue.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ce.delete(e.pointerId)}}function de(t,e,n,r,i,o){return null===t||t.nativeEvent!==o?(t=fe(e,n,r,i,o),null!==e&&null!==(e=$r(e))&&te(e),t):(t.eventSystemFlags|=r,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function ve(t){var e=Xr(t.target);if(null!==e){var n=Jt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Yt(n)))return t.blockedOn=e,void ne(t.lanePriority,(function(){o.unstable_runWithPriority(t.priority,(function(){ee(n)}))}))}else if(3===e&&n.stateNode.hydrate)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function ye(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Xe(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=$r(n))&&te(e),t.blockedOn=n,!1;e.shift()}return!0}function me(t,e,n){ye(t)&&n.delete(e)}function ge(){for(re=!1;0<ie.length;){var t=ie[0];if(null!==t.blockedOn){null!==(t=$r(t.blockedOn))&&Zt(t);break}for(var e=t.targetContainers;0<e.length;){var n=Xe(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n){t.blockedOn=n;break}e.shift()}null===t.blockedOn&&ie.shift()}null!==oe&&ye(oe)&&(oe=null),null!==ae&&ye(ae)&&(ae=null),null!==se&&ye(se)&&(se=null),ue.forEach(me),ce.forEach(me)}function be(t,e){t.blockedOn===e&&(t.blockedOn=null,re||(re=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,ge)))}function we(t){function e(e){return be(e,t)}if(0<ie.length){be(ie[0],t);for(var n=1;n<ie.length;n++){var r=ie[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==oe&&be(oe,t),null!==ae&&be(ae,t),null!==se&&be(se,t),ue.forEach(e),ce.forEach(e),n=0;n<le.length;n++)(r=le[n]).blockedOn===t&&(r.blockedOn=null);for(;0<le.length&&null===(n=le[0]).blockedOn;)ve(n),null===n.blockedOn&&le.shift()}function _e(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ee={animationend:_e("Animation","AnimationEnd"),animationiteration:_e("Animation","AnimationIteration"),animationstart:_e("Animation","AnimationStart"),transitionend:_e("Transition","TransitionEnd")},Ie={},Te={};function Se(t){if(Ie[t])return Ie[t];if(!Ee[t])return t;var e,n=Ee[t];for(e in n)if(n.hasOwnProperty(e)&&e in Te)return Ie[t]=n[e];return t}h&&(Te=document.createElement("div").style,"AnimationEvent"in window||(delete Ee.animationend.animation,delete Ee.animationiteration.animation,delete Ee.animationstart.animation),"TransitionEvent"in window||delete Ee.transitionend.transition);var Ce=Se("animationend"),ke=Se("animationiteration"),Ne=Se("animationstart"),Ae=Se("transitionend"),Pe=new Map,Oe=new Map,xe=["abort","abort",Ce,"animationEnd",ke,"animationIteration",Ne,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ae,"transitionEnd","waiting","waiting"];function Re(t,e){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Oe.set(r,e),Pe.set(r,i),c(i,[r])}}(0,o.unstable_now)();var De=8;function Le(t){if(0!=(1&t))return De=15,1;if(0!=(2&t))return De=14,2;if(0!=(4&t))return De=13,4;var e=24&t;return 0!==e?(De=12,e):0!=(32&t)?(De=11,32):0!=(e=192&t)?(De=10,e):0!=(256&t)?(De=9,256):0!=(e=3584&t)?(De=8,e):0!=(4096&t)?(De=7,4096):0!=(e=4186112&t)?(De=6,e):0!=(e=62914560&t)?(De=5,e):67108864&t?(De=4,67108864):0!=(134217728&t)?(De=3,134217728):0!=(e=805306368&t)?(De=2,e):0!=(1073741824&t)?(De=1,1073741824):(De=8,t)}function Me(t,e){var n=t.pendingLanes;if(0===n)return De=0;var r=0,i=0,o=t.expiredLanes,a=t.suspendedLanes,s=t.pingedLanes;if(0!==o)r=o,i=De=15;else if(0!=(o=134217727&n)){var u=o&~a;0!==u?(r=Le(u),i=De):0!=(s&=o)&&(r=Le(s),i=De)}else 0!=(o=n&~a)?(r=Le(o),i=De):0!==s&&(r=Le(s),i=De);if(0===r)return 0;if(r=n&((0>(r=31-Be(r))?0:1<<r)<<1)-1,0!==e&&e!==r&&0==(e&a)){if(Le(e),i<=De)return e;De=i}if(0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)i=1<<(n=31-Be(e)),r|=t[n],e&=~i;return r}function Fe(t){return 0!=(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function je(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return 0===(t=Ue(24&~e))?je(10,e):t;case 10:return 0===(t=Ue(192&~e))?je(8,e):t;case 8:return 0===(t=Ue(3584&~e))&&0===(t=Ue(4186112&~e))&&(t=512),t;case 2:return 0===(e=Ue(805306368&~e))&&(e=268435456),e}throw Error(a(358,t))}function Ue(t){return t&-t}function Ve(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function qe(t,e,n){t.pendingLanes|=e;var r=e-1;t.suspendedLanes&=r,t.pingedLanes&=r,(t=t.eventTimes)[e=31-Be(e)]=n}var Be=Math.clz32?Math.clz32:function(t){return 0===t?32:31-(ze(t)/We|0)|0},ze=Math.log,We=Math.LN2,Ge=o.unstable_UserBlockingPriority,He=o.unstable_runWithPriority,Ke=!0;function Qe(t,e,n,r){Mt||Dt();var i=Ye,o=Mt;Mt=!0;try{Rt(i,t,e,n,r)}finally{(Mt=o)||jt()}}function Je(t,e,n,r){He(Ge,Ye.bind(null,t,e,n,r))}function Ye(t,e,n,r){var i;if(Ke)if((i=0==(4&e))&&0<ie.length&&-1<he.indexOf(t))t=fe(null,t,e,n,r),ie.push(t);else{var o=Xe(t,e,n,r);if(null===o)i&&pe(t,r);else{if(i){if(-1<he.indexOf(t))return t=fe(o,t,e,n,r),void ie.push(t);if(function(t,e,n,r,i){switch(e){case"focusin":return oe=de(oe,t,e,n,r,i),!0;case"dragenter":return ae=de(ae,t,e,n,r,i),!0;case"mouseover":return se=de(se,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return ue.set(o,de(ue.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,ce.set(o,de(ce.get(o)||null,t,e,n,r,i)),!0}return!1}(o,t,e,n,r))return;pe(t,r)}Pr(t,e,r,null,n)}}}function Xe(t,e,n,r){var i=St(r);if(null!==(i=Xr(i))){var o=Jt(i);if(null===o)i=null;else{var a=o.tag;if(13===a){if(null!==(i=Yt(o)))return i;i=null}else if(3===a){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Pr(t,e,r,i,n),null}var $e=null,Ze=null,tn=null;function en(){if(tn)return tn;var t,e,n=Ze,r=n.length,i="value"in $e?$e.value:$e.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);return tn=i.slice(t,1<e?1-e:void 0)}function nn(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function rn(){return!0}function on(){return!1}function an(t){function e(e,n,r,i,o){for(var a in this._reactName=e,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(a)&&(e=t[a],this[a]=e?e(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?rn:on,this.isPropagationStopped=on,this}return i(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=rn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=rn)},persist:function(){},isPersistent:rn}),e}var sn,un,cn,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hn=an(ln),fn=i({},ln,{view:0,detail:0}),pn=an(fn),dn=i({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==cn&&(cn&&"mousemove"===t.type?(sn=t.screenX-cn.screenX,un=t.screenY-cn.screenY):un=sn=0,cn=t),sn)},movementY:function(t){return"movementY"in t?t.movementY:un}}),vn=an(dn),yn=an(i({},dn,{dataTransfer:0})),mn=an(i({},fn,{relatedTarget:0})),gn=an(i({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=an(i({},ln,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}})),wn=an(i({},ln,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},In={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=In[t])&&!!e[t]}function Sn(){return Tn}var Cn=an(i({},fn,{key:function(t){if(t.key){var e=_n[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=nn(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?En[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(t){return"keypress"===t.type?nn(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?nn(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}})),kn=an(i({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(i({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),An=an(i({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=an(i({},dn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0})),On=[9,13,27,32],xn=h&&"CompositionEvent"in window,Rn=null;h&&"documentMode"in document&&(Rn=document.documentMode);var Dn=h&&"TextEvent"in window&&!Rn,Ln=h&&(!xn||Rn&&8<Rn&&11>=Rn),Mn=String.fromCharCode(32),Fn=!1;function jn(t,e){switch(t){case"keyup":return-1!==On.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(t){return"object"==typeof(t=t.detail)&&"data"in t?t.data:null}var Vn=!1,qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!qn[t.type]:"textarea"===e}function zn(t,e,n,r){Pt(r),0<(e=xr(e,"onChange")).length&&(n=new hn("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Wn=null,Gn=null;function Hn(t){Tr(t,0)}function Kn(t){if(X(Zr(t)))return t}function Qn(t,e){if("change"===t)return e}var Jn=!1;if(h){var Yn;if(h){var Xn="oninput"in document;if(!Xn){var $n=document.createElement("div");$n.setAttribute("oninput","return;"),Xn="function"==typeof $n.oninput}Yn=Xn}else Yn=!1;Jn=Yn&&(!document.documentMode||9<document.documentMode)}function Zn(){Wn&&(Wn.detachEvent("onpropertychange",tr),Gn=Wn=null)}function tr(t){if("value"===t.propertyName&&Kn(Gn)){var e=[];if(zn(e,Gn,t,St(t)),t=Hn,Mt)t(e);else{Mt=!0;try{xt(t,e)}finally{Mt=!1,jt()}}}}function er(t,e,n){"focusin"===t?(Zn(),Gn=n,(Wn=e).attachEvent("onpropertychange",tr)):"focusout"===t&&Zn()}function nr(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Kn(Gn)}function rr(t,e){if("click"===t)return Kn(e)}function ir(t,e){if("input"===t||"change"===t)return Kn(e)}var or="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},ar=Object.prototype.hasOwnProperty;function sr(t,e){if(or(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!ar.call(e,n[r])||!or(t[n[r]],e[n[r]]))return!1;return!0}function ur(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cr(t,e){var n,r=ur(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=ur(r)}}function lr(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?lr(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function hr(){for(var t=window,e=$();e instanceof t.HTMLIFrameElement;){try{var n="string"==typeof e.contentWindow.location.href}catch(t){n=!1}if(!n)break;e=$((t=e.contentWindow).document)}return e}function fr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var pr=h&&"documentMode"in document&&11>=document.documentMode,dr=null,vr=null,yr=null,mr=!1;function gr(t,e,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;mr||null==dr||dr!==$(r)||(r="selectionStart"in(r=dr)&&fr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&sr(yr,r)||(yr=r,0<(r=xr(vr,"onSelect")).length&&(e=new hn("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=dr)))}Re("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Re("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Re(xe,2);for(var br="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),wr=0;wr<br.length;wr++)Oe.set(br[wr],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _r="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Er=new Set("cancel close invalid load scroll toggle".split(" ").concat(_r));function Ir(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,r,i,o,s,u,c){if(Qt.apply(this,arguments),zt){if(!zt)throw Error(a(198));var l=Wt;zt=!1,Wt=null,Gt||(Gt=!0,Ht=l)}}(r,e,void 0,t),t.currentTarget=null}function Tr(t,e){e=0!=(4&e);for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;t:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break t;Ir(i,s,c),o=u}else for(a=0;a<r.length;a++){if(u=(s=r[a]).instance,c=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break t;Ir(i,s,c),o=u}}}if(Gt)throw t=Ht,Gt=!1,Ht=null,t}function Sr(t,e){var n=ei(e),r=t+"__bubble";n.has(r)||(Ar(e,t,2,!1),n.add(r))}var Cr="_reactListening"+Math.random().toString(36).slice(2);function kr(t){t[Cr]||(t[Cr]=!0,s.forEach((function(e){Er.has(e)||Nr(e,!1,t,null),Nr(e,!0,t,null)})))}function Nr(t,e,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===t&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!e&&Er.has(t)){if("scroll"!==t)return;i|=2,o=r}var a=ei(o),s=t+"__"+(e?"capture":"bubble");a.has(s)||(e&&(i|=4),Ar(o,t,i,e),a.add(s))}function Ar(t,e,n,r){var i=Oe.get(e);switch(void 0===i?2:i){case 0:i=Qe;break;case 1:i=Je;break;default:i=Ye}n=i.bind(null,e,n,t),i=void 0,!Vt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),r?void 0!==i?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):void 0!==i?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Pr(t,e,n,r,i){var o=r;if(0==(1&e)&&0==(2&e)&&null!==r)t:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=Xr(s)))return;if(5===(u=a.tag)||6===u){r=o=a;continue t}s=s.parentNode}}r=r.return}!function(t,e,n){if(Ft)return t();Ft=!0;try{Lt(t,e,n)}finally{Ft=!1,jt()}}((function(){var r=o,i=St(n),a=[];t:{var s=Pe.get(t);if(void 0!==s){var u=hn,c=t;switch(t){case"keypress":if(0===nn(n))break t;case"keydown":case"keyup":u=Cn;break;case"focusin":c="focus",u=mn;break;case"focusout":c="blur",u=mn;break;case"beforeblur":case"afterblur":u=mn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Nn;break;case Ce:case ke:case Ne:u=gn;break;case Ae:u=An;break;case"scroll":u=pn;break;case"wheel":u=Pn;break;case"copy":case"cut":case"paste":u=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=kn}var l=0!=(4&e),h=!l&&"scroll"===t,f=l?null!==s?s+"Capture":null:s;l=[];for(var p,d=r;null!==d;){var v=(p=d).stateNode;if(5===p.tag&&null!==v&&(p=v,null!==f&&null!=(v=Ut(d,f))&&l.push(Or(d,v,p))),h)break;d=d.return}0<l.length&&(s=new u(s,c,null,n,i),a.push({event:s,listeners:l}))}}if(0==(7&e)){if(u="mouseout"===t||"pointerout"===t,(!(s="mouseover"===t||"pointerover"===t)||0!=(16&e)||!(c=n.relatedTarget||n.fromElement)||!Xr(c)&&!c[Jr])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?Xr(c):null)&&(c!==(h=Jt(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=vn,v="onMouseLeave",f="onMouseEnter",d="mouse","pointerout"!==t&&"pointerover"!==t||(l=kn,v="onPointerLeave",f="onPointerEnter",d="pointer"),h=null==u?s:Zr(u),p=null==c?s:Zr(c),(s=new l(v,d+"leave",u,n,i)).target=h,s.relatedTarget=p,v=null,Xr(i)===r&&((l=new l(f,d+"enter",c,n,i)).target=p,l.relatedTarget=h,v=l),h=v,u&&c)t:{for(f=c,d=0,p=l=u;p;p=Rr(p))d++;for(p=0,v=f;v;v=Rr(v))p++;for(;0<d-p;)l=Rr(l),d--;for(;0<p-d;)f=Rr(f),p--;for(;d--;){if(l===f||null!==f&&l===f.alternate)break t;l=Rr(l),f=Rr(f)}l=null}else l=null;null!==u&&Dr(a,s,u,l,!1),null!==c&&null!==h&&Dr(a,h,c,l,!0)}if("select"===(u=(s=r?Zr(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var y=Qn;else if(Bn(s))if(Jn)y=ir;else{y=nr;var m=er}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(y=rr);switch(y&&(y=y(t,r))?zn(a,y,n,i):(m&&m(t,s,r),"focusout"===t&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&it(s,"number",s.value)),m=r?Zr(r):window,t){case"focusin":(Bn(m)||"true"===m.contentEditable)&&(dr=m,vr=r,yr=null);break;case"focusout":yr=vr=dr=null;break;case"mousedown":mr=!0;break;case"contextmenu":case"mouseup":case"dragend":mr=!1,gr(a,n,i);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":gr(a,n,i)}var g;if(xn)t:{switch(t){case"compositionstart":var b="onCompositionStart";break t;case"compositionend":b="onCompositionEnd";break t;case"compositionupdate":b="onCompositionUpdate";break t}b=void 0}else Vn?jn(t,n)&&(b="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(b="onCompositionStart");b&&(Ln&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vn&&(g=en()):(Ze="value"in($e=i)?$e.value:$e.textContent,Vn=!0)),0<(m=xr(r,b)).length&&(b=new wn(b,t,null,n,i),a.push({event:b,listeners:m}),(g||null!==(g=Un(n)))&&(b.data=g))),(g=Dn?function(t,e){switch(t){case"compositionend":return Un(e);case"keypress":return 32!==e.which?null:(Fn=!0,Mn);case"textInput":return(t=e.data)===Mn&&Fn?null:t;default:return null}}(t,n):function(t,e){if(Vn)return"compositionend"===t||!xn&&jn(t,e)?(t=en(),tn=Ze=$e=null,Vn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ln&&"ko"!==e.locale?null:e.data;default:return null}}(t,n))&&0<(r=xr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=g)}Tr(a,e)}))}function Or(t,e,n){return{instance:t,listener:e,currentTarget:n}}function xr(t,e){for(var n=e+"Capture",r=[];null!==t;){var i=t,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Ut(t,n))&&r.unshift(Or(t,o,i)),null!=(o=Ut(t,e))&&r.push(Or(t,o,i))),t=t.return}return r}function Rr(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Dr(t,e,n,r,i){for(var o=e._reactName,a=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Ut(n,o))&&a.unshift(Or(n,u,s)):i||null!=(u=Ut(n,o))&&a.push(Or(n,u,s))),n=n.return}0!==a.length&&t.push({event:e,listeners:a})}function Lr(){}var Mr=null,Fr=null;function jr(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function Ur(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"==typeof e.children||"number"==typeof e.children||"object"==typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var Vr="function"==typeof setTimeout?setTimeout:void 0,qr="function"==typeof clearTimeout?clearTimeout:void 0;function Br(t){(1===t.nodeType||9===t.nodeType&&null!=(t=t.body))&&(t.textContent="")}function zr(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function Wr(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var Gr=0,Hr=Math.random().toString(36).slice(2),Kr="__reactFiber$"+Hr,Qr="__reactProps$"+Hr,Jr="__reactContainer$"+Hr,Yr="__reactEvents$"+Hr;function Xr(t){var e=t[Kr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Jr]||n[Kr]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=Wr(t);null!==t;){if(n=t[Kr])return n;t=Wr(t)}return e}n=(t=n).parentNode}return null}function $r(t){return!(t=t[Kr]||t[Jr])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function Zr(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(a(33))}function ti(t){return t[Qr]||null}function ei(t){var e=t[Yr];return void 0===e&&(e=t[Yr]=new Set),e}var ni=[],ri=-1;function ii(t){return{current:t}}function oi(t){0>ri||(t.current=ni[ri],ni[ri]=null,ri--)}function ai(t,e){ri++,ni[ri]=t.current,t.current=e}var si={},ui=ii(si),ci=ii(!1),li=si;function hi(t,e){var n=t.type.contextTypes;if(!n)return si;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function fi(t){return null!=t.childContextTypes}function pi(){oi(ci),oi(ui)}function di(t,e,n){if(ui.current!==si)throw Error(a(168));ai(ui,e),ai(ci,n)}function vi(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(a(108,K(e)||"Unknown",o));return i({},n,r)}function yi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||si,li=ui.current,ai(ui,t),ai(ci,ci.current),!0}function mi(t,e,n){var r=t.stateNode;if(!r)throw Error(a(169));n?(t=vi(t,e,li),r.__reactInternalMemoizedMergedChildContext=t,oi(ci),oi(ui),ai(ui,t)):oi(ci),ai(ci,n)}var gi=null,bi=null,wi=o.unstable_runWithPriority,_i=o.unstable_scheduleCallback,Ei=o.unstable_cancelCallback,Ii=o.unstable_shouldYield,Ti=o.unstable_requestPaint,Si=o.unstable_now,Ci=o.unstable_getCurrentPriorityLevel,ki=o.unstable_ImmediatePriority,Ni=o.unstable_UserBlockingPriority,Ai=o.unstable_NormalPriority,Pi=o.unstable_LowPriority,Oi=o.unstable_IdlePriority,xi={},Ri=void 0!==Ti?Ti:function(){},Di=null,Li=null,Mi=!1,Fi=Si(),ji=1e4>Fi?Si:function(){return Si()-Fi};function Ui(){switch(Ci()){case ki:return 99;case Ni:return 98;case Ai:return 97;case Pi:return 96;case Oi:return 95;default:throw Error(a(332))}}function Vi(t){switch(t){case 99:return ki;case 98:return Ni;case 97:return Ai;case 96:return Pi;case 95:return Oi;default:throw Error(a(332))}}function qi(t,e){return t=Vi(t),wi(t,e)}function Bi(t,e,n){return t=Vi(t),_i(t,e,n)}function zi(){if(null!==Li){var t=Li;Li=null,Ei(t)}Wi()}function Wi(){if(!Mi&&null!==Di){Mi=!0;var t=0;try{var e=Di;qi(99,(function(){for(;t<e.length;t++){var n=e[t];do{n=n(!0)}while(null!==n)}})),Di=null}catch(e){throw null!==Di&&(Di=Di.slice(t+1)),_i(ki,zi),e}finally{Mi=!1}}}var Gi=_.ReactCurrentBatchConfig;function Hi(t,e){if(t&&t.defaultProps){for(var n in e=i({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var Ki=ii(null),Qi=null,Ji=null,Yi=null;function Xi(){Yi=Ji=Qi=null}function $i(t){var e=Ki.current;oi(Ki),t.type._context._currentValue=e}function Zi(t,e){for(;null!==t;){var n=t.alternate;if((t.childLanes&e)===e){if(null===n||(n.childLanes&e)===e)break;n.childLanes|=e}else t.childLanes|=e,null!==n&&(n.childLanes|=e);t=t.return}}function to(t,e){Qi=t,Yi=Ji=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!=(t.lanes&e)&&(xa=!0),t.firstContext=null)}function eo(t,e){if(Yi!==t&&!1!==e&&0!==e)if("number"==typeof e&&1073741823!==e||(Yi=t,e=1073741823),e={context:t,observedBits:e,next:null},null===Ji){if(null===Qi)throw Error(a(308));Ji=e,Qi.dependencies={lanes:0,firstContext:e,responders:null}}else Ji=Ji.next=e;return t._currentValue}var no=!1;function ro(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function io(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function oo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ao(t,e){if(null!==(t=t.updateQueue)){var n=(t=t.shared).pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function so(t,e){var n=t.updateQueue,r=t.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=e:o=o.next=e}else i=o=e;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function uo(t,e,n,r){var o=t.updateQueue;no=!1;var a=o.firstBaseUpdate,s=o.lastBaseUpdate,u=o.shared.pending;if(null!==u){o.shared.pending=null;var c=u,l=c.next;c.next=null,null===s?a=l:s.next=l,s=c;var h=t.alternate;if(null!==h){var f=(h=h.updateQueue).lastBaseUpdate;f!==s&&(null===f?h.firstBaseUpdate=l:f.next=l,h.lastBaseUpdate=c)}}if(null!==a){for(f=o.baseState,s=0,h=l=c=null;;){u=a.lane;var p=a.eventTime;if((r&u)===u){null!==h&&(h=h.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var d=t,v=a;switch(u=e,p=n,v.tag){case 1:if("function"==typeof(d=v.payload)){f=d.call(p,f,u);break t}f=d;break t;case 3:d.flags=-4097&d.flags|64;case 0:if(null==(u="function"==typeof(d=v.payload)?d.call(p,f,u):d))break t;f=i({},f,u);break t;case 2:no=!0}}null!==a.callback&&(t.flags|=32,null===(u=o.effects)?o.effects=[a]:u.push(a))}else p={eventTime:p,lane:u,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===h?(l=h=p,c=f):h=h.next=p,s|=u;if(null===(a=a.next)){if(null===(u=o.shared.pending))break;a=u.next,u.next=null,o.lastBaseUpdate=u,o.shared.pending=null}}null===h&&(c=f),o.baseState=c,o.firstBaseUpdate=l,o.lastBaseUpdate=h,Ds|=s,t.lanes=s,t.memoizedState=f}}function co(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(a(191,i));i.call(r)}}}var lo=(new r.Component).refs;function ho(t,e,n,r){n=null==(n=n(r,e=t.memoizedState))?e:i({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var fo={isMounted:function(t){return!!(t=t._reactInternals)&&Jt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ou(),i=au(t),o=oo(r,i);o.payload=e,null!=n&&(o.callback=n),ao(t,o),su(t,i,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ou(),i=au(t),o=oo(r,i);o.tag=1,o.payload=e,null!=n&&(o.callback=n),ao(t,o),su(t,i,r)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ou(),r=au(t),i=oo(n,r);i.tag=2,null!=e&&(i.callback=e),ao(t,i),su(t,r,n)}};function po(t,e,n,r,i,o,a){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,a):!(e.prototype&&e.prototype.isPureReactComponent&&sr(n,r)&&sr(i,o))}function vo(t,e,n){var r=!1,i=si,o=e.contextType;return"object"==typeof o&&null!==o?o=eo(o):(i=fi(e)?li:ui.current,o=(r=null!=(r=e.contextTypes))?hi(t,i):si),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=fo,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function yo(t,e,n,r){t=e.state,"function"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&fo.enqueueReplaceState(e,e.state,null)}function mo(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=lo,ro(t);var o=e.contextType;"object"==typeof o&&null!==o?i.context=eo(o):(o=fi(e)?li:ui.current,i.context=hi(t,o)),uo(t,n,i,r),i.state=t.memoizedState,"function"==typeof(o=e.getDerivedStateFromProps)&&(ho(t,e,o,n),i.state=t.memoizedState),"function"==typeof e.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(e=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&fo.enqueueReplaceState(i,i.state,null),uo(t,n,i,r),i.state=t.memoizedState),"function"==typeof i.componentDidMount&&(t.flags|=4)}var go=Array.isArray;function bo(t,e,n){if(null!==(t=n.ref)&&"function"!=typeof t&&"object"!=typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,t));var i=""+t;return null!==e&&null!==e.ref&&"function"==typeof e.ref&&e.ref._stringRef===i?e.ref:((e=function(t){var e=r.refs;e===lo&&(e=r.refs={}),null===t?delete e[i]:e[i]=t})._stringRef=i,e)}if("string"!=typeof t)throw Error(a(284));if(!n._owner)throw Error(a(290,t))}return t}function wo(t,e){if("textarea"!==t.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function _o(t){function e(e,n){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Fu(t,e)).index=0,t.sibling=null,t}function o(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.flags=2,n):r:(e.flags=2,n):n}function s(e){return t&&null===e.alternate&&(e.flags=2),e}function u(t,e,n,r){return null===e||6!==e.tag?((e=qu(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function c(t,e,n,r){return null!==e&&e.elementType===n.type?((r=i(e,n.props)).ref=bo(t,e,n),r.return=t,r):((r=ju(n.type,n.key,n.props,null,t.mode,r)).ref=bo(t,e,n),r.return=t,r)}function l(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Bu(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function h(t,e,n,r,o){return null===e||7!==e.tag?((e=Uu(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function f(t,e,n){if("string"==typeof e||"number"==typeof e)return(e=qu(""+e,t.mode,n)).return=t,e;if("object"==typeof e&&null!==e){switch(e.$$typeof){case E:return(n=ju(e.type,e.key,e.props,null,t.mode,n)).ref=bo(t,null,e),n.return=t,n;case I:return(e=Bu(e,t.mode,n)).return=t,e}if(go(e)||B(e))return(e=Uu(e,t.mode,n,null)).return=t,e;wo(t,e)}return null}function p(t,e,n,r){var i=null!==e?e.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:u(t,e,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case E:return n.key===i?n.type===T?h(t,e,n.props.children,r,i):c(t,e,n,r):null;case I:return n.key===i?l(t,e,n,r):null}if(go(n)||B(n))return null!==i?null:h(t,e,n,r,null);wo(t,n)}return null}function d(t,e,n,r,i){if("string"==typeof r||"number"==typeof r)return u(e,t=t.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case E:return t=t.get(null===r.key?n:r.key)||null,r.type===T?h(e,t,r.props.children,i,r.key):c(e,t,r,i);case I:return l(e,t=t.get(null===r.key?n:r.key)||null,r,i)}if(go(r)||B(r))return h(e,t=t.get(n)||null,r,i,null);wo(e,r)}return null}function v(i,a,s,u){for(var c=null,l=null,h=a,v=a=0,y=null;null!==h&&v<s.length;v++){h.index>v?(y=h,h=null):y=h.sibling;var m=p(i,h,s[v],u);if(null===m){null===h&&(h=y);break}t&&h&&null===m.alternate&&e(i,h),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,h=y}if(v===s.length)return n(i,h),c;if(null===h){for(;v<s.length;v++)null!==(h=f(i,s[v],u))&&(a=o(h,a,v),null===l?c=h:l.sibling=h,l=h);return c}for(h=r(i,h);v<s.length;v++)null!==(y=d(h,i,v,s[v],u))&&(t&&null!==y.alternate&&h.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return t&&h.forEach((function(t){return e(i,t)})),c}function y(i,s,u,c){var l=B(u);if("function"!=typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var h=l=null,v=s,y=s=0,m=null,g=u.next();null!==v&&!g.done;y++,g=u.next()){v.index>y?(m=v,v=null):m=v.sibling;var b=p(i,v,g.value,c);if(null===b){null===v&&(v=m);break}t&&v&&null===b.alternate&&e(i,v),s=o(b,s,y),null===h?l=b:h.sibling=b,h=b,v=m}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;y++,g=u.next())null!==(g=f(i,g.value,c))&&(s=o(g,s,y),null===h?l=g:h.sibling=g,h=g);return l}for(v=r(i,v);!g.done;y++,g=u.next())null!==(g=d(v,i,y,g.value,c))&&(t&&null!==g.alternate&&v.delete(null===g.key?y:g.key),s=o(g,s,y),null===h?l=g:h.sibling=g,h=g);return t&&v.forEach((function(t){return e(i,t)})),l}return function(t,r,o,u){var c="object"==typeof o&&null!==o&&o.type===T&&null===o.key;c&&(o=o.props.children);var l="object"==typeof o&&null!==o;if(l)switch(o.$$typeof){case E:t:{for(l=o.key,c=r;null!==c;){if(c.key===l){switch(c.tag){case 7:if(o.type===T){n(t,c.sibling),(r=i(c,o.props.children)).return=t,t=r;break t}break;default:if(c.elementType===o.type){n(t,c.sibling),(r=i(c,o.props)).ref=bo(t,c,o),r.return=t,t=r;break t}}n(t,c);break}e(t,c),c=c.sibling}o.type===T?((r=Uu(o.props.children,t.mode,u,o.key)).return=t,t=r):((u=ju(o.type,o.key,o.props,null,t.mode,u)).ref=bo(t,r,o),u.return=t,t=u)}return s(t);case I:t:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(t,r.sibling),(r=i(r,o.children||[])).return=t,t=r;break t}n(t,r);break}e(t,r),r=r.sibling}(r=Bu(o,t.mode,u)).return=t,t=r}return s(t)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(t,r.sibling),(r=i(r,o)).return=t,t=r):(n(t,r),(r=qu(o,t.mode,u)).return=t,t=r),s(t);if(go(o))return v(t,r,o,u);if(B(o))return y(t,r,o,u);if(l&&wo(t,o),void 0===o&&!c)switch(t.tag){case 1:case 22:case 0:case 11:case 15:throw Error(a(152,K(t.type)||"Component"))}return n(t,r)}}var Eo=_o(!0),Io=_o(!1),To={},So=ii(To),Co=ii(To),ko=ii(To);function No(t){if(t===To)throw Error(a(174));return t}function Ao(t,e){switch(ai(ko,e),ai(Co,t),ai(So,To),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:pt(null,"");break;default:e=pt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}oi(So),ai(So,e)}function Po(){oi(So),oi(Co),oi(ko)}function Oo(t){No(ko.current);var e=No(So.current),n=pt(e,t.type);e!==n&&(ai(Co,t),ai(So,n))}function xo(t){Co.current===t&&(oi(So),oi(Co))}var Ro=ii(0);function Do(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!=(64&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Lo=null,Mo=null,Fo=!1;function jo(t,e){var n=Lu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.flags=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function Uo(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);case 13:default:return!1}}function Vo(t){if(Fo){var e=Mo;if(e){var n=e;if(!Uo(t,e)){if(!(e=zr(n.nextSibling))||!Uo(t,e))return t.flags=-1025&t.flags|2,Fo=!1,void(Lo=t);jo(Lo,n)}Lo=t,Mo=zr(e.firstChild)}else t.flags=-1025&t.flags|2,Fo=!1,Lo=t}}function qo(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;Lo=t}function Bo(t){if(t!==Lo)return!1;if(!Fo)return qo(t),Fo=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!Ur(e,t.memoizedProps))for(e=Mo;e;)jo(t,e),e=zr(e.nextSibling);if(qo(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(a(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){Mo=zr(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}Mo=null}}else Mo=Lo?zr(t.stateNode.nextSibling):null;return!0}function zo(){Mo=Lo=null,Fo=!1}var Wo=[];function Go(){for(var t=0;t<Wo.length;t++)Wo[t]._workInProgressVersionPrimary=null;Wo.length=0}var Ho=_.ReactCurrentDispatcher,Ko=_.ReactCurrentBatchConfig,Qo=0,Jo=null,Yo=null,Xo=null,$o=!1,Zo=!1;function ta(){throw Error(a(321))}function ea(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!or(t[n],e[n]))return!1;return!0}function na(t,e,n,r,i,o){if(Qo=o,Jo=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ho.current=null===t||null===t.memoizedState?Na:Aa,t=n(r,i),Zo){o=0;do{if(Zo=!1,!(25>o))throw Error(a(301));o+=1,Xo=Yo=null,e.updateQueue=null,Ho.current=Pa,t=n(r,i)}while(Zo)}if(Ho.current=ka,e=null!==Yo&&null!==Yo.next,Qo=0,Xo=Yo=Jo=null,$o=!1,e)throw Error(a(300));return t}function ra(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Xo?Jo.memoizedState=Xo=t:Xo=Xo.next=t,Xo}function ia(){if(null===Yo){var t=Jo.alternate;t=null!==t?t.memoizedState:null}else t=Yo.next;var e=null===Xo?Jo.memoizedState:Xo.next;if(null!==e)Xo=e,Yo=t;else{if(null===t)throw Error(a(310));t={memoizedState:(Yo=t).memoizedState,baseState:Yo.baseState,baseQueue:Yo.baseQueue,queue:Yo.queue,next:null},null===Xo?Jo.memoizedState=Xo=t:Xo=Xo.next=t}return Xo}function oa(t,e){return"function"==typeof e?e(t):e}function aa(t){var e=ia(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=Yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=o=null,c=i;do{var l=c.lane;if((Qo&l)===l)null!==u&&(u=u.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===t?c.eagerState:t(r,c.action);else{var h={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=h,o=r):u=u.next=h,Jo.lanes|=l,Ds|=l}c=c.next}while(null!==c&&c!==i);null===u?o=r:u.next=s,or(r,e.memoizedState)||(xa=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}return[e.memoizedState,n.dispatch]}function sa(t){var e=ia(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=t(o,s.action),s=s.next}while(s!==i);or(o,e.memoizedState)||(xa=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function ua(t,e,n){var r=e._getVersion;r=r(e._source);var i=e._workInProgressVersionPrimary;if(null!==i?t=i===r:(t=t.mutableReadLanes,(t=(Qo&t)===t)&&(e._workInProgressVersionPrimary=r,Wo.push(e))),t)return n(e._source);throw Wo.push(e),Error(a(350))}function ca(t,e,n,r){var i=Cs;if(null===i)throw Error(a(349));var o=e._getVersion,s=o(e._source),u=Ho.current,c=u.useState((function(){return ua(i,e,n)})),l=c[1],h=c[0];c=Xo;var f=t.memoizedState,p=f.refs,d=p.getSnapshot,v=f.source;f=f.subscribe;var y=Jo;return t.memoizedState={refs:p,source:e,subscribe:r},u.useEffect((function(){p.getSnapshot=n,p.setSnapshot=l;var t=o(e._source);if(!or(s,t)){t=n(e._source),or(h,t)||(l(t),t=au(y),i.mutableReadLanes|=t&i.pendingLanes),t=i.mutableReadLanes,i.entangledLanes|=t;for(var r=i.entanglements,a=t;0<a;){var u=31-Be(a),c=1<<u;r[u]|=t,a&=~c}}}),[n,e,r]),u.useEffect((function(){return r(e._source,(function(){var t=p.getSnapshot,n=p.setSnapshot;try{n(t(e._source));var r=au(y);i.mutableReadLanes|=r&i.pendingLanes}catch(t){n((function(){throw t}))}}))}),[e,r]),or(d,n)&&or(v,e)&&or(f,r)||((t={pending:null,dispatch:null,lastRenderedReducer:oa,lastRenderedState:h}).dispatch=l=Ca.bind(null,Jo,t),c.queue=t,c.baseQueue=null,h=ua(i,e,n),c.memoizedState=c.baseState=h),h}function la(t,e,n){return ca(ia(),t,e,n)}function ha(t){var e=ra();return"function"==typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={pending:null,dispatch:null,lastRenderedReducer:oa,lastRenderedState:t}).dispatch=Ca.bind(null,Jo,t),[e.memoizedState,t]}function fa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=Jo.updateQueue)?(e={lastEffect:null},Jo.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function pa(t){return t={current:t},ra().memoizedState=t}function da(){return ia().memoizedState}function va(t,e,n,r){var i=ra();Jo.flags|=t,i.memoizedState=fa(1|e,n,void 0,void 0===r?null:r)}function ya(t,e,n,r){var i=ia();r=void 0===r?null:r;var o=void 0;if(null!==Yo){var a=Yo.memoizedState;if(o=a.destroy,null!==r&&ea(r,a.deps))return void fa(e,n,o,r)}Jo.flags|=t,i.memoizedState=fa(1|e,n,o,r)}function ma(t,e){return va(516,4,t,e)}function ga(t,e){return ya(516,4,t,e)}function ba(t,e){return ya(4,2,t,e)}function wa(t,e){return"function"==typeof e?(t=t(),e(t),function(){e(null)}):null!=e?(t=t(),e.current=t,function(){e.current=null}):void 0}function _a(t,e,n){return n=null!=n?n.concat([t]):null,ya(4,2,wa.bind(null,e,t),n)}function Ea(){}function Ia(t,e){var n=ia();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&ea(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ta(t,e){var n=ia();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&ea(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Sa(t,e){var n=Ui();qi(98>n?98:n,(function(){t(!0)})),qi(97<n?97:n,(function(){var n=Ko.transition;Ko.transition=1;try{t(!1),e()}finally{Ko.transition=n}}))}function Ca(t,e,n){var r=ou(),i=au(t),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},a=e.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),e.pending=o,a=t.alternate,t===Jo||null!==a&&a===Jo)Zo=$o=!0;else{if(0===t.lanes&&(null===a||0===a.lanes)&&null!==(a=e.lastRenderedReducer))try{var s=e.lastRenderedState,u=a(s,n);if(o.eagerReducer=a,o.eagerState=u,or(u,s))return}catch(t){}su(t,i,r)}}var ka={readContext:eo,useCallback:ta,useContext:ta,useEffect:ta,useImperativeHandle:ta,useLayoutEffect:ta,useMemo:ta,useReducer:ta,useRef:ta,useState:ta,useDebugValue:ta,useDeferredValue:ta,useTransition:ta,useMutableSource:ta,useOpaqueIdentifier:ta,unstable_isNewReconciler:!1},Na={readContext:eo,useCallback:function(t,e){return ra().memoizedState=[t,void 0===e?null:e],t},useContext:eo,useEffect:ma,useImperativeHandle:function(t,e,n){return n=null!=n?n.concat([t]):null,va(4,2,wa.bind(null,e,t),n)},useLayoutEffect:function(t,e){return va(4,2,t,e)},useMemo:function(t,e){var n=ra();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ra();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t=(t=r.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=Ca.bind(null,Jo,t),[r.memoizedState,t]},useRef:pa,useState:ha,useDebugValue:Ea,useDeferredValue:function(t){var e=ha(t),n=e[0],r=e[1];return ma((function(){var e=Ko.transition;Ko.transition=1;try{r(t)}finally{Ko.transition=e}}),[t]),n},useTransition:function(){var t=ha(!1),e=t[0];return pa(t=Sa.bind(null,t[1])),[t,e]},useMutableSource:function(t,e,n){var r=ra();return r.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:n},ca(r,t,e,n)},useOpaqueIdentifier:function(){if(Fo){var t=!1,e=function(t){return{$$typeof:L,toString:t,valueOf:t}}((function(){throw t||(t=!0,n("r:"+(Gr++).toString(36))),Error(a(355))})),n=ha(e)[1];return 0==(2&Jo.mode)&&(Jo.flags|=516,fa(5,(function(){n("r:"+(Gr++).toString(36))}),void 0,null)),e}return ha(e="r:"+(Gr++).toString(36)),e},unstable_isNewReconciler:!1},Aa={readContext:eo,useCallback:Ia,useContext:eo,useEffect:ga,useImperativeHandle:_a,useLayoutEffect:ba,useMemo:Ta,useReducer:aa,useRef:da,useState:function(){return aa(oa)},useDebugValue:Ea,useDeferredValue:function(t){var e=aa(oa),n=e[0],r=e[1];return ga((function(){var e=Ko.transition;Ko.transition=1;try{r(t)}finally{Ko.transition=e}}),[t]),n},useTransition:function(){var t=aa(oa)[0];return[da().current,t]},useMutableSource:la,useOpaqueIdentifier:function(){return aa(oa)[0]},unstable_isNewReconciler:!1},Pa={readContext:eo,useCallback:Ia,useContext:eo,useEffect:ga,useImperativeHandle:_a,useLayoutEffect:ba,useMemo:Ta,useReducer:sa,useRef:da,useState:function(){return sa(oa)},useDebugValue:Ea,useDeferredValue:function(t){var e=sa(oa),n=e[0],r=e[1];return ga((function(){var e=Ko.transition;Ko.transition=1;try{r(t)}finally{Ko.transition=e}}),[t]),n},useTransition:function(){var t=sa(oa)[0];return[da().current,t]},useMutableSource:la,useOpaqueIdentifier:function(){return sa(oa)[0]},unstable_isNewReconciler:!1},Oa=_.ReactCurrentOwner,xa=!1;function Ra(t,e,n,r){e.child=null===t?Io(e,null,n,r):Eo(e,t.child,n,r)}function Da(t,e,n,r,i){n=n.render;var o=e.ref;return to(e,i),r=na(t,e,n,r,o,i),null===t||xa?(e.flags|=1,Ra(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,$a(t,e,i))}function La(t,e,n,r,i,o){if(null===t){var a=n.type;return"function"!=typeof a||Mu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=ju(n.type,null,r,e,e.mode,o)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=a,Ma(t,e,a,r,i,o))}return a=t.child,0==(i&o)&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:sr)(i,r)&&t.ref===e.ref)?$a(t,e,o):(e.flags|=1,(t=Fu(a,r)).ref=e.ref,t.return=e,e.child=t)}function Ma(t,e,n,r,i,o){if(null!==t&&sr(t.memoizedProps,r)&&t.ref===e.ref){if(xa=!1,0==(o&i))return e.lanes=t.lanes,$a(t,e,o);0!=(16384&t.flags)&&(xa=!0)}return Ua(t,e,n,r,o)}function Fa(t,e,n){var r=e.pendingProps,i=r.children,o=null!==t?t.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&e.mode))e.memoizedState={baseLanes:0},pu(0,n);else{if(0==(1073741824&n))return t=null!==o?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},pu(0,t),null;e.memoizedState={baseLanes:0},pu(0,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,e.memoizedState=null):r=n,pu(0,r);return Ra(t,e,i,n),e.child}function ja(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=128)}function Ua(t,e,n,r,i){var o=fi(n)?li:ui.current;return o=hi(e,o),to(e,i),n=na(t,e,n,r,o,i),null===t||xa?(e.flags|=1,Ra(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,$a(t,e,i))}function Va(t,e,n,r,i){if(fi(n)){var o=!0;yi(e)}else o=!1;if(to(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),vo(e,n,r),mo(e,n,r,i),r=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var u=a.context,c=n.contextType;c="object"==typeof c&&null!==c?eo(c):hi(e,c=fi(n)?li:ui.current);var l=n.getDerivedStateFromProps,h="function"==typeof l||"function"==typeof a.getSnapshotBeforeUpdate;h||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||u!==c)&&yo(e,a,r,c),no=!1;var f=e.memoizedState;a.state=f,uo(e,r,a,i),u=e.memoizedState,s!==r||f!==u||ci.current||no?("function"==typeof l&&(ho(e,n,l,r),u=e.memoizedState),(s=no||po(e,n,s,r,f,u,c))?(h||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(e.flags|=4)):("function"==typeof a.componentDidMount&&(e.flags|=4),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=c,r=s):("function"==typeof a.componentDidMount&&(e.flags|=4),r=!1)}else{a=e.stateNode,io(t,e),s=e.memoizedProps,c=e.type===e.elementType?s:Hi(e.type,s),a.props=c,h=e.pendingProps,f=a.context,u="object"==typeof(u=n.contextType)&&null!==u?eo(u):hi(e,u=fi(n)?li:ui.current);var p=n.getDerivedStateFromProps;(l="function"==typeof p||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==h||f!==u)&&yo(e,a,r,u),no=!1,f=e.memoizedState,a.state=f,uo(e,r,a,i);var d=e.memoizedState;s!==h||f!==d||ci.current||no?("function"==typeof p&&(ho(e,n,p,r),d=e.memoizedState),(c=no||po(e,n,c,r,f,d,u))?(l||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,d,u),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,d,u)),"function"==typeof a.componentDidUpdate&&(e.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(e.flags|=256)):("function"!=typeof a.componentDidUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=256),e.memoizedProps=r,e.memoizedState=d),a.props=r,a.state=d,a.context=u,r=c):("function"!=typeof a.componentDidUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=256),r=!1)}return qa(t,e,n,r,o,i)}function qa(t,e,n,r,i,o){ja(t,e);var a=0!=(64&e.flags);if(!r&&!a)return i&&mi(e,n,!1),$a(t,e,o);r=e.stateNode,Oa.current=e;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&a?(e.child=Eo(e,t.child,null,o),e.child=Eo(e,null,s,o)):Ra(t,e,s,o),e.memoizedState=r.state,i&&mi(e,n,!0),e.child}function Ba(t){var e=t.stateNode;e.pendingContext?di(0,e.pendingContext,e.pendingContext!==e.context):e.context&&di(0,e.context,!1),Ao(t,e.containerInfo)}var za,Wa,Ga,Ha={dehydrated:null,retryLane:0};function Ka(t,e,n){var r,i=e.pendingProps,o=Ro.current,a=!1;return(r=0!=(64&e.flags))||(r=(null===t||null!==t.memoizedState)&&0!=(2&o)),r?(a=!0,e.flags&=-65):null!==t&&null===t.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),ai(Ro,1&o),null===t?(void 0!==i.fallback&&Vo(e),t=i.children,o=i.fallback,a?(t=Qa(e,t,o,n),e.child.memoizedState={baseLanes:n},e.memoizedState=Ha,t):"number"==typeof i.unstable_expectedLoadTime?(t=Qa(e,t,o,n),e.child.memoizedState={baseLanes:n},e.memoizedState=Ha,e.lanes=33554432,t):((n=Vu({mode:"visible",children:t},e.mode,n,null)).return=e,e.child=n)):(t.memoizedState,a?(i=function(t,e,n,r,i){var o=e.mode,a=t.child;t=a.sibling;var s={mode:"hidden",children:n};return 0==(2&o)&&e.child!==a?((n=e.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(e.firstEffect=n.firstEffect,e.lastEffect=a,a.nextEffect=null):e.firstEffect=e.lastEffect=null):n=Fu(a,s),null!==t?r=Fu(t,r):(r=Uu(r,o,i,null)).flags|=2,r.return=e,n.return=e,n.sibling=r,e.child=n,r}(t,e,i.children,i.fallback,n),a=e.child,o=t.child.memoizedState,a.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},a.childLanes=t.childLanes&~n,e.memoizedState=Ha,i):(n=function(t,e,n,r){var i=t.child;return t=i.sibling,n=Fu(i,{mode:"visible",children:n}),0==(2&e.mode)&&(n.lanes=r),n.return=e,n.sibling=null,null!==t&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=n}(t,e,i.children,n),e.memoizedState=null,n))}function Qa(t,e,n,r){var i=t.mode,o=t.child;return e={mode:"hidden",children:e},0==(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=e):o=Vu(e,i,0,null),n=Uu(n,i,r,null),o.return=t,n.return=t,o.sibling=n,t.child=o,n}function Ja(t,e){t.lanes|=e;var n=t.alternate;null!==n&&(n.lanes|=e),Zi(t.return,e)}function Ya(t,e,n,r,i,o){var a=t.memoizedState;null===a?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.lastEffect=o)}function Xa(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Ra(t,e,r.children,n),0!=(2&(r=Ro.current)))r=1&r|2,e.flags|=64;else{if(null!==t&&0!=(64&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Ja(t,n);else if(19===t.tag)Ja(t,n);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ai(Ro,r),0==(2&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===Do(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ya(e,!1,i,n,o,e.lastEffect);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===Do(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ya(e,!0,n,null,o,e.lastEffect);break;case"together":Ya(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function $a(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Ds|=e.lanes,0!=(n&e.childLanes)){if(null!==t&&e.child!==t.child)throw Error(a(153));if(null!==e.child){for(n=Fu(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Fu(t,t.pendingProps)).return=e;n.sibling=null}return e.child}return null}function Za(t,e){if(!Fo)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ts(t,e,n){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return fi(e.type)&&pi(),null;case 3:return Po(),oi(ci),oi(ui),Go(),(r=e.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||(Bo(e)?e.flags|=4:r.hydrate||(e.flags|=256)),null;case 5:xo(e);var o=No(ko.current);if(n=e.type,null!==t&&null!=e.stateNode)Wa(t,e,n,r),t.ref!==e.ref&&(e.flags|=128);else{if(!r){if(null===e.stateNode)throw Error(a(166));return null}if(t=No(So.current),Bo(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Kr]=e,r[Qr]=s,n){case"dialog":Sr("cancel",r),Sr("close",r);break;case"iframe":case"object":case"embed":Sr("load",r);break;case"video":case"audio":for(t=0;t<_r.length;t++)Sr(_r[t],r);break;case"source":Sr("error",r);break;case"img":case"image":case"link":Sr("error",r),Sr("load",r);break;case"details":Sr("toggle",r);break;case"input":tt(r,s),Sr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Sr("invalid",r);break;case"textarea":ut(r,s),Sr("invalid",r)}for(var c in It(n,s),t=null,s)s.hasOwnProperty(c)&&(o=s[c],"children"===c?"string"==typeof o?r.textContent!==o&&(t=["children",o]):"number"==typeof o&&r.textContent!==""+o&&(t=["children",""+o]):u.hasOwnProperty(c)&&null!=o&&"onScroll"===c&&Sr("scroll",r));switch(n){case"input":Y(r),rt(r,s,!0);break;case"textarea":Y(r),lt(r);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(r.onclick=Lr)}r=t,e.updateQueue=r,null!==r&&(e.flags|=4)}else{switch(c=9===o.nodeType?o:o.ownerDocument,t===ht&&(t=ft(n)),t===ht?"script"===n?((t=c.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"==typeof r.is?t=c.createElement(n,{is:r.is}):(t=c.createElement(n),"select"===n&&(c=t,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):t=c.createElementNS(t,n),t[Kr]=e,t[Qr]=r,za(t,e),e.stateNode=t,c=Tt(n,r),n){case"dialog":Sr("cancel",t),Sr("close",t),o=r;break;case"iframe":case"object":case"embed":Sr("load",t),o=r;break;case"video":case"audio":for(o=0;o<_r.length;o++)Sr(_r[o],t);o=r;break;case"source":Sr("error",t),o=r;break;case"img":case"image":case"link":Sr("error",t),Sr("load",t),o=r;break;case"details":Sr("toggle",t),o=r;break;case"input":tt(t,r),o=Z(t,r),Sr("invalid",t);break;case"option":o=ot(t,r);break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=i({},r,{value:void 0}),Sr("invalid",t);break;case"textarea":ut(t,r),o=st(t,r),Sr("invalid",t);break;default:o=r}It(n,o);var l=o;for(s in l)if(l.hasOwnProperty(s)){var h=l[s];"style"===s?_t(t,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&yt(t,h):"children"===s?"string"==typeof h?("textarea"!==n||""!==h)&&mt(t,h):"number"==typeof h&&mt(t,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=h&&"onScroll"===s&&Sr("scroll",t):null!=h&&w(t,s,h,c))}switch(n){case"input":Y(t),rt(t,r,!1);break;case"textarea":Y(t),lt(t);break;case"option":null!=r.value&&t.setAttribute("value",""+Q(r.value));break;case"select":t.multiple=!!r.multiple,null!=(s=r.value)?at(t,!!r.multiple,s,!1):null!=r.defaultValue&&at(t,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof o.onClick&&(t.onclick=Lr)}jr(n,r)&&(e.flags|=4)}null!==e.ref&&(e.flags|=128)}return null;case 6:if(t&&null!=e.stateNode)Ga(0,e,t.memoizedProps,r);else{if("string"!=typeof r&&null===e.stateNode)throw Error(a(166));n=No(ko.current),No(So.current),Bo(e)?(r=e.stateNode,n=e.memoizedProps,r[Kr]=e,r.nodeValue!==n&&(e.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Kr]=e,e.stateNode=r)}return null;case 13:return oi(Ro),r=e.memoizedState,0!=(64&e.flags)?(e.lanes=n,e):(r=null!==r,n=!1,null===t?void 0!==e.memoizedProps.fallback&&Bo(e):n=null!==t.memoizedState,r&&!n&&0!=(2&e.mode)&&(null===t&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!=(1&Ro.current)?0===Os&&(Os=3):(0!==Os&&3!==Os||(Os=4),null===Cs||0==(134217727&Ds)&&0==(134217727&Ls)||hu(Cs,Ns))),(r||n)&&(e.flags|=4),null);case 4:return Po(),null===t&&kr(e.stateNode.containerInfo),null;case 10:return $i(e),null;case 17:return fi(e.type)&&pi(),null;case 19:if(oi(Ro),null===(r=e.memoizedState))return null;if(s=0!=(64&e.flags),null===(c=r.rendering))if(s)Za(r,!1);else{if(0!==Os||null!==t&&0!=(64&t.flags))for(t=e.child;null!==t;){if(null!==(c=Do(t))){for(e.flags|=64,Za(r,!1),null!==(s=c.updateQueue)&&(e.updateQueue=s,e.flags|=4),null===r.lastEffect&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=n,n=e.child;null!==n;)t=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(c=s.alternate)?(s.childLanes=0,s.lanes=t,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,t=c.dependencies,s.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ai(Ro,1&Ro.current|2),e.child}t=t.sibling}null!==r.tail&&ji()>Us&&(e.flags|=64,s=!0,Za(r,!1),e.lanes=33554432)}else{if(!s)if(null!==(t=Do(c))){if(e.flags|=64,s=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),Za(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Fo)return null!==(e=e.lastEffect=r.lastEffect)&&(e.nextEffect=null),null}else 2*ji()-r.renderingStartTime>Us&&1073741824!==n&&(e.flags|=64,s=!0,Za(r,!1),e.lanes=33554432);r.isBackwards?(c.sibling=e.child,e.child=c):(null!==(n=r.last)?n.sibling=c:e.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=ji(),n.sibling=null,e=Ro.current,ai(Ro,s?1&e|2:1&e),n):null;case 23:case 24:return du(),null!==t&&null!==t.memoizedState!=(null!==e.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(e.flags|=4),null}throw Error(a(156,e.tag))}function es(t){switch(t.tag){case 1:fi(t.type)&&pi();var e=t.flags;return 4096&e?(t.flags=-4097&e|64,t):null;case 3:if(Po(),oi(ci),oi(ui),Go(),0!=(64&(e=t.flags)))throw Error(a(285));return t.flags=-4097&e|64,t;case 5:return xo(t),null;case 13:return oi(Ro),4096&(e=t.flags)?(t.flags=-4097&e|64,t):null;case 19:return oi(Ro),null;case 4:return Po(),null;case 10:return $i(t),null;case 23:case 24:return du(),null;default:return null}}function ns(t,e){try{var n="",r=e;do{n+=H(r),r=r.return}while(r);var i=n}catch(t){i="\nError generating stack: "+t.message+"\n"+t.stack}return{value:t,source:e,stack:i}}function rs(t,e){try{console.error(e.value)}catch(t){setTimeout((function(){throw t}))}}za=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Wa=function(t,e,n,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,No(So.current);var a,s=null;switch(n){case"input":o=Z(t,o),r=Z(t,r),s=[];break;case"option":o=ot(t,o),r=ot(t,r),s=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":o=st(t,o),r=st(t,r),s=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(t.onclick=Lr)}for(h in It(n,r),n=null,o)if(!r.hasOwnProperty(h)&&o.hasOwnProperty(h)&&null!=o[h])if("style"===h){var c=o[h];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(u.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var l=r[h];if(c=null!=o?o[h]:void 0,r.hasOwnProperty(h)&&l!==c&&(null!=l||null!=c))if("style"===h)if(c){for(a in c)!c.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&c[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(h,n)),n=l;else"dangerouslySetInnerHTML"===h?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(s=s||[]).push(h,l)):"children"===h?"string"!=typeof l&&"number"!=typeof l||(s=s||[]).push(h,""+l):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(u.hasOwnProperty(h)?(null!=l&&"onScroll"===h&&Sr("scroll",t),s||c===l||(s=[])):"object"==typeof l&&null!==l&&l.$$typeof===L?l.toString():(s=s||[]).push(h,l))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}},Ga=function(t,e,n,r){n!==r&&(e.flags|=4)};var is="function"==typeof WeakMap?WeakMap:Map;function os(t,e,n){(n=oo(-1,n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){zs||(zs=!0,Ws=r),rs(0,e)},n}function as(t,e,n){(n=oo(-1,n)).tag=3;var r=t.type.getDerivedStateFromError;if("function"==typeof r){var i=e.value;n.payload=function(){return rs(0,e),r(i)}}var o=t.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Gs?Gs=new Set([this]):Gs.add(this),rs(0,e));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}var ss="function"==typeof WeakSet?WeakSet:Set;function us(t){var e=t.ref;if(null!==e)if("function"==typeof e)try{e(null)}catch(e){Ou(t,e)}else e.current=null}function cs(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&e.flags&&null!==t){var n=t.memoizedProps,r=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?n:Hi(e.type,n),r),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:return void(256&e.flags&&Br(e.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(a(163))}function ls(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(e=null!==(e=n.updateQueue)?e.lastEffect:null)){t=e=e.next;do{if(3==(3&t.tag)){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}if(null!==(e=null!==(e=n.updateQueue)?e.lastEffect:null)){t=e=e.next;do{var i=t;r=i.next,0!=(4&(i=i.tag))&&0!=(1&i)&&(Nu(n,t),ku(n,t)),t=r}while(t!==e)}return;case 1:return t=n.stateNode,4&n.flags&&(null===e?t.componentDidMount():(r=n.elementType===n.type?e.memoizedProps:Hi(n.type,e.memoizedProps),t.componentDidUpdate(r,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),void(null!==(e=n.updateQueue)&&co(n,e,t));case 3:if(null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}co(n,e,t)}return;case 5:return t=n.stateNode,void(null===e&&4&n.flags&&jr(n.type,n.memoizedProps)&&t.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&we(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(a(163))}function hs(t,e){for(var n=t;;){if(5===n.tag){var r=n.stateNode;if(e)"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,r.style.display=wt("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=e?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===t)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function fs(t,e){if(bi&&"function"==typeof bi.onCommitFiberUnmount)try{bi.onCommitFiberUnmount(gi,e)}catch(t){}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var n=t=t.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!=(4&r))Nu(e,n);else{r=e;try{i()}catch(t){Ou(r,t)}}n=n.next}while(n!==t)}break;case 1:if(us(e),"function"==typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){Ou(e,t)}break;case 5:us(e);break;case 4:gs(t,e)}}function ps(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function ds(t){return 5===t.tag||3===t.tag||4===t.tag}function vs(t){t:{for(var e=t.return;null!==e;){if(ds(e))break t;e=e.return}throw Error(a(160))}var n=e;switch(e=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:e=e.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.flags&&(mt(e,""),n.flags&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||ds(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break t}}r?ys(t,n,e):ms(t,n,e)}function ys(t,e,n){var r=t.tag,i=5===r||6===r;if(i)t=i?t.stateNode:t.stateNode.instance,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!=(n=n._reactRootContainer)||null!==e.onclick||(e.onclick=Lr));else if(4!==r&&null!==(t=t.child))for(ys(t,e,n),t=t.sibling;null!==t;)ys(t,e,n),t=t.sibling}function ms(t,e,n){var r=t.tag,i=5===r||6===r;if(i)t=i?t.stateNode:t.stateNode.instance,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==r&&null!==(t=t.child))for(ms(t,e,n),t=t.sibling;null!==t;)ms(t,e,n),t=t.sibling}function gs(t,e){for(var n,r,i=e,o=!1;;){if(!o){o=i.return;t:for(;;){if(null===o)throw Error(a(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break t;case 3:case 4:n=n.containerInfo,r=!0;break t}o=o.return}o=!0}if(5===i.tag||6===i.tag){t:for(var s=t,u=i,c=u;;)if(fs(s,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===u)break t;for(;null===c.sibling;){if(null===c.return||c.return===u)break t;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(s=n,u=i.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(fs(t,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function bs(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var n=e.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3==(3&r.tag)&&(t=r.destroy,r.destroy=void 0,void 0!==t&&t()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(null!=(n=e.stateNode)){r=e.memoizedProps;var i=null!==t?t.memoizedProps:r;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,null!==o){for(n[Qr]=r,"input"===t&&"radio"===r.type&&null!=r.name&&et(n,r),Tt(t,i),e=Tt(t,r),i=0;i<o.length;i+=2){var s=o[i],u=o[i+1];"style"===s?_t(n,u):"dangerouslySetInnerHTML"===s?yt(n,u):"children"===s?mt(n,u):w(n,s,u,e)}switch(t){case"input":nt(n,r);break;case"textarea":ct(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?at(n,!!r.multiple,o,!1):t!==!!r.multiple&&(null!=r.defaultValue?at(n,!!r.multiple,r.defaultValue,!0):at(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===e.stateNode)throw Error(a(162));return void(e.stateNode.nodeValue=e.memoizedProps);case 3:return void((n=e.stateNode).hydrate&&(n.hydrate=!1,we(n.containerInfo)));case 12:return;case 13:return null!==e.memoizedState&&(js=ji(),hs(e.child,!0)),void ws(e);case 19:return void ws(e);case 17:return;case 23:case 24:return void hs(e,null!==e.memoizedState)}throw Error(a(163))}function ws(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new ss),e.forEach((function(e){var r=Ru.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}function _s(t,e){return null!==t&&(null===(t=t.memoizedState)||null!==t.dehydrated)&&null!==(e=e.memoizedState)&&null===e.dehydrated}var Es=Math.ceil,Is=_.ReactCurrentDispatcher,Ts=_.ReactCurrentOwner,Ss=0,Cs=null,ks=null,Ns=0,As=0,Ps=ii(0),Os=0,xs=null,Rs=0,Ds=0,Ls=0,Ms=0,Fs=null,js=0,Us=1/0;function Vs(){Us=ji()+500}var qs,Bs=null,zs=!1,Ws=null,Gs=null,Hs=!1,Ks=null,Qs=90,Js=[],Ys=[],Xs=null,$s=0,Zs=null,tu=-1,eu=0,nu=0,ru=null,iu=!1;function ou(){return 0!=(48&Ss)?ji():-1!==tu?tu:tu=ji()}function au(t){if(0==(2&(t=t.mode)))return 1;if(0==(4&t))return 99===Ui()?1:2;if(0===eu&&(eu=Rs),0!==Gi.transition){0!==nu&&(nu=null!==Fs?Fs.pendingLanes:0),t=eu;var e=4186112&~nu;return 0==(e&=-e)&&0==(e=(t=4186112&~t)&-t)&&(e=8192),e}return t=Ui(),t=je(0!=(4&Ss)&&98===t?12:t=function(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(t),eu)}function su(t,e,n){if(50<$s)throw $s=0,Zs=null,Error(a(185));if(null===(t=uu(t,e)))return null;qe(t,e,n),t===Cs&&(Ls|=e,4===Os&&hu(t,Ns));var r=Ui();1===e?0!=(8&Ss)&&0==(48&Ss)?fu(t):(cu(t,n),0===Ss&&(Vs(),zi())):(0==(4&Ss)||98!==r&&99!==r||(null===Xs?Xs=new Set([t]):Xs.add(t)),cu(t,n)),Fs=t}function uu(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}function cu(t,e){for(var n=t.callbackNode,r=t.suspendedLanes,i=t.pingedLanes,o=t.expirationTimes,s=t.pendingLanes;0<s;){var u=31-Be(s),c=1<<u,l=o[u];if(-1===l){if(0==(c&r)||0!=(c&i)){l=e,Le(c);var h=De;o[u]=10<=h?l+250:6<=h?l+5e3:-1}}else l<=e&&(t.expiredLanes|=c);s&=~c}if(r=Me(t,t===Cs?Ns:0),e=De,0===r)null!==n&&(n!==xi&&Ei(n),t.callbackNode=null,t.callbackPriority=0);else{if(null!==n){if(t.callbackPriority===e)return;n!==xi&&Ei(n)}15===e?(n=fu.bind(null,t),null===Di?(Di=[n],Li=_i(ki,Wi)):Di.push(n),n=xi):n=14===e?Bi(99,fu.bind(null,t)):Bi(n=function(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(a(358,t))}}(e),lu.bind(null,t)),t.callbackPriority=e,t.callbackNode=n}}function lu(t){if(tu=-1,nu=eu=0,0!=(48&Ss))throw Error(a(327));var e=t.callbackNode;if(Cu()&&t.callbackNode!==e)return null;var n=Me(t,t===Cs?Ns:0);if(0===n)return null;var r=n,i=Ss;Ss|=16;var o=mu();for(Cs===t&&Ns===r||(Vs(),vu(t,r));;)try{wu();break}catch(e){yu(t,e)}if(Xi(),Is.current=o,Ss=i,null!==ks?r=0:(Cs=null,Ns=0,r=Os),0!=(Rs&Ls))vu(t,0);else if(0!==r){if(2===r&&(Ss|=64,t.hydrate&&(t.hydrate=!1,Br(t.containerInfo)),0!==(n=Fe(t))&&(r=gu(t,n))),1===r)throw e=xs,vu(t,0),hu(t,n),cu(t,ji()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=n,r){case 0:case 1:throw Error(a(345));case 2:Iu(t);break;case 3:if(hu(t,n),(62914560&n)===n&&10<(r=js+500-ji())){if(0!==Me(t,0))break;if(((i=t.suspendedLanes)&n)!==n){ou(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Vr(Iu.bind(null,t),r);break}Iu(t);break;case 4:if(hu(t,n),(4186112&n)===n)break;for(r=t.eventTimes,i=-1;0<n;){var s=31-Be(n);o=1<<s,(s=r[s])>i&&(i=s),n&=~o}if(n=i,10<(n=(120>(n=ji()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Es(n/1960))-n)){t.timeoutHandle=Vr(Iu.bind(null,t),n);break}Iu(t);break;case 5:Iu(t);break;default:throw Error(a(329))}}return cu(t,ji()),t.callbackNode===e?lu.bind(null,t):null}function hu(t,e){for(e&=~Ms,e&=~Ls,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Be(e),r=1<<n;t[n]=-1,e&=~r}}function fu(t){if(0!=(48&Ss))throw Error(a(327));if(Cu(),t===Cs&&0!=(t.expiredLanes&Ns)){var e=Ns,n=gu(t,e);0!=(Rs&Ls)&&(n=gu(t,e=Me(t,e)))}else n=gu(t,e=Me(t,0));if(0!==t.tag&&2===n&&(Ss|=64,t.hydrate&&(t.hydrate=!1,Br(t.containerInfo)),0!==(e=Fe(t))&&(n=gu(t,e))),1===n)throw n=xs,vu(t,0),hu(t,e),cu(t,ji()),n;return t.finishedWork=t.current.alternate,t.finishedLanes=e,Iu(t),cu(t,ji()),null}function pu(t,e){ai(Ps,As),As|=e,Rs|=e}function du(){As=Ps.current,oi(Ps)}function vu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,qr(n)),null!==ks)for(n=ks.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&pi();break;case 3:Po(),oi(ci),oi(ui),Go();break;case 5:xo(r);break;case 4:Po();break;case 13:case 19:oi(Ro);break;case 10:$i(r);break;case 23:case 24:du()}n=n.return}Cs=t,ks=Fu(t.current,null),Ns=As=Rs=e,Os=0,xs=null,Ms=Ls=Ds=0}function yu(t,e){for(;;){var n=ks;try{if(Xi(),Ho.current=ka,$o){for(var r=Jo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}$o=!1}if(Qo=0,Xo=Yo=Jo=null,Zo=!1,Ts.current=null,null===n||null===n.return){Os=1,xs=e,ks=null;break}t:{var o=t,a=n.return,s=n,u=e;if(e=Ns,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"==typeof u&&"function"==typeof u.then){var c=u;if(0==(2&s.mode)){var l=s.alternate;l?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.lanes=l.lanes):(s.updateQueue=null,s.memoizedState=null)}var h=0!=(1&Ro.current),f=a;do{var p;if(p=13===f.tag){var d=f.memoizedState;if(null!==d)p=null!==d.dehydrated;else{var v=f.memoizedProps;p=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!h)}}if(p){var y=f.updateQueue;if(null===y){var m=new Set;m.add(c),f.updateQueue=m}else y.add(c);if(0==(2&f.mode)){if(f.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var g=oo(-1,1);g.tag=2,ao(s,g)}s.lanes|=1;break t}u=void 0,s=e;var b=o.pingCache;if(null===b?(b=o.pingCache=new is,u=new Set,b.set(c,u)):void 0===(u=b.get(c))&&(u=new Set,b.set(c,u)),!u.has(s)){u.add(s);var w=xu.bind(null,o,c,s);c.then(w,w)}f.flags|=4096,f.lanes=e;break t}f=f.return}while(null!==f);u=Error((K(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Os&&(Os=2),u=ns(u,s),f=a;do{switch(f.tag){case 3:o=u,f.flags|=4096,e&=-e,f.lanes|=e,so(f,os(0,o,e));break t;case 1:o=u;var _=f.type,E=f.stateNode;if(0==(64&f.flags)&&("function"==typeof _.getDerivedStateFromError||null!==E&&"function"==typeof E.componentDidCatch&&(null===Gs||!Gs.has(E)))){f.flags|=4096,e&=-e,f.lanes|=e,so(f,as(f,o,e));break t}}f=f.return}while(null!==f)}Eu(n)}catch(t){e=t,ks===n&&null!==n&&(ks=n=n.return);continue}break}}function mu(){var t=Is.current;return Is.current=ka,null===t?ka:t}function gu(t,e){var n=Ss;Ss|=16;var r=mu();for(Cs===t&&Ns===e||vu(t,e);;)try{bu();break}catch(e){yu(t,e)}if(Xi(),Ss=n,Is.current=r,null!==ks)throw Error(a(261));return Cs=null,Ns=0,Os}function bu(){for(;null!==ks;)_u(ks)}function wu(){for(;null!==ks&&!Ii();)_u(ks)}function _u(t){var e=qs(t.alternate,t,As);t.memoizedProps=t.pendingProps,null===e?Eu(t):ks=e,Ts.current=null}function Eu(t){var e=t;do{var n=e.alternate;if(t=e.return,0==(2048&e.flags)){if(null!==(n=ts(n,e,As)))return void(ks=n);if(24!==(n=e).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&As)||0==(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==t&&0==(2048&t.flags)&&(null===t.firstEffect&&(t.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(null!==t.lastEffect?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}else{if(null!==(n=es(e)))return n.flags&=2047,void(ks=n);null!==t&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}if(null!==(e=e.sibling))return void(ks=e);ks=e=t}while(null!==e);0===Os&&(Os=5)}function Iu(t){var e=Ui();return qi(99,Tu.bind(null,t,e)),null}function Tu(t,e){do{Cu()}while(null!==Ks);if(0!=(48&Ss))throw Error(a(327));var n=t.finishedWork;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(a(177));t.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;for(var s=t.eventTimes,u=t.expirationTimes;0<o;){var c=31-Be(o),l=1<<c;i[c]=0,s[c]=-1,u[c]=-1,o&=~l}if(null!==Xs&&0==(24&r)&&Xs.has(t)&&Xs.delete(t),t===Cs&&(ks=Cs=null,Ns=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Ss,Ss|=32,Ts.current=null,Mr=Ke,fr(s=hr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else t:if(u=(u=s.ownerDocument)&&u.defaultView||window,(l=u.getSelection&&u.getSelection())&&0!==l.rangeCount){u=l.anchorNode,o=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{u.nodeType,c.nodeType}catch(t){u=null;break t}var h=0,f=-1,p=-1,d=0,v=0,y=s,m=null;e:for(;;){for(var g;y!==u||0!==o&&3!==y.nodeType||(f=h+o),y!==c||0!==l&&3!==y.nodeType||(p=h+l),3===y.nodeType&&(h+=y.nodeValue.length),null!==(g=y.firstChild);)m=y,y=g;for(;;){if(y===s)break e;if(m===u&&++d===o&&(f=h),m===c&&++v===l&&(p=h),null!==(g=y.nextSibling))break;m=(y=m).parentNode}y=g}u=-1===f||-1===p?null:{start:f,end:p}}else u=null;u=u||{start:0,end:0}}else u=null;Fr={focusedElem:s,selectionRange:u},Ke=!1,ru=null,iu=!1,Bs=r;do{try{Su()}catch(t){if(null===Bs)throw Error(a(330));Ou(Bs,t),Bs=Bs.nextEffect}}while(null!==Bs);ru=null,Bs=r;do{try{for(s=t;null!==Bs;){var b=Bs.flags;if(16&b&&mt(Bs.stateNode,""),128&b){var w=Bs.alternate;if(null!==w){var _=w.ref;null!==_&&("function"==typeof _?_(null):_.current=null)}}switch(1038&b){case 2:vs(Bs),Bs.flags&=-3;break;case 6:vs(Bs),Bs.flags&=-3,bs(Bs.alternate,Bs);break;case 1024:Bs.flags&=-1025;break;case 1028:Bs.flags&=-1025,bs(Bs.alternate,Bs);break;case 4:bs(Bs.alternate,Bs);break;case 8:gs(s,u=Bs);var E=u.alternate;ps(u),null!==E&&ps(E)}Bs=Bs.nextEffect}}catch(t){if(null===Bs)throw Error(a(330));Ou(Bs,t),Bs=Bs.nextEffect}}while(null!==Bs);if(_=Fr,w=hr(),b=_.focusedElem,s=_.selectionRange,w!==b&&b&&b.ownerDocument&&lr(b.ownerDocument.documentElement,b)){null!==s&&fr(b)&&(w=s.start,void 0===(_=s.end)&&(_=w),"selectionStart"in b?(b.selectionStart=w,b.selectionEnd=Math.min(_,b.value.length)):(_=(w=b.ownerDocument||document)&&w.defaultView||window).getSelection&&(_=_.getSelection(),u=b.textContent.length,E=Math.min(s.start,u),s=void 0===s.end?E:Math.min(s.end,u),!_.extend&&E>s&&(u=s,s=E,E=u),u=cr(b,E),o=cr(b,s),u&&o&&(1!==_.rangeCount||_.anchorNode!==u.node||_.anchorOffset!==u.offset||_.focusNode!==o.node||_.focusOffset!==o.offset)&&((w=w.createRange()).setStart(u.node,u.offset),_.removeAllRanges(),E>s?(_.addRange(w),_.extend(o.node,o.offset)):(w.setEnd(o.node,o.offset),_.addRange(w))))),w=[];for(_=b;_=_.parentNode;)1===_.nodeType&&w.push({element:_,left:_.scrollLeft,top:_.scrollTop});for("function"==typeof b.focus&&b.focus(),b=0;b<w.length;b++)(_=w[b]).element.scrollLeft=_.left,_.element.scrollTop=_.top}Ke=!!Mr,Fr=Mr=null,t.current=n,Bs=r;do{try{for(b=t;null!==Bs;){var I=Bs.flags;if(36&I&&ls(b,Bs.alternate,Bs),128&I){w=void 0;var T=Bs.ref;if(null!==T){var S=Bs.stateNode;switch(Bs.tag){case 5:w=S;break;default:w=S}"function"==typeof T?T(w):T.current=w}}Bs=Bs.nextEffect}}catch(t){if(null===Bs)throw Error(a(330));Ou(Bs,t),Bs=Bs.nextEffect}}while(null!==Bs);Bs=null,Ri(),Ss=i}else t.current=n;if(Hs)Hs=!1,Ks=t,Qs=e;else for(Bs=r;null!==Bs;)e=Bs.nextEffect,Bs.nextEffect=null,8&Bs.flags&&((I=Bs).sibling=null,I.stateNode=null),Bs=e;if(0===(r=t.pendingLanes)&&(Gs=null),1===r?t===Zs?$s++:($s=0,Zs=t):$s=0,n=n.stateNode,bi&&"function"==typeof bi.onCommitFiberRoot)try{bi.onCommitFiberRoot(gi,n,void 0,64==(64&n.current.flags))}catch(t){}if(cu(t,ji()),zs)throw zs=!1,t=Ws,Ws=null,t;return 0!=(8&Ss)||zi(),null}function Su(){for(;null!==Bs;){var t=Bs.alternate;iu||null===ru||(0!=(8&Bs.flags)?$t(Bs,ru)&&(iu=!0):13===Bs.tag&&_s(t,Bs)&&$t(Bs,ru)&&(iu=!0));var e=Bs.flags;0!=(256&e)&&cs(t,Bs),0==(512&e)||Hs||(Hs=!0,Bi(97,(function(){return Cu(),null}))),Bs=Bs.nextEffect}}function Cu(){if(90!==Qs){var t=97<Qs?97:Qs;return Qs=90,qi(t,Au)}return!1}function ku(t,e){Js.push(e,t),Hs||(Hs=!0,Bi(97,(function(){return Cu(),null})))}function Nu(t,e){Ys.push(e,t),Hs||(Hs=!0,Bi(97,(function(){return Cu(),null})))}function Au(){if(null===Ks)return!1;var t=Ks;if(Ks=null,0!=(48&Ss))throw Error(a(331));var e=Ss;Ss|=32;var n=Ys;Ys=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"==typeof s)try{s()}catch(t){if(null===o)throw Error(a(330));Ou(o,t)}}for(n=Js,Js=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var u=i.create;i.destroy=u()}catch(t){if(null===o)throw Error(a(330));Ou(o,t)}}for(u=t.current.firstEffect;null!==u;)t=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=t;return Ss=e,zi(),!0}function Pu(t,e,n){ao(t,e=os(0,e=ns(n,e),1)),e=ou(),null!==(t=uu(t,1))&&(qe(t,1,e),cu(t,e))}function Ou(t,e){if(3===t.tag)Pu(t,t,e);else for(var n=t.return;null!==n;){if(3===n.tag){Pu(n,t,e);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Gs||!Gs.has(r))){var i=as(n,t=ns(e,t),1);if(ao(n,i),i=ou(),null!==(n=uu(n,1)))qe(n,1,i),cu(n,i);else if("function"==typeof r.componentDidCatch&&(null===Gs||!Gs.has(r)))try{r.componentDidCatch(e,t)}catch(t){}break}}n=n.return}}function xu(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),e=ou(),t.pingedLanes|=t.suspendedLanes&n,Cs===t&&(Ns&n)===n&&(4===Os||3===Os&&(62914560&Ns)===Ns&&500>ji()-js?vu(t,0):Ms|=n),cu(t,e)}function Ru(t,e){var n=t.stateNode;null!==n&&n.delete(e),0==(e=0)&&(0==(2&(e=t.mode))?e=1:0==(4&e)?e=99===Ui()?1:2:(0===eu&&(eu=Rs),0===(e=Ue(62914560&~eu))&&(e=4194304))),n=ou(),null!==(t=uu(t,e))&&(qe(t,e,n),cu(t,n))}function Du(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Lu(t,e,n,r){return new Du(t,e,n,r)}function Mu(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Fu(t,e){var n=t.alternate;return null===n?((n=Lu(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ju(t,e,n,r,i,o){var s=2;if(r=t,"function"==typeof t)Mu(t)&&(s=1);else if("string"==typeof t)s=5;else t:switch(t){case T:return Uu(n.children,i,o,e);case M:s=8,i|=16;break;case S:s=8,i|=1;break;case C:return(t=Lu(12,n,e,8|i)).elementType=C,t.type=C,t.lanes=o,t;case P:return(t=Lu(13,n,e,i)).type=P,t.elementType=P,t.lanes=o,t;case O:return(t=Lu(19,n,e,i)).elementType=O,t.lanes=o,t;case F:return Vu(n,i,o,e);case j:return(t=Lu(24,n,e,i)).elementType=j,t.lanes=o,t;default:if("object"==typeof t&&null!==t)switch(t.$$typeof){case k:s=10;break t;case N:s=9;break t;case A:s=11;break t;case x:s=14;break t;case R:s=16,r=null;break t;case D:s=22;break t}throw Error(a(130,null==t?t:typeof t,""))}return(e=Lu(s,n,e,i)).elementType=t,e.type=r,e.lanes=o,e}function Uu(t,e,n,r){return(t=Lu(7,t,r,e)).lanes=n,t}function Vu(t,e,n,r){return(t=Lu(23,t,r,e)).elementType=F,t.lanes=n,t}function qu(t,e,n){return(t=Lu(6,t,null,e)).lanes=n,t}function Bu(t,e,n){return(e=Lu(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function zu(t,e,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Ve(0),this.expirationTimes=Ve(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ve(0),this.mutableSourceEagerHydrationData=null}function Wu(t,e,n,r){var i=e.current,o=ou(),s=au(i);t:if(n){e:{if(Jt(n=n._reactInternals)!==n||1!==n.tag)throw Error(a(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(fi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(null!==u);throw Error(a(171))}if(1===n.tag){var c=n.type;if(fi(c)){n=vi(n,c,u);break t}}n=u}else n=si;return null===e.context?e.context=n:e.pendingContext=n,(e=oo(o,s)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),ao(i,e),su(i,s,o),s}function Gu(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function Hu(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Ku(t,e){Hu(t,e),(t=t.alternate)&&Hu(t,e)}function Qu(t,e,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new zu(t,e,null!=n&&!0===n.hydrate),e=Lu(3,null,null,2===e?7:1===e?3:0),n.current=e,e.stateNode=n,ro(e),t[Jr]=n.current,kr(8===t.nodeType?t.parentNode:t),r)for(t=0;t<r.length;t++){var i=(e=r[t])._getVersion;i=i(e._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[e,i]:n.mutableSourceEagerHydrationData.push(e,i)}this._internalRoot=n}function Ju(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Yu(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"==typeof i){var s=i;i=function(){var t=Gu(a);s.call(t)}}Wu(e,a,t,i)}else{if(o=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new Qu(t,0,e?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"==typeof i){var u=i;i=function(){var t=Gu(a);u.call(t)}}!function(t,e){var n=Ss;Ss&=-2,Ss|=8;try{t(e)}finally{0===(Ss=n)&&(Vs(),zi())}}((function(){Wu(e,a,t,i)}))}return Gu(a)}qs=function(t,e,n){var r=e.lanes;if(null!==t)if(t.memoizedProps!==e.pendingProps||ci.current)xa=!0;else{if(0==(n&r)){switch(xa=!1,e.tag){case 3:Ba(e),zo();break;case 5:Oo(e);break;case 1:fi(e.type)&&yi(e);break;case 4:Ao(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value;var i=e.type._context;ai(Ki,i._currentValue),i._currentValue=r;break;case 13:if(null!==e.memoizedState)return 0!=(n&e.child.childLanes)?Ka(t,e,n):(ai(Ro,1&Ro.current),null!==(e=$a(t,e,n))?e.sibling:null);ai(Ro,1&Ro.current);break;case 19:if(r=0!=(n&e.childLanes),0!=(64&t.flags)){if(r)return Xa(t,e,n);e.flags|=64}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ai(Ro,Ro.current),r)break;return null;case 23:case 24:return e.lanes=0,Fa(t,e,n)}return $a(t,e,n)}xa=0!=(16384&t.flags)}else xa=!1;switch(e.lanes=0,e.tag){case 2:if(r=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=hi(e,ui.current),to(e,n),i=na(null,e,r,t,i,n),e.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,fi(r)){var o=!0;yi(e)}else o=!1;e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ro(e);var s=r.getDerivedStateFromProps;"function"==typeof s&&ho(e,r,s,t),i.updater=fo,e.stateNode=i,i._reactInternals=e,mo(e,r,t,n),e=qa(null,e,r,!0,o,n)}else e.tag=0,Ra(null,e,i,n),e=e.child;return e;case 16:i=e.elementType;t:{switch(null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=(o=i._init)(i._payload),e.type=i,o=e.tag=function(t){if("function"==typeof t)return Mu(t)?1:0;if(null!=t){if((t=t.$$typeof)===A)return 11;if(t===x)return 14}return 2}(i),t=Hi(i,t),o){case 0:e=Ua(null,e,i,t,n);break t;case 1:e=Va(null,e,i,t,n);break t;case 11:e=Da(null,e,i,t,n);break t;case 14:e=La(null,e,i,Hi(i.type,t),r,n);break t}throw Error(a(306,i,""))}return e;case 0:return r=e.type,i=e.pendingProps,Ua(t,e,r,i=e.elementType===r?i:Hi(r,i),n);case 1:return r=e.type,i=e.pendingProps,Va(t,e,r,i=e.elementType===r?i:Hi(r,i),n);case 3:if(Ba(e),r=e.updateQueue,null===t||null===r)throw Error(a(282));if(r=e.pendingProps,i=null!==(i=e.memoizedState)?i.element:null,io(t,e),uo(e,r,null,n),(r=e.memoizedState.element)===i)zo(),e=$a(t,e,n);else{if((o=(i=e.stateNode).hydrate)&&(Mo=zr(e.stateNode.containerInfo.firstChild),Lo=e,o=Fo=!0),o){if(null!=(t=i.mutableSourceEagerHydrationData))for(i=0;i<t.length;i+=2)(o=t[i])._workInProgressVersionPrimary=t[i+1],Wo.push(o);for(n=Io(e,null,r,n),e.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Ra(t,e,r,n),zo();e=e.child}return e;case 5:return Oo(e),null===t&&Vo(e),r=e.type,i=e.pendingProps,o=null!==t?t.memoizedProps:null,s=i.children,Ur(r,i)?s=null:null!==o&&Ur(r,o)&&(e.flags|=16),ja(t,e),Ra(t,e,s,n),e.child;case 6:return null===t&&Vo(e),null;case 13:return Ka(t,e,n);case 4:return Ao(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=Eo(e,null,r,n):Ra(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,Da(t,e,r,i=e.elementType===r?i:Hi(r,i),n);case 7:return Ra(t,e,e.pendingProps,n),e.child;case 8:case 12:return Ra(t,e,e.pendingProps.children,n),e.child;case 10:t:{r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value;var u=e.type._context;if(ai(Ki,u._currentValue),u._currentValue=o,null!==s)if(u=s.value,0==(o=or(u,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(s.children===i.children&&!ci.current){e=$a(t,e,n);break t}}else for(null!==(u=e.child)&&(u.return=e);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!=(l.observedBits&o)){1===u.tag&&((l=oo(-1,n&-n)).tag=2,ao(u,l)),u.lanes|=n,null!==(l=u.alternate)&&(l.lanes|=n),Zi(u.return,n),c.lanes|=n;break}l=l.next}}else s=10===u.tag&&u.type===e.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===e){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Ra(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=(o=e.pendingProps).children,to(e,n),r=r(i=eo(i,o.unstable_observedBits)),e.flags|=1,Ra(t,e,r,n),e.child;case 14:return o=Hi(i=e.type,e.pendingProps),La(t,e,i,o=Hi(i.type,o),r,n);case 15:return Ma(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Hi(r,i),null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,fi(r)?(t=!0,yi(e)):t=!1,to(e,n),vo(e,r,i),mo(e,r,i,n),qa(null,e,r,!0,t,n);case 19:return Xa(t,e,n);case 23:case 24:return Fa(t,e,n)}throw Error(a(156,e.tag))},Qu.prototype.render=function(t){Wu(t,this._internalRoot,null,null)},Qu.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;Wu(null,t,null,(function(){e[Jr]=null}))},Zt=function(t){13===t.tag&&(su(t,4,ou()),Ku(t,4))},te=function(t){13===t.tag&&(su(t,67108864,ou()),Ku(t,67108864))},ee=function(t){if(13===t.tag){var e=ou(),n=au(t);su(t,n,e),Ku(t,n)}},ne=function(t,e){return e()},Ct=function(t,e,n){switch(e){case"input":if(nt(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ti(r);if(!i)throw Error(a(90));X(r),nt(r,i)}}}break;case"textarea":ct(t,n);break;case"select":null!=(e=n.value)&&at(t,!!n.multiple,e,!1)}},xt=function(t,e){var n=Ss;Ss|=1;try{return t(e)}finally{0===(Ss=n)&&(Vs(),zi())}},Rt=function(t,e,n,r,i){var o=Ss;Ss|=4;try{return qi(98,t.bind(null,e,n,r,i))}finally{0===(Ss=o)&&(Vs(),zi())}},Dt=function(){0==(49&Ss)&&(function(){if(null!==Xs){var t=Xs;Xs=null,t.forEach((function(t){t.expiredLanes|=24&t.pendingLanes,cu(t,ji())}))}zi()}(),Cu())},Lt=function(t,e){var n=Ss;Ss|=2;try{return t(e)}finally{0===(Ss=n)&&(Vs(),zi())}};var Xu={findFiberByHostInstance:Xr,bundleType:0,version:"17.0.1",rendererPackageName:"react-dom"},$u={bundleType:Xu.bundleType,version:Xu.version,rendererPackageName:Xu.rendererPackageName,rendererConfig:Xu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=function(t){if(!(t=function(t){var e=t.alternate;if(!e){if(null===(e=Jt(t)))throw Error(a(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Xt(i),t;if(o===r)return Xt(i),e;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?t:e}(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}(t))?null:t.stateNode},findFiberByHostInstance:Xu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Zu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zu.isDisabled&&Zu.supportsFiber)try{gi=Zu.inject($u),bi=Zu}catch(vt){}}e.render=function(t,e,n){if(!Ju(e))throw Error(a(200));return Yu(null,t,e,!1,n)}},116:(t,e,n)=>{"use strict";!function t(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(t){console.error(t)}}(),t.exports=n(748)},88:t=>{"use strict";var e=Array.isArray,n=Object.keys,r=Object.prototype.hasOwnProperty,i="undefined"!=typeof Element;function o(t,a){if(t===a)return!0;if(t&&a&&"object"==typeof t&&"object"==typeof a){var s,u,c,l=e(t),h=e(a);if(l&&h){if((u=t.length)!=a.length)return!1;for(s=u;0!=s--;)if(!o(t[s],a[s]))return!1;return!0}if(l!=h)return!1;var f=t instanceof Date,p=a instanceof Date;if(f!=p)return!1;if(f&&p)return t.getTime()==a.getTime();var d=t instanceof RegExp,v=a instanceof RegExp;if(d!=v)return!1;if(d&&v)return t.toString()==a.toString();var y=n(t);if((u=y.length)!==n(a).length)return!1;for(s=u;0!=s--;)if(!r.call(a,y[s]))return!1;if(i&&t instanceof Element&&a instanceof Element)return t===a;for(s=u;0!=s--;)if(!("_owner"===(c=y[s])&&t.$$typeof||o(t[c],a[c])))return!1;return!0}return t!=t&&a!=a}t.exports=function(t,e){try{return o(t,e)}catch(t){if(t.message&&t.message.match(/stack|recursion/i)||-2146828260===t.number)return console.warn("Warning: react-fast-compare does not handle circular references.",t.name,t.message),!1;throw t}}},751:(t,e,n)=>{"use strict";var r=n(347),i=60103,o=60106;e.Fragment=60107,e.StrictMode=60108,e.Profiler=60114;var a=60109,s=60110,u=60112;e.Suspense=60113;var c=60115,l=60116;if("function"==typeof Symbol&&Symbol.for){var h=Symbol.for;i=h("react.element"),o=h("react.portal"),e.Fragment=h("react.fragment"),e.StrictMode=h("react.strict_mode"),e.Profiler=h("react.profiler"),a=h("react.provider"),s=h("react.context"),u=h("react.forward_ref"),e.Suspense=h("react.suspense"),c=h("react.memo"),l=h("react.lazy")}var f="function"==typeof Symbol&&Symbol.iterator;function p(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function y(t,e,n){this.props=t,this.context=e,this.refs=v,this.updater=n||d}function m(){}function g(t,e,n){this.props=t,this.context=e,this.refs=v,this.updater=n||d}y.prototype.isReactComponent={},y.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error(p(85));this.updater.enqueueSetState(this,t,e,"setState")},y.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},m.prototype=y.prototype;var b=g.prototype=new m;b.constructor=g,r(b,y.prototype),b.isPureReactComponent=!0;var w={current:null},_=Object.prototype.hasOwnProperty,E={key:!0,ref:!0,__self:!0,__source:!0};function I(t,e,n){var r,o={},a=null,s=null;if(null!=e)for(r in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)_.call(e,r)&&!E.hasOwnProperty(r)&&(o[r]=e[r]);var u=arguments.length-2;if(1===u)o.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];o.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps)void 0===o[r]&&(o[r]=u[r]);return{$$typeof:i,type:t,key:a,ref:s,props:o,_owner:w.current}}function T(t){return"object"==typeof t&&null!==t&&t.$$typeof===i}var S=/\/+/g;function C(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function k(t,e,n,r,a){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var u=!1;if(null===t)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case i:case o:u=!0}}if(u)return a=a(u=t),t=""===r?"."+C(u,0):r,Array.isArray(a)?(n="",null!=t&&(n=t.replace(S,"$&/")+"/"),k(a,e,n,"",(function(t){return t}))):null!=a&&(T(a)&&(a=function(t,e){return{$$typeof:i,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(a,n+(!a.key||u&&u.key===a.key?"":(""+a.key).replace(S,"$&/")+"/")+t)),e.push(a)),1;if(u=0,r=""===r?".":r+":",Array.isArray(t))for(var c=0;c<t.length;c++){var l=r+C(s=t[c],c);u+=k(s,e,n,l,a)}else if("function"==typeof(l=function(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=f&&t[f]||t["@@iterator"])?t:null}(t)))for(t=l.call(t),c=0;!(s=t.next()).done;)u+=k(s=s.value,e,n,l=r+C(s,c++),a);else if("object"===s)throw e=""+t,Error(p(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e));return u}function N(t,e,n){if(null==t)return t;var r=[],i=0;return k(t,r,"","",(function(t){return e.call(n,t,i++)})),r}function A(t){if(-1===t._status){var e=t._result;e=e(),t._status=0,t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}if(1===t._status)return t._result;throw t._result}var P={current:null};function O(){var t=P.current;if(null===t)throw Error(p(321));return t}var x={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:r};e.Children={map:N,forEach:function(t,e,n){N(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return N(t,(function(){e++})),e},toArray:function(t){return N(t,(function(t){return t}))||[]},only:function(t){if(!T(t))throw Error(p(143));return t}},e.Component=y,e.PureComponent=g,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=x,e.cloneElement=function(t,e,n){if(null==t)throw Error(p(267,t));var o=r({},t.props),a=t.key,s=t.ref,u=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,u=w.current),void 0!==e.key&&(a=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(l in e)_.call(e,l)&&!E.hasOwnProperty(l)&&(o[l]=void 0===e[l]&&void 0!==c?c[l]:e[l])}var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){c=Array(l);for(var h=0;h<l;h++)c[h]=arguments[h+2];o.children=c}return{$$typeof:i,type:t.type,key:a,ref:s,props:o,_owner:u}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:s,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:a,_context:t},t.Consumer=t},e.createElement=I,e.createFactory=function(t){var e=I.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:u,render:t}},e.isValidElement=T,e.lazy=function(t){return{$$typeof:l,_payload:{_status:-1,_result:t},_init:A}},e.memo=function(t,e){return{$$typeof:c,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return O().useCallback(t,e)},e.useContext=function(t,e){return O().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return O().useEffect(t,e)},e.useImperativeHandle=function(t,e,n){return O().useImperativeHandle(t,e,n)},e.useLayoutEffect=function(t,e){return O().useLayoutEffect(t,e)},e.useMemo=function(t,e){return O().useMemo(t,e)},e.useReducer=function(t,e,n){return O().useReducer(t,e,n)},e.useRef=function(t){return O().useRef(t)},e.useState=function(t){return O().useState(t)},e.version="17.0.1"},466:(t,e,n)=>{"use strict";t.exports=n(751)},189:(t,e,n)=>{"use strict";var r=String.prototype.replace,i=/%20/g,o=n(576),a={RFC1738:"RFC1738",RFC3986:"RFC3986"};t.exports=o.assign({default:a.RFC3986,formatters:{RFC1738:function(t){return r.call(t,i,"+")},RFC3986:function(t){return String(t)}}},a)},327:(t,e,n)=>{"use strict";var r=n(308),i=n(695),o=n(189);t.exports={formats:o,parse:i,stringify:r}},695:(t,e,n)=>{"use strict";var r=n(576),i=Object.prototype.hasOwnProperty,o=Array.isArray,a={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:r.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},s=function(t){return t.replace(/&#(\d+);/g,(function(t,e){return String.fromCharCode(parseInt(e,10))}))},u=function(t,e){return t&&"string"==typeof t&&e.comma&&t.indexOf(",")>-1?t.split(","):t},c=function(t,e,n,r){if(t){var o=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,a=/(\[[^[\]]*])/g,s=n.depth>0&&/(\[[^[\]]*])/.exec(o),c=s?o.slice(0,s.index):o,l=[];if(c){if(!n.plainObjects&&i.call(Object.prototype,c)&&!n.allowPrototypes)return;l.push(c)}for(var h=0;n.depth>0&&null!==(s=a.exec(o))&&h<n.depth;){if(h+=1,!n.plainObjects&&i.call(Object.prototype,s[1].slice(1,-1))&&!n.allowPrototypes)return;l.push(s[1])}return s&&l.push("["+o.slice(s.index)+"]"),function(t,e,n,r){for(var i=r?e:u(e,n),o=t.length-1;o>=0;--o){var a,s=t[o];if("[]"===s&&n.parseArrays)a=[].concat(i);else{a=n.plainObjects?Object.create(null):{};var c="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,l=parseInt(c,10);n.parseArrays||""!==c?!isNaN(l)&&s!==c&&String(l)===c&&l>=0&&n.parseArrays&&l<=n.arrayLimit?(a=[])[l]=i:a[c]=i:a={0:i}}i=a}return i}(l,e,n,r)}};t.exports=function(t,e){var n=function(t){if(!t)return a;if(null!==t.decoder&&void 0!==t.decoder&&"function"!=typeof t.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var e=void 0===t.charset?a.charset:t.charset;return{allowDots:void 0===t.allowDots?a.allowDots:!!t.allowDots,allowPrototypes:"boolean"==typeof t.allowPrototypes?t.allowPrototypes:a.allowPrototypes,arrayLimit:"number"==typeof t.arrayLimit?t.arrayLimit:a.arrayLimit,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:a.charsetSentinel,comma:"boolean"==typeof t.comma?t.comma:a.comma,decoder:"function"==typeof t.decoder?t.decoder:a.decoder,delimiter:"string"==typeof t.delimiter||r.isRegExp(t.delimiter)?t.delimiter:a.delimiter,depth:"number"==typeof t.depth||!1===t.depth?+t.depth:a.depth,ignoreQueryPrefix:!0===t.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof t.interpretNumericEntities?t.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:"number"==typeof t.parameterLimit?t.parameterLimit:a.parameterLimit,parseArrays:!1!==t.parseArrays,plainObjects:"boolean"==typeof t.plainObjects?t.plainObjects:a.plainObjects,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:a.strictNullHandling}}(e);if(""===t||null==t)return n.plainObjects?Object.create(null):{};for(var l="string"==typeof t?function(t,e){var n,c={},l=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,h=e.parameterLimit===1/0?void 0:e.parameterLimit,f=l.split(e.delimiter,h),p=-1,d=e.charset;if(e.charsetSentinel)for(n=0;n<f.length;++n)0===f[n].indexOf("utf8=")&&("utf8=%E2%9C%93"===f[n]?d="utf-8":"utf8=%26%2310003%3B"===f[n]&&(d="iso-8859-1"),p=n,n=f.length);for(n=0;n<f.length;++n)if(n!==p){var v,y,m=f[n],g=m.indexOf("]="),b=-1===g?m.indexOf("="):g+1;-1===b?(v=e.decoder(m,a.decoder,d,"key"),y=e.strictNullHandling?null:""):(v=e.decoder(m.slice(0,b),a.decoder,d,"key"),y=r.maybeMap(u(m.slice(b+1),e),(function(t){return e.decoder(t,a.decoder,d,"value")}))),y&&e.interpretNumericEntities&&"iso-8859-1"===d&&(y=s(y)),m.indexOf("[]=")>-1&&(y=o(y)?[y]:y),i.call(c,v)?c[v]=r.combine(c[v],y):c[v]=y}return c}(t,n):t,h=n.plainObjects?Object.create(null):{},f=Object.keys(l),p=0;p<f.length;++p){var d=f[p],v=c(d,l[d],n,"string"==typeof t);h=r.merge(h,v,n)}return r.compact(h)}},308:(t,e,n)=>{"use strict";var r=n(576),i=n(189),o=Object.prototype.hasOwnProperty,a={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},s=Array.isArray,u=Array.prototype.push,c=function(t,e){u.apply(t,s(e)?e:[e])},l=Date.prototype.toISOString,h=i.default,f={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:r.encode,encodeValuesOnly:!1,format:h,formatter:i.formatters[h],indices:!1,serializeDate:function(t){return l.call(t)},skipNulls:!1,strictNullHandling:!1},p=function t(e,n,i,o,a,u,l,h,p,d,v,y,m){var g,b=e;if("function"==typeof l?b=l(n,b):b instanceof Date?b=d(b):"comma"===i&&s(b)&&(b=r.maybeMap(b,(function(t){return t instanceof Date?d(t):t})).join(",")),null===b){if(o)return u&&!y?u(n,f.encoder,m,"key"):n;b=""}if("string"==typeof(g=b)||"number"==typeof g||"boolean"==typeof g||"symbol"==typeof g||"bigint"==typeof g||r.isBuffer(b))return u?[v(y?n:u(n,f.encoder,m,"key"))+"="+v(u(b,f.encoder,m,"value"))]:[v(n)+"="+v(String(b))];var w,_=[];if(void 0===b)return _;if(s(l))w=l;else{var E=Object.keys(b);w=h?E.sort(h):E}for(var I=0;I<w.length;++I){var T=w[I],S=b[T];if(!a||null!==S){var C=s(b)?"function"==typeof i?i(n,T):n:n+(p?"."+T:"["+T+"]");c(_,t(S,C,i,o,a,u,l,h,p,d,v,y,m))}}return _};t.exports=function(t,e){var n,r=t,u=function(t){if(!t)return f;if(null!==t.encoder&&void 0!==t.encoder&&"function"!=typeof t.encoder)throw new TypeError("Encoder has to be a function.");var e=t.charset||f.charset;if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=i.default;if(void 0!==t.format){if(!o.call(i.formatters,t.format))throw new TypeError("Unknown format option provided.");n=t.format}var r=i.formatters[n],a=f.filter;return("function"==typeof t.filter||s(t.filter))&&(a=t.filter),{addQueryPrefix:"boolean"==typeof t.addQueryPrefix?t.addQueryPrefix:f.addQueryPrefix,allowDots:void 0===t.allowDots?f.allowDots:!!t.allowDots,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:f.charsetSentinel,delimiter:void 0===t.delimiter?f.delimiter:t.delimiter,encode:"boolean"==typeof t.encode?t.encode:f.encode,encoder:"function"==typeof t.encoder?t.encoder:f.encoder,encodeValuesOnly:"boolean"==typeof t.encodeValuesOnly?t.encodeValuesOnly:f.encodeValuesOnly,filter:a,formatter:r,serializeDate:"function"==typeof t.serializeDate?t.serializeDate:f.serializeDate,skipNulls:"boolean"==typeof t.skipNulls?t.skipNulls:f.skipNulls,sort:"function"==typeof t.sort?t.sort:null,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:f.strictNullHandling}}(e);"function"==typeof u.filter?r=(0,u.filter)("",r):s(u.filter)&&(n=u.filter);var l,h=[];if("object"!=typeof r||null===r)return"";l=e&&e.arrayFormat in a?e.arrayFormat:e&&"indices"in e?e.indices?"indices":"repeat":"indices";var d=a[l];n||(n=Object.keys(r)),u.sort&&n.sort(u.sort);for(var v=0;v<n.length;++v){var y=n[v];u.skipNulls&&null===r[y]||c(h,p(r[y],y,d,u.strictNullHandling,u.skipNulls,u.encode?u.encoder:null,u.filter,u.sort,u.allowDots,u.serializeDate,u.formatter,u.encodeValuesOnly,u.charset))}var m=h.join(u.delimiter),g=!0===u.addQueryPrefix?"?":"";return u.charsetSentinel&&("iso-8859-1"===u.charset?g+="utf8=%26%2310003%3B&":g+="utf8=%E2%9C%93&"),m.length>0?g+m:""}},576:t=>{"use strict";var e=Object.prototype.hasOwnProperty,n=Array.isArray,r=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),i=function(t,e){for(var n=e&&e.plainObjects?Object.create(null):{},r=0;r<t.length;++r)void 0!==t[r]&&(n[r]=t[r]);return n};t.exports={arrayToObject:i,assign:function(t,e){return Object.keys(e).reduce((function(t,n){return t[n]=e[n],t}),t)},combine:function(t,e){return[].concat(t,e)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],r=[],i=0;i<e.length;++i)for(var o=e[i],a=o.obj[o.prop],s=Object.keys(a),u=0;u<s.length;++u){var c=s[u],l=a[c];"object"==typeof l&&null!==l&&-1===r.indexOf(l)&&(e.push({obj:a,prop:c}),r.push(l))}return function(t){for(;t.length>1;){var e=t.pop(),r=e.obj[e.prop];if(n(r)){for(var i=[],o=0;o<r.length;++o)void 0!==r[o]&&i.push(r[o]);e.obj[e.prop]=i}}}(e),t},decode:function(t,e,n){var r=t.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(t){return r}},encode:function(t,e,n){if(0===t.length)return t;var i=t;if("symbol"==typeof t?i=Symbol.prototype.toString.call(t):"string"!=typeof t&&(i=String(t)),"iso-8859-1"===n)return escape(i).replace(/%u[0-9a-f]{4}/gi,(function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"}));for(var o="",a=0;a<i.length;++a){var s=i.charCodeAt(a);45===s||46===s||95===s||126===s||s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122?o+=i.charAt(a):s<128?o+=r[s]:s<2048?o+=r[192|s>>6]+r[128|63&s]:s<55296||s>=57344?o+=r[224|s>>12]+r[128|s>>6&63]+r[128|63&s]:(a+=1,s=65536+((1023&s)<<10|1023&i.charCodeAt(a)),o+=r[240|s>>18]+r[128|s>>12&63]+r[128|s>>6&63]+r[128|63&s])}return o},isBuffer:function(t){return!(!t||"object"!=typeof t||!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t)))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},maybeMap:function(t,e){if(n(t)){for(var r=[],i=0;i<t.length;i+=1)r.push(e(t[i]));return r}return e(t)},merge:function t(r,o,a){if(!o)return r;if("object"!=typeof o){if(n(r))r.push(o);else{if(!r||"object"!=typeof r)return[r,o];(a&&(a.plainObjects||a.allowPrototypes)||!e.call(Object.prototype,o))&&(r[o]=!0)}return r}if(!r||"object"!=typeof r)return[r].concat(o);var s=r;return n(r)&&!n(o)&&(s=i(r,a)),n(r)&&n(o)?(o.forEach((function(n,i){if(e.call(r,i)){var o=r[i];o&&"object"==typeof o&&n&&"object"==typeof n?r[i]=t(o,n,a):r.push(n)}else r[i]=n})),r):Object.keys(o).reduce((function(n,r){var i=o[r];return e.call(n,r)?n[r]=t(n[r],i,a):n[r]=i,n}),s)}}},794:(t,e)=>{"use strict";var n,r,i,o;if("object"==typeof performance&&"function"==typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,u=s.now();e.unstable_now=function(){return s.now()-u}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var c=null,l=null,h=function(){if(null!==c)try{var t=e.unstable_now();c(!0,t),c=null}catch(t){throw setTimeout(h,0),t}};n=function(t){null!==c?setTimeout(n,0,t):(c=t,setTimeout(h,0))},r=function(t,e){l=setTimeout(t,e)},i=function(){clearTimeout(l)},e.unstable_shouldYield=function(){return!1},o=e.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,p=window.clearTimeout;if("undefined"!=typeof console){var d=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof d&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,y=null,m=-1,g=5,b=0;e.unstable_shouldYield=function(){return e.unstable_now()>=b},o=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<t?Math.floor(1e3/t):5};var w=new MessageChannel,_=w.port2;w.port1.onmessage=function(){if(null!==y){var t=e.unstable_now();b=t+g;try{y(!0,t)?_.postMessage(null):(v=!1,y=null)}catch(t){throw _.postMessage(null),t}}else v=!1},n=function(t){y=t,v||(v=!0,_.postMessage(null))},r=function(t,n){m=f((function(){t(e.unstable_now())}),n)},i=function(){p(m),m=-1}}function E(t,e){var n=t.length;t.push(e);t:for(;;){var r=n-1>>>1,i=t[r];if(!(void 0!==i&&0<S(i,e)))break t;t[r]=e,t[n]=i,n=r}}function I(t){return void 0===(t=t[0])?null:t}function T(t){var e=t[0];if(void 0!==e){var n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length;r<i;){var o=2*(r+1)-1,a=t[o],s=o+1,u=t[s];if(void 0!==a&&0>S(a,n))void 0!==u&&0>S(u,a)?(t[r]=u,t[s]=n,r=s):(t[r]=a,t[o]=n,r=o);else{if(!(void 0!==u&&0>S(u,n)))break t;t[r]=u,t[s]=n,r=s}}}return e}return null}function S(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}var C=[],k=[],N=1,A=null,P=3,O=!1,x=!1,R=!1;function D(t){for(var e=I(k);null!==e;){if(null===e.callback)T(k);else{if(!(e.startTime<=t))break;T(k),e.sortIndex=e.expirationTime,E(C,e)}e=I(k)}}function L(t){if(R=!1,D(t),!x)if(null!==I(C))x=!0,n(M);else{var e=I(k);null!==e&&r(L,e.startTime-t)}}function M(t,n){x=!1,R&&(R=!1,i()),O=!0;var o=P;try{for(D(n),A=I(C);null!==A&&(!(A.expirationTime>n)||t&&!e.unstable_shouldYield());){var a=A.callback;if("function"==typeof a){A.callback=null,P=A.priorityLevel;var s=a(A.expirationTime<=n);n=e.unstable_now(),"function"==typeof s?A.callback=s:A===I(C)&&T(C),D(n)}else T(C);A=I(C)}if(null!==A)var u=!0;else{var c=I(k);null!==c&&r(L,c.startTime-n),u=!1}return u}finally{A=null,P=o,O=!1}}var F=o;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){x||O||(x=!0,n(M))},e.unstable_getCurrentPriorityLevel=function(){return P},e.unstable_getFirstCallbackNode=function(){return I(C)},e.unstable_next=function(t){switch(P){case 1:case 2:case 3:var e=3;break;default:e=P}var n=P;P=e;try{return t()}finally{P=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=F,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=P;P=t;try{return e()}finally{P=n}},e.unstable_scheduleCallback=function(t,o,a){var s=e.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?s+a:s,t){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return t={id:N++,callback:o,priorityLevel:t,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>s?(t.sortIndex=a,E(k,t),null===I(C)&&t===I(k)&&(R?i():R=!0,r(L,a-s))):(t.sortIndex=u,E(C,t),x||O||(x=!0,n(M))),t},e.unstable_wrapCallback=function(t){var e=P;return function(){var n=P;P=e;try{return t.apply(this,arguments)}finally{P=n}}}},767:(t,e,n)=>{"use strict";t.exports=n(794)},622:(t,e,n)=>{"use strict";n.d(e,{ZT:()=>i,pi:()=>o,mG:()=>a,Jh:()=>s,XA:()=>u,CR:()=>c,fl:()=>l,pr:()=>h});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function s(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function l(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}function h(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}},749:function(t,e,n){var r;t=n.nmd(t),function(i){e&&e.nodeType,t&&t.nodeType;var o="object"==typeof n.g&&n.g;o.global!==o&&o.window!==o&&o.self;var a,s=2147483647,u=36,c=/^xn--/,l=/[^\x20-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,d=String.fromCharCode;function v(t){throw RangeError(f[t])}function y(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function m(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+y((t=t.replace(h,".")).split("."),e).join(".")}function g(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function b(t){return y(t,(function(t){var e="";return t>65535&&(e+=d((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+d(t)})).join("")}function w(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function _(t,e,n){var r=0;for(t=n?p(t/700):t>>1,t+=p(t/e);t>455;r+=u)t=p(t/35);return p(r+36*t/(t+38))}function E(t){var e,n,r,i,o,a,c,l,h,f,d,y=[],m=t.length,g=0,w=128,E=72;for((n=t.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&v("not-basic"),y.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<m;){for(o=g,a=1,c=u;i>=m&&v("invalid-input"),((l=(d=t.charCodeAt(i++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:u)>=u||l>p((s-g)/a))&&v("overflow"),g+=l*a,!(l<(h=c<=E?1:c>=E+26?26:c-E));c+=u)a>p(s/(f=u-h))&&v("overflow"),a*=f;E=_(g-o,e=y.length+1,0==o),p(g/e)>s-w&&v("overflow"),w+=p(g/e),g%=e,y.splice(g++,0,w)}return b(y)}function I(t){var e,n,r,i,o,a,c,l,h,f,y,m,b,E,I,T=[];for(m=(t=g(t)).length,e=128,n=0,o=72,a=0;a<m;++a)(y=t[a])<128&&T.push(d(y));for(r=i=T.length,i&&T.push("-");r<m;){for(c=s,a=0;a<m;++a)(y=t[a])>=e&&y<c&&(c=y);for(c-e>p((s-n)/(b=r+1))&&v("overflow"),n+=(c-e)*b,e=c,a=0;a<m;++a)if((y=t[a])<e&&++n>s&&v("overflow"),y==e){for(l=n,h=u;!(l<(f=h<=o?1:h>=o+26?26:h-o));h+=u)I=l-f,E=u-f,T.push(d(w(f+I%E,0))),l=p(I/E);T.push(d(w(l,0))),o=_(n,b,r==i),n=0,++r}++n,++e}return T.join("")}a={version:"1.3.2",ucs2:{decode:g,encode:b},decode:E,encode:I,toASCII:function(t){return m(t,(function(t){return l.test(t)?"xn--"+I(t):t}))},toUnicode:function(t){return m(t,(function(t){return c.test(t)?E(t.slice(4).toLowerCase()):t}))}},void 0===(r=function(){return a}.call(e,n,e,t))||(t.exports=r)}()},149:(t,e,n)=>{"use strict";var r=n(749),i=n(249);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.DB=function(t,e){return b(t,!1,!0).resolve(e)};var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(c),h=["%","/","?",";","#"].concat(l),f=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},g=n(126);function b(t,e,n){if(t&&i.isObject(t)&&t instanceof o)return t;var r=new o;return r.parse(t,e,n),r}o.prototype.parse=function(t,e,n){if(!i.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),s=-1!==o&&o<t.indexOf("#")?"?":"#",c=t.split(s);c[0]=c[0].replace(/\\/g,"/");var b=t=c.join(s);if(b=b.trim(),!n&&1===t.split("#").length){var w=u.exec(b);if(w)return this.path=b,this.href=b,this.pathname=w[1],w[2]?(this.search=w[2],this.query=e?g.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var _=a.exec(b);if(_){var E=(_=_[0]).toLowerCase();this.protocol=E,b=b.substr(_.length)}if(n||_||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var I="//"===b.substr(0,2);!I||_&&y[_]||(b=b.substr(2),this.slashes=!0)}if(!y[_]&&(I||_&&!m[_])){for(var T,S,C=-1,k=0;k<f.length;k++)-1!==(N=b.indexOf(f[k]))&&(-1===C||N<C)&&(C=N);for(-1!==(S=-1===C?b.lastIndexOf("@"):b.lastIndexOf("@",C))&&(T=b.slice(0,S),b=b.slice(S+1),this.auth=decodeURIComponent(T)),C=-1,k=0;k<h.length;k++){var N;-1!==(N=b.indexOf(h[k]))&&(-1===C||N<C)&&(C=N)}-1===C&&(C=b.length),this.host=b.slice(0,C),b=b.slice(C),this.parseHost(),this.hostname=this.hostname||"";var A="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!A)for(var P=this.hostname.split(/\./),O=(k=0,P.length);k<O;k++){var x=P[k];if(x&&!x.match(p)){for(var R="",D=0,L=x.length;D<L;D++)x.charCodeAt(D)>127?R+="x":R+=x[D];if(!R.match(p)){var M=P.slice(0,k),F=P.slice(k+1),j=x.match(d);j&&(M.push(j[1]),F.unshift(j[2])),F.length&&(b="/"+F.join(".")+b),this.hostname=M.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),A||(this.hostname=r.toASCII(this.hostname));var U=this.port?":"+this.port:"",V=this.hostname||"";this.host=V+U,this.href+=this.host,A&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!v[E])for(k=0,O=l.length;k<O;k++){var q=l[k];if(-1!==b.indexOf(q)){var B=encodeURIComponent(q);B===q&&(B=escape(q)),b=b.split(q).join(B)}}var z=b.indexOf("#");-1!==z&&(this.hash=b.substr(z),b=b.slice(0,z));var W=b.indexOf("?");if(-1!==W?(this.search=b.substr(W),this.query=b.substr(W+1),e&&(this.query=g.parse(this.query)),b=b.slice(0,W)):e&&(this.search="",this.query={}),b&&(this.pathname=b),m[E]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){U=this.pathname||"";var G=this.search||"";this.path=U+G}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,a="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(a=g.stringify(this.query));var s=this.search||a&&"?"+a||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||m[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),e+o+(n=n.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(s=s.replace("#","%23"))+r},o.prototype.resolve=function(t){return this.resolveObject(b(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(i.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var n=new o,r=Object.keys(this),a=0;a<r.length;a++){var s=r[a];n[s]=this[s]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var u=Object.keys(t),c=0;c<u.length;c++){var l=u[c];"protocol"!==l&&(n[l]=t[l])}return m[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!m[t.protocol]){for(var h=Object.keys(t),f=0;f<h.length;f++){var p=h[f];n[p]=t[p]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||y[t.protocol])n.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var v=n.pathname||"",g=n.search||"";n.path=v+g}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var b=n.pathname&&"/"===n.pathname.charAt(0),w=t.host||t.pathname&&"/"===t.pathname.charAt(0),_=w||b||n.host&&t.pathname,E=_,I=n.pathname&&n.pathname.split("/")||[],T=(d=t.pathname&&t.pathname.split("/")||[],n.protocol&&!m[n.protocol]);if(T&&(n.hostname="",n.port=null,n.host&&(""===I[0]?I[0]=n.host:I.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),_=_&&(""===d[0]||""===I[0])),w)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,I=d;else if(d.length)I||(I=[]),I.pop(),I=I.concat(d),n.search=t.search,n.query=t.query;else if(!i.isNullOrUndefined(t.search))return T&&(n.hostname=n.host=I.shift(),(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.host=n.hostname=A.shift())),n.search=t.search,n.query=t.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!I.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var S=I.slice(-1)[0],C=(n.host||t.host||I.length>1)&&("."===S||".."===S)||""===S,k=0,N=I.length;N>=0;N--)"."===(S=I[N])?I.splice(N,1):".."===S?(I.splice(N,1),k++):k&&(I.splice(N,1),k--);if(!_&&!E)for(;k--;k)I.unshift("..");!_||""===I[0]||I[0]&&"/"===I[0].charAt(0)||I.unshift(""),C&&"/"!==I.join("/").substr(-1)&&I.push("");var A,P=""===I[0]||I[0]&&"/"===I[0].charAt(0);return T&&(n.hostname=n.host=P?"":I.length?I.shift():"",(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.host=n.hostname=A.shift())),(_=_||n.host&&I.length)&&!P&&I.unshift(""),I.length?n.pathname=I.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var t=this.host,e=s.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},249:t=>{"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}}},e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";var t=n(466),e=n(116),r=n(856);(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},i=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g,t];for(var e=0;e<t.length;++e){var r=t[e];if(r&&r.Math==Math)return r}return globalThis}(this);function o(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function a(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:o(t)}}!function(t,n){if(n){var r=i;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in r||(r[a]={}),r=r[a]}(n=n(o=r[t=t[t.length-1]]))!=o&&null!=n&&e(r,t,{configurable:!0,writable:!0,value:n})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.a=null}function r(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var o=i.setTimeout;n.prototype.c=function(t){o(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.v),reject:t(this.g)}},e.prototype.v=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.o(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.m(t):this.h(t)}},e.prototype.m=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new n;return e.prototype.o=function(t){var e=this.f();t.Pa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.Pa(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Pa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=r,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var i=a(t),o=i.next();!o.done;o=i.next())r(o.value).Pa(e,n)}))},e.all=function(t){var n=a(t),i=n.next();return i.done?r([]):new e((function(t,e){function o(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,r(i.value).Pa(o(a.length-1),e),i=n.next()}while(!i.done)}))},e}));var s=s||{},u=this||self,c=/^[\w+/_-]+[=]{0,2}$/,l=null;function h(){}function f(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function p(t){var e=f(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==f(t)}function v(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function y(t){return Object.prototype.hasOwnProperty.call(t,m)&&t[m]||(t[m]=++g)}var m="closure_uid_"+(1e9*Math.random()>>>0),g=0;function b(t,e,n){return t.call.apply(t.bind,arguments)}function w(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function _(t,e,n){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:w).apply(null,arguments)}function E(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var I=Date.now||function(){return+new Date};function T(t,e){function n(){}n.prototype=e.prototype,t.$a=e.prototype,t.prototype=new n,t.prototype.constructor=t}function S(t,e,n){this.code=N+t,this.message=e||A[t]||"",this.a=n||null}function C(t){var e=t&&t.code;return e?new S(e.substring(N.length),t.message,t.serverResponse):null}T(S,Error),S.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},S.prototype.toJSON=function(){return this.w()};var k,N="auth/",A={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},P={kd:{Sa:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},rd:{Sa:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://securetoken.googleapis.com/v1/token",Va:"https://identitytoolkit.googleapis.com/v2/",id:"p"},td:{Sa:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},ud:{Sa:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Ya:"https://test-securetoken.sandbox.googleapis.com/v1/token",Va:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function O(t){for(var e in P)if(P[e].id===t)return{firebaseEndpoint:(t=P[e]).Sa,secureTokenEndpoint:t.Ya,identityPlatformEndpoint:t.Va};return null}function x(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function R(t){if(Error.captureStackTrace)Error.captureStackTrace(this,R);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function D(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");R.call(this,n+t[r])}function L(t,e){throw new D("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function M(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function F(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function j(){this.b=this.a=null}k=O("__EID__")?"__EID__":void 0,T(R,Error),R.prototype.name="CustomError",T(D,R),D.prototype.name="AssertionError",M.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var U=new M((function(){return new q}),(function(t){t.reset()}));function V(){var t=me,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function q(){this.next=this.b=this.a=null}j.prototype.add=function(t,e){var n=U.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},q.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},q.prototype.reset=function(){this.next=this.b=this.a=null};var B=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},z=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},W=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,a=0;a<n;a++)if(a in o){var s=o[a];e.call(void 0,s,a,t)&&(r[i++]=s)}return r},G=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},H=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function K(t,e){return 0<=B(t,e)}function Q(t,e){var n;return(n=0<=(e=B(t,e)))&&Array.prototype.splice.call(t,e,1),n}function J(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1).length}))}function Y(t){return Array.prototype.concat.apply([],arguments)}function X(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var $,Z=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},tt=/&/g,et=/</g,nt=/>/g,rt=/"/g,it=/'/g,ot=/\x00/g,at=/[\x00&<>"']/;function st(t,e){return-1!=t.indexOf(e)}function ut(t,e){return t<e?-1:t>e?1:0}t:{var ct=u.navigator;if(ct){var lt=ct.userAgent;if(lt){$=lt;break t}}$=""}function ht(t){return st($,t)}function ft(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function pt(t){for(var e in t)return!1;return!0}function dt(t){var e,n={};for(e in t)n[e]=t[e];return n}var vt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<vt.length;o++)n=vt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function mt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||u).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(v(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;L("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function gt(t,e){this.a=t===_t&&e||"",this.b=wt}function bt(t){return t instanceof gt&&t.constructor===gt&&t.b===wt?t.a:(L("expected object of type Const, got '"+t+"'"),"type_error:Const")}gt.prototype.sa=!0,gt.prototype.ra=function(){return this.a},gt.prototype.toString=function(){return"Const{"+this.a+"}"};var wt={},_t={},Et=new gt(_t,"");function It(t,e){this.a=t===At&&e||"",this.b=Nt}function Tt(t){return t instanceof It&&t.constructor===It&&t.b===Nt?t.a:(L("expected object of type TrustedResourceUrl, got '"+t+"' of type "+f(t)),"type_error:TrustedResourceUrl")}function St(t,e){var n=bt(t);if(!kt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return t=n.replace(Ct,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof gt?bt(t):encodeURIComponent(String(t))})),new It(At,t)}It.prototype.sa=!0,It.prototype.ra=function(){return this.a.toString()},It.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Ct=/%{(\w+)}/g,kt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Nt={},At={};function Pt(t,e){this.a=t===Lt&&e||"",this.b=Dt}function Ot(t){return t instanceof Pt&&t.constructor===Pt&&t.b===Dt?t.a:(L("expected object of type SafeUrl, got '"+t+"' of type "+f(t)),"type_error:SafeUrl")}Pt.prototype.sa=!0,Pt.prototype.ra=function(){return this.a.toString()},Pt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var xt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Rt(t){return t instanceof Pt?t:(t="object"==typeof t&&t.sa?t.ra():String(t),xt.test(t)||(t="about:invalid#zClosurez"),new Pt(Lt,t))}var Dt={},Lt={};function Mt(){this.a="",this.b=jt}function Ft(t){return t instanceof Mt&&t.constructor===Mt&&t.b===jt?t.a:(L("expected object of type SafeHtml, got '"+t+"' of type "+f(t)),"type_error:SafeHtml")}Mt.prototype.sa=!0,Mt.prototype.ra=function(){return this.a.toString()},Mt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var jt={};function Ut(t){var e=new Mt;return e.a=t,e}Ut("<!DOCTYPE html>");var Vt=Ut("");function qt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Bt(t){return at.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(tt,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(et,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(nt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(rt,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(it,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(ot,"&#0;"))),t}function zt(t){return zt[" "](t),t}Ut("<br>"),zt[" "]=h;var Wt,Gt,Ht=ht("Opera"),Kt=ht("Trident")||ht("MSIE"),Qt=ht("Edge"),Jt=Qt||Kt,Yt=ht("Gecko")&&!(st($.toLowerCase(),"webkit")&&!ht("Edge"))&&!(ht("Trident")||ht("MSIE"))&&!ht("Edge"),Xt=st($.toLowerCase(),"webkit")&&!ht("Edge");function $t(){var t=u.document;return t?t.documentMode:void 0}t:{var Zt="",te=(Gt=$,Yt?/rv:([^\);]+)(\)|;)/.exec(Gt):Qt?/Edge\/([\d\.]+)/.exec(Gt):Kt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Gt):Xt?/WebKit\/(\S+)/.exec(Gt):Ht?/(?:Version)[ \/]?(\S+)/.exec(Gt):void 0);if(te&&(Zt=te?te[1]:""),Kt){var ee=$t();if(null!=ee&&ee>parseFloat(Zt)){Wt=String(ee);break t}}Wt=Zt}var ne,re={};function ie(t){return function(t,e){var n=re;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=Z(String(Wt)).split("."),r=Z(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=ut(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ut(0==a[2].length,0==s[2].length)||ut(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}ne=u.document&&Kt?$t():void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Gt){}var oe=!Kt||9<=Number(ne);function ae(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function se(t,e){ft(e,(function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:le.hasOwnProperty(n)?t.setAttribute(le[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var ue,ce,le={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function he(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];!p(o)||v(o)&&0<o.nodeType?r(o):z(pe(o)?X(o):o,r)}}function fe(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function pe(t){if(t&&"number"==typeof t.length){if(v(t))return"function"==typeof t.item||"string"==typeof t.item;if(d(t))return"function"==typeof t.item}return!1}function de(t){u.setTimeout((function(){throw t}),0)}function ve(t,e){ce||function(){if(u.Promise&&u.Promise.resolve){var t=u.Promise.resolve(void 0);ce=function(){t.then(ge)}}else ce=function(){var t=ge;!d(u.setImmediate)||u.Window&&u.Window.prototype&&!ht("Edge")&&u.Window.prototype.setImmediate==u.setImmediate?(ue||(ue=function(){var t=u.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ht("Presto")&&(t=function(){var t=fe(document,"IFRAME");t.style.display="none",function(t){var e=new It(At,bt(Et));mt(t,"HTMLIFrameElement"),t.src=Tt(e).toString()}(t),document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(Ft(Vt)),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=_((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ht("Trident")&&!ht("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Fb;n.Fb=null,t()}},function(t){r.next={Fb:t},r=r.next,e.port2.postMessage(0)}}return function(t){u.setTimeout(t,0)}}()),ue(t)):u.setImmediate(t)}}(),ye||(ce(),ye=!0),me.add(t,e)}var ye=!1,me=new j;function ge(){for(var t;t=V();){try{t.a.call(t.b)}catch(t){de(t)}F(U,t)}ye=!1}function be(t,e){if(this.a=we,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=h)try{var n=this;t.call(e,(function(t){Re(n,_e,t)}),(function(t){if(!(t instanceof Ve))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Re(n,Ee,t)}))}catch(t){Re(this,Ee,t)}}var we=0,_e=2,Ee=3;function Ie(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ie.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Te=new M((function(){return new Ie}),(function(t){t.reset()}));function Se(t,e,n){var r=Te.get();return r.g=t,r.b=e,r.f=n,r}function Ce(t){if(t instanceof be)return t;var e=new be(h);return Re(e,_e,t),e}function ke(t){return new be((function(e,n){n(t)}))}function Ne(t,e,n){De(t,e,n,null)||ve(E(e,t))}function Ae(t){return new be((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Ob:!0,value:o}:{Ob:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Ne(t[o],E(i,o,!0),E(i,o,!1));else e(r)}))}function Pe(t,e){if(t.a==we)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==t&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==we&&1==r?Pe(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Me(n),Fe(n,i,Ee,e)))}t.c=null}else Re(t,Ee,e)}function Oe(t,e){t.b||t.a!=_e&&t.a!=Ee||Le(t),t.f?t.f.next=e:t.b=e,t.f=e}function xe(t,e,n,r){var i=Se(null,null,null);return i.a=new be((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Ve?o(e):t(i)}catch(t){o(t)}}:o})),i.a.c=t,Oe(t,i),i.a}function Re(t,e,n){t.a==we&&(t===n&&(e=Ee,n=new TypeError("Promise cannot resolve to itself")),t.a=1,De(n,t.Zc,t.$c,t)||(t.i=n,t.a=e,t.c=null,Le(t),e!=Ee||n instanceof Ve||function(t,e){t.g=!0,ve((function(){t.g&&Ue.call(null,e)}))}(t,n)))}function De(t,e,n,r){if(t instanceof be)return Oe(t,Se(e||h,n||null,r)),!0;if(x(t))return t.then(e,n,r),!0;if(v(t))try{var i=t.then;if(d(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,(function(t){a||(a=!0,n.call(i,t))}),o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function Le(t){t.h||(t.h=!0,ve(t.fc,t))}function Me(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Fe(t,e,n,r){if(n==Ee&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,je(e,n,r);else try{e.c?e.g.call(e.f):je(e,n,r)}catch(t){Ue.call(null,t)}F(Te,e)}function je(t,e,n){e==_e?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}be.prototype.then=function(t,e,n){return xe(this,d(t)?t:null,d(e)?e:null,n)},be.prototype.$goog_Thenable=!0,(t=be.prototype).na=function(t,e){return(t=Se(t,t,e)).c=!0,Oe(this,t),this},t.s=function(t,e){return xe(this,null,t,e)},t.cancel=function(t){if(this.a==we){var e=new Ve(t);ve((function(){Pe(this,e)}),this)}},t.Zc=function(t){this.a=we,Re(this,_e,t)},t.$c=function(t){this.a=we,Re(this,Ee,t)},t.fc=function(){for(var t;t=Me(this);)Fe(this,t,this.a,this.i);this.h=!1};var Ue=de;function Ve(t){R.call(this,t)}function qe(){0!=Be&&(ze[y(this)]=this),this.xa=this.xa,this.oa=this.oa}T(Ve,R),Ve.prototype.name="cancel";var Be=0,ze={};function We(t){if(!t.xa&&(t.xa=!0,t.Da(),0!=Be)){var e=y(t);if(0!=Be&&t.oa&&0<t.oa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete ze[e]}}qe.prototype.xa=!1,qe.prototype.Da=function(){if(this.oa)for(;this.oa.length;)this.oa.shift()()};var Ge=Object.freeze||function(t){return t},He=!Kt||9<=Number(ne),Ke=Kt&&!ie("9"),Qe=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{u.addEventListener("test",h,e),u.removeEventListener("test",h,e)}catch(t){}return t}();function Je(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Ye(t,e){if(Je.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Yt){t:{try{zt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Xe[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Je.prototype.preventDefault=function(){this.defaultPrevented=!0},T(Ye,Je);var Xe=Ge({2:"touch",3:"pen",4:"mouse"});Ye.prototype.preventDefault=function(){Ye.$a.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ke)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Ye.prototype.g=function(){return this.a};var $e="closure_listenable_"+(1e6*Math.random()|0),Ze=0;function tn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ua=i,this.key=++Ze,this.va=this.Oa=!1}function en(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Ua=null}function nn(t){this.src=t,this.a={},this.b=0}function rn(t,e){var n=e.type;n in t.a&&Q(t.a[n],e)&&(en(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function on(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Ua==r)return i}return-1}nn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=on(t,e,r,i);return-1<a?(e=t[a],n||(e.Oa=!1)):((e=new tn(e,this.src,o,!!r,i)).Oa=n,t.push(e)),e};var an="closure_lm_"+(1e6*Math.random()|0),sn={};function un(t,e,n,r,i){if(r&&r.once)ln(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)un(t,e[o],n,r,i);else n=bn(n),t&&t[$e]?_n(t,e,n,v(r)?!!r.capture:!!r,i):cn(t,e,n,!1,r,i)}function cn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=v(i)?!!i.capture:!!i,s=mn(t);if(s||(t[an]=s=new nn(t)),!(n=s.add(e,n,r,a,o)).proxy)if(r=function(){var t=yn,e=He?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Qe||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(pn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function ln(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ln(t,e[o],n,r,i);else n=bn(n),t&&t[$e]?En(t,e,n,v(r)?!!r.capture:!!r,i):cn(t,e,n,!0,r,i)}function hn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=bn(n),t&&t[$e]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=on(o=t.a[e],n,r,i))&&(en(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=mn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=on(e,n,r,i)),(n=-1<t?e[t]:null)&&fn(n))}function fn(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[$e])rn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(pn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=mn(e))?(rn(n,t),0==n.b&&(n.src=null,e[an]=null)):en(t)}}}function pn(t){return t in sn?sn[t]:sn[t]="on"+t}function dn(t,e,n,r){var i=!0;if((t=mn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=vn(o,r),i=i&&!1!==o)}return i}function vn(t,e){var n=t.listener,r=t.Ua||t.src;return t.Oa&&fn(t),n.call(r,e)}function yn(t,e){if(t.va)return!0;if(!He){if(!e)t:{e=["window","event"];for(var n=u,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Ye(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=dn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=dn(r[i],t,!1,e),n=n&&o}return n}return vn(t,new Ye(e,this))}function mn(t){return(t=t[an])instanceof nn?t:null}var gn="__closure_events_fn_"+(1e9*Math.random()>>>0);function bn(t){return d(t)?t:(t[gn]||(t[gn]=function(e){return t.handleEvent(e)}),t[gn])}function wn(){qe.call(this),this.v=new nn(this),this.$b=this,this.fb=null}function _n(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function En(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function In(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.va&&a.capture==n){var s=a.listener,u=a.Ua||a.src;a.Oa&&rn(t.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function Tn(t,e,n){if(d(t))n&&(t=_(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=_(t.handleEvent,t)}return 2147483647<Number(e)?-1:u.setTimeout(t,e||0)}function Sn(t){var e=null;return new be((function(n,r){-1==(e=Tn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).s((function(t){throw u.clearTimeout(e),t}))}function Cn(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"==typeof t)return t.split("");if(p(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function kn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.V||"function"!=typeof t.V){if(p(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Nn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Nn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function An(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Pn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Pn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Pn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}T(wn,qe),wn.prototype[$e]=!0,wn.prototype.addEventListener=function(t,e,n,r){un(this,t,e,n,r)},wn.prototype.removeEventListener=function(t,e,n,r){hn(this,t,e,n,r)},wn.prototype.dispatchEvent=function(t){var e,n=this.fb;if(n)for(e=[];n;n=n.fb)e.push(n);n=this.$b;var r=t.type||t;if("string"==typeof t)t=new Je(t,n);else if(t instanceof Je)t.target=t.target||n;else{var i=t;yt(t=new Je(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=In(a,r,!0,t)&&i}if(i=In(a=t.b=n,r,!0,t)&&i,i=In(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=In(a=t.b=e[o],r,!1,t)&&i;return i},wn.prototype.Da=function(){if(wn.$a.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)en(n[r]);delete e.a[t],e.b--}}this.fb=null},(t=Nn.prototype).V=function(){An(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return An(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Pn(this.b,t)?this.b[t]:e},t.set=function(t,e){Pn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var On=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function xn(t,e){var n;this.a=this.l=this.f="",this.g=null,this.h=this.c="",this.i=!1,t instanceof xn?(this.i=void 0!==e?e:t.i,Rn(this,t.f),this.l=t.l,this.a=t.a,Dn(this,t.g),this.c=t.c,Ln(this,tr(t.b)),this.h=t.h):t&&(n=String(t).match(On))?(this.i=!!e,Rn(this,n[1]||"",!0),this.l=Vn(n[2]||""),this.a=Vn(n[3]||"",!0),Dn(this,n[4]),this.c=Vn(n[5]||"",!0),Ln(this,n[6]||"",!0),this.h=Vn(n[7]||"")):(this.i=!!e,this.b=new Qn(null,this.i))}function Rn(t,e,n){t.f=n?Vn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Dn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Ln(t,e,n){e instanceof Qn?(t.b=e,function(t,e){e&&!t.f&&(Jn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Xn(this,e),Zn(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=qn(e,Hn)),t.b=new Qn(e,t.i))}function Mn(t,e,n){t.b.set(e,n)}function Fn(t,e){return t.b.get(e)}function jn(t){return t instanceof xn?new xn(t):new xn(t,void 0)}function Un(t,e,n,r){var i=new xn(null,void 0);return t&&Rn(i,t),e&&(i.a=e),n&&Dn(i,n),r&&(i.c=r),i}function Vn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Bn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Bn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}xn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(qn(e,zn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(qn(e,zn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.c)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(qn(n,"/"==n.charAt(0)?Gn:Wn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",qn(n,Kn)),t.join("")},xn.prototype.resolve=function(t){var e=new xn(this),n=!!t.f;n?Rn(e,t.f):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.c;if(n)Dn(e,t.g);else if(n=!!t.c){if("/"!=r.charAt(0))if(this.a&&!this.c)r="/"+r;else{var i=e.c.lastIndexOf("/");-1!=i&&(r=e.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(st(i,"./")||st(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.c=r:n=""!==t.b.toString(),n?Ln(e,tr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var zn=/[#\/\?@]/g,Wn=/[#\?:]/g,Gn=/[#\?]/g,Hn=/[#\?@]/g,Kn=/#/g;function Qn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Jn(t){t.a||(t.a=new Nn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Yn(t){var e=kn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Qn(null,void 0);t=Cn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Zn(n,i,o):n.add(i,o)}return n}function Xn(t,e){Jn(t),e=er(t,e),Pn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Pn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&An(t)))}function $n(t,e){return Jn(t),e=er(t,e),Pn(t.a.b,e)}function Zn(t,e,n){Xn(t,e),0<n.length&&(t.c=null,t.a.set(er(t,e),X(n)),t.b+=n.length)}function tr(t){var e=new Qn;return e.c=t.c,t.a&&(e.a=new Nn(t.a),e.b=t.b),e}function er(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function nr(t){var e=[];return ir(new rr,t,e),e.join("")}function rr(){}function ir(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),ir(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&"function"!=typeof(o=e[r])&&(n.push(i),sr(r,n),n.push(":"),ir(t,o,n),i=",");return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":sr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=Qn.prototype).add=function(t,e){Jn(this),this.c=null,t=er(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Jn(this),this.a.forEach((function(n,r){z(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){Jn(this);for(var t=this.a.V(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.V=function(t){Jn(this);var e=[];if("string"==typeof t)$n(this,t)&&(e=Y(e,this.a.get(er(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=Y(e,t[n])}return e},t.set=function(t,e){return Jn(this),this.c=null,$n(this,t=er(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.V(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var or={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},ar=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function sr(t,e){e.push('"',t.replace(ar,(function(t){var e=or[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),or[t]=e),e})),'"')}function ur(){var t=Nr();return Kt&&!!ne&&11==ne||/Edge\/\d+/.test(t)}function cr(){return u.window&&u.window.location.href||self&&self.location&&self.location.href||""}function lr(t,e){e=e||u.window;var n="about:blank";t&&(n=Ot(Rt(t))),e.location.href=n}function hr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<hr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function fr(t){return!!((t=(t||Nr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function pr(t){t=t||u.window;try{t.close()}catch(t){}}function dr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Nr().toLowerCase(),r&&(e.target=r,st(n,"crios/")&&(e.target="_blank")),Sr(Nr())==Ir&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Pt?n:Rt(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((ht("iPhone")&&!ht("iPod")&&!ht("iPad")||ht("iPad")||ht("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(mt(a=fe(document,"A"),"HTMLAnchorElement"),e instanceof Pt||e instanceof Pt||(e="object"==typeof e&&e.sa?e.ra():String(e),xt.test(e)||(e="about:invalid#zClosurez"),e=new Pt(Lt,e)),a.href=Ot(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=r.open("",n,a),t=Ot(e),a&&(Jt&&st(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t=Ut('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Bt(t)+'">'),r=a.document)&&(r.write(Ft(t)),r.close())):(a=r.open(Ot(e),n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}var vr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yr=/^[^@]+@[^@]+$/;function mr(){var t=null;return new be((function(e){"complete"==u.document.readyState?e():(t=function(){e()},ln(window,"load",t))})).s((function(e){throw hn(window,"load",t),e}))}function gr(t){return t=t||Nr(),!("file:"!==Rr()&&"ionic:"!==Rr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function br(){var t=u.window;try{return!(!t||t==t.top)}catch(t){return!1}}function wr(){return void 0!==u.WorkerGlobalScope&&"function"==typeof u.importScripts}function _r(){return r.Z.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":r.Z.INTERNAL.hasOwnProperty("node")?"Node":wr()?"Worker":"Browser"}function Er(){var t=_r();return"ReactNative"===t||"Node"===t}var Ir="Firefox",Tr="Chrome";function Sr(t){var e=t.toLowerCase();return st(e,"opera/")||st(e,"opr/")||st(e,"opios/")?"Opera":st(e,"iemobile")?"IEMobile":st(e,"msie")||st(e,"trident/")?"IE":st(e,"edge/")?"Edge":st(e,"firefox/")?Ir:st(e,"silk/")?"Silk":st(e,"blackberry")?"Blackberry":st(e,"webos")?"Webos":!st(e,"safari/")||st(e,"chrome/")||st(e,"crios/")||st(e,"android")?!st(e,"chrome/")&&!st(e,"crios/")||st(e,"edge/")?st(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Tr:"Safari"}var Cr={ld:"FirebaseCore-web",nd:"FirebaseUI-web"};function kr(t,e){e=e||[];var n,r=[],i={};for(n in Cr)i[Cr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=_r())?r=Sr(i=Nr()):"Worker"===r&&(r=Sr(i=Nr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Nr(){return u.navigator&&u.navigator.userAgent||""}function Ar(t,e){t=t.split("."),e=e||u;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Pr(){try{var t=u.localStorage,e=jr();if(t)return t.setItem(e,"1"),t.removeItem(e),!ur()||!!u.indexedDB}catch(t){return wr()&&!!u.indexedDB}return!1}function Or(){return(xr()||"chrome-extension:"===Rr()||gr())&&!Er()&&Pr()&&!wr()}function xr(){return"http:"===Rr()||"https:"===Rr()}function Rr(){return u.location&&u.location.protocol||null}function Dr(t){return!fr(t=t||Nr())&&Sr(t)!=Ir}function Lr(t){return void 0===t?null:nr(t)}function Mr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Fr(t){if(null!==t)return JSON.parse(t)}function jr(t){return t||Math.floor(1e9*Math.random()).toString()}function Ur(t){return"Safari"!=Sr(t=t||Nr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Vr(){var t=u.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function qr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Nr(),e=_r(),this.b=fr(t)||"ReactNative"===e}function Br(){var t=u.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function zr(t){"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t)}function Wr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Gr(){return!(!Ar("fireauth.oauthhelper",u)&&!Ar("fireauth.iframe",u))}qr.prototype.get=function(){var t=u.navigator;return!t||"boolean"!=typeof t.onLine||!xr()&&"chrome-extension:"!==Rr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Hr,Kr={};function Qr(t){Kr[t]||(Kr[t]=!0,zr(t))}try{var Jr={};Object.defineProperty(Jr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Jr,"abcd",{configurable:!0,enumerable:!0,value:2}),Hr=2==Jr.abcd}catch(Gt){Hr=!1}function Yr(t,e,n){Hr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Xr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Yr(t,n,e[n])}function $r(t){var e={};return Xr(e,t),e}function Zr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Yr(e,n,Zr(t[n]));return e}function ti(t){var e=t&&(t[oi]?"phone":null);if(!(e&&t&&t[ii]))throw new S("internal-error","Internal assert: invalid MultiFactorInfo object");Yr(this,"uid",t[ii]),Yr(this,"displayName",t[ni]||null);var n=null;t[ri]&&(n=new Date(t[ri]).toUTCString()),Yr(this,"enrollmentTime",n),Yr(this,"factorId",e)}function ei(t){try{var e=new ai(t)}catch(t){e=null}return e}ti.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ni="displayName",ri="enrolledAt",ii="mfaEnrollmentId",oi="phoneInfo";function ai(t){ti.call(this,t),Yr(this,"phoneNumber",t[oi])}function si(t){var e={},n=t[hi],r=t[pi],i=t[di];if(t=ei(t[fi]),!i||i!=ci&&i!=li&&!n||i==li&&!r||i==ui&&!t)throw Error("Invalid checkActionCode response!");i==li?(e[yi]=n||null,e[gi]=n||null,e[vi]=r):(e[yi]=r||null,e[gi]=r||null,e[vi]=n||null),e[mi]=t||null,Yr(this,wi,i),Yr(this,bi,Zr(e))}T(ai,ti),ai.prototype.w=function(){var t=ai.$a.w.call(this);return t.phoneNumber=this.phoneNumber,t};var ui="REVERT_SECOND_FACTOR_ADDITION",ci="EMAIL_SIGNIN",li="VERIFY_AND_CHANGE_EMAIL",hi="email",fi="mfaInfo",pi="newEmail",di="requestType",vi="email",yi="fromEmail",mi="multiFactorInfo",gi="previousEmail",bi="data",wi="operation";function _i(t){var e=Fn(t=jn(t),Ei)||null,n=Fn(t,Ii)||null,r=Fn(t,Ci)||null;if(r=r&&Ni[r]||null,!e||!n||!r)throw new S("argument-error",Ei+", "+Ii+"and "+Ci+" are required in a valid action code URL.");Xr(this,{apiKey:e,operation:r,code:n,continueUrl:Fn(t,Ti)||null,languageCode:Fn(t,Si)||null,tenantId:Fn(t,ki)||null})}var Ei="apiKey",Ii="oobCode",Ti="continueUrl",Si="languageCode",Ci="mode",ki="tenantId",Ni={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:ui,signIn:ci,verifyAndChangeEmail:li,verifyEmail:"VERIFY_EMAIL"};function Ai(t){try{return new _i(t)}catch(t){return null}}function Pi(t){var e=t[Li];if(void 0===e)throw new S("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new S("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Oi];if(n&&"object"==typeof n){e=n[ji];var r=n[Mi];if(n=n[Fi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new S("argument-error",Mi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new S("argument-error",Fi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new S("argument-error",ji+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new S("missing-android-pkg-name")}}else if(void 0!==n)throw new S("argument-error",Oi+" property must be a non null object when specified.");if(this.f=null,(e=t[Di])&&"object"==typeof e){if("string"==typeof(e=e[Ui])&&e.length)this.f=e;else if(void 0!==e)throw new S("argument-error",Ui+" property must be a non empty string when specified.")}else if(void 0!==e)throw new S("argument-error",Di+" property must be a non null object when specified.");if(void 0!==(e=t[Ri])&&"boolean"!=typeof e)throw new S("argument-error",Ri+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[xi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new S("argument-error",xi+" property must be a non empty string when specified.");this.i=t||null}var Oi="android",xi="dynamicLinkDomain",Ri="handleCodeInApp",Di="iOS",Li="url",Mi="installApp",Fi="minimumVersion",ji="packageName",Ui="bundleId";function Vi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var qi=null;function Bi(t){var e=Wi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.g=t,this.c=e.exp,this.h=e.sub,I(),this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function zi(t){try{return new Bi(t)}catch(t){return null}}function Wi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(function(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=qi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!qi){qi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===qi[o]&&(qi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){e+=String.fromCharCode(t)})),e}(t))}catch(t){}return null}Bi.prototype.S=function(){return this.f},Bi.prototype.i=function(){return this.b},Bi.prototype.toString=function(){return this.g};var Gi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Hi=["client_id","response_type","scope","redirect_uri","state"],Ki={md:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Wa:Hi},od:{Ja:null,ua:500,ta:750,fa:"github.com",Wa:Hi},pd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Wa:Hi},vd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Wa:Gi},jd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Wa:[]}};function Qi(t){for(var e in Ki)if(Ki[e].fa==t)return Ki[e];return null}function Ji(t){var e={};e["facebook.com"]=to,e["google.com"]=no,e["github.com"]=eo,e["twitter.com"]=ro;var n=t&&t[Xi];try{if(n)return e[n]?new e[n](t):new Zi(t);if(void 0!==t[Yi])return new $i(t)}catch(t){}return null}var Yi="idToken",Xi="providerId";function $i(t){var e=t[Xi];if(!e&&t[Yi]){var n=zi(t[Yi]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Yr(this,"providerId",e),Yr(this,"isNewUser",n)}function Zi(t){$i.call(this,t),Yr(this,"profile",Zr((t=Fr(t.rawUserInfo||"{}"))||{}))}function to(t){if(Zi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function eo(t){if(Zi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Yr(this,"username",this.profile&&this.profile.login||null)}function no(t){if(Zi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function ro(t){if(Zi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Yr(this,"username",t.screenName||null)}function io(t){var e=jn(t),n=Fn(e,"link"),r=Fn(jn(n),"link");return e=Fn(e,"deep_link_id"),Fn(jn(e),"link")||e||r||n||t}function oo(t,e){if(!t&&!e)throw new S("internal-error","Internal assert: no raw session string available");if(t&&e)throw new S("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?ao:so}T(Zi,$i),T(to,Zi),T(eo,Zi),T(no,Zi),T(ro,Zi);var ao="enroll",so="signin";function uo(){}function co(t,e){return t.then((function(t){if(t[Xa]){var n=zi(t[Xa]);if(!n||e!=n.h)throw new S("user-mismatch");return t}throw new S("user-mismatch")})).s((function(t){throw t&&t.code&&t.code==N+"user-not-found"?new S("user-mismatch"):t}))}function lo(t,e){if(!e)throw new S("internal-error","failed to construct a credential");this.a=e,Yr(this,"providerId",t),Yr(this,"signInMethod",t)}function ho(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function fo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new lo(t.providerId,t.pendingToken)}catch(t){}return null}function po(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Yr(this,"idToken",e.idToken),e.accessToken&&Yr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Yr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new S("internal-error","failed to construct a credential");Yr(this,"accessToken",e.oauthToken),Yr(this,"secret",e.oauthTokenSecret)}Yr(this,"providerId",t),Yr(this,"signInMethod",n)}function vo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Yn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function yo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new po(t.providerId,e,t.signInMethod)}catch(t){}}return null}function mo(t,e){this.Pc=e||[],Xr(this,{providerId:t,isOAuthProvider:!0}),this.Hb={},this.ob=(Qi(t)||{}).Ja||null,this.nb=null}function go(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new S("argument-error",'SAML provider IDs must be prefixed with "saml."');mo.call(this,t,[])}function bo(t){mo.call(this,t,Hi),this.a=[]}function wo(){bo.call(this,"facebook.com")}function _o(t){if(!t)throw new S("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new wo).credential({accessToken:e})}function Eo(){bo.call(this,"github.com")}function Io(t){if(!t)throw new S("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new Eo).credential({accessToken:e})}function To(){bo.call(this,"google.com"),this.Ca("profile")}function So(t,e){var n=t;return v(t)&&(n=t.idToken,e=t.accessToken),(new To).credential({idToken:n,accessToken:e})}function Co(){mo.call(this,"twitter.com",Gi)}function ko(t,e){var n=t;if(v(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new S("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new po("twitter.com",n,"twitter.com")}function No(t,e,n){this.a=t,this.f=e,Yr(this,"providerId","password"),Yr(this,"signInMethod",n===Po.EMAIL_LINK_SIGN_IN_METHOD?Po.EMAIL_LINK_SIGN_IN_METHOD:Po.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Ao(t){return t&&t.email&&t.password?new No(t.email,t.password,t.signInMethod):null}function Po(){Xr(this,{providerId:"password",isOAuthProvider:!1})}function Oo(t,e){if(!(e=xo(e)))throw new S("argument-error","Invalid email link!");return new No(t,e.code,Po.EMAIL_LINK_SIGN_IN_METHOD)}function xo(t){return(t=Ai(t=io(t)))&&t.operation===ci?t:null}function Ro(t){if(!(t.cb&&t.bb||t.La&&t.ea))throw new S("internal-error");this.a=t,Yr(this,"providerId","phone"),this.fa="phone",Yr(this,"signInMethod","phone")}function Do(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return z(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Ro(e)}return null}function Lo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.cb,code:t.a.bb}}function Mo(t){try{this.a=t||r.Z.auth()}catch(t){throw new S("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Xr(this,{providerId:"phone",isOAuthProvider:!1})}function Fo(t,e){if(!t)throw new S("missing-verification-id");if(!e)throw new S("missing-verification-code");return new Ro({cb:t,bb:e})}function jo(t){if(t.temporaryProof&&t.phoneNumber)return new Ro({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return So(o,n);case"facebook.com":return _o(n);case"github.com":return Io(n);case"twitter.com":return ko(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new lo(e,a):new po(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new bo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Uo(t){if(!t.isOAuthProvider)throw new S("invalid-oauth-provider")}function Vo(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new S("invalid-auth-event");if(this.g&&this.a)throw new S("invalid-auth-event");if(this.g&&!this.f)throw new S("invalid-auth-event")}function qo(t){return(t=t||{}).type?new Vo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&C(t.error),t.postBody,t.tenantId):null}function Bo(){this.b=null,this.a=[]}oo.prototype.Ha=function(){return this.a?Ce(this.a):Ce(this.b)},oo.prototype.w=function(){return this.type==ao?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},uo.prototype.ja=function(){},uo.prototype.b=function(){},uo.prototype.c=function(){},uo.prototype.w=function(){},lo.prototype.ja=function(t){return gs(t,ho(this))},lo.prototype.b=function(t,e){var n=ho(this);return n.idToken=e,bs(t,n)},lo.prototype.c=function(t,e){return co(ws(t,ho(this)),e)},lo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},po.prototype.ja=function(t){return gs(t,vo(this))},po.prototype.b=function(t,e){var n=vo(this);return n.idToken=e,bs(t,n)},po.prototype.c=function(t,e){return co(ws(t,vo(this)),e)},po.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},mo.prototype.Ka=function(t){return this.Hb=dt(t),this},T(go,mo),T(bo,mo),bo.prototype.Ca=function(t){return K(this.a,t)||this.a.push(t),this},bo.prototype.Pb=function(){return X(this.a)},bo.prototype.credential=function(t,e){var n;if(!(n=v(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new S("argument-error","credential failed: must provide the ID token and/or the access token.");return new po(this.providerId,n,this.providerId)},T(wo,bo),Yr(wo,"PROVIDER_ID","facebook.com"),Yr(wo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),T(Eo,bo),Yr(Eo,"PROVIDER_ID","github.com"),Yr(Eo,"GITHUB_SIGN_IN_METHOD","github.com"),T(To,bo),Yr(To,"PROVIDER_ID","google.com"),Yr(To,"GOOGLE_SIGN_IN_METHOD","google.com"),T(Co,mo),Yr(Co,"PROVIDER_ID","twitter.com"),Yr(Co,"TWITTER_SIGN_IN_METHOD","twitter.com"),No.prototype.ja=function(t){return this.signInMethod==Po.EMAIL_LINK_SIGN_IN_METHOD?eu(t,Ns,{email:this.a,oobCode:this.f}):eu(t,Ys,{email:this.a,password:this.f})},No.prototype.b=function(t,e){return this.signInMethod==Po.EMAIL_LINK_SIGN_IN_METHOD?eu(t,As,{idToken:e,email:this.a,oobCode:this.f}):eu(t,Bs,{idToken:e,email:this.a,password:this.f})},No.prototype.c=function(t,e){return co(this.ja(t),e)},No.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Xr(Po,{PROVIDER_ID:"password"}),Xr(Po,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Xr(Po,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Ro.prototype.ja=function(t){return t.eb(Lo(this))},Ro.prototype.b=function(t,e){var n=Lo(this);return n.idToken=e,eu(t,$s,n)},Ro.prototype.c=function(t,e){var n=Lo(this);return n.operation="REAUTH",co(t=eu(t,Zs,n),e)},Ro.prototype.w=function(){var t={providerId:"phone"};return this.a.cb&&(t.verificationId=this.a.cb),this.a.bb&&(t.verificationCode=this.a.bb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Mo.prototype.eb=function(t,e){var n=this.a.a;return Ce(e.verify()).then((function(r){if("string"!=typeof r)throw new S("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=v(t)?t.session:null,o=v(t)?t.phoneNumber:t;return(i&&i.type==ao?i.Ha().then((function(t){return function(t,e){return eu(t,Ws,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==so?i.Ha().then((function(e){return function(t,e){return eu(t,Gs,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return eu(t,Vs,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new S("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Xr(Mo,{PROVIDER_ID:"phone"}),Xr(Mo,{PHONE_SIGN_IN_METHOD:"phone"}),Vo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Vo.prototype.S=function(){return this.h},Vo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var zo,Wo=null;function Go(t){var e="unauthorized-domain",n=void 0,r=jn(t);t=r.a,"chrome-extension"==(r=r.f)?n=qt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=qt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",S.call(this,e,n)}function Ho(t,e,n){S.call(this,t,n),(t=e||{}).Ib&&Yr(this,"email",t.Ib),t.ea&&Yr(this,"phoneNumber",t.ea),t.credential&&Yr(this,"credential",t.credential),t.Yb&&Yr(this,"tenantId",t.Yb)}function Ko(t){if(t.code){var e=t.code||"";0==e.indexOf(N)&&(e=e.substring(N.length));var n={credential:jo(t),Yb:t.tenantId};if(t.email)n.Ib=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new S(e,t.message||void 0);return new Ho(e,n,t.message)}return null}function Qo(){}function Jo(t){return t.c||(t.c=t.b())}function Yo(){}function Xo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function $o(){}function Zo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=_(this.pc,this),this.a.onerror=_(this.Rb,this),this.a.onprogress=_(this.qc,this),this.a.ontimeout=_(this.uc,this)}function ta(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function ea(t,e,n){this.reset(t,e,n,void 0,void 0)}function na(t){this.f=t,this.b=this.c=this.a=null}function ra(t,e){this.name=t,this.value=e}T(Go,S),T(Ho,S),Ho.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&yt(t,e),t},Ho.prototype.toJSON=function(){return this.w()},Qo.prototype.c=null,T(Yo,Qo),Yo.prototype.a=function(){var t=Xo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Yo.prototype.b=function(){var t={};return Xo(this)&&(t[0]=!0,t[1]=!0),t},zo=new Yo,T($o,Qo),$o.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Zo;throw Error("Unsupported browser")},$o.prototype.b=function(){return{}},(t=Zo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.pc=function(){this.status=200,this.response=this.responseText=this.a.responseText,ta(this,4)},t.Rb=function(){this.status=500,this.response=this.responseText="",ta(this,4)},t.uc=function(){this.Rb()},t.qc=function(){this.status=200,ta(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ea.prototype.a=null,ea.prototype.reset=function(t,e,n,r,i){r||I(),delete this.a},ra.prototype.toString=function(){return this.name};var ia=new ra("SEVERE",1e3),oa=new ra("WARNING",900),aa=new ra("CONFIG",700),sa=new ra("FINE",500);function ua(t){return t.c?t.c:t.a?ua(t.a):(L("Root logger has no level set."),null)}na.prototype.log=function(t,e,n){if(t.value>=ua(this).value)for(d(e)&&(e=e()),t=new ea(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var ca={},la=null;function ha(t){var e;if(la||(la=new na(""),ca[""]=la,la.c=aa),!(e=ca[t])){e=new na(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=ha(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,ca[t]=e}return e}function fa(t,e){t&&t.log(sa,e,void 0)}function pa(t){this.f=t}function da(t){wn.call(this),this.o=t,this.readyState=va,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=ha("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}T(pa,Qo),pa.prototype.a=function(){return new da(this.f)},pa.prototype.b=function(t){return function(){return t}}({}),T(da,wn);var va=0;function ya(t){t.c.read().then(t.oc.bind(t)).catch(t.Ta.bind(t))}function ma(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,ga(t)}function ga(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ba(t){wn.call(this),this.headers=new Nn,this.O=t||null,this.c=!1,this.A=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.G=!1,this.g=0,this.o=null,this.m=wa,this.u=this.R=!1}(t=da.prototype).open=function(t,e){if(this.readyState!=va)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,ga(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.o.fetch(new Request(this.g,e)).then(this.tc.bind(this),this.Ta.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ma(this,!1)),this.readyState=va},t.tc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,ga(this)),this.a&&(this.readyState=3,ga(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.rc.bind(this),this.Ta.bind(this)):void 0!==u.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,ya(this)):t.text().then(this.sc.bind(this),this.Ta.bind(this)))))},t.oc=function(t){if(this.a){var e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ma(this,!0):ga(this),3==this.readyState&&ya(this)}},t.sc=function(t){this.a&&(this.response=this.responseText=t,ma(this,!0))},t.rc=function(t){this.a&&(this.response=t,ma(this,!0))},t.Ta=function(t){var e=this.h;e&&e.log(oa,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&ma(this,!0)},t.setRequestHeader=function(t,e){this.i.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(oa,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(oa,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},T(ba,wn);var wa="";ba.prototype.b=ha("goog.net.XhrIo");var _a=/^https?$/i,Ea=["POST","PUT"];function Ia(t){return"content-type"==t.toLowerCase()}function Ta(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Sa(t),ka(t)}function Sa(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Ca(t){if(t.c&&void 0!==s)if(t.A[1]&&4==Aa(t)&&2==Pa(t))fa(t.b,Oa(t,"Local request error detected and ignored"));else if(t.i&&4==Aa(t))Tn(t.Ub,0,t);else if(t.dispatchEvent("readystatechange"),4==Aa(t)){fa(t.b,Oa(t,"Request complete")),t.c=!1;try{var e,n=Pa(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(On)[1]||null;if(!o&&u.self&&u.self.location){var a=u.self.location.protocol;o=a.substr(0,a.length-1)}i=!_a.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Aa(t)?t.a.statusText:""}catch(e){fa(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+Pa(t)+"]",Sa(t)}}finally{ka(t)}}}function ka(t,e){if(t.a){Na(t);var n=t.a,r=t.A[0]?h:null;t.a=null,t.A=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(ia,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Na(t){t.a&&t.u&&(t.a.ontimeout=null),t.o&&(u.clearTimeout(t.o),t.o=null)}function Aa(t){return t.a?t.a.readyState:0}function Pa(t){try{return 2<Aa(t)?t.a.status:-1}catch(t){return-1}}function Oa(t,e){return e+" ["+t.P+" "+t.l+" "+Pa(t)+"]"}function xa(t){var e=za;this.g=[],this.u=e,this.o=t||null,this.f=this.a=!1,this.c=void 0,this.m=this.A=this.i=!1,this.h=0,this.b=null,this.l=0}function Ra(t,e,n){t.a=!0,t.c=n,t.f=!e,Fa(t)}function Da(t){if(t.a){if(!t.m)throw new ja(t);t.m=!1}}function La(t,e,n,r){t.g.push([e,n,r]),t.a&&Fa(t)}function Ma(t){return H(t.g,(function(t){return d(t[1])}))}function Fa(t){if(t.h&&t.a&&Ma(t)){var e=t.h,n=qa[e];n&&(u.clearTimeout(n.a),delete qa[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var s=o.call(i||t.o,e);void 0!==s&&(t.f=t.f&&(s==e||s instanceof Error),t.c=e=s),(x(e)||"function"==typeof u.Promise&&e instanceof u.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,Ma(t)||(n=!0)}}t.c=e,r&&(s=_(t.v,t,!0),r=_(t.v,t,!1),e instanceof xa?(La(e,s,r),e.A=!0):e.then(s,r)),n&&(e=new Va(e),qa[e.a]=e,t.h=e.a)}function ja(){R.call(this)}function Ua(){R.call(this)}function Va(t){this.a=u.setTimeout(_(this.c,this),0),this.b=t}(t=ba.prototype).Ma=function(){void 0!==s&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",fa(this.b,Oa(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(fa(this.b,Oa(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ka(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ka(this,!0)),ba.$a.Da.call(this)},t.Ub=function(){this.xa||(this.N||this.i||this.f?Ca(this):this.Ic())},t.Ic=function(){Ca(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case wa:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(ia,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return fa(this.b,"Can not get response: "+t.message),null}},xa.prototype.cancel=function(t){if(this.a)this.c instanceof xa&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.o,this):this.m=!0,this.a||(t=new Ua(this),Da(this),Ra(this,!1,t))}},xa.prototype.v=function(t,e){this.i=!1,Ra(this,t,e)},xa.prototype.then=function(t,e,n){var r,i,o=new be((function(t,e){r=t,i=e}));return La(this,r,(function(t){t instanceof Ua?o.cancel():i(t)})),o.then(t,e,n)},xa.prototype.$goog_Thenable=!0,T(ja,R),ja.prototype.message="Deferred has already fired",ja.prototype.name="AlreadyCalledError",T(Ua,R),Ua.prototype.message="Deferred was canceled",Ua.prototype.name="CanceledError",Va.prototype.c=function(){throw delete qa[this.a],this.b};var qa={};function Ba(t){var e={},n=e.document||document,r=Tt(t).toString(),i=fe(document,"SCRIPT"),o={Vb:i,Ma:void 0},a=new xa(o),s=null,h=null!=e.timeout?e.timeout:5e3;return 0<h&&(s=window.setTimeout((function(){Wa(i,!0);var t=new Ka(Ha,"Timeout reached for loading script "+r);Da(a),Ra(a,!1,t)}),h),o.Ma=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Wa(i,e.wd||!1,s),Da(a),Ra(a,!0,null))},i.onerror=function(){Wa(i,!0,s);var t=new Ka(Ga,"Error while loading script "+r);Da(a),Ra(a,!1,t)},yt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),se(i,o),function(t,e){mt(t,"HTMLScriptElement"),t.src=Tt(e),null===l&&(l=(e=(e=u.document).querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&c.test(e)?e:""),(e=l)&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function za(){if(this&&this.Vb){var t=this.Vb;t&&"SCRIPT"==t.tagName&&Wa(t,!0,this.Ma)}}function Wa(t,e,n){null!=n&&u.clearTimeout(n),t.onload=h,t.onerror=h,t.onreadystatechange=h,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Ga=0,Ha=1;function Ka(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),R.call(this,n),this.code=t}function Qa(t){this.f=t}function Ja(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.v=t.secureTokenTimeout||$a,this.g=dt(t.secureTokenHeaders||Za),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.m=t.firebaseTimeout||ts,this.a=dt(t.firebaseHeaders||es),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==_r(),!(n=u.XMLHttpRequest||n&&r.Z.INTERNAL.node&&r.Z.INTERNAL.node.XMLHttpRequest)&&!wr())throw new S("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,wr()?this.f=new pa(self):Er()?this.f=new Qa(n):this.f=new $o,this.b=null}T(Ka,R),T(Qa,Qo),Qa.prototype.a=function(){return new this.f},Qa.prototype.b=function(){return{}};var Ya,Xa="idToken",$a=new qr(3e4,6e4),Za={"Content-Type":"application/x-www-form-urlencoded"},ts=new qr(3e4,6e4),es={"Content-Type":"application/json"};function ns(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function rs(t,e){e&&(t.l=is("https://securetoken.googleapis.com/v1/token",e),t.h=is("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=is("https://identitytoolkit.googleapis.com/v2/",e))}function is(t,e){return t=jn(t),e=jn(e.url),t.c=t.a+t.c,Rn(t,e.f),t.a=e.a,Dn(t,e.g),t.toString()}function os(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function as(t,e,n,r,i,o,a){(function(){var t=Nr();return!((t=Sr(t)!=Tr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Kt&&ne&&!(9<ne))})()||wr()?t=_(t.u,t):(Ya||(Ya=new be((function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(u[us]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){La(t,null,e,void 0)}(Ba(St(ss,{onload:us})),(function(){e(Error("CORS_UNSUPPORTED"))})))}(t,e)}))),t=_(t.o,t)),t(e,n,r,i,o,a)}Ja.prototype.S=function(){return this.b},Ja.prototype.u=function(t,e,n,r,i,o){if(wr()&&(void 0===u.fetch||void 0===u.Headers||void 0===u.Request))throw new S("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new ba(this.f);if(o){a.g=Math.max(0,o);var s=setTimeout((function(){a.dispatchEvent("timeout")}),o)}_n(a,"complete",(function(){s&&clearTimeout(s);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return fa(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),En(a,"ready",(function(){s&&clearTimeout(s),We(this)})),En(a,"timeout",(function(){s&&clearTimeout(s),We(this),e&&e(null)})),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.G=!1,t.c=!0,t.a=t.O?t.O.a():zo.a(),t.A=t.O?Jo(t.O):Jo(zo),t.a.onreadystatechange=_(t.Ub,t);try{fa(t.b,Oa(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(e){return fa(t.b,Oa(t,"Error opening Xhr: "+e.message)),void Ta(t,e)}e=r||"";var o=new Nn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||"string"==typeof t)z(t,e,void 0);else for(var n=kn(t),r=Cn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Ia,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=u.FormData&&e instanceof u.FormData,!K(Ea,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.R&&(t.a.withCredentials=t.R);try{Na(t),0<t.g&&(t.u=function(t){return Kt&&ie(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),fa(t.b,Oa(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=_(t.Ma,t)):t.o=Tn(t.Ma,t.g,t)),fa(t.b,Oa(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){fa(t.b,Oa(t,"Send error: "+e.message)),Ta(t,e)}}(a,t,n,r,i)};var ss=new gt(_t,"https://apis.google.com/js/client.js?onload=%{onload}"),us="__fcb"+Math.floor(1e6*Math.random()).toString();function cs(t){if("string"!=typeof(t=t.email)||!yr.test(t))throw new S("invalid-email")}function ls(t){"email"in t&&cs(t)}function hs(t){if(!t[Xa]){if(t.mfaPendingCredential)throw new S("multi-factor-auth-required",null,dt(t));throw new S("internal-error")}}function fs(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new S("internal-error")}else{if(!t.sessionInfo)throw new S("missing-verification-id");if(!t.code)throw new S("missing-verification-code")}}Ja.prototype.o=function(t,e,n,r,i){var o=this;Ya.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).s((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Ja.prototype.yb=function(){return eu(this,zs,{})},Ja.prototype.Ab=function(t,e){return eu(this,qs,{idToken:t,email:e})},Ja.prototype.Bb=function(t,e){return eu(this,Bs,{idToken:t,password:e})};var ps={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ds(t){if(!t.phoneVerificationInfo)throw new S("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new S("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new S("missing-verification-code")}function vs(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new S("internal-error")}function ys(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&$n(t=new Qn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function ms(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Ko(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Ko(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Ko(t)):t.errorMessage&&(e=nu(t.errorMessage)),e)throw e;hs(t)}function gs(t,e){return e.returnIdpCredential=!0,eu(t,Hs,e)}function bs(t,e){return e.returnIdpCredential=!0,eu(t,Qs,e)}function ws(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,eu(t,Ks,e)}function _s(t){if(!t.oobCode)throw new S("invalid-action-code")}(t=Ja.prototype).Cb=function(t,e){var n={idToken:t},r=[];return ft(ps,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),eu(this,qs,n)},t.ub=function(t,e){return yt(t={requestType:"PASSWORD_RESET",email:t},e),eu(this,Ms,t)},t.vb=function(t,e){return yt(t={requestType:"EMAIL_SIGNIN",email:t},e),eu(this,Rs,t)},t.tb=function(t,e){return yt(t={requestType:"VERIFY_EMAIL",idToken:t},e),eu(this,Ds,t)},t.Db=function(t,e,n){return yt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),eu(this,Ls,t)},t.eb=function(t){return eu(this,Xs,t)},t.mb=function(t,e){return eu(this,Us,{oobCode:t,newPassword:e})},t.Qa=function(t){return eu(this,Is,{oobCode:t})},t.ib=function(t){return eu(this,Es,{oobCode:t})};var Es={endpoint:"setAccountInfo",B:_s,Z:"email",C:!0},Is={endpoint:"resetPassword",B:_s,F:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new S("internal-error")},C:!0},Ts={endpoint:"signupNewUser",B:function(t){if(cs(t),!t.password)throw new S("weak-password")},F:hs,U:!0,C:!0},Ss={endpoint:"createAuthUri",C:!0},Cs={endpoint:"deleteAccount",M:["idToken"]},ks={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],B:function(t){if("array"!=f(t.deleteProvider))throw new S("internal-error")}},Ns={endpoint:"emailLinkSignin",M:["email","oobCode"],B:cs,F:hs,U:!0,C:!0},As={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],B:cs,F:hs,U:!0},Ps={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],B:ds,F:hs,C:!0,Na:!0},Os={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],B:ds,F:hs,C:!0,Na:!0},xs={endpoint:"getAccountInfo"},Rs={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new S("internal-error");cs(t)},Z:"email",C:!0},Ds={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],B:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new S("internal-error")},Z:"email",C:!0},Ls={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],B:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new S("internal-error")},Z:"email",C:!0},Ms={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("PASSWORD_RESET"!=t.requestType)throw new S("internal-error");cs(t)},Z:"email",C:!0},Fs={kb:!0,endpoint:"getProjectConfig",Tb:"GET"},js={kb:!0,endpoint:"getRecaptchaParam",Tb:"GET",F:function(t){if(!t.recaptchaSiteKey)throw new S("internal-error")}},Us={endpoint:"resetPassword",B:_s,Z:"email",C:!0},Vs={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Z:"sessionInfo",C:!0},qs={endpoint:"setAccountInfo",M:["idToken"],B:ls,U:!0},Bs={endpoint:"setAccountInfo",M:["idToken"],B:function(t){if(ls(t),!t.password)throw new S("weak-password")},F:hs,U:!0},zs={endpoint:"signupNewUser",F:hs,U:!0,C:!0},Ws={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],B:function(t){if(!t.phoneEnrollmentInfo)throw new S("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new S("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new S("missing-app-credential")},F:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new S("internal-error")},C:!0,Na:!0},Gs={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],B:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new S("missing-app-credential")},F:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new S("internal-error")},C:!0,Na:!0},Hs={endpoint:"verifyAssertion",B:vs,Xa:ys,F:ms,U:!0,C:!0},Ks={endpoint:"verifyAssertion",B:vs,Xa:ys,F:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new S("user-not-found");if(t.errorMessage)throw nu(t.errorMessage);hs(t)},U:!0,C:!0},Qs={endpoint:"verifyAssertion",B:function(t){if(vs(t),!t.idToken)throw new S("internal-error")},Xa:ys,F:ms,U:!0},Js={endpoint:"verifyCustomToken",B:function(t){if(!t.token)throw new S("invalid-custom-token")},F:hs,U:!0,C:!0},Ys={endpoint:"verifyPassword",B:function(t){if(cs(t),!t.password)throw new S("wrong-password")},F:hs,U:!0,C:!0},Xs={endpoint:"verifyPhoneNumber",B:fs,F:hs,C:!0},$s={endpoint:"verifyPhoneNumber",B:function(t){if(!t.idToken)throw new S("internal-error");fs(t)},F:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Ko(t);hs(t)}},Zs={Gb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",B:fs,F:hs,C:!0},tu={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],F:function(t){if(!!t[Xa]^!!t.refreshToken)throw new S("internal-error")},C:!0,Na:!0};function eu(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.M))return ke(new S("internal-error"));var r,i=!!e.Na,o=e.Tb||"POST";return Ce(n).then(e.B).then((function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,a){var s=jn(e+n);Mn(s,"key",t.c),a&&Mn(s,"cb",I().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Mn(s,c,i[c]);return new be((function(e,n){as(t,s.toString(),(function(t){t?t.error?n(ru(t,o||{})):e(t):n(new S("network-request-failed"))}),r,u?void 0:nr(Mr(i)),t.a,t.m.get())}))}(t,i?t.i:t.h,e.endpoint,o,n,e.Gb,e.kb||!1)})).then((function(t){return r=t,e.Xa?e.Xa(n,r):r})).then(e.F).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new S("internal-error");return r[e.Z]}))}function nu(t){return ru({error:{errors:[{message:t}],code:400,message:t}})}function ru(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new S(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",yt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new S(r[i],e);return!e&&t&&(e=Lr(t)),new S("internal-error",e)}function iu(t){this.b=t,this.a=null,this.qb=function(t){return(uu||(uu=new be((function(t,e){function n(){Vr(),Ar("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Vr(),e(Error("Network Error"))},timeout:au.get()})}if(Ar("gapi.iframes.Iframe"))t();else if(Ar("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();u[r]=function(){Ar("gapi.load")?n():e(Error("Network Error"))},Ce(Ba(r=St(ou,{onload:r}))).s((function(){e(Error("Network Error"))}))}})).s((function(t){throw uu=null,t})))).then((function(){return new be((function(e,n){Ar("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),su.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var ou=new gt(_t,"https://apis.google.com/js/api.js?onload=%{onload}"),au=new qr(3e4,6e4),su=new qr(5e3,15e3),uu=null;function cu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?Un((t=jn(this.g.url)).f,t.a,t.g,"/emulator/auth/iframe"):Un("https",this.l,null,"/__/auth/iframe"),this.a=t,Mn(this.a,"apiKey",this.h),Mn(this.a,"appName",this.i),this.b=null,this.c=[]}function lu(t,e,n,r,i,o){this.u=t,this.o=e,this.c=n,this.v=r,this.m=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function hu(t){try{return r.Z.app(t).auth().Ga()}catch(t){return[]}}function fu(t,e,n,r,i,o){this.o=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.A=null,this.h=[],this.v=this.a=null}function pu(t){var e=cr();return function(t){return eu(t,Fs,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=jn(e),r=n.f;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=jn(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:vr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Go(cr())}))}function du(t){return t.v||(t.v=mr().then((function(){if(!t.u){var e=t.c,n=t.i,r=hu(t.b),i=new cu(t.o,t.g,t.b,t.f);i.f=e,i.b=n,i.c=X(r||[]),t.u=i.toString()}t.m=new iu(t.u),function(t){if(!t.m)throw Error("IfcHandler must be initialized!");!function(t,e){t.qb.then((function(){t.a.register("authEvent",e,Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.m,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=qo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Ce(n)}return n.status="ERROR",Ce(n)}))}(t)}))),t.v}function vu(t){return t.l||(t.A=t.c?kr(t.c,hu(t.b)):null,t.l=new Ja(t.g,O(t.i),t.A),t.f&&rs(t.l,t.f)),t.l}function yu(t,e,n,r,i,o,a,s,u,c,l,h){return(t=new lu(t,e,n,r,i,h)).l=o,t.g=a,t.i=s,t.b=dt(u||null),t.f=c,t.xb(l).toString()}function mu(t){if(this.a=t||r.Z.INTERNAL.reactNative&&r.Z.INTERNAL.reactNative.AsyncStorage,!this.a)throw new S("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function gu(t){this.b=t,this.a={},this.f=_(this.c,this)}cu.prototype.toString=function(){return this.f?Mn(this.a,"v",this.f):Xn(this.a.b,"v"),this.b?Mn(this.a,"eid",this.b):Xn(this.a.b,"eid"),this.c.length?Mn(this.a,"fw",this.c.join(",")):Xn(this.a.b,"fw"),this.a.toString()},lu.prototype.xb=function(t){return this.h=t,this},lu.prototype.toString=function(){if(this.m){var t=jn(this.m.url);t=Un(t.f,t.a,t.g,"/emulator/auth/handler")}else t=Un("https",this.u,null,"/__/auth/handler");if(Mn(t,"apiKey",this.o),Mn(t,"appName",this.c),Mn(t,"authType",this.v),this.a.isOAuthProvider){var e=this.a;try{var n=r.Z.app(this.c).auth().ka()}catch(t){n=null}for(var i in e.nb=n,Mn(t,"providerId",this.a.providerId),e=Mr((n=this.a).Hb))e[i]=e[i].toString();i=n.Pc,e=dt(e);for(var o=0;o<i.length;o++){var a=i[o];a in e&&delete e[a]}n.ob&&n.nb&&!e[n.ob]&&(e[n.ob]=n.nb),pt(e)||Mn(t,"customParameters",Lr(e))}if("function"==typeof this.a.Pb&&(n=this.a.Pb()).length&&Mn(t,"scopes",n.join(",")),this.l?Mn(t,"redirectUrl",this.l):Xn(t.b,"redirectUrl"),this.g?Mn(t,"eventId",this.g):Xn(t.b,"eventId"),this.i?Mn(t,"v",this.i):Xn(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Fn(t,s)&&Mn(t,s,this.b[s]);return this.h?Mn(t,"tid",this.h):Xn(t.b,"tid"),this.f?Mn(t,"eid",this.f):Xn(t.b,"eid"),(s=hu(this.c)).length&&Mn(t,"fw",s.join(",")),t.toString()},(t=fu.prototype).Nb=function(t,e,n){var r=new S("popup-closed-by-user"),i=new S("web-storage-unsupported"),o=this,a=!1;return this.la().then((function(){(function(t){var e={type:"webStorageSupport"};return du(t).then((function(){return function(t,e){return t.qb.then((function(){return new be((function(n){t.a.send(e.type,e,n,Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.m,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&pr(t),e(i),a=!0)}))})).s((function(){})).then((function(){if(!a)return function(t){return new be((function(e){return function n(){Sn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!a)return Sn(n).then((function(){e(r)}))}))},t.Wb=function(){var t=Nr();return!Dr(t)&&!Ur(t)},t.Sb=function(){return!1},t.Lb=function(t,e,n,r,i,o,a,s){if(!t)return ke(new S("popup-blocked"));if(a&&!Dr())return this.la().s((function(e){pr(t),i(e)})),r(),Ce();this.a||(this.a=pu(vu(this)));var u=this;return this.a.then((function(){var e=u.la().s((function(e){throw pr(t),i(e),e}));return r(),e})).then((function(){Uo(n),a||lr(yu(u.o,u.g,u.b,e,n,null,o,u.c,void 0,u.i,s,u.f),t)})).s((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Mb=function(t,e,n,r){this.a||(this.a=pu(vu(this)));var i=this;return this.a.then((function(){Uo(e),lr(yu(i.o,i.g,i.b,t,e,cr(),n,i.c,void 0,i.i,r,i.f))})).s((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.la=function(){var t=this;return du(this).then((function(){return t.m.qb})).s((function(){throw t.a=null,new S("network-request-failed")}))},t.Zb=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ra=function(t){J(this.h,(function(e){return e==t}))},(t=mu.prototype).get=function(t){return Ce(this.a.getItem(t)).then((function(t){return t&&Fr(t)}))},t.set=function(t,e){return Ce(this.a.setItem(t,Lr(e)))},t.T=function(t){return Ce(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var bu,wu=[];function _u(t,e,n){pt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Eu(t){this.a=t}function Iu(t){this.c=t,this.b=!1,this.a=[]}function Tu(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return ke(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new be((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),l),c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},t.a.push(c),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(e){return Su(t,c),e})).s((function(e){throw Su(t,c),e}))}function Su(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),J(t.a,(function(t){return t==e}))}}function Cu(){if(!Au())throw new S("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=u.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.o=!1,this.h=null;var t=this;wr()&&self?(this.l=function(){var t=wr()?self:null;if(z(wu,(function(n){n.b==t&&(e=n)})),!e){var e=new gu(t);wu.push(e)}return e}(),_u(this.l,"keyChanged",(function(e,n){return Du(t).then((function(e){return 0<e.length&&z(t.a,(function(t){t(e)})),{keyProcessed:K(e,n.key)}}))})),_u(this.l,"ping",(function(){return Ce(["keyChanged"])}))):function(){var t=u.navigator;return t&&t.serviceWorker?Ce().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).s((function(){return null})):Ce(null)}().then((function(e){(t.h=e)&&(t.g=new Iu(new Eu(e)),Tu(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&K(e[0].value,"keyChanged")&&(t.o=!0)})).s((function(){})))}))}function ku(t){return new be((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new be((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return ku(t)})).then((function(t){e(t)})).s((function(t){n(t)}))}}))}function Nu(t){return t.v||(t.v=ku(t)),t.v}function Au(){try{return!!u.indexedDB}catch(t){return!1}}function Pu(t){return t.objectStore("firebaseLocalStorage")}function Ou(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function xu(t){return new be((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Ru(t,e){return t.g&&t.h&&function(){var t=u.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Tu(t.g,"keyChanged",{key:e},t.o).then((function(){})).s((function(){})):Ce()}function Du(t){return Nu(t).then((function(t){var e=Pu(Ou(t,!1));return e.getAll?xu(e.getAll()):new be((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=hr(t.c,n),t.c=n}return r}))}function Lu(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Mu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ce().then((function(){if(Au()){var t=jr(),r="__sak"+t;return bu||(bu=new Cu),(n=bu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.T(r)})).then((function(){return n})).s((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){z(e.a,(function(e){e(t)}))})),t}))}function Fu(){this.a={},this.type="inMemory"}function ju(){if(!function(){var t="Node"==_r();if(!(t=Uu()||t&&r.Z.INTERNAL.node&&r.Z.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==_r())throw new S("internal-error","The LocalStorage compatibility library was not found.");throw new S("web-storage-unsupported")}this.a=Uu()||r.Z.INTERNAL.node.localStorage,this.type="localStorage"}function Uu(){try{var t=u.localStorage,e=jr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Vu(){this.type="nullStorage"}function qu(){if(!function(){var t="Node"==_r();if(!(t=Bu()||t&&r.Z.INTERNAL.node&&r.Z.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==_r())throw new S("internal-error","The SessionStorage compatibility library was not found.");throw new S("web-storage-unsupported")}this.a=Bu()||r.Z.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Bu(){try{var t=u.sessionStorage,e=jr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function zu(){var t={};t.Browser=Hu,t.Node=Ku,t.ReactNative=Qu,t.Worker=Ju,this.a=t[_r()]}gu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];z(r,(function(e){i.push(Ce().then((function(){return e(t.origin,t.data.data)})))})),Ae(i).then((function(r){var i=[];z(r,(function(t){i.push({fulfilled:t.Ob,value:t.value,reason:t.reason?t.reason.message:void 0})})),z(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Eu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Iu.prototype.close=function(){for(;0<this.a.length;)Su(this,this.a[0]);this.b=!0},(t=Cu.prototype).set=function(t,e){var n,r=!1,i=this;return Nu(this).then((function(e){return xu((e=Pu(Ou(n=e,!0))).get(t))})).then((function(o){var a=Pu(Ou(n,!0));return o?(o.value=e,xu(a.put(o))):(i.b++,r=!0,(o={}).fbase_key=t,o.value=e,xu(a.add(o)))})).then((function(){return i.c[t]=e,Ru(i,t)})).na((function(){r&&i.b--}))},t.get=function(t){return Nu(this).then((function(e){return xu(Pu(Ou(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.T=function(t){var e=!1,n=this;return Nu(this).then((function(r){return e=!0,n.b++,xu(Pu(Ou(r,!0)).delete(t))})).then((function(){return delete n.c[t],Ru(n,t)})).na((function(){e&&n.b--}))},t.ca=function(t){0==this.a.length&&function(t){Lu(t),function e(){t.f=setTimeout((function(){t.i=Du(t).then((function(e){0<e.length&&z(t.a,(function(t){t(e)}))})).then((function(){e()})).s((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()}(this),this.a.push(t)},t.ia=function(t){J(this.a,(function(e){return e==t})),0==this.a.length&&Lu(this)},(t=Mu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.T=function(t){return this.b.then((function(e){return e.T(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){J(this.a,(function(e){return e==t}))},(t=Fu.prototype).get=function(t){return Ce(this.a[t])},t.set=function(t,e){return this.a[t]=e,Ce()},t.T=function(t){return delete this.a[t],Ce()},t.ca=function(){},t.ia=function(){},(t=ju.prototype).get=function(t){var e=this;return Ce().then((function(){return Fr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ce().then((function(){var r=Lr(e);null===r?n.T(t):n.a.setItem(t,r)}))},t.T=function(t){var e=this;return Ce().then((function(){e.a.removeItem(t)}))},t.ca=function(t){u.window&&un(u.window,"storage",t)},t.ia=function(t){u.window&&hn(u.window,"storage",t)},(t=Vu.prototype).get=function(){return Ce(null)},t.set=function(){return Ce()},t.T=function(){return Ce()},t.ca=function(){},t.ia=function(){},(t=qu.prototype).get=function(t){var e=this;return Ce().then((function(){return Fr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ce().then((function(){var r=Lr(e);null===r?n.T(t):n.a.setItem(t,r)}))},t.T=function(t){var e=this;return Ce().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var Wu,Gu,Hu={D:ju,ab:qu},Ku={D:ju,ab:qu},Qu={D:mu,ab:Vu},Ju={D:ju,ab:Vu},Yu={qd:"local",NONE:"none",sd:"session"};function Xu(){var t=!(Ur(Nr())||!br()),e=Dr(),n=Pr();this.v=t,this.h=e,this.l=n,this.a={},Wu||(Wu=new zu),t=Wu;try{this.g=!ur()&&Gr()||!u.indexedDB?new t.a.D:new Mu(wr()?new Fu:new t.a.D)}catch(t){this.g=new Fu,this.h=!0}try{this.i=new t.a.ab}catch(t){this.i=new Fu}this.m=new Fu,this.f=_(this.Xb,this),this.b={}}function $u(){return Gu||(Gu=new Xu),Gu}function Zu(t,e){switch(e){case"session":return t.i;case"none":return t.m;default:return t.g}}function tc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ec(t,e,n){return n=tc(e,n),"local"==e.D&&(t.b[n]=null),Zu(t,e.D).T(n)}function nc(t){t.c&&(clearInterval(t.c),t.c=null)}function rc(t){this.a=t,this.b=$u()}(t=Xu.prototype).get=function(t,e){return Zu(this,t.D).get(tc(t,e))},t.set=function(t,e,n){var r=tc(t,n),i=this,o=Zu(this,t.D);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.D&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=tc(t,e),this.l&&(this.b[t]=u.localStorage.getItem(t)),pt(this.a)&&(Zu(this,"local").ca(this.f),this.h||(ur()||!Gr())&&u.indexedDB||!this.l||function(t){nc(t),t.c=setInterval((function(){for(var e in t.a){var n=u.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Ye({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Xb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=tc(t,e),this.a[t]&&(J(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),pt(this.a)&&(Zu(this,"local").ia(this.f),nc(this))},t.Xb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=u.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.lb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Zu(this,"local").ia(this.f):nc(this),this.v)if(n=u.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?u.localStorage.setItem(e,r):u.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===u.localStorage.getItem(e)||(o.b[e]=u.localStorage.getItem(e),o.lb(e))},Kt&&ne&&10==ne&&u.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else z(t,_(this.lb,this))},t.lb=function(t){this.a[t]&&z(this.a[t],(function(t){t()}))};var ic,oc={name:"authEvent",D:"local"};function ac(){this.a=$u()}function sc(t,e){this.b=uc,this.f=u.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=u.Int32Array?new Int32Array(64):Array(64),void 0===ic&&(ic=u.Int32Array?new Int32Array(vc):vc),this.reset()}T(sc,(function(){this.b=-1}));for(var uc=64,cc=uc-1,lc=[],hc=0;hc<cc;hc++)lc[hc]=0;var fc=Y(128,lc);function pc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|ic[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function dc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(pc(t),i=0);else{if(!p(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(pc(t),i=0)}}t.c=i,t.g+=n}sc.prototype.reset=function(){this.g=this.c=0,this.a=u.Int32Array?new Int32Array(this.h):X(this.h)};var vc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function yc(){sc.call(this,8,mc)}T(yc,sc);var mc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function gc(t,e,n,r,i,o){this.m=t,this.i=e,this.l=n,this.v=r||null,this.u=i||null,this.o=o,this.h=e+":"+n,this.A=new ac,this.g=new rc(this.h),this.f=null,this.b=[],this.a=this.c=null}function bc(t){return new S("invalid-cordova-configuration",t)}function wc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function _c(t){return t.f||(t.f=t.la().then((function(){return new be((function(e){t.Ea((function n(r){return e(r),t.Ra(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Ec(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=io(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Fr(Fn(o=jn(i),"firebaseError")||null))?C(o):null)?new Vo(r.c,r.b,null,null,o,null,r.S()):new Vo(r.c,r.b,i,r.f,null,null,r.S())),i=o||n}wc(t,i)}))}var n=new Vo("unknown",null,null,null,new S("no-auth-event")),r=!1,i=Sn(500).then((function(){return Ec(t).then((function(){r||wc(t,n)}))})),o=u.handleOpenURL;u.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Ar("BuildInfo.packageName",u).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},Wo||(Wo=new Bo),function(t){var e=Wo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Ar("universalLinks.subscribe",u))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Ec(t){var e=null;return function(t){return t.b.get(oc,t.a).then((function(t){return qo(t)}))}(t.g).then((function(n){return e=n,ec((n=t.g).b,oc,n.a)})).then((function(){return e}))}function Ic(t){this.a=t,this.b=$u()}(t=gc.prototype).la=function(){return this.Ia?this.Ia:this.Ia=(gr(void 0)?mr().then((function(){return new be((function(t,e){var n=u.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):ke(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Ar("universalLinks.subscribe",u))throw bc("cordova-universal-links-plugin-fix is not installed");if(void 0===Ar("BuildInfo.packageName",u))throw bc("cordova-plugin-buildinfo is not installed");if("function"!=typeof Ar("cordova.plugins.browsertab.openUrl",u))throw bc("cordova-plugin-browsertab is not installed");if("function"!=typeof Ar("cordova.InAppBrowser.open",u))throw bc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new S("cordova-not-ready")}))},t.Nb=function(t,e){return e(new S("operation-not-supported-in-this-environment")),Ce()},t.Lb=function(){return ke(new S("operation-not-supported-in-this-environment"))},t.Zb=function(){return!1},t.Wb=function(){return!0},t.Sb=function(){return!0},t.Mb=function(t,e,n,r){if(this.c)return ke(new S("redirect-operation-pending"));var i=this,o=u.document,a=null,s=null,c=null,l=null;return this.c=Ce().then((function(){return Uo(e),_c(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new Vo(e,r,null,o,new S("no-auth-event"),null,i),s=Ar("BuildInfo.packageName",u);if("string"!=typeof s)throw new S("invalid-cordova-configuration");var c=Ar("BuildInfo.displayName",u),l={};if(Nr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=s;else{if(!Nr().toLowerCase().match(/android/))return ke(new S("operation-not-supported-in-this-environment"));l.apn=s}c&&(l.appDisplayName=c),o=function(t){var e=new yc;dc(e,t),t=[];var n=8*e.g;56>e.c?dc(e,fc,56-e.c):dc(e,fc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(pc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return G(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}(o),l.sessionId=o;var h=yu(t.m,t.i,t.l,e,n,null,r,t.v,l,t.u,i,t.o);return t.la().then((function(){var e=t.h;return t.A.a.set(oc,a.w(),e)})).then((function(){var e=Ar("cordova.plugins.browsertab.isAvailable",u);if("function"!=typeof e)throw new S("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=Ar("cordova.plugins.browsertab.openUrl",u)))throw new S("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=Ar("cordova.InAppBrowser.open",u)))throw new S("invalid-cordova-configuration");e=Nr(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new be((function(t,e){s=function(){var e=Ar("cordova.plugins.browsertab.close",u);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(s),c=function(){a||(a=Sn(2e3).then((function(){e(new S("redirect-cancelled-by-user"))})))},l=function(){Br()&&c()},o.addEventListener("resume",c,!1),Nr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).s((function(t){return Ec(i).then((function(){throw t}))}))})).na((function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),a&&a.cancel(),s&&i.Ra(s),i.c=null}))},t.Ea=function(t){this.b.push(t),_c(this).s((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Vo("unknown",null,null,null,new S("no-auth-event")),t(e))}))},t.Ra=function(t){J(this.b,(function(e){return e==t}))};var Tc={name:"pendingRedirect",D:"session"};function Sc(t){return ec(t.b,Tc,t.a)}function Cc(t,e,n,r){this.i={},this.u=0,this.O=t,this.m=e,this.v=n,this.G=r,this.h=[],this.f=!1,this.l=_(this.o,this),this.b=new qc,this.A=new Hc,this.g=new Ic(Uc(this.m,this.v)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.A,this.c.linkViaPopup=this.A,this.c.reauthViaPopup=this.A,this.a=kc(this.O,this.m,this.v,k,this.G)}function kc(t,e,n,i,o){var a=r.Z.SDK_VERSION||null;return gr()?new gc(t,e,n,a,i,o):new fu(t,e,n,a,i,o)}function Nc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.la().s((function(n){throw t.a==e&&t.reset(),n}))}function Ac(t){t.a.Wb()&&Nc(t).s((function(e){var n=new Vo("unknown",null,null,null,new S("operation-not-supported-in-this-environment"));Lc(e)&&t.o(n)})),t.a.Sb()||Bc(t.b)}function Pc(t,e){K(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Tc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Sc(t.g).then((function(){Nc(t).s((function(e){var n=new Vo("unknown",null,null,null,new S("operation-not-supported-in-this-environment"));Lc(e)&&t.o(n)}))})):Ac(t)})).s((function(){Ac(t)}))}function Oc(t,e){J(t.h,(function(t){return t==e}))}Cc.prototype.reset=function(){this.f=!1,this.a.Ra(this.l),this.a=kc(this.O,this.m,this.v,null,this.G),this.i={}},Cc.prototype.o=function(t){if(!t)throw new S("invalid-auth-event");if(6e5<=I()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Eb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=I())),e=!0;break}}return Bc(this.b),e};var xc=new qr(2e3,1e4),Rc=new qr(3e4,6e4);function Dc(t,e,n,r,i,o,a){return t.a.Lb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,a)}function Lc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Mc(t,e,n,r,i){var o;return function(t){return t.b.set(Tc,"pending",t.a)}(t.g).then((function(){return t.a.Mb(e,n,r,i).s((function(e){if(Lc(e))throw new S("operation-not-supported-in-this-environment");return o=e,Sc(t.g).then((function(){throw o}))})).then((function(){return t.a.Zb()?new be((function(){})):Sc(t.g).then((function(){return t.qa()})).then((function(){})).s((function(){}))}))}))}function Fc(t,e,n,r,i){return t.a.Nb(r,(function(t){e.ma(n,null,t,i)}),xc.get())}Cc.prototype.qa=function(){return this.b.qa()};var jc={};function Uc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Vc(t,e,n,r){var i=Uc(e,n,r);return jc[i]||(jc[i]=new Cc(t,e,n,r)),jc[i]}function qc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Bc(t){t.g||(t.g=!0,Gc(t,!1,null,null))}function zc(t){t.g&&!t.i&&Gc(t,!1,null,null)}function Wc(t,e){if(t.b=function(){return Ce(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Gc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return ke(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Wc(t,n):Wc(t,{user:null}),t.f=[],t.c=[]}function Hc(){}function Kc(){this.hb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.hb},set:function(t){this.hb=t},enumerable:!1})}function Qc(t,e){this.a=e,Yr(this,"verificationId",t)}function Jc(t,e,n,r){return new Mo(t).eb(e,n).then((function(t){return new Qc(t,r)}))}function Yc(t){var e=Wi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new S("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Xr(this,{token:t,expirationTime:Wr(1e3*e.exp),authTime:Wr(1e3*e.auth_time),issuedAtTime:Wr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Xc(t,e,n){var r=e&&e[Zc];if(!r)throw new S("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=dt(e),this.g=n,this.c=new oo(null,r),this.b=[];var i=this;z(e[$c]||[],(function(t){(t=ei(t))&&i.b.push(t)})),Yr(this,"auth",this.a),Yr(this,"session",this.c),Yr(this,"hints",this.b)}qc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},qc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Gc(this,!0,null,t.a),Ce()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.S(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then((function(e){Gc(t,s,e,null)})).s((function(e){Gc(t,s,null,e)}))}(this,t,e):ke(new S("invalid-auth-event")):(Gc(this,!1,null,null),Ce())}else ke(new S("invalid-auth-event"))},qc.prototype.qa=function(){var t=this;return new be((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new S("timeout");t.a&&t.a.cancel(),t.a=Sn(Rc.get()).then((function(){t.b||(t.g=!0,Gc(t,!0,null,e))}))}(t))}))},Hc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.ma(t.c,null,t.a,t.b),Ce()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.S(),t.i).then((function(t){e.ma(r,t,null,n)})).s((function(t){e.ma(r,null,t,n)}))}(t,e):ke(new S("invalid-auth-event"))}else ke(new S("invalid-auth-event"))},Qc.prototype.confirm=function(t){return t=Fo(this.verificationId,t),this.a(t)};var $c="mfaInfo",Zc="mfaPendingCredential";function tl(t,e,n,r){S.call(this,"multi-factor-auth-required",r,e),this.b=new Xc(t,e,n),Yr(this,"resolver",this.b)}function el(t,e,n){if(t&&v(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new tl(e,t.serverResponse,n,t.message)}catch(t){}return null}function nl(){}function rl(t){Yr(this,"factorId",t.fa),this.a=t}function il(t){if(rl.call(this,t),this.a.fa!=Mo.PROVIDER_ID)throw new S("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function ol(t,e){for(var n in Je.call(this,t),e)this[n]=e[n]}function al(t,e){this.a=t,this.b=[],this.c=_(this.xc,this),un(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&z(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ii]=t.uid),t.displayName&&(r[ni]=t.displayName),t.enrollmentTime&&(r[ri]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[oi]=t.phoneNumber);try{e=new ai(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),sl(this,n)}function sl(t,e){t.b=e,Yr(t,"enrolledFactors",e)}function ul(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function cl(t,e){t.stop(),t.b=Sn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=u.document,e=null;return Br()||!t?Ce():new be((function(n){e=function(){Br()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).s((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){cl(t,!0)})).s((function(e){t.i(e)&&cl(t,!1)}))}function ll(t){this.c=t,this.b=this.a=null}function hl(t){return t.b&&1e3*t.b.c||0}function fl(t,e){var n=e.refreshToken;t.b=zi(e[Xa]||""),t.a=n}function pl(t,e){this.a=t||null,this.b=e||null,Xr(this,{lastSignInTime:Wr(e||null),creationTime:Wr(t||null)})}function dl(t,e,n,r,i,o){Xr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function vl(t,e,n){this.G=[],this.l=t.apiKey,this.m=t.appName,this.o=t.authDomain||null;var i=r.Z.SDK_VERSION?kr(r.Z.SDK_VERSION):null;this.a=new Ja(this.l,O(k),i),t.emulatorConfig&&rs(this.a,t.emulatorConfig),this.b=new ll(this.a),Il(this,e[Xa]),fl(this.b,e),Yr(this,"refreshToken",this.b.a),Cl(this,n||{}),wn.call(this),this.P=!1,this.o&&Or()&&(this.i=Vc(this.o,this.l,this.m)),this.R=[],this.f=null,this.u=function(t){return new ul((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=hl(t.b)-I()-3e5;return 0<e?e:0}))}(this),this.$=_(this.gb,this);var o=this;this.pa=null,this.Ba=function(t){o.wa(t.h)},this.ba=null,this.za=function(t){rs(o.a,t.c)},this.W=null,this.X=[],this.Aa=function(t){gl(o,t.f)},this.aa=null,this.N=new al(this,n),Yr(this,"multiFactor",this.N)}function yl(t,e){t.ba&&hn(t.ba,"languageCodeChanged",t.Ba),(t.ba=e)&&un(e,"languageCodeChanged",t.Ba)}function ml(t,e){t.W&&hn(t.W,"emulatorConfigChanged",t.za),(t.W=e)&&un(e,"emulatorConfigChanged",t.za)}function gl(t,e){t.X=e,os(t.a,r.Z.SDK_VERSION?kr(r.Z.SDK_VERSION,t.X):null)}function bl(t,e){t.aa&&hn(t.aa,"frameworkChanged",t.Aa),(t.aa=e)&&un(e,"frameworkChanged",t.Aa)}function wl(t){try{return r.Z.app(t.m).auth()}catch(e){throw new S("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function _l(t){t.A||t.u.b||(t.u.start(),hn(t,"tokenChanged",t.$),un(t,"tokenChanged",t.$))}function El(t){hn(t,"tokenChanged",t.$),t.u.stop()}function Il(t,e){t.ya=e,Yr(t,"_lat",e)}function Tl(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return Ae(e).then((function(){return t}))}function Sl(t){t.i&&!t.P&&(t.P=!0,Pc(t.i,t))}function Cl(t,e){Xr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new pl(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function kl(){}function Nl(t){return Ce().then((function(){if(t.A)throw new S("app-deleted")}))}function Al(t){return G(t.providerData,(function(t){return t.providerId}))}function Pl(t,e){e&&(Ol(t,e.providerId),t.providerData.push(e))}function Ol(t,e){J(t.providerData,(function(t){return t.providerId==e}))}function xl(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Yr(t,e,n)}function Rl(t,e){t!=e&&(Xr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Yr(t,"metadata",function(t){return new pl(t.a,t.b)}(e.metadata)):Yr(t,"metadata",new pl),z(e.providerData,(function(e){Pl(t,e)})),function(t,e){t.b=e.b,t.a=e.a}(t.b,e.b),Yr(t,"refreshToken",t.b.a),sl(t.N,e.N.b))}function Dl(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return eu(t.a,xs,{idToken:e}).then(_(t.Jc,t))}(t,e).then((function(){return n||xl(t,"isAnonymous",!1),e}))}))}function Ll(t,e){e[Xa]&&t.ya!=e[Xa]&&(fl(t.b,e),t.dispatchEvent(new ol("tokenChanged")),Il(t,e[Xa]),xl(t,"refreshToken",t.b.a))}function Ml(t,e){return Dl(t).then((function(){if(K(Al(t),e))return Tl(t).then((function(){throw new S("provider-already-linked")}))}))}function Fl(t,e,n){return $r({user:t,credential:jo(e),additionalUserInfo:e=Ji(e),operationType:n})}function jl(t,e){return Ll(t,e),t.reload().then((function(){return t}))}function Ul(t,e,n,i,o){if(!Or())return ke(new S("operation-not-supported-in-this-environment"));if(t.f&&!o)return ke(t.f);var a=Qi(n.providerId),s=jr(t.uid+":::"),u=null;(!Dr()||br())&&t.o&&n.isOAuthProvider&&(u=yu(t.o,t.l,t.m,e,n,null,s,r.Z.SDK_VERSION||null,null,null,t.tenantId));var c=dr(u,a&&a.ua,a&&a.ta);return i=i().then((function(){if(ql(t),!o)return t.I().then((function(){}))})).then((function(){return Dc(t.i,c,e,n,s,!!u,t.tenantId)})).then((function(){return new be((function(n,r){t.ma(e,null,new S("cancelled-popup-request"),t.h||null),t.g=n,t.O=r,t.h=s,t.c=Fc(t.i,t,e,c,s)}))})).then((function(t){return c&&pr(c),t?$r(t):null})).s((function(t){throw c&&pr(c),t})),Bl(t,i,o)}function Vl(t,e,n,r,i){if(!Or())return ke(new S("operation-not-supported-in-this-environment"));if(t.f&&!i)return ke(t.f);var o=null,a=jr(t.uid+":::");return r=r().then((function(){if(ql(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=a,Tl(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Gl,t.w(),e.a)),e})).then((function(){return Mc(t.i,e,n,a,t.tenantId)})).s((function(e){if(o=e,t.ha)return Hl(t.ha);throw o})).then((function(){if(o)throw o})),Bl(t,r,i)}function ql(t){if(!t.i||!t.P){if(t.i&&!t.P)throw new S("internal-error");throw new S("auth-domain-config-required")}}function Bl(t,e,n){var r=function(t,e,n){return t.f&&!n?(e.cancel(),ke(t.f)):e.s((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.f||t.dispatchEvent(new ol("userInvalidated")),t.f=e),e}))}(t,e,n);return t.G.push(r),r.na((function(){Q(t.G,r)})),r.s((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=el(e.w(),wl(t),_(t.ic,t))),n||e}))}function zl(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Xa]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=new vl(e,n,t);return t.providerData&&z(t.providerData,(function(t){t&&Pl(r,$r(t))})),t.redirectEventId&&(r.ga=t.redirectEventId),r}function Wl(t){this.a=t,this.b=$u()}Xc.prototype.Qc=function(t){var e=this;return t.rb(this.a.a,this.c).then((function(t){var n=dt(e.f);return delete n[$c],delete n[Zc],yt(n,t),e.g(n)}))},T(tl,S),nl.prototype.rb=function(t,e,n){return e.type==ao?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),yt(n,{phoneVerificationInfo:Lo(t.a)}),eu(e,Ps,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return yt(n={mfaPendingCredential:n},{phoneVerificationInfo:Lo(t.a)}),eu(e,Os,n)}))}(this,t,e)},T(rl,nl),T(il,rl),T(ol,Je),(t=al.prototype).xc=function(t){sl(this,function(t){var e=[];return z(t.mfaInfo||[],(function(t){(t=ei(t))&&e.push(t)})),e}(t.gd))},t.Qb=function(){return this.a.I().then((function(t){return new oo(t,null)}))},t.ec=function(t,e){var n=this,r=this.a.a;return this.Qb().then((function(n){return t.rb(r,n,e)})).then((function(t){return Ll(n.a,t),n.a.reload()}))},t.ad=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return eu(r,tu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=W(e.b,(function(t){return t.uid!=n}));return sl(e,r),Ll(e.a,t),e.a.reload().s((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:G(this.b,(function(t){return t.w()}))}}},ul.prototype.start=function(){this.a=this.c,cl(this,!0)},ul.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},ll.prototype.w=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:hl(this)}},ll.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?ke(new S("user-token-expired")):t||!this.b||I()>hl(this)-3e4?this.a?function(t,e){return function(t,e){return new be((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?as(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(ru(t)):t.access_token&&t.refresh_token?n(t):r(new S("internal-error")):r(new S("network-request-failed"))}),"POST",Yn(e).toString(),t.g,t.v.get()):r(new S("internal-error"))}))}(t.c,e).then((function(e){return t.b=zi(e.access_token),t.a=e.refresh_token,{accessToken:t.b.toString(),refreshToken:t.a}})).s((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}(this,{grant_type:"refresh_token",refresh_token:this.a}):Ce(null):Ce({accessToken:this.b.toString(),refreshToken:this.a})},pl.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},T(vl,wn),vl.prototype.wa=function(t){this.pa=t,ns(this.a,t)},vl.prototype.ka=function(){return this.pa},vl.prototype.Ga=function(){return X(this.X)},vl.prototype.gb=function(){this.u.b&&(this.u.stop(),this.u.start())},Yr(vl.prototype,"providerId","firebase"),(t=vl.prototype).reload=function(){var t=this;return Bl(this,Nl(this).then((function(){return Dl(t).then((function(){return Tl(t)})).then(kl)})))},t.nc=function(t){return this.I(t).then((function(t){return new Yc(t)}))},t.I=function(t){var e=this;return Bl(this,Nl(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new S("internal-error");return t.accessToken!=e.ya&&(Il(e,t.accessToken),e.dispatchEvent(new ol("tokenChanged"))),xl(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Jc=function(t){if(!(t=t.users)||!t.length)throw new S("internal-error");Cl(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?G(t,(function(t){return new dl(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Pl(this,e[n]);xl(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new ol("userReloaded",{gd:t}))},t.Kc=function(t){return Qr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.sb(t)},t.sb=function(t){var e=this,n=null;return Bl(this,t.c(this.a,this.uid).then((function(t){return Ll(e,t),n=Fl(e,t,"reauthenticate"),e.f=null,e.reload()})).then((function(){return n})),!0)},t.Bc=function(t){return Qr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.pb(t)},t.pb=function(t){var e=this,n=null;return Bl(this,Ml(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Fl(e,t,"link"),jl(e,t)})).then((function(){return n})))},t.Cc=function(t,e){var n=this;return Bl(this,Ml(this,"phone").then((function(){return Jc(wl(n),t,e,_(n.pb,n))})))},t.Lc=function(t,e){var n=this;return Bl(this,Ce().then((function(){return Jc(wl(n),t,e,_(n.sb,n))})),!0)},t.Ab=function(t){var e=this;return Bl(this,this.I().then((function(n){return e.a.Ab(n,t)})).then((function(t){return Ll(e,t),e.reload()})))},t.dd=function(t){var e=this;return Bl(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Ll(e,t),e.reload()})))},t.Bb=function(t){var e=this;return Bl(this,this.I().then((function(n){return e.a.Bb(n,t)})).then((function(t){return Ll(e,t),e.reload()})))},t.Cb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Nl(this);var e=this;return Bl(this,this.I().then((function(n){return e.a.Cb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Ll(e,t),xl(e,"displayName",t.displayName||null),xl(e,"photoURL",t.photoUrl||null),z(e.providerData,(function(t){"password"===t.providerId&&(Yr(t,"displayName",e.displayName),Yr(t,"photoURL",e.photoURL))})),Tl(e)})).then(kl))},t.bd=function(t){var e=this;return Bl(this,Dl(this).then((function(n){return K(Al(e),t)?function(t,e,n){return eu(t,ks,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return z(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),z(Al(e),(function(t){n[t]||Ol(e,t)})),n[Mo.PROVIDER_ID]||Yr(e,"phoneNumber",null),Tl(e)})):Tl(e).then((function(){throw new S("no-such-provider")}))})))},t.delete=function(){var t=this;return Bl(this,this.I().then((function(e){return eu(t.a,Cs,{idToken:e})})).then((function(){t.dispatchEvent(new ol("userDeleted"))}))).then((function(){for(var e=0;e<t.G.length;e++)t.G[e].cancel("app-deleted");yl(t,null),ml(t,null),bl(t,null),t.G=[],t.A=!0,El(t),Yr(t,"refreshToken",null),t.i&&Oc(t.i,t)}))},t.Eb=function(t,e){return!!("linkViaPopup"==t&&(this.h||null)==e&&this.g||"reauthViaPopup"==t&&(this.h||null)==e&&this.g||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.ma=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.h||null)||(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.h||null)?_(this.Jb,this):"reauthViaPopup"==t&&e==(this.h||null)?_(this.Kb,this):"linkViaRedirect"==t&&(this.ga||null)==e?_(this.Jb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?_(this.Kb,this):null},t.Dc=function(t){var e=this;return Ul(this,"linkViaPopup",t,(function(){return Ml(e,t.providerId).then((function(){return Tl(e)}))}),!1)},t.Mc=function(t){return Ul(this,"reauthViaPopup",t,(function(){return Ce()}),!0)},t.Ec=function(t){var e=this;return Vl(this,"linkViaRedirect",t,(function(){return Ml(e,t.providerId)}),!1)},t.Nc=function(t){return Vl(this,"reauthViaRedirect",t,(function(){return Ce()}),!0)},t.Jb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Bl(this,this.I().then((function(n){return bs(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Fl(i,t,"link"),jl(i,t)})).then((function(){return o})))},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Bl(this,Ce().then((function(){return co(ws(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Fl(i,t,"reauthenticate"),Ll(i,t),i.f=null,i.reload()})).then((function(){return o})),!0)},t.tb=function(t){var e=this,n=null;return Bl(this,this.I().then((function(e){return n=e,void 0===t||pt(t)?{}:Vi(new Pi(t))})).then((function(t){return e.a.tb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Db=function(t,e){var n=this,r=null;return Bl(this,this.I().then((function(t){return r=t,void 0===e||pt(e)?{}:Vi(new Pi(e))})).then((function(e){return n.a.Db(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.ic=function(t){var e=null,n=this;return Bl(this,t=co(Ce(t),n.uid).then((function(t){return e=Fl(n,t,"reauthenticate"),Ll(n,t),n.f=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&yt(t,this.metadata.w()),z(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),yt(t,this.N.w()),t};var Gl={name:"redirectUser",D:"session"};function Hl(t){return ec(t.b,Gl,t.a)}function Kl(t){this.a=t,this.b=$u(),this.c=null,this.f=function(t){var e=Yl("local"),n=Yl("session"),r=Yl("none");return function(t,e,n){var r=tc(e,n),i=Zu(t,e.D);return t.get(e,n).then((function(o){var a=null;try{a=Fr(u.localStorage.getItem(r))}catch(t){}if(a&&!o)return u.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&u.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(Jl,t.a).then((function(t){return t?Yl(t):e}))}))}))})).then((function(e){return t.c=e,Ql(t,e.D)})).s((function(){t.c||(t.c=e)}))}(this),this.b.addListener(Yl("local"),this.a,_(this.g,this))}function Ql(t,e){var n,r=[];for(n in Yu)Yu[n]!==e&&r.push(ec(t.b,Yl(Yu[n]),t.a));return r.push(ec(t.b,Jl,t.a)),function(t){return new be((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)Ne(t[s],E(o,s),a);else e(i)}))}(r)}Kl.prototype.g=function(){var t=this,e=Yl("local");th(this,(function(){return Ce().then((function(){return t.c&&"local"!=t.c.D?t.b.get(e,t.a):null})).then((function(n){if(n)return Ql(t,"local").then((function(){t.c=e}))}))}))};var Jl={name:"persistence",D:"session"};function Yl(t){return{name:"authUser",D:t}}function Xl(t,e){return th(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function $l(t){return th(t,(function(){return ec(t.b,t.c,t.a)}))}function Zl(t,e,n){return th(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),zl(t||{})}))}))}function th(t,e){return t.f=t.f.then(e,e),t.f}function eh(t){if(this.m=!1,Yr(this,"settings",new Kc),Yr(this,"app",t),!ch(this).options||!ch(this).options.apiKey)throw new S("invalid-api-key");t=r.Z.SDK_VERSION?kr(r.Z.SDK_VERSION):null,this.a=new Ja(ch(this).options&&ch(this).options.apiKey,O(k),t),this.R=[],this.u=[],this.P=[],this.ac=r.Z.INTERNAL.createSubscribe(_(this.yc,this)),this.X=void 0,this.bc=r.Z.INTERNAL.createSubscribe(_(this.zc,this)),sh(this,null),this.l=new Kl(ch(this).options.apiKey+":"+ch(this).name),this.G=new Wl(ch(this).options.apiKey+":"+ch(this).name),this.$=ph(this,function(t){var e=ch(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Gl,t.a).then((function(t){return t&&e&&(t.authDomain=e),zl(t||{})}))}(t.G,ch(t).options.authDomain).then((function(e){return(t.o=e)&&(e.ha=t.G),Hl(t.G)}));return ph(t,e)}(t).then((function(){return Zl(t.l,e,t.f)})).then((function(e){return e?(e.ha=t.G,t.o&&(t.o.ga||null)==(e.ga||null)?e:e.reload().then((function(){return Xl(t.l,e).then((function(){return e}))})).s((function(n){return"auth/network-request-failed"==n.code?e:$l(t.l)}))):null})).then((function(e){sh(t,e||null)}));return ph(t,n)}(this)),this.i=ph(this,function(t){return t.$.then((function(){return ah(t)})).s((function(){})).then((function(){if(!t.m)return t.pa()})).s((function(){})).then((function(){if(!t.m){t.ba=!0;var e=t.l;e.b.addListener(Yl("local"),e.a,t.pa)}}))}(this)),this.ba=!1,this.pa=_(this.Yc,this),this.Ba=_(this.da,this),this.ya=_(this.kc,this),this.za=_(this.vc,this),this.Aa=_(this.wc,this),this.b=null,function(t){var e=ch(t).options.authDomain,n=ch(t).options.apiKey;e&&Or()&&(t.gb=t.$.then((function(){if(!t.m){if(t.b=Vc(e,n,ch(t).name,t.f),Pc(t.b,t),lh(t)&&Sl(lh(t)),t.o){Sl(t.o);var r=t.o;r.wa(t.ka()),yl(r,t),gl(r=t.o,t.N),bl(r,t),rs((r=t.o).a,t.f),ml(r,t),t.o=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=_(this.delete,this),this.INTERNAL.logFramework=_(this.Fc,this),this.A=0,wn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ka()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.S()},set:function(t){this.xb(t)},enumerable:!1}),t.W=null}(this),this.N=[],this.f=null}function nh(t){Je.call(this,"languageCodeChanged"),this.h=t}function rh(t){Je.call(this,"emulatorConfigChanged"),this.c=t}function ih(t){Je.call(this,"frameworkChanged"),this.f=t}function oh(t){return t.gb||ke(new S("auth-domain-config-required"))}function ah(t){if(!Or())return ke(new S("operation-not-supported-in-this-environment"));var e=oh(t).then((function(){return t.b.qa()})).then((function(t){return t?$r(t):null}));return ph(t,e)}function sh(t,e){lh(t)&&(function(t,e){J(t.R,(function(t){return t==e}))}(lh(t),t.Ba),hn(lh(t),"tokenChanged",t.ya),hn(lh(t),"userDeleted",t.za),hn(lh(t),"userInvalidated",t.Aa),El(lh(t))),e&&(e.R.push(t.Ba),un(e,"tokenChanged",t.ya),un(e,"userDeleted",t.za),un(e,"userInvalidated",t.Aa),0<t.A&&_l(e)),Yr(t,"currentUser",e),e&&(e.wa(t.ka()),yl(e,t),gl(e,t.N),bl(e,t),rs(e.a,t.f),ml(e,t))}function uh(t,e){var n=null,r=null;return ph(t,e.then((function(e){return n=jo(e),r=Ji(e),function(t,e){var n={};return n.apiKey=ch(t).options.apiKey,n.authDomain=ch(t).options.authDomain,n.appName=ch(t).name,t.f&&(n.emulatorConfig=t.f),t.$.then((function(){return function(t,e,n,r){var i=new vl(t,e);return n&&(i.ha=n),r&&gl(i,r),i.reload().then((function(){return i}))}(n,e,t.G,t.Ga())})).then((function(e){return lh(t)&&e.uid==lh(t).uid?(Rl(lh(t),e),t.da(e)):(sh(t,e),Sl(e),t.da(e))})).then((function(){fh(t)}))}(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=el(e.w(),t,_(t.jc,t))),n||e})).then((function(){return $r({user:lh(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function ch(t){return t.app}function lh(t){return t.currentUser}function hh(t){return lh(t)&&lh(t)._lat||null}function fh(t){if(t.ba){for(var e=0;e<t.u.length;e++)t.u[e]&&t.u[e](hh(t));if(t.X!==t.getUid()&&t.P.length)for(t.X=t.getUid(),e=0;e<t.P.length;e++)t.P[e]&&t.P[e](hh(t))}}function ph(t,e){return t.R.push(e),e.na((function(){Q(t.R,e)})),e}function dh(){}function vh(){this.a={},this.b=1e12}Kl.prototype.wb=function(t){var e=null,n=this;return function(t){var e=new S("invalid-persistence-type"),n=new S("unsupported-persistence-type");t:{for(r in Yu)if(Yu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(_r()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Au()&&"none"!==t)throw n;break;default:if(!Pr()&&"none"!==t)throw n}}(t),th(this,(function(){return t!=n.c.D?n.b.get(n.c,n.a).then((function(r){return e=r,Ql(n,t)})).then((function(){if(n.c=Yl(t),e)return n.b.set(n.c,e,n.a)})):Ce()}))},T(eh,wn),T(nh,Je),T(rh,Je),T(ih,Je),(t=eh.prototype).wb=function(t){return ph(this,t=this.l.wb(t))},t.wa=function(t){this.aa===t||this.m||(this.aa=t,ns(this.a,this.aa),this.dispatchEvent(new nh(this.ka())))},t.ka=function(){return this.aa},t.ed=function(){var t=u.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.fd=function(t){if(!this.f){if(!/^https?:\/\//.test(t))throw new S("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");zr("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),u.document&&mr().then((function(){var t=u.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),u.document.body.appendChild(t)})),this.f={url:t},this.settings.hb=!0,rs(this.a,this.f),this.dispatchEvent(new rh(this.f))}},t.Fc=function(t){this.N.push(t),os(this.a,r.Z.SDK_VERSION?kr(r.Z.SDK_VERSION,this.N):null),this.dispatchEvent(new ih(this.N))},t.Ga=function(){return X(this.N)},t.xb=function(t){this.W===t||this.m||(this.W=t,this.a.b=this.W)},t.S=function(){return this.W},t.toJSON=function(){return{apiKey:ch(this).options.apiKey,authDomain:ch(this).options.authDomain,appName:ch(this).name,currentUser:lh(this)&&lh(this).w()}},t.Eb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.h==e&&!!this.g;default:return!1}},t.ma=function(t,e,n,r){"signInViaPopup"==t&&this.h==r&&(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.h==e&&this.g?_(this.hc,this):null},t.hc=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return uh(i,gs(i.a,o))}))},t.Wc=function(t){if(!Or())return ke(new S("operation-not-supported-in-this-environment"));var e=this,n=Qi(t.providerId),i=jr(),o=null;(!Dr()||br())&&ch(this).options.authDomain&&t.isOAuthProvider&&(o=yu(ch(this).options.authDomain,ch(this).options.apiKey,ch(this).name,"signInViaPopup",t,null,i,r.Z.SDK_VERSION||null,null,null,this.S(),this.f));var a=dr(o,n&&n.ua,n&&n.ta);return ph(this,n=oh(this).then((function(n){return Dc(n,a,"signInViaPopup",t,i,!!o,e.S())})).then((function(){return new be((function(t,n){e.ma("signInViaPopup",null,new S("cancelled-popup-request"),e.h),e.g=t,e.O=n,e.h=i,e.c=Fc(e.b,e,"signInViaPopup",a,i)}))})).then((function(t){return a&&pr(a),t?$r(t):null})).s((function(t){throw a&&pr(a),t})))},t.Xc=function(t){if(!Or())return ke(new S("operation-not-supported-in-this-environment"));var e=this;return ph(this,oh(this).then((function(){return function(t){return th(t,(function(){return t.b.set(Jl,t.c.D,t.a)}))}(e.l)})).then((function(){return Mc(e.b,"signInViaRedirect",t,void 0,e.S())})))},t.qa=function(){var t=this;return ah(this).then((function(e){return t.b&&zc(t.b.b),e})).s((function(e){throw t.b&&zc(t.b.b),e}))},t.cd=function(t){if(!t)return ke(new S("null-user"));if(this.W!=t.tenantId)return ke(new S("tenant-id-mismatch"));var e=this,n={};n.apiKey=ch(this).options.apiKey,n.authDomain=ch(this).options.authDomain,n.appName=ch(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[Xa]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new vl(e||{apiKey:t.l,authDomain:t.o,appName:t.m},o),n&&(e.ha=n),r&&gl(e,r),Rl(e,t),e}(t,n,e.G,e.Ga());return ph(this,this.i.then((function(){if(ch(e).options.apiKey!=t.l)return r.reload()})).then((function(){return lh(e)&&t.uid==lh(e).uid?(Rl(lh(e),t),e.da(t)):(sh(e,r),Sl(r),e.da(r))})).then((function(){fh(e)})))},t.zb=function(){var t=this;return ph(this,this.i.then((function(){return t.b&&zc(t.b.b),lh(t)?(sh(t,null),$l(t.l).then((function(){fh(t)}))):Ce()})))},t.Yc=function(){var t=this;return Zl(this.l,ch(this).options.authDomain).then((function(e){if(!t.m){var n;if(n=lh(t)&&e){n=lh(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Rl(lh(t),e),lh(t).I();(lh(t)||e)&&(sh(t,e),e&&(Sl(e),e.ha=t.G),t.b&&Pc(t.b,t),fh(t))}}))},t.da=function(t){return Xl(this.l,t)},t.kc=function(){fh(this),this.da(lh(this))},t.vc=function(){this.zb()},t.wc=function(){this.zb()},t.jc=function(t){var e=this;return this.i.then((function(){return uh(e,Ce(t))}))},t.yc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(lh(e))}))},t.zc=function(t){var e=this;!function(t,e){t.P.push(e),ph(t,t.i.then((function(){!t.m&&K(t.P,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(hh(t)))})))}(this,(function(){t.next(lh(e))}))},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(lh(r)):"function"==typeof t.next&&t.next(lh(r))})),this.ac(t,e,n)},t.Gc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.X=r.getUid(),"function"==typeof t?t(lh(r)):"function"==typeof t.next&&t.next(lh(r))})),this.bc(t,e,n)},t.mc=function(t){var e=this;return ph(this,this.i.then((function(){return lh(e)?lh(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Sc=function(t){var e=this;return this.i.then((function(){return uh(e,eu(e.a,Js,{token:t}))})).then((function(t){var n=t.user;return xl(n,"isAnonymous",!1),e.da(n),t}))},t.Tc=function(t,e){var n=this;return this.i.then((function(){return uh(n,eu(n.a,Ys,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.i.then((function(){return uh(n,eu(n.a,Ts,{email:t,password:e}))}))},t.Za=function(t){var e=this;return this.i.then((function(){return uh(e,t.ja(e.a))}))},t.Rc=function(t){return Qr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Za(t)},t.yb=function(){var t=this;return this.i.then((function(){var e=lh(t);if(e&&e.isAnonymous){var n=$r({providerId:null,isNewUser:!1});return $r({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return uh(t,t.a.yb()).then((function(e){var n=e.user;return xl(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return lh(this)&&lh(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.A++,0<this.A&&lh(this)&&_l(lh(this))},t.Oc=function(t){var e=this;z(this.u,(function(n){n==t&&e.A--})),0>this.A&&(this.A=0),0==this.A&&lh(this)&&El(lh(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.u.push(t),ph(this,this.i.then((function(){e.m||K(e.u,t)&&t(hh(e))})))},t.removeAuthTokenListener=function(t){J(this.u,(function(e){return e==t}))},t.delete=function(){this.m=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.l&&(t=this.l).b.removeListener(Yl("local"),t.a,this.pa),this.b&&(Oc(this.b,this),zc(this.b.b)),Promise.resolve()},t.gc=function(t){return ph(this,function(t,e){return eu(t,Ss,{identifier:e,continueUri:xr()?cr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Ac=function(t){return!!xo(t)},t.vb=function(t,e){var n=this;return ph(this,Ce().then((function(){var t=new Pi(e);if(!t.c)throw new S("argument-error",Ri+" must be true when sending sign in link to email");return Vi(t)})).then((function(e){return n.a.vb(t,e)})).then((function(){})))},t.hd=function(t){return this.Qa(t).then((function(t){return t.data.email}))},t.mb=function(t,e){return ph(this,this.a.mb(t,e).then((function(){})))},t.Qa=function(t){return ph(this,this.a.Qa(t).then((function(t){return new si(t)})))},t.ib=function(t){return ph(this,this.a.ib(t).then((function(){})))},t.ub=function(t,e){var n=this;return ph(this,Ce().then((function(){return void 0===e||pt(e)?{}:Vi(new Pi(e))})).then((function(e){return n.a.ub(t,e)})).then((function(){})))},t.Vc=function(t,e){return ph(this,Jc(this,t,e,_(this.Za,this)))},t.Uc=function(t,e){var n=this;return ph(this,Ce().then((function(){var r=e||cr(),i=Oo(t,r);if(!(r=xo(r)))throw new S("argument-error","Invalid email link!");if(r.tenantId!==n.S())throw new S("tenant-id-mismatch");return n.Za(i)})))},dh.prototype.render=function(){},dh.prototype.reset=function(){},dh.prototype.getResponse=function(){},dh.prototype.execute=function(){};var yh=null;function mh(t,e){return(e=gh(e))&&t.a[e]||null}function gh(t){return(t=void 0===t?1e12:t)?t.toString():null}function bh(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ae(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():un(this.f,"click",this.i)}function wh(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function _h(){}function Eh(){}vh.prototype.render=function(t,e){return this.a[this.b.toString()]=new bh(t,e),this.b++},vh.prototype.reset=function(t){var e=mh(this,t);t=gh(t),e&&t&&(e.delete(),delete this.a[t])},vh.prototype.getResponse=function(t){return(t=mh(this,t))?t.getResponse():null},vh.prototype.execute=function(t){(t=mh(this,t))&&t.execute()},bh.prototype.getResponse=function(){return wh(this),this.b},bh.prototype.execute=function(){wh(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()}),6e4)}),500))},bh.prototype.delete=function(){wh(this),this.g=!0,clearTimeout(this.a),this.a=null,hn(this.f,"click",this.i)},Yr(_h,"FACTOR_ID","phone"),Eh.prototype.g=function(){return yh||(yh=new vh),Ce(yh)},Eh.prototype.c=function(){};var Ih=null;function Th(){this.b=u.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Sh=new gt(_t,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Ch=new qr(3e4,6e4);Th.prototype.g=function(t){var e=this;return new be((function(n,r){var i=setTimeout((function(){r(new S("network-request-failed"))}),Ch.get());!u.grecaptcha||t!==e.f&&!e.b?(u[e.a]=function(){if(u.grecaptcha){e.f=t;var o=u.grecaptcha.render;u.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(u.grecaptcha)}else clearTimeout(i),r(new S("internal-error"));delete u[e.a]},Ce(Ba(St(Sh,{onload:e.a,hl:t||""}))).s((function(){clearTimeout(i),r(new S("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(u.grecaptcha))}))},Th.prototype.c=function(){this.b--};var kh=null;function Nh(t,e,n,r,i,o,a){if(Yr(this,"type","recaptcha"),this.c=this.f=null,this.A=!1,this.m=e,this.g=null,a?(Ih||(Ih=new Eh),a=Ih):(kh||(kh=new Th),a=kh),this.v=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Oh])throw new S("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[xh],!u.document)throw new S("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ae(e)||!this.i&&ae(e).hasChildNodes())throw new S("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.o=new Ja(t,o||null,i||null),this.u=r||function(){return null};var s=this;this.l=[];var c=this.a[Ah];this.a[Ah]=function(t){if(Rh(s,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Ar(c,u);"function"==typeof e&&e(t)}};var l=this.a[Ph];this.a[Ph]=function(){if(Rh(s,null),"function"==typeof l)l();else if("string"==typeof l){var t=Ar(l,u);"function"==typeof t&&t()}}}var Ah="callback",Ph="expired-callback",Oh="sitekey",xh="size";function Rh(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Dh(t,e){return t.h.push(e),e.na((function(){Q(t.h,e)})),e}function Lh(t){if(t.A)throw new S("internal-error","RecaptchaVerifier instance has been destroyed.")}function Mh(t,e,n){var i=!1;try{this.b=n||r.Z.app()}catch(t){throw new S("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new S("invalid-api-key");n=this.b.options.apiKey;var o=this,a=null;try{a=this.b.auth().Ga()}catch(t){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}a=r.Z.SDK_VERSION?kr(r.Z.SDK_VERSION,a):null,Nh.call(this,n,t,e,(function(){try{var t=o.b.auth().ka()}catch(e){t=null}return t}),a,O(k),i)}function Fh(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new S("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].K(n[i])&&!o){if(e=e[i],0>i||i>=jh.length)throw new S("internal-error","Argument validator received an unsupported number of arguments.");n=jh[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}r=null}}if(r)throw new S("argument-error",t+" failed: "+r)}(t=Nh.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Dh(this,Ce().then((function(){if(xr()&&!wr())return mr();throw new S("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.v.g(t.u())})).then((function(e){return t.g=e,eu(t.o,js,{})})).then((function(e){t.a[Oh]=e.recaptchaSiteKey})).s((function(e){throw t.f=null,e})))},t.render=function(){Lh(this);var t=this;return Dh(this,this.Ia().then((function(){if(null===t.c){var e=t.m;if(!t.i){var n=ae(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!oe&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Bt(a.name),'"'),a.type){o.push(' type="',Bt(a.type),'"');var s={};yt(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=fe(i,o),a&&("string"==typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):se(o,a)),2<r.length&&he(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){Lh(this);var t=this;return Dh(this,this.render().then((function(e){return new be((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){J(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){Lh(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Lh(this),this.A=!0,this.v.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ae(this.m);for(var e;e=t.firstChild;)t.removeChild(e)}},T(Mh,Nh);var jh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Uh(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"==typeof t}}}function Vh(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"==typeof t}}}function qh(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:v}}function Bh(t,e){return{name:t||"",J:"a function",optional:!!e,K:function(t){return"function"==typeof t}}}function zh(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function Wh(t){return{name:t?t+"Credential":"credential",J:t?"a valid "+t+" credential":"a valid credential",optional:!1,K:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ja||!n)}}}function Gh(t,e){return v(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Hh(t){return v(t)&&"string"==typeof t.uid}function Kh(t,e,n,r){return{name:n||"",J:t.J+" or "+e.J,optional:!!r,K:function(n){return t.K(n)||e.K(n)}}}function Qh(t,e){for(var n in e){var r=e[n].name;t[r]=Xh(r,t[n],e[n].j)}}function Jh(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:E((function(t){return this[t]}),n),set:E((function(t,e,n,r){Fh(t,[n],[r],!0),this[e]=r}),r,n,e[n].jb),enumerable:!0})}}function Yh(t,e,n,r){t[e]=Xh(e,n,r)}function Xh(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Fh(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Qh(eh.prototype,{ib:{name:"applyActionCode",j:[Uh("code")]},Qa:{name:"checkActionCode",j:[Uh("code")]},mb:{name:"confirmPasswordReset",j:[Uh("code"),Uh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Uh("email"),Uh("password")]},gc:{name:"fetchSignInMethodsForEmail",j:[Uh("email")]},qa:{name:"getRedirectResult",j:[]},Ac:{name:"isSignInWithEmailLink",j:[Uh("emailLink")]},Gc:{name:"onAuthStateChanged",j:[Kh(qh(),Bh(),"nextOrObserver"),Bh("opt_error",!0),Bh("opt_completed",!0)]},Hc:{name:"onIdTokenChanged",j:[Kh(qh(),Bh(),"nextOrObserver"),Bh("opt_error",!0),Bh("opt_completed",!0)]},ub:{name:"sendPasswordResetEmail",j:[Uh("email"),Kh(qh("opt_actionCodeSettings",!0),zh(null,!0),"opt_actionCodeSettings",!0)]},vb:{name:"sendSignInLinkToEmail",j:[Uh("email"),qh("actionCodeSettings")]},wb:{name:"setPersistence",j:[Uh("persistence")]},Rc:{name:"signInAndRetrieveDataWithCredential",j:[Wh()]},yb:{name:"signInAnonymously",j:[]},Za:{name:"signInWithCredential",j:[Wh()]},Sc:{name:"signInWithCustomToken",j:[Uh("token")]},Tc:{name:"signInWithEmailAndPassword",j:[Uh("email"),Uh("password")]},Uc:{name:"signInWithEmailLink",j:[Uh("email"),Uh("emailLink",!0)]},Vc:{name:"signInWithPhoneNumber",j:[Uh("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Wc:{name:"signInWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Xc:{name:"signInWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},cd:{name:"updateCurrentUser",j:[Kh({name:"user",J:"an instance of Firebase User",optional:!1,K:function(t){return!!(t&&t instanceof vl)}},zh(),"user")]},zb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Uh(null,!0)]},ed:{name:"useDeviceLanguage",j:[]},fd:{name:"useEmulator",j:[Uh("url")]},hd:{name:"verifyPasswordResetCode",j:[Uh("code")]}}),Jh(eh.prototype,{lc:{name:"languageCode",jb:Kh(Uh(),zh(),"languageCode")},ti:{name:"tenantId",jb:Kh(Uh(),zh(),"tenantId")}}),eh.Persistence=Yu,eh.Persistence.LOCAL="local",eh.Persistence.SESSION="session",eh.Persistence.NONE="none",Qh(vl.prototype,{delete:{name:"delete",j:[]},nc:{name:"getIdTokenResult",j:[Vh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Vh("opt_forceRefresh",!0)]},Bc:{name:"linkAndRetrieveDataWithCredential",j:[Wh()]},pb:{name:"linkWithCredential",j:[Wh()]},Cc:{name:"linkWithPhoneNumber",j:[Uh("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Dc:{name:"linkWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Ec:{name:"linkWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Kc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Wh()]},sb:{name:"reauthenticateWithCredential",j:[Wh()]},Lc:{name:"reauthenticateWithPhoneNumber",j:[Uh("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Mc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Nc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},tb:{name:"sendEmailVerification",j:[Kh(qh("opt_actionCodeSettings",!0),zh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Uh(null,!0)]},bd:{name:"unlink",j:[Uh("provider")]},Ab:{name:"updateEmail",j:[Uh("email")]},Bb:{name:"updatePassword",j:[Uh("password")]},dd:{name:"updatePhoneNumber",j:[Wh("phone")]},Cb:{name:"updateProfile",j:[qh("profile")]},Db:{name:"verifyBeforeUpdateEmail",j:[Uh("email"),Kh(qh("opt_actionCodeSettings",!0),zh(null,!0),"opt_actionCodeSettings",!0)]}}),Qh(vh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Qh(dh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Qh(be.prototype,{na:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),Jh(Kc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",jb:Vh("appVerificationDisabledForTesting")}}),Qh(Qc.prototype,{confirm:{name:"confirm",j:[Uh("verificationCode")]}}),Yh(uo,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[yo,Ao,Do,fo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[Kh(Uh(),qh(),"json")]),Yh(Po,"credential",(function(t,e){return new No(t,e)}),[Uh("email"),Uh("password")]),Qh(No.prototype,{w:{name:"toJSON",j:[Uh(null,!0)]}}),Qh(wo.prototype,{Ca:{name:"addScope",j:[Uh("scope")]},Ka:{name:"setCustomParameters",j:[qh("customOAuthParameters")]}}),Yh(wo,"credential",_o,[Kh(Uh(),qh(),"token")]),Yh(Po,"credentialWithLink",Oo,[Uh("email"),Uh("emailLink")]),Qh(Eo.prototype,{Ca:{name:"addScope",j:[Uh("scope")]},Ka:{name:"setCustomParameters",j:[qh("customOAuthParameters")]}}),Yh(Eo,"credential",Io,[Kh(Uh(),qh(),"token")]),Qh(To.prototype,{Ca:{name:"addScope",j:[Uh("scope")]},Ka:{name:"setCustomParameters",j:[qh("customOAuthParameters")]}}),Yh(To,"credential",So,[Kh(Uh(),Kh(qh(),zh()),"idToken"),Kh(Uh(),zh(),"accessToken",!0)]),Qh(Co.prototype,{Ka:{name:"setCustomParameters",j:[qh("customOAuthParameters")]}}),Yh(Co,"credential",ko,[Kh(Uh(),qh(),"token"),Uh("secret",!0)]),Qh(bo.prototype,{Ca:{name:"addScope",j:[Uh("scope")]},credential:{name:"credential",j:[Kh(Uh(),Kh(qh(),zh()),"optionsOrIdToken"),Kh(Uh(),zh(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[qh("customOAuthParameters")]}}),Qh(po.prototype,{w:{name:"toJSON",j:[Uh(null,!0)]}}),Qh(lo.prototype,{w:{name:"toJSON",j:[Uh(null,!0)]}}),Yh(Mo,"credential",Fo,[Uh("verificationId"),Uh("verificationCode")]),Qh(Mo.prototype,{eb:{name:"verifyPhoneNumber",j:[Kh(Uh(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?Gh(t.session,ao)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Gh(t.session,so)&&Hh(t.multiFactorHint):t.session&&t.multiFactorUid?Gh(t.session,so)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),Qh(Ro.prototype,{w:{name:"toJSON",j:[Uh(null,!0)]}}),Qh(S.prototype,{toJSON:{name:"toJSON",j:[Uh(null,!0)]}}),Qh(Ho.prototype,{toJSON:{name:"toJSON",j:[Uh(null,!0)]}}),Qh(Go.prototype,{toJSON:{name:"toJSON",j:[Uh(null,!0)]}}),Qh(tl.prototype,{toJSON:{name:"toJSON",j:[Uh(null,!0)]}}),Qh(Xc.prototype,{Qc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.rb}}]}}),Qh(al.prototype,{Qb:{name:"getSession",j:[]},ec:{name:"enroll",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.rb}},Uh("displayName",!0)]},ad:{name:"unenroll",j:[Kh({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:Hh},Uh(),"multiFactorInfoIdentifier")]}}),Qh(Mh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Yh(_i,"parseLink",Ai,[Uh("link")]),Yh(_h,"assertion",(function(t){return new il(t)}),[Wh("phone")]),function(){if(void 0===r.Z||!r.Z.INTERNAL||!r.Z.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ci,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:ui,VERIFY_AND_CHANGE_EMAIL:li,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:eh,AuthCredential:uo,Error:S};Yh(t,"EmailAuthProvider",Po,[]),Yh(t,"FacebookAuthProvider",wo,[]),Yh(t,"GithubAuthProvider",Eo,[]),Yh(t,"GoogleAuthProvider",To,[]),Yh(t,"TwitterAuthProvider",Co,[]),Yh(t,"OAuthProvider",bo,[Uh("providerId")]),Yh(t,"SAMLAuthProvider",go,[Uh("providerId")]),Yh(t,"PhoneAuthProvider",Mo,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof eh)}}]),Yh(t,"RecaptchaVerifier",Mh,[Kh(Uh(),{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),qh("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof r.Z.app.App)}}]),Yh(t,"ActionCodeURL",_i,[]),Yh(t,"PhoneMultiFactorGenerator",_h,[]),r.Z.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new eh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),r.Z.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:_((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:_(t.mc,t),addAuthTokenListener:_(t.cc,t),removeAuthTokenListener:_(t.Oc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),r.Z.registerVersion("@firebase/auth","0.15.1"),r.Z.INTERNAL.extendNamespace({User:vl})}()}).apply(void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),n(991);var i=n(622),o=n(861),a=n(574),s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var c,l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},h=h||{},f=l||self;function p(){}function d(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function v(t){var e=d(t);return"array"==e||"object"==e&&"number"==typeof t.length}function y(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var m="closure_uid_"+(1e9*Math.random()>>>0),g=0;function b(t,e,n){return t.call.apply(t.bind,arguments)}function w(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function _(t,e,n){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:w).apply(null,arguments)}function E(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var I=Date.now;function T(t,e){function n(){}n.prototype=e.prototype,t.S=e.prototype,t.prototype=new n,t.prototype.constructor=t}function S(){this.j=this.j,this.i=this.i}S.prototype.j=!1,S.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,m)&&t[m]||(t[m]=++g)}(this)},S.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var C=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},k=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function N(t){return Array.prototype.concat.apply([],arguments)}function A(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function P(t){return/^[\s\xa0]*$/.test(t)}var O,x=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function R(t,e){return-1!=t.indexOf(e)}function D(t,e){return t<e?-1:t>e?1:0}t:{var L=f.navigator;if(L){var M=L.userAgent;if(M){O=M;break t}}O=""}function F(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function j(t){var e={};for(var n in t)e[n]=t[n];return e}var U="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<U.length;o++)n=U[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function q(t){return q[" "](t),t}q[" "]=p;var B,z,W=R(O,"Opera"),G=R(O,"Trident")||R(O,"MSIE"),H=R(O,"Edge"),K=H||G,Q=R(O,"Gecko")&&!(R(O.toLowerCase(),"webkit")&&!R(O,"Edge"))&&!(R(O,"Trident")||R(O,"MSIE"))&&!R(O,"Edge"),J=R(O.toLowerCase(),"webkit")&&!R(O,"Edge");function Y(){var t=f.document;return t?t.documentMode:void 0}t:{var X="",$=(z=O,Q?/rv:([^\);]+)(\)|;)/.exec(z):H?/Edge\/([\d\.]+)/.exec(z):G?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(z):J?/WebKit\/(\S+)/.exec(z):W?/(?:Version)[ \/]?(\S+)/.exec(z):void 0);if($&&(X=$?$[1]:""),G){var Z=Y();if(null!=Z&&Z>parseFloat(X)){B=String(Z);break t}}B=X}var tt,et={};function nt(t){return function(t,e){var n=et;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=x(String(B)).split("."),r=x(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=D(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||D(0==a[2].length,0==s[2].length)||D(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}f.document&&G?tt=Y()||parseInt(B,10)||void 0:tt=void 0;var rt=tt,it=!G||9<=Number(rt),ot=G&&!nt("9"),at=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{f.addEventListener("test",p,e),f.removeEventListener("test",p,e)}catch(t){}return t}();function st(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function ut(t,e){if(st.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Q){t:{try{q(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ct[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}st.prototype.b=function(){this.defaultPrevented=!0},T(ut,st);var ct={2:"touch",3:"pen",4:"mouse"};ut.prototype.b=function(){ut.S.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ot)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var lt="closure_listenable_"+(1e6*Math.random()|0),ht=0;function ft(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++ht,this.Y=this.Z=!1}function pt(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function dt(t){this.src=t,this.a={},this.b=0}function vt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=C(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(pt(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function yt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}dt.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=yt(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):((e=new ft(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var mt="closure_lm_"+(1e6*Math.random()|0),gt={};function bt(t,e,n,r,i){if(r&&r.once)return _t(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)bt(t,e[o],n,r,i);return null}return n=At(n),t&&t[lt]?t.va(e,n,y(r)?!!r.capture:!!r,i):wt(t,e,n,!1,r,i)}function wt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=y(i)?!!i.capture:!!i;if(a&&!it)return null;var s=kt(t);if(s||(t[mt]=s=new dt(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=Ct,e=it?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)at||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Tt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function _t(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)_t(t,e[o],n,r,i);return null}return n=At(n),t&&t[lt]?t.wa(e,n,y(r)?!!r.capture:!!r,i):wt(t,e,n,!0,r,i)}function Et(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Et(t,e[o],n,r,i);else r=y(r)?!!r.capture:!!r,n=At(n),t&&t[lt]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=yt(o=t.a[e],n,r,i))&&(pt(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=kt(t))&&(e=t.a[e.toString()],t=-1,e&&(t=yt(e,n,r,i)),(n=-1<t?e[t]:null)&&It(n))}function It(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[lt])vt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Tt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=kt(e))?(vt(n,t),0==n.b&&(n.src=null,e[mt]=null)):pt(t)}}}function Tt(t){return t in gt?gt[t]:gt[t]="on"+t}function St(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&It(t),n.call(r,e)}function Ct(t,e){if(t.Y)return!0;if(!it){if(!e)t:{e=["window","event"];for(var n=f,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return St(t,e=new ut(e,this))}return St(t,new ut(e,this))}function kt(t){return(t=t[mt])instanceof dt?t:null}var Nt="__closure_events_fn_"+(1e9*Math.random()>>>0);function At(t){return"function"==d(t)?t:(t[Nt]||(t[Nt]=function(e){return t.handleEvent(e)}),t[Nt])}function Pt(){S.call(this),this.c=new dt(this),this.J=this,this.C=null}function Ot(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.Y&&a.capture==n){var s=a.listener,u=a.ca||a.src;a.Z&&vt(t.c,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}T(Pt,S),Pt.prototype[lt]=!0,(c=Pt.prototype).addEventListener=function(t,e,n,r){bt(this,t,e,n,r)},c.removeEventListener=function(t,e,n,r){Et(this,t,e,n,r)},c.dispatchEvent=function(t){var e,n=this.C;if(n)for(e=[];n;n=n.C)e.push(n);n=this.J;var r=t.type||t;if("string"==typeof t)t=new st(t,n);else if(t instanceof st)t.target=t.target||n;else{var i=t;V(t=new st(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.a=e[o];i=Ot(a,r,!0,t)&&i}if(i=Ot(a=t.a=n,r,!0,t)&&i,i=Ot(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Ot(a=t.a=e[o],r,!1,t)&&i;return i},c.G=function(){if(Pt.S.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)pt(n[r]);delete e.a[t],e.b--}}this.C=null},c.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},c.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var xt=f.JSON.stringify;function Rt(){this.b=this.a=null}var Dt,Lt=new(function(){function t(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new Ft}),(function(t){t.reset()}),100);function Mt(){var t=qt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Ft(){this.next=this.b=this.a=null}function jt(t){f.setTimeout((function(){throw t}),0)}function Ut(t,e){Dt||function(){var t=f.Promise.resolve(void 0);Dt=function(){t.then(Bt)}}(),Vt||(Dt(),Vt=!0),qt.add(t,e)}Rt.prototype.add=function(t,e){var n=Lt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Ft.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Ft.prototype.reset=function(){this.next=this.b=this.a=null};var Vt=!1,qt=new Rt;function Bt(){for(var t;t=Mt();){try{t.a.call(t.b)}catch(t){jt(t)}var e=Lt;e.g(t),e.b<e.f&&(e.b++,t.next=e.a,e.a=t)}Vt=!1}function zt(t,e){Pt.call(this),this.b=t||1,this.a=e||f,this.f=_(this.Ya,this),this.g=I()}function Wt(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Gt(t,e,n){if("function"==d(t))n&&(t=_(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=_(t.handleEvent,t)}return 2147483647<Number(e)?-1:f.setTimeout(t,e||0)}function Ht(t){t.a=Gt((function(){t.a=null,t.c&&(t.c=!1,Ht(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}T(zt,Pt),(c=zt.prototype).aa=!1,c.M=null,c.Ya=function(){if(this.aa){var t=I()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),this.dispatchEvent("tick"),this.aa&&(Wt(this),this.start()))}},c.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=I())},c.G=function(){zt.S.G.call(this),Wt(this),delete this.a};var Kt=function(t){function e(e,n,r){var i=t.call(this)||this;return i.g=null!=r?e.bind(r):e,i.h=n,i.b=null,i.c=!1,i.a=null,i}return function(t,e){function n(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Ht(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(f.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(S);function Qt(t){S.call(this),this.b=t,this.a={}}T(Qt,S);var Jt=[];function Yt(t,e,n,r){Array.isArray(n)||(n&&(Jt[0]=n.toString()),n=Jt);for(var i=0;i<n.length;i++){var o=bt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Xt(t){F(t.a,(function(t,e){this.a.hasOwnProperty(e)&&It(t)}),t),t.a={}}function $t(){this.a=!0}function Zt(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return xt(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}Qt.prototype.G=function(){Qt.S.G.call(this),Xt(this)},Qt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},$t.prototype.info=function(){};var te=null;function ee(){return te=te||new Pt}function ne(t){st.call(this,"serverreachability",t)}function re(t){var e=ee();e.dispatchEvent(new ne(e,t))}function ie(t){st.call(this,"statevent",t)}function oe(t){var e=ee();e.dispatchEvent(new ie(e,t))}function ae(t){st.call(this,"timingevent",t)}function se(t,e){if("function"!=d(t))throw Error("Fn must not be null and must be a function");return f.setTimeout((function(){t()}),e)}T(ne,st),T(ie,st),T(ae,st);var ue={NO_ERROR:0,Za:1,gb:2,fb:3,bb:4,eb:5,hb:6,Da:7,TIMEOUT:8,kb:9},ce={ab:"complete",ob:"success",Ea:"error",Da:"abort",mb:"ready",nb:"readystatechange",TIMEOUT:"timeout",ib:"incrementaldata",lb:"progress",cb:"downloadprogress",pb:"uploadprogress"};function le(){}function he(t){var e;return(e=t.a)||(e=t.a={}),e}function fe(){}le.prototype.a=null;var pe,de={OPEN:"a",$a:"b",Ea:"c",jb:"d"};function ve(){st.call(this,"d")}function ye(){st.call(this,"c")}function me(){}function ge(t,e,n,r){this.g=t,this.c=e,this.f=n,this.T=r||1,this.J=new Qt(this),this.P=be,t=K?125:void 0,this.R=new zt(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.U=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.W=this.C=this.V=this.I=!1}T(ve,st),T(ye,st),T(me,le),pe=new me;var be=45e3,we={},_e={};function Ee(t,e,n){t.H=1,t.i=We(je(e)),t.j=n,t.I=!0,Ie(t,null)}function Ie(t,e){t.u=I(),Ce(t),t.l=je(t.i);var n=t.l,r=t.T;Array.isArray(r)||(r=[String(r)]),rn(n.b,"t",r),t.D=0,t.a=$n(t.g,t.g.C?e:null),0<t.O&&(t.F=new Kt(_(t.Ca,t,t.a),t.O)),Yt(t.J,t.a,"readystatechange",t.Wa),e=t.B?j(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),re(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");a=2<=h.length&&"type"==h[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a}))}(t.c,t.m,t.l,t.f,t.T,t.j)}function Te(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Se(t,n);if(i==_e){4==e&&(t.h=4,oe(14),r=!1),Zt(t.c,t.f,null,"[Incomplete Response]");break}if(i==we){t.h=4,oe(15),Zt(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Zt(t.c,t.f,i,null),Oe(t,i)}4==e&&0==n.length&&(t.h=1,oe(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.W&&(t.W=!0,(e=t.g).a==t&&e.V&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Wn(e),e.F=!0)):(Zt(t.c,t.f,n,"[Invalid Chunked Response]"),Pe(t),Ae(t))}function Se(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?_e:(n=Number(e.substring(n,r)),isNaN(n)?we:(r+=1)+n>e.length?_e:(e=e.substr(r,n),t.D=r+n,e))}function Ce(t){t.U=I()+t.P,ke(t,t.P)}function ke(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=se(_(t.Ua,t),e)}function Ne(t){t.o&&(f.clearTimeout(t.o),t.o=null)}function Ae(t){0==t.g.v||t.A||Kn(t.g,t)}function Pe(t){Ne(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Wt(t.R),Xt(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Oe(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||hn(n.b,t)))if(n.I=t.N,!t.C&&hn(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Hn(n),Ln(n)}zn(n),oe(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=se(_(n.Ra,n),6e3));if(1>=ln(n.b)&&n.ea){try{n.ea()}catch(t){}n.ea=void 0}}else Jn(n,11)}else if((t.C||n.a==t)&&Hn(n),!P(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var a=i[4];null!=a&&(n.pa=a,n.c.info("SVER="+n.pa));var s=i[5];if(null!=s&&"number"==typeof s&&0<s){var u=1.5*s;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(R(l,"spdy")||R(l,"quic")||R(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(fn(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,ze(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.V&&(n.N=I()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((u=n).la=Xn(u,u.C?u.ga:null,u.fa),p.C){pn(u.b,p);var d=p,v=u.D;v&&d.setTimeout(v),d.o&&(Ne(d),Ce(d)),u.a=p}else Bn(u);0<n.g.length&&jn(n)}else"stop"!=i[0]&&"close"!=i[0]||Jn(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Jn(n,7):Dn(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);re(4)}catch(t){}}function xe(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(v(t)||"string"==typeof t)k(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(v(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(v(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Re(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Re)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function De(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Le(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Le(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Le(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(c=ge.prototype).setTimeout=function(t){this.P=t},c.Wa=function(t){t=t.target;var e=this.F;e&&3==Pn(t)?e.f():this.Ca(t)},c.Ca=function(t){try{if(t==this.a)t:{var e=Pn(this.a),n=this.a.ua(),r=this.a.X();if(!(3>e||3==e&&!K&&!this.a.$())){this.A||4!=e||7==n||re(8==n||0>=r?3:2),Ne(this);var i=this.a.X();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,a){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a}))}(this.c,this.m,this.l,this.f,this.T,e,i),this.b){if(this.V&&!this.C){e:{if(this.a){var a,s=this.a;if((a=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(a)){var u=a;break e}}u=null}if(!u){this.b=!1,this.h=3,oe(12),Pe(this),Ae(this);break t}Zt(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Oe(this,u)}this.I?(Te(this,e,o),K&&this.b&&3==e&&(Yt(this.J,this.R,"tick",this.Va),this.R.start())):(Zt(this.c,this.f,o,null),Oe(this,o)),4==e&&Pe(this),this.b&&!this.A&&(4==e?Kn(this.g,this):(this.b=!1,Ce(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,oe(12)):(this.h=0,oe(13)),Pe(this),Ae(this)}}}catch(t){}},c.Va=function(){if(this.a){var t=Pn(this.a),e=this.a.$();this.D<e.length&&(Ne(this),Te(this,t,e),this.b&&4!=t&&Ce(this))}},c.cancel=function(){this.A=!0,Pe(this)},c.Ua=function(){this.o=null;var t=I();0<=t-this.U?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(re(3),oe(17)),Pe(this),this.h=2,Ae(this)):ke(this,this.U-t)},(c=Re.prototype).K=function(){De(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},c.L=function(){return De(this),this.a.concat()},c.get=function(t,e){return Le(this.b,t)?this.b[t]:e},c.set=function(t,e){Le(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},c.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Me=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Fe(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Fe){this.a=void 0!==e?e:t.a,Ue(this,t.f),this.j=t.j,Ve(this,t.c),qe(this,t.h),this.g=t.g,e=t.b;var n=new Ze;n.c=e.c,e.a&&(n.a=new Re(e.a),n.b=e.b),Be(this,n),this.i=t.i}else t&&(n=String(t).match(Me))?(this.a=!!e,Ue(this,n[1]||"",!0),this.j=Ge(n[2]||""),Ve(this,n[3]||"",!0),qe(this,n[4]),this.g=Ge(n[5]||"",!0),Be(this,n[6]||"",!0),this.i=Ge(n[7]||"")):(this.a=!!e,this.b=new Ze(null,this.a))}function je(t){return new Fe(t)}function Ue(t,e,n){t.f=n?Ge(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Ve(t,e,n){t.c=n?Ge(e,!0):e}function qe(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Be(t,e,n){e instanceof Ze?(t.b=e,function(t,e){e&&!t.f&&(tn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(en(this,e),rn(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=He(e,Xe)),t.b=new Ze(e,t.a))}function ze(t,e,n){t.b.set(e,n)}function We(t){return ze(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^I()).toString(36)),t}function Ge(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function He(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ke),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ke(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Fe.prototype.toString=function(){var t=[],e=this.f;e&&t.push(He(e,Qe,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(He(e,Qe,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(He(n,"/"==n.charAt(0)?Ye:Je,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",He(n,$e)),t.join("")};var Qe=/[#\/\?@]/g,Je=/[#\?:]/g,Ye=/[#\?]/g,Xe=/[#\?@]/g,$e=/#/g;function Ze(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function tn(t){t.a||(t.a=new Re,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function en(t,e){tn(t),e=on(t,e),Le(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Le((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&De(t)))}function nn(t,e){return tn(t),e=on(t,e),Le(t.a.b,e)}function rn(t,e,n){en(t,e),0<n.length&&(t.c=null,t.a.set(on(t,e),A(n)),t.b+=n.length)}function on(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function an(t,e){this.b=t,this.a=e}function sn(t){this.g=t||un,t=f.PerformanceNavigationTiming?0<(t=f.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(f.ia&&f.ia.ya&&f.ia.ya()&&f.ia.ya().qb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(c=Ze.prototype).add=function(t,e){tn(this),this.c=null,t=on(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},c.forEach=function(t,e){tn(this),this.a.forEach((function(n,r){k(n,(function(n){t.call(e,n,r,this)}),this)}),this)},c.L=function(){tn(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},c.K=function(t){tn(this);var e=[];if("string"==typeof t)nn(this,t)&&(e=N(e,this.a.get(on(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=N(e,t[n])}return e},c.set=function(t,e){return tn(this),this.c=null,nn(this,t=on(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},c.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},c.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var un=10;function cn(t){return!!t.b||!!t.a&&t.a.size>=t.f}function ln(t){return t.b?1:t.a?t.a.size:0}function hn(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function fn(t,e){t.a?t.a.add(e):t.b=e}function pn(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function dn(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=u(t.a.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return A(t.c)}function vn(){}function yn(){this.a=new vn}function mn(t,e,n){var r=n||"";try{xe(t,(function(t,n){var i=t;y(t)&&(i=xt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function gn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}sn.prototype.cancel=function(){var t,e;if(this.c=dn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=u(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},vn.prototype.stringify=function(t){return f.JSON.stringify(t,void 0)},vn.prototype.parse=function(t){return f.JSON.parse(t,void 0)};var bn=f.JSON.parse;function wn(t){Pt.call(this),this.headers=new Re,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=_n,this.D=this.F=!1}T(wn,Pt);var _n="",En=/^https?$/i,In=["POST","PUT"];function Tn(t){return"content-type"==t.toLowerCase()}function Sn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Cn(t),Nn(t)}function Cn(t){t.u||(t.u=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function kn(t){if(t.b&&void 0!==h&&(!t.s[1]||4!=Pn(t)||2!=t.X()))if(t.l&&4==Pn(t))Gt(t.za,0,t);else if(t.dispatchEvent("readystatechange"),4==Pn(t)){t.b=!1;try{var e,n=t.X();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Me)[1]||null;if(!o&&f.self&&f.self.location){var a=f.self.location.protocol;o=a.substr(0,a.length-1)}i=!En.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var s=2<Pn(t)?t.a.statusText:""}catch(t){s=""}t.f=s+" ["+t.X()+"]",Cn(t)}}finally{Nn(t)}}}function Nn(t,e){if(t.a){An(t);var n=t.a,r=t.s[0]?p:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function An(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(f.clearTimeout(t.m),t.m=null)}function Pn(t){return t.a?t.a.readyState:0}function On(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return F(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):ze(t,e,n))}function xn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Rn(t){this.pa=0,this.g=[],this.c=new $t,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.W=this.i=this.O=this.l=null,this.La=this.R=0,this.Ia=xn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.T=!0,this.I=this.oa=this.P=-1,this.U=this.o=this.u=0,this.Fa=xn("baseRetryDelayMs",5e3,t),this.Ma=xn("retryDelaySeedMs",1e4,t),this.Ja=xn("forwardChannelMaxRetries",2,t),this.ma=xn("forwardChannelRequestTimeoutMs",2e4,t),this.Ka=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new sn(t&&t.concurrentRequestLimit),this.ka=new yn,this.da=t&&t.fastHandshake||!1,this.Ga=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.T=!1),this.V=!this.da&&this.T&&t&&t.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null}function Dn(t){if(Mn(t),3==t.v){var e=t.R++,n=je(t.B);ze(n,"SID",t.J),ze(n,"RID",e),ze(n,"TYPE","terminate"),Vn(t,n),(e=new ge(t,t.c,e,void 0)).H=2,e.i=We(je(n)),n=!1,f.navigator&&f.navigator.sendBeacon&&(n=f.navigator.sendBeacon(e.i.toString(),"")),!n&&f.Image&&((new Image).src=e.i,n=!0),n||(e.a=$n(e.g,null),e.a.ba(e.i)),e.u=I(),Ce(e)}Yn(t)}function Ln(t){t.a&&(Wn(t),t.a.cancel(),t.a=null)}function Mn(t){Ln(t),t.j&&(f.clearTimeout(t.j),t.j=null),Hn(t),t.b.cancel(),t.h&&("number"==typeof t.h&&f.clearTimeout(t.h),t.h=null)}function Fn(t,e){t.g.push(new an(t.La++,e)),3==t.v&&jn(t)}function jn(t){cn(t.b)||t.h||(t.h=!0,Ut(t.Ba,t),t.u=0)}function Un(t,e){var n;n=e?e.f:t.R++;var r=je(t.B);ze(r,"SID",t.J),ze(r,"RID",n),ze(r,"AID",t.P),Vn(t,r),t.i&&t.l&&On(r,t.i,t.l),n=new ge(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=qn(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),fn(t.b,n),Ee(n,r,e)}function Vn(t,e){t.f&&xe({},(function(t,n){ze(e,n,t)}))}function qn(t,e,n){n=Math.min(t.g.length,n);var r=t.f?_(t.f.Ha,t.f,t):null;t:for(var i=t.g,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{mn(l,a,"req"+c+"_")}catch(t){r&&r(l)}}if(s){r=a.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Bn(t){t.a||t.j||(t.U=1,Ut(t.Aa,t),t.o=0)}function zn(t){return!(t.a||t.j||3<=t.o||(t.U++,t.j=se(_(t.Aa,t),Qn(t,t.o)),t.o++,0))}function Wn(t){null!=t.s&&(f.clearTimeout(t.s),t.s=null)}function Gn(t){t.a=new ge(t,t.c,"rpc",t.U),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=je(t.la);ze(e,"RID","rpc"),ze(e,"SID",t.J),ze(e,"CI",t.H?"0":"1"),ze(e,"AID",t.P),Vn(t,e),ze(e,"TYPE","xmlhttp"),t.i&&t.l&&On(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=We(je(e)),n.j=null,n.I=!0,Ie(n,t)}function Hn(t){null!=t.m&&(f.clearTimeout(t.m),t.m=null)}function Kn(t,e){var n=null;if(t.a==e){Hn(t),Wn(t),t.a=null;var r=2}else{if(!hn(t.b,e))return;n=e.s,pn(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=I()-e.u;var i=t.u;(r=ee()).dispatchEvent(new ae(r,n,e,i)),jn(t)}else Bn(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(ln(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.Ia?0:t.Ja)||(t.h=se(_(t.Ba,t,e),Qn(t,t.u)),t.u++,0)))}(t,e)||2==r&&zn(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Jn(t,5);break;case 4:Jn(t,10);break;case 3:Jn(t,6);break;default:Jn(t,2)}}function Qn(t,e){var n=t.Fa+Math.floor(Math.random()*t.Ma);return t.f||(n*=2),n*e}function Jn(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=_(t.Xa,t);n||(n=new Fe("//www.google.com/images/cleardot.gif"),f.location&&"http"==f.location.protocol||Ue(n,"https"),We(n)),function(t,e){var n=new $t;if(f.Image){var r=new Image;r.onload=E(gn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=E(gn,n,r,"TestLoadImage: error",!1,e),r.onabort=E(gn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=E(gn,n,r,"TestLoadImage: timeout",!1,e),f.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else oe(2);t.v=0,t.f&&t.f.ra(e),Yn(t),Mn(t)}function Yn(t){t.v=0,t.I=-1,t.f&&(0==dn(t.b).length&&0==t.g.length||(t.b.c.length=0,A(t.g),t.g.length=0),t.f.qa())}function Xn(t,e,n){var r=function(t){return t instanceof Fe?je(t):new Fe(t,void 0)}(n);if(""!=r.c)e&&Ve(r,e+"."+r.c),qe(r,r.h);else{var i=f.location;r=function(t,e,n,r){var i=new Fe(null,void 0);return t&&Ue(i,t),e&&Ve(i,e),n&&qe(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.W&&F(t.W,(function(t,e){ze(r,e,t)})),e=t.A,n=t.na,e&&n&&ze(r,e,n),ze(r,"VER",t.ha),Vn(t,r),r}function $n(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new wn(t.Ka)).F=t.C,e}function Zn(){}function tr(){if(G&&!(10<=Number(rt)))throw Error("Environmental error: no available transport.")}function er(t,e){Pt.call(this),this.a=new Rn(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!P(t)&&(this.a.i=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!P(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new ir(this)}function nr(t){ve.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function rr(){ye.call(this),this.status=1}function ir(t){this.a=t}(c=wn.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?he(this.H):he(pe),this.a.onreadystatechange=_(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void Sn(this,t)}t=n||"";var i=new Re(this.headers);r&&xe(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Tn,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=f.FormData&&t instanceof f.FormData,!(0<=C(In,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{An(this),0<this.o&&((this.D=function(t){return G&&nt(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=_(this.xa,this)):this.m=Gt(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Sn(this,t)}},c.xa=function(){void 0!==h&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},c.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Nn(this))},c.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Nn(this,!0)),wn.S.G.call(this)},c.za=function(){this.j||(this.A||this.l||this.g?kn(this):this.Ta())},c.Ta=function(){kn(this)},c.X=function(){try{return 2<Pn(this)?this.a.status:-1}catch(t){return-1}},c.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},c.Na=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),bn(e)}},c.ua=function(){return this.h},c.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(c=Rn.prototype).ha=8,c.v=1,c.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new ge(this,this.c,t,void 0),r=this.l;if(this.O&&(r?V(r=j(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=qn(this,n,e),ze(i=je(this.B),"RID",t),ze(i,"CVER",22),this.A&&ze(i,"X-HTTP-Session-Id",this.A),Vn(this,i),this.i&&r&&On(i,this.i,r),fn(this.b,n),this.Ga&&ze(i,"TYPE","init"),this.da?(ze(i,"$req",e),ze(i,"SID","null"),n.V=!0,Ee(n,i,null)):Ee(n,i,e),this.v=2}}else 3==this.v&&(t?Un(this,t):0==this.g.length||cn(this.b)||Un(this))},c.Aa=function(){if(this.j=null,Gn(this),this.V&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=se(_(this.Sa,this),t)}},c.Sa=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Ln(this),Gn(this))},c.Ra=function(){null!=this.m&&(this.m=null,Ln(this),zn(this),oe(19))},c.Xa=function(t){t?(this.c.info("Successfully pinged google.com"),oe(2)):(this.c.info("Failed to ping google.com"),oe(1))},(c=Zn.prototype).ta=function(){},c.sa=function(){},c.ra=function(){},c.qa=function(){},c.Ha=function(){},tr.prototype.a=function(t,e){return new er(t,e)},T(er,Pt),(c=er.prototype).addEventListener=function(t,e,n,r){er.S.addEventListener.call(this,t,e,n,r)},c.removeEventListener=function(t,e,n,r){er.S.removeEventListener.call(this,t,e,n,r)},c.Oa=function(){this.a.f=this.f,this.h&&(this.a.C=!0);var t=this.a,e=this.l,n=this.b||void 0;oe(0),t.fa=e,t.W=n||{},t.H=t.T,t.B=Xn(t,null,t.fa),jn(t)},c.close=function(){Dn(this.a)},c.Pa=function(t){if("string"==typeof t){var e={};e.__data__=t,Fn(this.a,e)}else this.g?((e={}).__data__=xt(t),Fn(this.a,e)):Fn(this.a,t)},c.G=function(){this.a.f=null,delete this.f,Dn(this.a),delete this.a,er.S.G.call(this)},T(nr,ve),T(rr,ye),T(ir,Zn),ir.prototype.ta=function(){this.a.dispatchEvent("a")},ir.prototype.sa=function(t){this.a.dispatchEvent(new nr(t))},ir.prototype.ra=function(t){this.a.dispatchEvent(new rr(t))},ir.prototype.qa=function(){this.a.dispatchEvent("b")},tr.prototype.createWebChannel=tr.prototype.a,er.prototype.send=er.prototype.Pa,er.prototype.open=er.prototype.Oa,er.prototype.close=er.prototype.close,ue.NO_ERROR=0,ue.TIMEOUT=8,ue.HTTP_ERROR=6,ce.COMPLETE="complete",fe.EventType=de,de.OPEN="a",de.CLOSE="b",de.ERROR="c",de.MESSAGE="d",Pt.prototype.listen=Pt.prototype.va,wn.prototype.listenOnce=wn.prototype.wa,wn.prototype.getLastError=wn.prototype.Qa,wn.prototype.getLastErrorCode=wn.prototype.ua,wn.prototype.getStatus=wn.prototype.X,wn.prototype.getResponseJson=wn.prototype.Na,wn.prototype.getResponseText=wn.prototype.$,wn.prototype.send=wn.prototype.ba;var or=ue,ar=ce,sr=fe,ur=wn,cr=n(924),lr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},hr=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,i.ZT)(e,t),e}(Error),fr=new o.Yd("@firebase/firestore");function pr(){return fr.logLevel}function dr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(fr.logLevel<=o.in.DEBUG){var r=e.map(mr);fr.debug.apply(fr,(0,i.pr)(["Firestore (8.0.1): "+t],r))}}function vr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(fr.logLevel<=o.in.ERROR){var r=e.map(mr);fr.error.apply(fr,(0,i.pr)(["Firestore (8.0.1): "+t],r))}}function yr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(fr.logLevel<=o.in.WARN){var r=e.map(mr);fr.warn.apply(fr,(0,i.pr)(["Firestore (8.0.1): "+t],r))}}function mr(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function gr(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.0.1) INTERNAL ASSERTION FAILED: "+t;throw vr(e),new Error(e)}function br(t,e){t||gr()}function wr(t,e){return t}function _r(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Er=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=_r(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Ir(t,e){return t<e?-1:t>e?1:0}function Tr(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Sr(t){return t+"\0"}var Cr=function(){function t(t){this.i=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.i,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.i)},t.prototype.o=function(){return 2*this.i.length},t.prototype.u=function(t){return Ir(this.i,t.i)},t.prototype.isEqual=function(t){return this.i===t.i},t}();Cr.h=new Cr("");var kr=function(){function t(t){this.l=t}return t.fromBase64String=function(e){try{return new t(Cr.fromBase64String(e))}catch(e){throw new hr(lr.INVALID_ARGUMENT,"Failed to construct Bytes from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Cr.fromUint8Array(e))},t.prototype.toBase64=function(){return this.l.toBase64()},t.prototype.toUint8Array=function(){return this.l.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.l.isEqual(t.l)},t}();function Nr(){if("undefined"==typeof Uint8Array)throw new hr(lr.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Ar(){if("undefined"==typeof atob)throw new hr(lr.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Pr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.fromBase64String=function(t){Ar();try{return new e(Cr.fromBase64String(t))}catch(t){throw new hr(lr.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},e.fromUint8Array=function(t){return Nr(),new e(Cr.fromUint8Array(t))},e.prototype.toBase64=function(){return Ar(),t.prototype.toBase64.call(this)},e.prototype.toUint8Array=function(){return Nr(),t.prototype.toUint8Array.call(this)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(kr),Or=function(t,e,n,r,i,o){this._=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.T=o},xr=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"I",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.u=function(t){return Ir(this.projectId,t.projectId)||Ir(this.database,t.database)},t}();function Rr(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Dr(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Lr(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Mr=function(){function t(t,e){this.m=t,this.A=e,this.R={}}return t.prototype.get=function(t){var e=this.m(t),n=this.R[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.A(a,t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.m(t),r=this.R[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.A(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.R[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.m(t),n=this.R[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.A(n[r][0],t))return 1===n.length?delete this.R[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Dr(this.R,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype.P=function(){return Lr(this.R)},t}(),Fr=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new hr(lr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new hr(lr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new hr(lr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new hr(lr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.g=function(t){return this.seconds===t.seconds?Ir(this.nanoseconds,t.nanoseconds):Ir(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),jr=function(){function t(t){this.timestamp=t}return t.V=function(e){return new t(e)},t.min=function(){return new t(new Fr(0,0))},t.prototype.u=function(t){return this.timestamp.g(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.p=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.v=function(){return this.timestamp},t}(),Ur=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&gr(),void 0===n?n=t.length-e:n>t.length-e&&gr(),this.segments=t,this.offset=e,this.S=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.S},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.D(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.C(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.N=function(t){return t=void 0===t?1:t,this.C(this.segments,this.offset+t,this.length-t)},t.prototype.F=function(){return this.C(this.segments,this.offset,this.length-1)},t.prototype.O=function(){return this.segments[this.offset]},t.prototype.k=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.P=function(){return 0===this.length},t.prototype.M=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.$=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.L=function(){return this.segments.slice(this.offset,this.limit())},t.D=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Vr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.C=function(t,n,r){return new e(t,n,r)},e.prototype.B=function(){return this.L().join("/")},e.prototype.toString=function(){return this.B()},e.q=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new hr(lr.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.U=function(){return new e([])},e}(Ur),qr=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Br=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.C=function(t,n,r){return new e(t,n,r)},e.K=function(t){return qr.test(t)},e.prototype.B=function(){return this.L().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.K(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.B()},e.prototype.W=function(){return 1===this.length&&"__name__"===this.get(0)},e.j=function(){return new e(["__name__"])},e.G=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new hr(lr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new hr(lr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new hr(lr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new hr(lr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.U=function(){return new e([])},e}(Ur),zr=function(){function t(t){this.path=t}return t.H=function(e){return new t(Vr.q(e))},t.Y=function(e){return new t(Vr.q(e).N(5))},t.prototype.J=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Vr.D(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.D=function(t,e){return Vr.D(t.path,e.path)},t.X=function(t){return t.length%2==0},t.Z=function(e){return new t(new Vr(e.slice()))},t}();function Wr(t){return null==t}function Gr(t){return 0===t&&1/t==-1/0}function Hr(t){return"number"==typeof t&&Number.isInteger(t)&&!Gr(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Kr=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.tt=null};function Qr(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new Kr(t,e,n,r,i,o,a)}function Jr(t){var e=wr(t);if(null===e.tt){var n=e.path.B();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.B()+t.op.toString()+Vi(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.B()+e.dir;var e})).join(","),Wr(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Ga(e.startAt)),e.endAt&&(n+="|ub:",n+=Ga(e.endAt)),e.tt=n}return e.tt}function Yr(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Ya(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Mi(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ka(t.startAt,e.startAt)&&Ka(t.endAt,e.endAt)}function Xr(t){return zr.X(t.path)&&null===t.collectionGroup&&0===t.filters.length}var $r,Zr,ti=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=jr.min()),void 0===o&&(o=jr.min()),void 0===a&&(a=Cr.h),this.target=t,this.targetId=e,this.et=n,this.sequenceNumber=r,this.nt=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.st=function(e){return new t(this.target,this.targetId,this.et,e,this.nt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.it=function(e,n){return new t(this.target,this.targetId,this.et,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.rt=function(e){return new t(this.target,this.targetId,this.et,this.sequenceNumber,this.nt,e,this.resumeToken)},t}(),ei=function(t){this.count=t};function ni(t){switch(t){case lr.OK:return gr();case lr.CANCELLED:case lr.UNKNOWN:case lr.DEADLINE_EXCEEDED:case lr.RESOURCE_EXHAUSTED:case lr.INTERNAL:case lr.UNAVAILABLE:case lr.UNAUTHENTICATED:return!1;case lr.INVALID_ARGUMENT:case lr.NOT_FOUND:case lr.ALREADY_EXISTS:case lr.PERMISSION_DENIED:case lr.FAILED_PRECONDITION:case lr.ABORTED:case lr.OUT_OF_RANGE:case lr.UNIMPLEMENTED:case lr.DATA_LOSS:return!0;default:return gr()}}function ri(t){if(void 0===t)return vr("GRPC error has no .code"),lr.UNKNOWN;switch(t){case $r.OK:return lr.OK;case $r.CANCELLED:return lr.CANCELLED;case $r.UNKNOWN:return lr.UNKNOWN;case $r.DEADLINE_EXCEEDED:return lr.DEADLINE_EXCEEDED;case $r.RESOURCE_EXHAUSTED:return lr.RESOURCE_EXHAUSTED;case $r.INTERNAL:return lr.INTERNAL;case $r.UNAVAILABLE:return lr.UNAVAILABLE;case $r.UNAUTHENTICATED:return lr.UNAUTHENTICATED;case $r.INVALID_ARGUMENT:return lr.INVALID_ARGUMENT;case $r.NOT_FOUND:return lr.NOT_FOUND;case $r.ALREADY_EXISTS:return lr.ALREADY_EXISTS;case $r.PERMISSION_DENIED:return lr.PERMISSION_DENIED;case $r.FAILED_PRECONDITION:return lr.FAILED_PRECONDITION;case $r.ABORTED:return lr.ABORTED;case $r.OUT_OF_RANGE:return lr.OUT_OF_RANGE;case $r.UNIMPLEMENTED:return lr.UNIMPLEMENTED;case $r.DATA_LOSS:return lr.DATA_LOSS;default:return gr()}}(Zr=$r||($r={}))[Zr.OK=0]="OK",Zr[Zr.CANCELLED=1]="CANCELLED",Zr[Zr.UNKNOWN=2]="UNKNOWN",Zr[Zr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zr[Zr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zr[Zr.NOT_FOUND=5]="NOT_FOUND",Zr[Zr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zr[Zr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zr[Zr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zr[Zr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zr[Zr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zr[Zr.ABORTED=10]="ABORTED",Zr[Zr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zr[Zr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zr[Zr.INTERNAL=13]="INTERNAL",Zr[Zr.UNAVAILABLE=14]="UNAVAILABLE",Zr[Zr.DATA_LOSS=15]="DATA_LOSS";var ii=function(){function t(t,e){this.D=t,this.root=e||ai.EMPTY}return t.prototype.ot=function(e,n){return new t(this.D,this.root.ot(e,n,this.D).copy(null,null,ai.at,null,null))},t.prototype.remove=function(e){return new t(this.D,this.root.remove(e,this.D).copy(null,null,ai.at,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.P();){var n=this.D(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.P();){var r=this.D(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.P=function(){return this.root.P()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.ct=function(){return this.root.ct()},t.prototype.ut=function(){return this.root.ut()},t.prototype.ht=function(t){return this.root.ht(t)},t.prototype.forEach=function(t){this.ht((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.ht((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.lt=function(t){return this.root.lt(t)},t.prototype._t=function(){return new oi(this.root,null,this.D,!1)},t.prototype.ft=function(t){return new oi(this.root,t,this.D,!1)},t.prototype.dt=function(){return new oi(this.root,null,this.D,!0)},t.prototype.wt=function(t){return new oi(this.root,t,this.D,!0)},t}(),oi=function(){function t(t,e,n,r){this.Et=r,this.Tt=[];for(var i=1;!t.P();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.Et?t.left:t.right;else{if(0===i){this.Tt.push(t);break}this.Tt.push(t),t=this.Et?t.right:t.left}}return t.prototype.It=function(){var t=this.Tt.pop(),e={key:t.key,value:t.value};if(this.Et)for(t=t.left;!t.P();)this.Tt.push(t),t=t.right;else for(t=t.right;!t.P();)this.Tt.push(t),t=t.left;return e},t.prototype.At=function(){return this.Tt.length>0},t.prototype.Rt=function(){if(0===this.Tt.length)return null;var t=this.Tt[this.Tt.length-1];return{key:t.key,value:t.value}},t}(),ai=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.P=function(){return!1},t.prototype.ht=function(t){return this.left.ht(t)||t(this.key,this.value)||this.right.ht(t)},t.prototype.lt=function(t){return this.right.lt(t)||t(this.key,this.value)||this.left.lt(t)},t.prototype.min=function(){return this.left.P()?this:this.left.min()},t.prototype.ct=function(){return this.min().key},t.prototype.ut=function(){return this.right.P()?this.key:this.right.ut()},t.prototype.ot=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.ot(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.ot(t,e,n))).Pt()},t.prototype.gt=function(){if(this.left.P())return t.EMPTY;var e=this;return e.left.yt()||e.left.left.yt()||(e=e.Vt()),(e=e.copy(null,null,null,e.left.gt(),null)).Pt()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.P()||i.left.yt()||i.left.left.yt()||(i=i.Vt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.yt()&&(i=i.bt()),i.right.P()||i.right.yt()||i.right.left.yt()||(i=i.vt()),0===n(e,i.key)){if(i.right.P())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.gt())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.Pt()},t.prototype.yt=function(){return this.color},t.prototype.Pt=function(){var t=this;return t.right.yt()&&!t.left.yt()&&(t=t.St()),t.left.yt()&&t.left.left.yt()&&(t=t.bt()),t.left.yt()&&t.right.yt()&&(t=t.Dt()),t},t.prototype.Vt=function(){var t=this.Dt();return t.right.left.yt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.bt())).St()).Dt()),t},t.prototype.vt=function(){var t=this.Dt();return t.left.left.yt()&&(t=(t=t.bt()).Dt()),t},t.prototype.St=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.bt=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Dt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ct=function(){var t=this.Nt();return Math.pow(2,t)<=this.size+1},t.prototype.Nt=function(){if(this.yt()&&this.left.yt())throw gr();if(this.right.yt())throw gr();var t=this.left.Nt();if(t!==this.right.Nt())throw gr();return t+(this.yt()?0:1)},t}();ai.EMPTY=null,ai.RED=!0,ai.at=!1,ai.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw gr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw gr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw gr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw gr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw gr()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.ot=function(t,e,n){return new ai(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.P=function(){return!0},t.prototype.ht=function(t){return!1},t.prototype.lt=function(t){return!1},t.prototype.ct=function(){return null},t.prototype.ut=function(){return null},t.prototype.yt=function(){return!1},t.prototype.Ct=function(){return!0},t.prototype.Nt=function(){return 0},t}());var si=function(){function t(t){this.D=t,this.data=new ii(this.D)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.ct()},t.prototype.last=function(){return this.data.ut()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.ht((function(e,n){return t(e),!1}))},t.prototype.xt=function(t,e){for(var n=this.data.ft(t[0]);n.At();){var r=n.It();if(this.D(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ft=function(t,e){var n;for(n=void 0!==e?this.data.ft(e):this.data._t();n.At();)if(!t(n.It().key))return},t.prototype.Ot=function(t){var e=this.data.ft(t);return e.At()?e.It().key:null},t.prototype._t=function(){return new ui(this.data._t())},t.prototype.ft=function(t){return new ui(this.data.ft(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).ot(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.P=function(){return this.data.P()},t.prototype.kt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data._t(),r=e.data._t();n.At();){var i=n.It().key,o=r.It().key;if(0!==this.D(i,o))return!1}return!0},t.prototype.L=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.D);return n.data=e,n},t}(),ui=function(){function t(t){this.Mt=t}return t.prototype.It=function(){return this.Mt.It().key},t.prototype.At=function(){return this.Mt.At()},t}(),ci=new ii(zr.D);function li(){return ci}function hi(){return li()}var fi=new ii(zr.D);function pi(){return fi}var di=new ii(zr.D),vi=new si(zr.D);function yi(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=vi,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var mi=new si(Ir);function gi(){return mi}var bi=function(){function t(t){this.D=t?function(e,n){return t(e,n)||zr.D(e.key,n.key)}:function(t,e){return zr.D(t.key,e.key)},this.$t=pi(),this.Lt=new ii(this.D)}return t.Bt=function(e){return new t(e.D)},t.prototype.has=function(t){return null!=this.$t.get(t)},t.prototype.get=function(t){return this.$t.get(t)},t.prototype.first=function(){return this.Lt.ct()},t.prototype.last=function(){return this.Lt.ut()},t.prototype.P=function(){return this.Lt.P()},t.prototype.indexOf=function(t){var e=this.$t.get(t);return e?this.Lt.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Lt.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Lt.ht((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.$t.ot(t.key,t),e.Lt.ot(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.$t.remove(t),this.Lt.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Lt._t(),r=e.Lt._t();n.At();){var i=n.It().key,o=r.It().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.D=this.D,r.$t=e,r.Lt=n,r},t}(),wi=function(){function t(){this.qt=new ii(zr.D)}return t.prototype.track=function(t){var e=t.doc.key,n=this.qt.get(e);n?0!==t.type&&3===n.type?this.qt=this.qt.ot(e,t):3===t.type&&1!==n.type?this.qt=this.qt.ot(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.qt=this.qt.ot(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.qt=this.qt.ot(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.qt=this.qt.remove(e):1===t.type&&2===n.type?this.qt=this.qt.ot(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.qt=this.qt.ot(e,{type:2,doc:t.doc}):gr():this.qt=this.qt.ot(e,t)},t.prototype.Ut=function(){var t=[];return this.qt.ht((function(e,n){t.push(n)})),t},t}(),_i=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.Kt=n,this.docChanges=r,this.Qt=i,this.fromCache=o,this.Wt=a,this.jt=s}return t.Gt=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,bi.Bt(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Qt.P()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Wt===t.Wt&&this.Qt.isEqual(t.Qt)&&Pa(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Kt.isEqual(t.Kt)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Ei=function(){function t(t,e,n,r,i){this.nt=t,this.zt=e,this.Ht=n,this.Yt=r,this.Jt=i}return t.Xt=function(e,n){var r=new Map;return r.set(e,Ii.Zt(e,n)),new t(jr.min(),r,gi(),li(),yi())},t}(),Ii=function(){function t(t,e,n,r,i){this.resumeToken=t,this.te=e,this.ee=n,this.ne=r,this.se=i}return t.Zt=function(e,n){return new t(Cr.h,n,yi(),yi(),yi())},t}(),Ti=function(t,e,n,r){this.ie=t,this.removedTargetIds=e,this.key=n,this.re=r},Si=function(t,e){this.targetId=t,this.oe=e},Ci=function(t,e,n,r){void 0===n&&(n=Cr.h),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},ki=function(){function t(){this.ae=0,this.ce=Pi(),this.ue=Cr.h,this.he=!1,this.le=!0}return Object.defineProperty(t.prototype,"te",{get:function(){return this.he},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.ue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_e",{get:function(){return 0!==this.ae},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fe",{get:function(){return this.le},enumerable:!1,configurable:!0}),t.prototype.de=function(t){t.o()>0&&(this.le=!0,this.ue=t)},t.prototype.we=function(){var t=yi(),e=yi(),n=yi();return this.ce.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:gr()}})),new Ii(this.ue,this.he,t,e,n)},t.prototype.Ee=function(){this.le=!1,this.ce=Pi()},t.prototype.Te=function(t,e){this.le=!0,this.ce=this.ce.ot(t,e)},t.prototype.Ie=function(t){this.le=!0,this.ce=this.ce.remove(t)},t.prototype.me=function(){this.ae+=1},t.prototype.Ae=function(){this.ae-=1},t.prototype.Re=function(){this.le=!0,this.he=!0},t}(),Ni=function(){function t(t){this.Pe=t,this.ge=new Map,this.ye=li(),this.Ve=Ai(),this.pe=new si(Ir)}return t.prototype.be=function(t){for(var e=0,n=t.ie;e<n.length;e++){var r=n[e];t.re instanceof da?this.ve(r,t.re):t.re instanceof va&&this.Se(r,t.key,t.re)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var a=o[i];this.Se(a,t.key,t.re)}},t.prototype.De=function(t){var e=this;this.Ce(t,(function(n){var r=e.Ne(n);switch(t.state){case 0:e.xe(n)&&r.de(t.resumeToken);break;case 1:r.Ae(),r._e||r.Ee(),r.de(t.resumeToken);break;case 2:r.Ae(),r._e||e.removeTarget(n);break;case 3:e.xe(n)&&(r.Re(),r.de(t.resumeToken));break;case 4:e.xe(n)&&(e.Fe(n),r.de(t.resumeToken));break;default:gr()}}))},t.prototype.Ce=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.ge.forEach((function(t,r){n.xe(r)&&e(r)}))},t.prototype.Oe=function(t){var e=t.targetId,n=t.oe.count,r=this.ke(e);if(r){var i=r.target;if(Xr(i))if(0===n){var o=new zr(i.path);this.Se(e,o,new va(o,jr.min()))}else br(1===n);else this.Me(e)!==n&&(this.Fe(e),this.pe=this.pe.add(e))}},t.prototype.$e=function(t){var e=this,n=new Map;this.ge.forEach((function(r,i){var o=e.ke(i);if(o){if(r.te&&Xr(o.target)){var a=new zr(o.target.path);null!==e.ye.get(a)||e.Le(i,a)||e.Se(i,a,new va(a,t))}r.fe&&(n.set(i,r.we()),r.Ee())}}));var r=yi();this.Ve.forEach((function(t,n){var i=!0;n.Ft((function(t){var n=e.ke(t);return!n||2===n.et||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Ei(t,n,this.pe,this.ye,r);return this.ye=li(),this.Ve=Ai(),this.pe=new si(Ir),i},t.prototype.ve=function(t,e){if(this.xe(t)){var n=this.Le(t,e.key)?2:0;this.Ne(t).Te(e.key,n),this.ye=this.ye.ot(e.key,e),this.Ve=this.Ve.ot(e.key,this.Be(e.key).add(t))}},t.prototype.Se=function(t,e,n){if(this.xe(t)){var r=this.Ne(t);this.Le(t,e)?r.Te(e,1):r.Ie(e),this.Ve=this.Ve.ot(e,this.Be(e).delete(t)),n&&(this.ye=this.ye.ot(e,n))}},t.prototype.removeTarget=function(t){this.ge.delete(t)},t.prototype.Me=function(t){var e=this.Ne(t).we();return this.Pe.qe(t).size+e.ee.size-e.se.size},t.prototype.me=function(t){this.Ne(t).me()},t.prototype.Ne=function(t){var e=this.ge.get(t);return e||(e=new ki,this.ge.set(t,e)),e},t.prototype.Be=function(t){var e=this.Ve.get(t);return e||(e=new si(Ir),this.Ve=this.Ve.ot(t,e)),e},t.prototype.xe=function(t){var e=null!==this.ke(t);return e||dr("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ke=function(t){var e=this.ge.get(t);return e&&e._e?null:this.Pe.Ue(t)},t.prototype.Fe=function(t){var e=this;this.ge.set(t,new ki),this.Pe.qe(t).forEach((function(n){e.Se(t,n,null)}))},t.prototype.Le=function(t,e){return this.Pe.qe(t).has(e)},t}();function Ai(){return new ii(zr.D)}function Pi(){return new ii(zr.D)}function Oi(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function xi(t){var e=t.mapValue.fields.__previous_value__;return Oi(e)?xi(e):e}function Ri(t){var e=Bi(t.mapValue.fields.__local_write_time__.timestampValue);return new Fr(e.seconds,e.nanos)}var Di=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Li(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Oi(t)?4:10:gr()}function Mi(t,e){var n=Li(t);if(n!==Li(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ri(t).isEqual(Ri(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Bi(t.timestampValue),r=Bi(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Wi(t.bytesValue).isEqual(Wi(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return zi(t.geoPointValue.latitude)===zi(e.geoPointValue.latitude)&&zi(t.geoPointValue.longitude)===zi(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return zi(t.integerValue)===zi(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=zi(t.doubleValue),r=zi(e.doubleValue);return n===r?Gr(n)===Gr(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Tr(t.arrayValue.values||[],e.arrayValue.values||[],Mi);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Rr(n)!==Rr(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Mi(n[i],r[i])))return!1;return!0}(t,e);default:return gr()}}function Fi(t,e){return void 0!==(t.values||[]).find((function(t){return Mi(t,e)}))}function ji(t,e){var n=Li(t),r=Li(e);if(n!==r)return Ir(n,r);switch(n){case 0:return 0;case 1:return Ir(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=zi(t.integerValue||t.doubleValue),r=zi(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Ui(t.timestampValue,e.timestampValue);case 4:return Ui(Ri(t),Ri(e));case 5:return Ir(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Wi(t),r=Wi(e);return n.u(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Ir(n[i],r[i]);if(0!==o)return o}return Ir(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Ir(zi(t.latitude),zi(e.latitude));return 0!==n?n:Ir(zi(t.longitude),zi(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=ji(n[i],r[i]);if(o)return o}return Ir(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=Ir(r[a],o[a]);if(0!==s)return s;var u=ji(n[r[a]],i[o[a]]);if(0!==u)return u}return Ir(r.length,o.length)}(t.mapValue,e.mapValue);default:throw gr()}}function Ui(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Ir(t,e);var n=Bi(t),r=Bi(e),i=Ir(n.seconds,r.seconds);return 0!==i?i:Ir(n.nanos,r.nanos)}function Vi(t){return qi(t)}function qi(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Bi(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Wi(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,zr.Y(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=qi(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+qi(t.fields[o])}return e+"}"}(t.mapValue):gr();var e,n}function Bi(t){if(br(!!t),"string"==typeof t){var e=0,n=Di.exec(t);if(br(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:zi(t.seconds),nanos:zi(t.nanos)}}function zi(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Wi(t){return"string"==typeof t?Cr.fromBase64String(t):Cr.fromUint8Array(t)}function Gi(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.B()}}function Hi(t){return!!t&&"integerValue"in t}function Ki(t){return!!t&&"arrayValue"in t}function Qi(t){return!!t&&"nullValue"in t}function Ji(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Yi(t){return!!t&&"mapValue"in t}var Xi={asc:"ASCENDING",desc:"DESCENDING"},$i={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Zi=function(t,e){this._=t,this.Ke=e};function to(t){return{integerValue:""+t}}function eo(t,e){if(t.Ke){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gr(e)?"-0":e}}function no(t,e){return Hr(e)?to(e):eo(t,e)}function ro(t,e){return t.Ke?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function io(t,e){return t.Ke?e.toBase64():e.toUint8Array()}function oo(t,e){return ro(t,e.v())}function ao(t){return br(!!t),jr.V(function(t){var e=Bi(t);return new Fr(e.seconds,e.nanos)}(t))}function so(t,e){return function(t){return new Vr(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).B()}function uo(t){var e=Vr.q(t);return br(xo(e)),e}function co(t,e){return so(t._,e.path)}function lo(t,e){var n=uo(e);return br(n.get(1)===t._.projectId),br(!n.get(3)&&!t._.database||n.get(3)===t._.database),new zr(vo(n))}function ho(t,e){return so(t._,e)}function fo(t){var e=uo(t);return 4===e.length?Vr.U():vo(e)}function po(t){return new Vr(["projects",t._.projectId,"databases",t._.database]).B()}function vo(t){return br(t.length>4&&"documents"===t.get(4)),t.N(5)}function yo(t,e,n){return{name:co(t,e),fields:n.proto.mapValue.fields}}function mo(t,e){var n;if(e instanceof na)n={update:yo(t,e.key,e.value)};else if(e instanceof ua)n={delete:co(t,e.key)};else if(e instanceof ra)n={update:yo(t,e.key,e.data),updateMask:Oo(e.Qe)};else if(e instanceof oa)n={transform:{document:co(t,e.key),fieldTransforms:e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Fo)return{fieldPath:e.field.B(),setToServerValue:"REQUEST_TIME"};if(n instanceof jo)return{fieldPath:e.field.B(),appendMissingElements:{values:n.elements}};if(n instanceof Vo)return{fieldPath:e.field.B(),removeAllFromArray:{values:n.elements}};if(n instanceof Bo)return{fieldPath:e.field.B(),increment:n.We};throw gr()}(0,t)}))}};else{if(!(e instanceof ca))return gr();n={verify:co(t,e.key)}}return e.Ge.je||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:oo(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:gr()}(t,e.Ge)),n}function go(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Qo.updateTime(ao(t.updateTime)):void 0!==t.exists?Qo.exists(t.exists):Qo.ze()}(e.currentDocument):Qo.ze();if(e.update){e.update.name;var r=lo(t,e.update.name),i=new la({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){var e=t.fieldPaths||[];return new Go(e.map((function(t){return Br.G(t)})))}(e.updateMask);return new ra(r,i,o,n)}return new na(r,i,n)}if(e.delete){var a=lo(t,e.delete);return new ua(a,n)}if(e.transform){var s=lo(t,e.transform.document),u=e.transform.fieldTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)br("REQUEST_TIME"===e.setToServerValue),n=new Fo;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new jo(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new Vo(i)}else"increment"in e?n=new Bo(t,e.increment):gr();var o=Br.G(e.fieldPath);return new Ho(o,n)}(t,e)}));return br(!0===n.exists),new oa(s,u)}if(e.verify){var c=lo(t,e.verify);return new ca(c,n)}return gr()}function bo(t,e){return{documents:[ho(t,e.path)]}}function wo(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=ho(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=ho(t,r.F()),n.structuredQuery.from=[{collectionId:r.k()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Ji(t.value))return{unaryFilter:{field:ko(t.field),op:"IS_NAN"}};if(Qi(t.value))return{unaryFilter:{field:ko(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Ji(t.value))return{unaryFilter:{field:ko(t.field),op:"IS_NOT_NAN"}};if(Qi(t.value))return{unaryFilter:{field:ko(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ko(t.field),op:Co(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:ko(t.field),direction:So(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.Ke||Wr(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=Io(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Io(e.endAt)),n}function _o(t){var e=fo(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){br(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=Eo(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return function(t){return new Qa(No(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return Wr(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=To(n.startAt));var l=null;return n.endAt&&(l=To(n.endAt)),Ca(ga(e,i,s,a,u,"F",c,l))}function Eo(t){return t?void 0!==t.unaryFilter?[Po(t)]:void 0!==t.fieldFilter?[Ao(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Eo(t)})).reduce((function(t,e){return t.concat(e)})):gr():[]}function Io(t){return{before:t.before,values:t.position}}function To(t){var e=!!t.before,n=t.values||[];return new Wa(n,e)}function So(t){return Xi[t]}function Co(t){return $i[t]}function ko(t){return{fieldPath:t.B()}}function No(t){return Br.G(t.fieldPath)}function Ao(t){return La.create(No(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return gr()}}(t.fieldFilter.op),t.fieldFilter.value)}function Po(t){switch(t.unaryFilter.op){case"IS_NAN":var e=No(t.unaryFilter.field);return La.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=No(t.unaryFilter.field);return La.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=No(t.unaryFilter.field);return La.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=No(t.unaryFilter.field);return La.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return gr()}}function Oo(t){var e=[];return t.fields.forEach((function(t){return e.push(t.B())})),{fieldPaths:e}}function xo(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var Ro=function(){this.He=void 0};function Do(t,e,n){return t instanceof Fo?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof jo?Uo(t,e):t instanceof Vo?qo(t,e):function(t,e){var n=Mo(t,e),r=zo(n)+zo(t.We);return Hi(n)&&Hi(t.We)?to(r):eo(t.serializer,r)}(t,e)}function Lo(t,e,n){return t instanceof jo?Uo(t,e):t instanceof Vo?qo(t,e):n}function Mo(t,e){return t instanceof Bo?Hi(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Fo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e}(Ro),jo=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,i.ZT)(e,t),e}(Ro);function Uo(t,e){for(var n=Wo(e),r=function(t){n.some((function(e){return Mi(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Vo=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,i.ZT)(e,t),e}(Ro);function qo(t,e){for(var n=Wo(e),r=function(t){n=n.filter((function(e){return!Mi(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Bo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).serializer=e,r.We=n,r}return(0,i.ZT)(e,t),e}(Ro);function zo(t){return zi(t.integerValue||t.doubleValue)}function Wo(t){return Ki(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Go=function(){function t(t){this.fields=t,t.sort(Br.D)}return t.prototype.Ye=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].M(t))return!0;return!1},t.prototype.isEqual=function(t){return Tr(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Ho=function(t,e){this.field=t,this.transform=e},Ko=function(t,e){this.version=t,this.transformResults=e},Qo=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.ze=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"je",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Jo(t,e){return void 0!==t.updateTime?e instanceof da&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof da}var Yo=function(){};function Xo(t,e,n){return t instanceof na?function(t,e,n){return new da(t.key,n.version,t.value,{hasCommittedMutations:!0})}(t,0,n):t instanceof ra?function(t,e,n){if(!Jo(t.Ge,e))return new ya(t.key,n.version);var r=ia(t,e);return new da(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof oa?function(t,e,n){if(br(null!=n.transformResults),!Jo(t.Ge,e))return new ya(t.key,n.version);var r=aa(0,e),i=function(t,e,n){var r=[];br(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=null;e instanceof da&&(s=e.field(o.field)),r.push(Lo(a,s,n[i]))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,a=sa(t,r.data(),i);return new da(t.key,o,a,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new va(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function $o(t,e,n,r){return t instanceof na?function(t,e){if(!Jo(t.Ge,e))return e;var n=ea(e);return new da(t.key,n,t.value,{Je:!0})}(t,e):t instanceof ra?function(t,e){if(!Jo(t.Ge,e))return e;var n=ea(e),r=ia(t,e);return new da(t.key,n,r,{Je:!0})}(t,e):t instanceof oa?function(t,e,n,r){if(!Jo(t.Ge,e))return e;var i=aa(0,e),o=function(t,e,n,r){for(var i=[],o=0,a=t;o<a.length;o++){var s=a[o],u=s.transform,c=null;n instanceof da&&(c=n.field(s.field)),null===c&&r instanceof da&&(c=r.field(s.field)),i.push(Do(u,c,e))}return i}(t.fieldTransforms,n,e,r),a=sa(t,i.data(),o);return new da(t.key,i.version,a,{Je:!0})}(t,e,r,n):function(t,e){return Jo(t.Ge,e)?new va(t.key,jr.min()):e}(t,e)}function Zo(t,e){return t instanceof oa?function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e instanceof da?e.field(o.field):void 0,s=Mo(o.transform,a||null);null!=s&&(n=null==n?(new ha).set(o.field,s):n.set(o.field,s))}return n?n.Xe():null}(t,e):null}function ta(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Ge.isEqual(e.Ge)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.Qe.isEqual(e.Qe):2!==t.type||Tr(t.fieldTransforms,t.fieldTransforms,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof jo&&e instanceof jo||t instanceof Vo&&e instanceof Vo?Tr(t.elements,e.elements,Mi):t instanceof Bo&&e instanceof Bo?Mi(t.We,e.We):t instanceof Fo&&e instanceof Fo}(t.transform,e.transform)}(t,e)})))}function ea(t){return t instanceof da?t.version:jr.min()}var na=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.Ge=r,i.type=0,i}return(0,i.ZT)(e,t),e}(Yo),ra=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.Qe=r,o.Ge=i,o.type=1,o}return(0,i.ZT)(e,t),e}(Yo);function ia(t,e){return function(t,e){var n=new ha(e);return t.Qe.fields.forEach((function(e){if(!e.P()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.Xe()}(t,e instanceof da?e.data():la.empty())}var oa=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.Ge=Qo.exists(!0),r}return(0,i.ZT)(e,t),e}(Yo);function aa(t,e){return e}function sa(t,e,n){for(var r=new ha(e),i=0;i<t.fieldTransforms.length;i++){var o=t.fieldTransforms[i];r.set(o.field,n[i])}return r.Xe()}var ua=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ge=n,r.type=3,r}return(0,i.ZT)(e,t),e}(Yo),ca=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ge=n,r.type=4,r}return(0,i.ZT)(e,t),e}(Yo),la=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.P())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Yi(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.k()])||null},t.prototype.isEqual=function(t){return Mi(this.proto,t.proto)},t}(),ha=function(){function t(t){void 0===t&&(t=la.empty()),this.Ze=t,this.tn=new Map}return t.prototype.set=function(t,e){return this.en(t,e),this},t.prototype.delete=function(t){return this.en(t,null),this},t.prototype.en=function(t,e){for(var n=this.tn,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Li(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.k(),e)},t.prototype.Xe=function(){var t=this.nn(Br.U(),this.tn);return null!=t?new la(t):this.Ze},t.prototype.nn=function(t,e){var n=this,r=!1,i=this.Ze.field(t),o=Yi(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var a=n.nn(t.child(i),e);null!=a&&(o[i]=a,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function fa(t){var e=[];return Dr(t.fields||{},(function(t,n){var r=new Br([t]);if(Yi(n)){var i=fa(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];e.push(r.child(s))}}else e.push(r)})),new Go(e)}var pa=function(t,e){this.key=t,this.version=e},da=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).sn=r,o.Je=!!i.Je,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return(0,i.ZT)(e,t),e.prototype.field=function(t){return this.sn.field(t)},e.prototype.data=function(){return this.sn},e.prototype.rn=function(){return this.sn.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Je===t.Je&&this.hasCommittedMutations===t.hasCommittedMutations&&this.sn.isEqual(t.sn)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.sn.toString()+", {hasLocalMutations: "+this.Je+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Je||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(pa),va=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return(0,i.ZT)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(pa),ya=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(pa),ma=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.on=n,this.filters=r,this.limit=i,this.an=o,this.startAt=a,this.endAt=s,this.cn=null,this.un=null,this.startAt,this.endAt};function ga(t,e,n,r,i,o,a,s){return new ma(t,e,n,r,i,o,a,s)}function ba(t){return new ma(t)}function wa(t){return!Wr(t.limit)&&"F"===t.an}function _a(t){return!Wr(t.limit)&&"L"===t.an}function Ea(t){return t.on.length>0?t.on[0].field:null}function Ia(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.hn())return r.field}return null}function Ta(t){return null!==t.collectionGroup}function Sa(t){var e=wr(t);if(null===e.cn){e.cn=[];var n=Ia(e),r=Ea(e);if(null!==n&&null===r)n.W()||e.cn.push(new Qa(n)),e.cn.push(new Qa(Br.j(),"asc"));else{for(var i=!1,o=0,a=e.on;o<a.length;o++){var s=a[o];e.cn.push(s),s.field.W()&&(i=!0)}if(!i){var u=e.on.length>0?e.on[e.on.length-1].dir:"asc";e.cn.push(new Qa(Br.j(),u))}}}return e.cn}function Ca(t){var e=wr(t);if(!e.un)if("F"===e.an)e.un=Qr(e.path,e.collectionGroup,Sa(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Sa(e);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new Qa(o.field,a))}var s=e.endAt?new Wa(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Wa(e.startAt.position,!e.startAt.before):null;e.un=Qr(e.path,e.collectionGroup,n,e.filters,e.limit,s,u)}return e.un}function ka(t,e,n){return new ma(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Na(t,e){return new ma(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),t.limit,t.an,e,t.endAt)}function Aa(t,e){return new ma(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),t.limit,t.an,t.startAt,e)}function Pa(t,e){return Yr(Ca(t),Ca(e))&&t.an===e.an}function Oa(t){return Jr(Ca(t))+"|lt:"+t.an}function xa(t){return"Query(target="+function(t){var e=t.path.B();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.B()+" "+e.op+" "+Vi(e.value);var e})).join(", ")+"]"),Wr(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return(e=t).field.B()+" ("+e.dir+")";var e})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Ga(t.startAt)),t.endAt&&(e+=", endAt: "+Ga(t.endAt)),"Target("+e+")"}(Ca(t))+"; limitType="+t.an+")"}function Ra(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.J(t.collectionGroup)&&t.path.M(n):zr.X(t.path)?t.path.isEqual(n):t.path.$(n)}(t,e)&&function(t,e){for(var n=0,r=t.on;n<r.length;n++){var i=r[n];if(!i.field.W()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Ha(t.startAt,Sa(t),e)||t.endAt&&Ha(t.endAt,Sa(t),e))}(t,e)}function Da(t){return function(e,n){for(var r=!1,i=0,o=Sa(t);i<o.length;i++){var a=o[i],s=Ja(a,e,n);if(0!==s)return s;r=r||a.field.W()}return 0}}var La=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return(0,i.ZT)(e,t),e.create=function(t,n,r){return t.W()?"in"===n||"not-in"===n?this.ln(t,n,r):new Ma(t,n,r):"array-contains"===n?new Va(t,r):"in"===n?new qa(t,r):"not-in"===n?new Ba(t,r):"array-contains-any"===n?new za(t,r):new e(t,n,r)},e.ln=function(t,e,n){return"in"===e?new Fa(t,n):new ja(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this._n(ji(e,this.value)):null!==e&&Li(this.value)===Li(e)&&this._n(ji(e,this.value))},e.prototype._n=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return gr()}},e.prototype.hn=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Ma=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=zr.Y(r.referenceValue),i}return(0,i.ZT)(e,t),e.prototype.matches=function(t){var e=zr.D(t.key,this.key);return this._n(e)},e}(La),Fa=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Ua(0,n),r}return(0,i.ZT)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(La),ja=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Ua(0,n),r}return(0,i.ZT)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(La);function Ua(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return zr.Y(t.referenceValue)}))}var Va=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return(0,i.ZT)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return Ki(e)&&Fi(e.arrayValue,this.value)},e}(La),qa=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return(0,i.ZT)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Fi(this.value.arrayValue,e)},e}(La),Ba=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return(0,i.ZT)(e,t),e.prototype.matches=function(t){if(Fi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Fi(this.value.arrayValue,e)},e}(La),za=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return(0,i.ZT)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Ki(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Fi(e.value.arrayValue,t)}))},e}(La),Wa=function(t,e){this.position=t,this.before=e};function Ga(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Vi(t)})).join(",")}function Ha(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.W()?zr.D(zr.Y(a.referenceValue),n.key):ji(a,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Ka(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Mi(t.position[n],e.position[n]))return!1;return!0}var Qa=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Ja(t,e,n){var r=t.field.W()?zr.D(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?ji(r,i):gr()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return gr()}}function Ya(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Xa=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},$a=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.fn=t,this.dn=e,this.wn=n,this.En=r,this.Tn=i,this.In=0,this.mn=null,this.An=Date.now(),this.reset()}return t.prototype.reset=function(){this.In=0},t.prototype.Rn=function(){this.In=this.Tn},t.prototype.Pn=function(t){var e=this;this.cancel();var n=Math.floor(this.In+this.gn()),r=Math.max(0,Date.now()-this.An),i=Math.max(0,n-r);i>0&&dr("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.In+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.mn=this.fn.yn(this.dn,i,(function(){return e.An=Date.now(),t()})),this.In*=this.En,this.In<this.wn&&(this.In=this.wn),this.In>this.Tn&&(this.In=this.Tn)},t.prototype.Vn=function(){null!==this.mn&&(this.mn.pn(),this.mn=null)},t.prototype.cancel=function(){null!==this.mn&&(this.mn.cancel(),this.mn=null)},t.prototype.gn=function(){return(Math.random()-.5)*this.In},t}(),Za=function(){function t(t){var e=this;this.bn=null,this.vn=null,this.result=void 0,this.error=void 0,this.Sn=!1,this.Dn=!1,t((function(t){e.Sn=!0,e.result=t,e.bn&&e.bn(t)}),(function(t){e.Sn=!0,e.error=t,e.vn&&e.vn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Dn&&gr(),this.Dn=!0,this.Sn?this.error?this.Cn(n,this.error):this.Nn(e,this.result):new t((function(t,i){r.bn=function(n){r.Nn(e,n).next(t,i)},r.vn=function(e){r.Cn(n,e).next(t,i)}}))},t.prototype.xn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Fn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Nn=function(e,n){return e?this.Fn((function(){return e(n)})):t.resolve(n)},t.prototype.Cn=function(e,n){return e?this.Fn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.On=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.kn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.On(r)},t}(),ts=function(){function t(e,n,r){this.name=e,this.version=n,this.Mn=r,12.2===t.$n((0,a.z$)())&&vr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return dr("SimpleDb","Removing database:",t),as(window.indexedDB.deleteDatabase(t)).xn()},t.Ln=function(){if("undefined"==typeof indexedDB)return!1;if(t.Bn())return!0;var e=(0,a.z$)(),n=t.$n(e),r=0<n&&n<10,i=t.qn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Bn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Un)},t.Kn=function(t,e){return t.store(e)},t.$n=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.qn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Qn=function(t){return(0,i.mG)(this,void 0,void 0,(function(){var e,n=this;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(dr("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new ns(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new hr(lr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new ns(t,n))},i.onupgradeneeded=function(t){dr("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.Mn.createOrUpgrade(e,i.transaction,t.oldVersion,n.version).next((function(){dr("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Wn&&(this.db.onversionchange=function(t){return n.Wn(t)}),this.db)]}}))}))},t.prototype.jn=function(t){this.Wn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return(0,i.mG)(this,void 0,void 0,(function(){var o,a,s,u,c;return(0,i.Jh)(this,(function(l){switch(l.label){case 0:o="readonly"===e,a=0,s=function(){var e,s,c,l,h;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:++a,i.label=1;case 1:return i.trys.push([1,4,,5]),[4,u.Qn(t)];case 2:return u.db=i.sent(),e=is.open(u.db,t,o?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),Za.reject(t)})).xn(),c={},s.catch((function(){})),[4,e.Gn];case 3:return[2,(c.value=(i.sent(),s),c)];case 4:return l=i.sent(),h="FirebaseError"!==l.name&&a<3,dr("SimpleDb","Transaction failed with error:",l.message,"Retrying:",h),u.close(),h?[3,5]:[2,{value:Promise.reject(l)}];case 5:return[2]}}))},u=this,l.label=1;case 1:return[5,s()];case 2:if("object"==typeof(c=l.sent()))return[2,c.value];l.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),es=function(){function t(t){this.zn=t,this.Hn=!1,this.Yn=null}return Object.defineProperty(t.prototype,"Sn",{get:function(){return this.Hn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Jn",{get:function(){return this.Yn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.zn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Hn=!0},t.prototype.Xn=function(t){this.Yn=t},t.prototype.delete=function(){return as(this.zn.delete())},t}(),ns=function(t){function e(e,n){var r=this;return(r=t.call(this,lr.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,i.ZT)(e,t),e}(hr);function rs(t){return"IndexedDbTransactionError"===t.name}var is=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Zn=new Xa,this.transaction.oncomplete=function(){n.Zn.resolve()},this.transaction.onabort=function(){e.error?n.Zn.reject(new ns(t,e.error)):n.Zn.resolve()},this.transaction.onerror=function(e){var r=us(e.target.error);n.Zn.reject(new ns(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new ns(n,e)}},Object.defineProperty(t.prototype,"Gn",{get:function(){return this.Zn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Zn.reject(t),this.aborted||(dr("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new os(e)},t}(),os=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(dr("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(dr("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),as(n)},t.prototype.add=function(t){return dr("SimpleDb","ADD",this.store.name,t,t),as(this.store.add(t))},t.prototype.get=function(t){var e=this;return as(this.store.get(t)).next((function(n){return void 0===n&&(n=null),dr("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return dr("SimpleDb","DELETE",this.store.name,t),as(this.store.delete(t))},t.prototype.count=function(){return dr("SimpleDb","COUNT",this.store.name),as(this.store.count())},t.prototype.ts=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.es(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.ns=function(t,e){dr("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.ss=!1;var r=this.cursor(n);return this.es(r,(function(t,e,n){return n.delete()}))},t.prototype.rs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.es(r,e)},t.prototype.os=function(t){var e=this.cursor({});return new Za((function(n,r){e.onerror=function(t){var e=us(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.es=function(t,e){var n=[];return new Za((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new es(i),a=e(i.primaryKey,i.value,o);if(a instanceof Za){var s=a.catch((function(t){return o.done(),Za.reject(t)}));n.push(s)}o.Sn?r():null===o.Jn?i.continue():i.continue(o.Jn)}else r()}})).next((function(){return Za.On(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.ss?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function as(t){return new Za((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=us(t.target.error);n(e)}}))}var ss=!1;function us(t){var e=ts.$n((0,a.z$)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new hr("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return ss||(ss=!0,setTimeout((function(){throw r}),0)),r}}return t}function cs(){return"undefined"!=typeof window?window:null}function ls(){return"undefined"!=typeof document?document:null}var hs=function(){function t(t,e,n,r,i){this.cs=t,this.dn=e,this.us=n,this.op=r,this.hs=i,this.ls=new Xa,this.then=this.ls.promise.then.bind(this.ls.promise),this.ls.promise.catch((function(t){}))}return t._s=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.fs=setTimeout((function(){return e.ds()}),t)},t.prototype.pn=function(){return this.ds()},t.prototype.cancel=function(t){null!==this.fs&&(this.clearTimeout(),this.ls.reject(new hr(lr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.ds=function(){var t=this;this.cs.ws((function(){return null!==t.fs?(t.clearTimeout(),t.op().then((function(e){return t.ls.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.fs&&(this.hs(this),clearTimeout(this.fs),this.fs=null)},t}(),fs=function(){function t(){var t=this;this.Es=Promise.resolve(),this.Ts=[],this.Is=!1,this.As=[],this.Rs=null,this.Ps=!1,this.gs=[],this.ys=new $a(this,"async_queue_retry"),this.Vs=function(){var e=ls();e&&dr("AsyncQueue","Visibility state changed to "+e.visibilityState),t.ys.Vn()};var e=ls();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Vs)}return Object.defineProperty(t.prototype,"ps",{get:function(){return this.Is},enumerable:!1,configurable:!0}),t.prototype.ws=function(t){this.enqueue(t)},t.prototype.bs=function(t){this.vs(),this.Ss(t)},t.prototype.Ds=function(){if(!this.Is){this.Is=!0;var t=ls();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vs)}},t.prototype.enqueue=function(t){return this.vs(),this.Is?new Promise((function(t){})):this.Ss(t)},t.prototype.Cs=function(t){var e=this;this.ws((function(){return e.Ts.push(t),e.Ns()}))},t.prototype.Ns=function(){return(0,i.mG)(this,void 0,void 0,(function(){var t,e=this;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:if(0===this.Ts.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Ts[0]()];case 2:return n.sent(),this.Ts.shift(),this.ys.reset(),[3,4];case 3:if(!rs(t=n.sent()))throw t;return dr("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Ts.length>0&&this.ys.Pn((function(){return e.Ns()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Ss=function(t){var e=this,n=this.Es.then((function(){return e.Ps=!0,t().catch((function(t){throw e.Rs=t,e.Ps=!1,vr("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.Ps=!1,t}))}));return this.Es=n,n},t.prototype.yn=function(t,e,n){var r=this;this.vs(),this.gs.indexOf(t)>-1&&(e=0);var i=hs._s(this,t,e,n,(function(t){return r.xs(t)}));return this.As.push(i),i},t.prototype.vs=function(){this.Rs&&gr()},t.prototype.Fs=function(){},t.prototype.Os=function(){return(0,i.mG)(this,void 0,void 0,(function(){var t;return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return[4,t=this.Es];case 1:e.sent(),e.label=2;case 2:if(t!==this.Es)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.ks=function(t){for(var e=0,n=this.As;e<n.length;e++)if(n[e].dn===t)return!0;return!1},t.prototype.Ms=function(t){var e=this;return this.Os().then((function(){e.As.sort((function(t,e){return t.us-e.us}));for(var n=0,r=e.As;n<r.length;n++){var i=r[n];if(i.pn(),"all"!==t&&i.dn===t)break}return e.Os()}))},t.prototype.$s=function(t){this.gs.push(t)},t.prototype.xs=function(t){var e=this.As.indexOf(t);this.As.splice(e,1)},t}();function ps(t,e){if(vr("AsyncQueue",e+": "+t),rs(t))return new hr(lr.UNAVAILABLE,e+": "+t);throw t}var ds=function(){this.Ls=void 0,this.listeners=[]},vs=function(){this.Bs=new Mr((function(t){return Oa(t)}),Pa),this.onlineState="Unknown",this.qs=new Set};function ys(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o,a,s,u,c;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:if(n=wr(t),r=e.query,o=!1,(a=n.Bs.get(r))||(o=!0,a=new ds),!o)return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),s=a,[4,n.Us(r)];case 2:return s.Ls=i.sent(),[3,4];case 3:return u=i.sent(),c=ps(u,"Initialization of query '"+xa(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.Bs.set(r,a),a.listeners.push(e),e.Ks(n.onlineState),a.Ls&&e.Qs(a.Ls)&&ws(n),[2]}}))}))}function ms(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o,a,s;return(0,i.Jh)(this,(function(i){return n=wr(t),r=e.query,o=!1,(a=n.Bs.get(r))&&(s=a.listeners.indexOf(e))>=0&&(a.listeners.splice(s,1),o=0===a.listeners.length),o?[2,(n.Bs.delete(r),n.Ws(r))]:[2]}))}))}function gs(t,e){for(var n=wr(t),r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=a.query,u=n.Bs.get(s);if(u){for(var c=0,l=u.listeners;c<l.length;c++)l[c].Qs(a)&&(r=!0);u.Ls=a}}r&&ws(n)}function bs(t,e,n){var r=wr(t),i=r.Bs.get(e);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.Bs.delete(e)}function ws(t){t.qs.forEach((function(t){t.next()}))}var _s=function(){function t(t,e,n){this.query=t,this.js=e,this.Gs=!1,this.zs=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Qs=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new _i(t.query,t.docs,t.Kt,e,t.Qt,t.fromCache,t.Wt,!0)}var o=!1;return this.Gs?this.Hs(t)&&(this.js.next(t),o=!0):this.Ys(t,this.onlineState)&&(this.Js(t),o=!0),this.zs=t,o},t.prototype.onError=function(t){this.js.error(t)},t.prototype.Ks=function(t){this.onlineState=t;var e=!1;return this.zs&&!this.Gs&&this.Ys(this.zs,t)&&(this.Js(this.zs),e=!0),e},t.prototype.Ys=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.Xs&&n||t.docs.P()&&"Offline"!==e)},t.prototype.Hs=function(t){if(t.docChanges.length>0)return!0;var e=this.zs&&this.zs.hasPendingWrites!==t.hasPendingWrites;return!(!t.Wt&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.Js=function(t){t=_i.Gt(t.query,t.docs,t.Qt,t.fromCache),this.Gs=!0,this.js.next(t)},t}(),Es=function(){function t(t){this.uid=t}return t.prototype.Zs=function(){return null!=this.uid},t.prototype.ti=function(){return this.Zs()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();Es.UNAUTHENTICATED=new Es(null),Es.ei=new Es("google-credentials-uid"),Es.ni=new Es("first-party-uid");var Is=function(t,e){this.user=e,this.type="OAuth",this.si={},this.si.Authorization="Bearer "+t},Ts=function(){function t(){this.ii=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.ri=function(){},t.prototype.oi=function(t){this.ii=t,t(Es.UNAUTHENTICATED)},t.prototype.ai=function(){this.ii=null},t}(),Ss=function(){function t(t){var e=this;this.ci=null,this.currentUser=Es.UNAUTHENTICATED,this.ui=!1,this.hi=0,this.ii=null,this.forceRefresh=!1,this.ci=function(){e.hi++,e.currentUser=e.li(),e.ui=!0,e.ii&&e.ii(e.currentUser)},this.hi=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.ci):(this.ci(null),t.get().then((function(t){e.auth=t,e.ci&&e.auth.addAuthTokenListener(e.ci)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.hi,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.hi!==e?(dr("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(br("string"==typeof n.accessToken),new Is(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.ri=function(){this.forceRefresh=!0},t.prototype.oi=function(t){this.ii=t,this.ui&&t(this.currentUser)},t.prototype.ai=function(){this.auth&&this.auth.removeAuthTokenListener(this.ci),this.ci=null,this.ii=null},t.prototype.li=function(){var t=this.auth&&this.auth.getUid();return br(null===t||"string"==typeof t),new Es(t)},t}(),Cs=function(){function t(t,e){this._i=t,this.fi=e,this.type="FirstParty",this.user=Es.ni}return Object.defineProperty(t.prototype,"si",{get:function(){var t={"X-Goog-AuthUser":this.fi},e=this._i.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),ks=function(){function t(t,e){this._i=t,this.fi=e}return t.prototype.getToken=function(){return Promise.resolve(new Cs(this._i,this.fi))},t.prototype.oi=function(t){t(Es.ni)},t.prototype.ai=function(){},t.prototype.ri=function(){},t}(),Ns=function(){function t(t,e,n,r){this.batchId=t,this.di=e,this.baseMutations=n,this.mutations=r}return t.prototype.wi=function(t,e,n){for(var r=n.Ei,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Xo(o,e,r[i]))}return e},t.prototype.Ti=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=$o(i,e,e,this.di))}for(var o=e,a=0,s=this.mutations;a<s.length;a++){var u=s[a];u.key.isEqual(t)&&(e=$o(u,e,o,this.di))}return e},t.prototype.Ii=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.Ti(r.key,t.get(r.key));i&&(n=n.ot(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),yi())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Tr(this.mutations,t.mutations,(function(t,e){return ta(t,e)}))&&Tr(this.baseMutations,t.baseMutations,(function(t,e){return ta(t,e)}))},t}(),As=function(){function t(t,e,n,r){this.batch=t,this.mi=e,this.Ei=n,this.Ai=r}return t.from=function(e,n,r){br(e.mutations.length===r.length);for(var i=di,o=e.mutations,a=0;a<o.length;a++)i=i.ot(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),Ps=function(){function t(){this.Ri=new Mr((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.Pi=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return this.gi},set:function(t){this.gi=t},enumerable:!1,configurable:!0}),t.prototype.yi=function(t,e){this.Vi(),this.readTime=e,this.Ri.set(t.key,t)},t.prototype.pi=function(t,e){this.Vi(),e&&(this.readTime=e),this.Ri.set(t,null)},t.prototype.bi=function(t,e){this.Vi();var n=this.Ri.get(e);return void 0!==n?Za.resolve(n):this.vi(t,e)},t.prototype.getEntries=function(t,e){return this.Si(t,e)},t.prototype.apply=function(t){return this.Vi(),this.Pi=!0,this.Di(t)},t.prototype.Vi=function(){},t}(),Os="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",xs=function(){function t(){this.Ci=[]}return t.prototype.Ni=function(t){this.Ci.push(t)},t.prototype.xi=function(){this.Ci.forEach((function(t){return t()}))},t}(),Rs=function(){function t(t,e,n){this.Fi=t,this.Oi=e,this.ki=n}return t.prototype.Mi=function(t,e){var n=this;return this.Oi.$i(t,e).next((function(r){return n.Li(t,e,r)}))},t.prototype.Li=function(t,e,n){return this.Fi.bi(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].Ti(e,t);return t}))},t.prototype.Bi=function(t,e,n){var r=hi();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].Ti(t,e);r=r.ot(t,e)})),r},t.prototype.qi=function(t,e){var n=this;return this.Fi.getEntries(t,e).next((function(e){return n.Ui(t,e)}))},t.prototype.Ui=function(t,e){var n=this;return this.Oi.Ki(t,e).next((function(r){var i=n.Bi(t,e,r),o=li();return i.forEach((function(t,e){e||(e=new va(t,jr.min())),o=o.ot(t,e)})),o}))},t.prototype.Qi=function(t,e,n){return function(t){return zr.X(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Wi(t,e.path):Ta(e)?this.ji(t,e,n):this.Gi(t,e,n)},t.prototype.Wi=function(t,e){return this.Mi(t,new zr(e)).next((function(t){var e=pi();return t instanceof da&&(e=e.ot(t.key,t)),e}))},t.prototype.ji=function(t,e,n){var r=this,i=e.collectionGroup,o=pi();return this.ki.zi(t,i).next((function(a){return Za.forEach(a,(function(a){var s=function(t,e){return new ma(e,null,t.on.slice(),t.filters.slice(),t.limit,t.an,t.startAt,t.endAt)}(e,a.child(i));return r.Gi(t,s,n).next((function(t){t.forEach((function(t,e){o=o.ot(t,e)}))}))})).next((function(){return o}))}))},t.prototype.Gi=function(t,e,n){var r,i,o=this;return this.Fi.Qi(t,e,n).next((function(n){return r=n,o.Oi.Hi(t,e)})).next((function(e){return i=e,o.Yi(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c),h=$o(u,l,l,o.di);r=h instanceof da?r.ot(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){Ra(e,n)||(r=r.remove(t))})),r}))},t.prototype.Yi=function(t,e,n){for(var r=yi(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof ra&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Fi.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof da&&(c=c.ot(t,e))})),c}))},t}(),Ds=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.Ji=n,this.Xi=r}return t.Zi=function(e,n){for(var r=yi(),i=yi(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Ls=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.tr=function(t){return n.er(t)},this.nr=function(t){return e.sr(t)})}return t.prototype.er=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.nr&&this.nr(t),t},t}();function Ms(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Ir(n,i);return 0===a?Ir(r,o):a}Ls.ir=-1;var Fs=function(){function t(t){this.rr=t,this.buffer=new si(Ms),this.ar=0}return t.prototype.cr=function(){return++this.ar},t.prototype.ur=function(t){var e=[t,this.cr()];if(this.buffer.size<this.rr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Ms(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),js={hr:!1,lr:0,_r:0,dr:0},Us=function(){function t(t,e,n){this.wr=t,this.Er=e,this.Tr=n}return t.Ir=function(e){return new t(e,t.mr,t.Ar)},t}();Us.mr=10,Us.Ar=1e3,Us.Rr=new Us(41943040,Us.mr,Us.Ar),Us.Pr=new Us(-1,0,0);var Vs=function(){function t(t,e){this.gr=t,this.cs=e,this.yr=!1,this.Vr=null}return t.prototype.start=function(t){-1!==this.gr.params.wr&&this.pr(t)},t.prototype.stop=function(){this.Vr&&(this.Vr.cancel(),this.Vr=null)},Object.defineProperty(t.prototype,"br",{get:function(){return null!==this.Vr},enumerable:!1,configurable:!0}),t.prototype.pr=function(t){var e=this,n=this.yr?3e5:6e4;dr("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.Vr=this.cs.yn("lru_garbage_collection",n,(function(){return(0,i.mG)(e,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:this.Vr=null,this.yr=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.vr(this.gr)];case 2:return n.sent(),[3,7];case 3:return rs(e=n.sent())?(dr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,ac(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.pr(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),qs=function(){function t(t,e){this.Sr=t,this.params=e}return t.prototype.Dr=function(t,e){return this.Sr.Cr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Nr=function(t,e){var n=this;if(0===e)return Za.resolve(Ls.ir);var r=new Fs(e);return this.Sr.Ce(t,(function(t){return r.ur(t.sequenceNumber)})).next((function(){return n.Sr.Fr(t,(function(t){return r.ur(t)}))})).next((function(){return r.maxValue}))},t.prototype.Or=function(t,e,n){return this.Sr.Or(t,e,n)},t.prototype.kr=function(t,e){return this.Sr.kr(t,e)},t.prototype.Mr=function(t,e){var n=this;return-1===this.params.wr?(dr("LruGarbageCollector","Garbage collection skipped; disabled"),Za.resolve(js)):this.$r(t).next((function(r){return r<n.params.wr?(dr("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.wr),js):n.Lr(t,e)}))},t.prototype.$r=function(t){return this.Sr.$r(t)},t.prototype.Lr=function(t,e){var n,r,i,a,s,u,c,l=this,h=Date.now();return this.Dr(t,this.params.Er).next((function(e){return e>l.params.Tr?(dr("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.Tr+" from "+e),r=l.params.Tr):r=e,a=Date.now(),l.Nr(t,r)})).next((function(r){return n=r,s=Date.now(),l.Or(t,n,e)})).next((function(e){return i=e,u=Date.now(),l.kr(t,n)})).next((function(t){return c=Date.now(),pr()<=o.in.DEBUG&&dr("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-a)+"ms\n\tRemoved "+i+" targets in "+(u-s)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-h)+"ms"),Za.resolve({hr:!0,lr:r,_r:i,dr:t})}))},t}();function Bs(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Ws(e)),e=zs(t.get(n),e);return Ws(e)}function zs(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Ws(t){return t+""}function Gs(t){var e=t.length;if(br(e>=2),2===e)return br(""===t.charAt(0)&&""===t.charAt(1)),Vr.U();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("",o);switch((a<0||a>n)&&gr(),t.charAt(a+1)){case"":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=t.substring(o,a),i+="\0";break;case"":i+=t.substring(o,a+1);break;default:gr()}o=a+2}return new Vr(r)}var Hs=function(t){this.Br=t};function Ks(t,e){if(e.document)return function(t,e,n){var r=lo(t,e.name),i=ao(e.updateTime),o=new la({mapValue:{fields:e.fields}});return new da(r,i,o,{hasCommittedMutations:!!n})}(t.Br,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=zr.Z(e.noDocument.path),r=$s(e.noDocument.readTime);return new va(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=zr.Z(e.unknownDocument.path),o=$s(e.unknownDocument.version);return new ya(i,o)}return gr()}function Qs(t,e,n){var r=Js(n),i=e.key.path.F().L();if(e instanceof da){var o=function(t,e){return{name:co(t,e.key),fields:e.rn().mapValue.fields,updateTime:ro(t,e.version.v())}}(t.Br,e),a=e.hasCommittedMutations;return new Tu(null,null,o,a,r,i)}if(e instanceof va){var s=e.key.path.L(),u=Xs(e.version),c=e.hasCommittedMutations;return new Tu(null,new Eu(s,u),null,c,r,i)}if(e instanceof ya){var l=e.key.path.L(),h=Xs(e.version);return new Tu(new Iu(l,h),null,null,!0,r,i)}return gr()}function Js(t){var e=t.v();return[e.seconds,e.nanoseconds]}function Ys(t){var e=new Fr(t[0],t[1]);return jr.V(e)}function Xs(t){var e=t.v();return new mu(e.seconds,e.nanoseconds)}function $s(t){var e=new Fr(t.seconds,t.nanoseconds);return jr.V(e)}function Zs(t,e){var n=(e.baseMutations||[]).map((function(e){return go(t.Br,e)})),r=e.mutations.map((function(e){return go(t.Br,e)})),i=Fr.fromMillis(e.localWriteTimeMs);return new Ns(e.batchId,i,n,r)}function tu(t){var e,n,r=$s(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?$s(t.lastLimboFreeSnapshotVersion):jr.min();return void 0!==t.query.documents?(br(1===(n=t.query).documents.length),e=Ca(ba(fo(n.documents[0])))):e=_o(t.query),new ti(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Cr.fromBase64String(t.resumeToken))}function eu(t,e){var n,r=Xs(e.nt),i=Xs(e.lastLimboFreeSnapshotVersion);n=Xr(e.target)?bo(t.Br,e.target):wo(t.Br,e.target);var o=e.resumeToken.toBase64();return new Cu(e.targetId,Jr(e.target),r,o,e.sequenceNumber,i,n)}var nu=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.ki=n,this.qr=r,this.Ur={}}return t.Kr=function(e,n,r,i){return br(""!==e.uid),new t(e.Zs()?e.uid:"",n,r,i)},t.prototype.Qr=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ou(t).rs({index:wu.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Wr=function(t,e,n,r){var i=this,o=au(t),a=ou(t);return a.add({}).next((function(s){br("number"==typeof s);for(var u=new Ns(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return mo(t.Br,e)})),i=n.mutations.map((function(e){return mo(t.Br,e)}));return new wu(e,n.batchId,n.di.toMillis(),r,i)}(i.serializer,i.userId,u),l=[],h=new si((function(t,e){return Ir(t.B(),e.B())})),f=0,p=r;f<p.length;f++){var d=p[f],v=_u.key(i.userId,d.key.path,s);h=h.add(d.key.path.F()),l.push(a.put(c)),l.push(o.put(v,_u.PLACEHOLDER))}return h.forEach((function(e){l.push(i.ki.jr(t,e))})),t.Ni((function(){i.Ur[s]=u.keys()})),Za.On(l).next((function(){return u}))}))},t.prototype.Gr=function(t,e){var n=this;return ou(t).get(e).next((function(t){return t?(br(t.userId===n.userId),Zs(n.serializer,t)):null}))},t.prototype.zr=function(t,e){var n=this;return this.Ur[e]?Za.resolve(this.Ur[e]):this.Gr(t,e).next((function(t){if(t){var r=t.keys();return n.Ur[e]=r,r}return null}))},t.prototype.Hr=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return ou(t).rs({index:wu.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(br(e.batchId>=r),o=Zs(n.serializer,e)),i.done()})).next((function(){return o}))},t.prototype.Yr=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return ou(t).rs({index:wu.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.Jr=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ou(t).ts(wu.userMutationsIndex,n).next((function(t){return t.map((function(t){return Zs(e.serializer,t)}))}))},t.prototype.$i=function(t,e){var n=this,r=_u.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return au(t).rs({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],l=Gs(u);if(s===n.userId&&e.path.isEqual(l))return ou(t).get(c).next((function(t){if(!t)throw gr();br(t.userId===n.userId),o.push(Zs(n.serializer,t))}));a.done()})).next((function(){return o}))},t.prototype.Ki=function(t,e){var n=this,r=new si(Ir),i=[];return e.forEach((function(e){var o=_u.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=au(t).rs({range:a},(function(t,i,o){var a=t[0],s=t[1],u=t[2],c=Gs(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),Za.On(i).next((function(){return n.Xr(t,r)}))},t.prototype.Hi=function(t,e){var n=this,r=e.path,i=r.length+1,o=_u.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new si(Ir);return au(t).rs({range:a},(function(t,e,o){var a=t[0],u=t[1],c=t[2],l=Gs(u);a===n.userId&&r.M(l)?l.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Xr(t,s)}))},t.prototype.Xr=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(ou(t).get(e).next((function(t){if(null===t)throw gr();br(t.userId===n.userId),r.push(Zs(n.serializer,t))})))})),Za.On(i).next((function(){return r}))},t.prototype.Zr=function(t,e){var n=this;return iu(t.eo,this.userId,e).next((function(r){return t.Ni((function(){n.no(e.batchId)})),Za.forEach(r,(function(e){return n.qr.so(t,e)}))}))},t.prototype.no=function(t){delete this.Ur[t]},t.prototype.io=function(t){var e=this;return this.Qr(t).next((function(n){if(!n)return Za.resolve();var r=IDBKeyRange.lowerBound(_u.prefixForUser(e.userId)),i=[];return au(t).rs({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Gs(t[1]);i.push(o)}else r.done()})).next((function(){br(0===i.length)}))}))},t.prototype.ro=function(t,e){return ru(t,this.userId,e)},t.prototype.oo=function(t){var e=this;return su(t).get(this.userId).next((function(t){return t||new bu(e.userId,-1,"")}))},t}();function ru(t,e,n){var r=_u.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return au(t).rs({range:o,ss:!0},(function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function iu(t,e,n){var r=t.store(wu.store),i=t.store(_u.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.rs({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){br(1===s)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=_u.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return Za.On(o).next((function(){return c}))}function ou(t){return Bu.Kn(t,wu.store)}function au(t){return Bu.Kn(t,_u.store)}function su(t){return Bu.Kn(t,bu.store)}var uu=function(){function t(t,e){this.serializer=t,this.ki=e}return t.prototype.yi=function(t,e,n){return hu(t).put(fu(e),n)},t.prototype.pi=function(t,e){var n=hu(t),r=fu(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.ao(t,r)}))},t.prototype.bi=function(t,e){var n=this;return hu(t).get(fu(e)).next((function(t){return n.co(t)}))},t.prototype.uo=function(t,e){var n=this;return hu(t).get(fu(e)).next((function(t){var e=n.co(t);return e?{ho:e,size:pu(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=hi();return this.lo(t,e,(function(t,e){var i=n.co(e);r=r.ot(t,i)})).next((function(){return r}))},t.prototype._o=function(t,e){var n=this,r=hi(),i=new ii(zr.D);return this.lo(t,e,(function(t,e){var o=n.co(e);o?(r=r.ot(t,o),i=i.ot(t,pu(e))):(r=r.ot(t,null),i=i.ot(t,0))})).next((function(){return{fo:r,do:i}}))},t.prototype.lo=function(t,e,n){if(e.P())return Za.resolve();var r=IDBKeyRange.bound(e.first().path.L(),e.last().path.L()),i=e._t(),o=i.It();return hu(t).rs({range:r},(function(t,e,r){for(var a=zr.Z(t);o&&zr.D(o,a)<0;)n(o,null),o=i.It();o&&o.isEqual(a)&&(n(o,e),o=i.At()?i.It():null),o?r.Xn(o.path.L()):r.done()})).next((function(){for(;o;)n(o,null),o=i.At()?i.It():null}))},t.prototype.Qi=function(t,e,n){var r=this,i=pi(),o=e.path.length+1,a={};if(n.isEqual(jr.min())){var s=e.path.L();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.L(),c=Js(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=Tu.collectionReadTimeIndex}return hu(t).rs(a,(function(t,n,a){if(t.length===o){var s=Ks(r.serializer,n);e.path.M(s.key.path)?s instanceof da&&Ra(e,s)&&(i=i.ot(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.wo=function(t){return new cu(this,!!t&&t.Eo)},t.prototype.To=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return lu(t).get(Su.key).next((function(t){return br(!!t),t}))},t.prototype.ao=function(t,e){return lu(t).put(Su.key,e)},t.prototype.co=function(t){if(t){var e=Ks(this.serializer,t);return e instanceof va&&e.version.isEqual(jr.min())?null:e}return null},t}(),cu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Io=e,r.Eo=n,r.mo=new Mr((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return(0,i.ZT)(e,t),e.prototype.Di=function(t){var e=this,n=[],r=0,i=new si((function(t,e){return Ir(t.B(),e.B())}));return this.Ri.forEach((function(o,a){var s=e.mo.get(o);if(a){var u=Qs(e.Io.serializer,a,e.readTime);i=i.add(o.path.F());var c=pu(u);r+=c-s,n.push(e.Io.yi(t,o,u))}else if(r-=s,e.Eo){var l=Qs(e.Io.serializer,new va(o,jr.min()),e.readTime);n.push(e.Io.yi(t,o,l))}else n.push(e.Io.pi(t,o))})),i.forEach((function(r){n.push(e.Io.ki.jr(t,r))})),n.push(this.Io.updateMetadata(t,r)),Za.On(n)},e.prototype.vi=function(t,e){var n=this;return this.Io.uo(t,e).next((function(t){return null===t?(n.mo.set(e,0),null):(n.mo.set(e,t.size),t.ho)}))},e.prototype.Si=function(t,e){var n=this;return this.Io._o(t,e).next((function(t){var e=t.fo;return t.do.forEach((function(t,e){n.mo.set(t,e)})),e}))},e}(Ps);function lu(t){return Bu.Kn(t,Su.store)}function hu(t){return Bu.Kn(t,Tu.store)}function fu(t){return t.path.L()}function pu(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw gr();e=t.noDocument}return JSON.stringify(e).length}var du=function(){function t(){this.Ao=new vu}return t.prototype.jr=function(t,e){return this.Ao.add(e),Za.resolve()},t.prototype.zi=function(t,e){return Za.resolve(this.Ao.getEntries(e))},t}(),vu=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.k(),n=t.F(),r=this.index[e]||new si(Vr.D),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.k(),n=t.F(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new si(Vr.D)).L()},t}(),yu=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;br(n<r&&n>=0&&r<=10);var o=new is("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(gu.store)}(t),function(t){t.createObjectStore(bu.store,{keyPath:bu.keyPath}),t.createObjectStore(wu.store,{keyPath:wu.keyPath,autoIncrement:!0}).createIndex(wu.userMutationsIndex,wu.userMutationsKeyPath,{unique:!0}),t.createObjectStore(_u.store)}(t),Pu(t),function(t){t.createObjectStore(Tu.store)}(t));var a=Za.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(ku.store),t.deleteObjectStore(Cu.store),t.deleteObjectStore(Nu.store)}(t),Pu(t)),a=a.next((function(){return function(t){var e=t.store(Nu.store),n=new Nu(0,0,jr.min().v(),0);return e.put(Nu.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(wu.store).ts().next((function(n){t.deleteObjectStore(wu.store),t.createObjectStore(wu.store,{keyPath:wu.keyPath,autoIncrement:!0}).createIndex(wu.userMutationsIndex,wu.userMutationsKeyPath,{unique:!0});var r=e.store(wu.store),i=n.map((function(t){return r.put(t)}));return Za.On(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(Ou.store,{keyPath:Ou.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(Su.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Tu.store);e.createIndex(Tu.readTimeIndex,Tu.readTimeIndexPath,{unique:!1}),e.createIndex(Tu.collectionReadTimeIndex,Tu.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.rewriteCanonicalIds(o)}))),a},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(Tu.store).rs((function(t,n){e+=pu(n)})).next((function(){var n=new Su(e);return t.store(Su.store).put(Su.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(bu.store),r=t.store(wu.store);return n.ts().next((function(n){return Za.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.ts(wu.userMutationsIndex,i).next((function(r){return Za.forEach(r,(function(r){br(r.userId===n.userId);var i=Zs(e.serializer,r);return iu(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(ku.store),n=t.store(Tu.store);return t.store(Nu.store).get(Nu.key).next((function(t){var r=[];return n.rs((function(n,i){var o=new Vr(n),a=function(t){return[0,Bs(t)]}(o);r.push(e.get(a).next((function(n){return n?Za.resolve():function(n){return e.put(new ku(0,Bs(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Za.On(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(Au.store,{keyPath:Au.keyPath});var n=e.store(Au.store),r=new vu,i=function(t){if(r.add(t)){var e=t.k(),i=t.F();return n.put({collectionId:e,parent:Bs(i)})}};return e.store(Tu.store).rs({ss:!0},(function(t,e){var n=new Vr(t);return i(n.F())})).next((function(){return e.store(_u.store).rs({ss:!0},(function(t,e){t[0];var n=t[1],r=(t[2],Gs(n));return i(r.F())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(Cu.store);return n.rs((function(t,r){var i=tu(r),o=eu(e.serializer,i);return n.put(o)}))},t}(),mu=function(t,e){this.seconds=t,this.nanoseconds=e},gu=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};gu.store="owner",gu.key="owner";var bu=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};bu.store="mutationQueues",bu.keyPath="userId";var wu=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};wu.store="mutations",wu.keyPath="batchId",wu.userMutationsIndex="userMutationsIndex",wu.userMutationsKeyPath=["userId","batchId"];var _u=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Bs(e)]},t.key=function(t,e,n){return[t,Bs(e),n]},t}();_u.store="documentMutations",_u.PLACEHOLDER=new _u;var Eu=function(t,e){this.path=t,this.readTime=e},Iu=function(t,e){this.path=t,this.version=e},Tu=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Tu.store="remoteDocuments",Tu.readTimeIndex="readTimeIndex",Tu.readTimeIndexPath="readTime",Tu.collectionReadTimeIndex="collectionReadTimeIndex",Tu.collectionReadTimeIndexPath=["parentPath","readTime"];var Su=function(t){this.byteSize=t};Su.store="remoteDocumentGlobal",Su.key="remoteDocumentGlobalKey";var Cu=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};Cu.store="targets",Cu.keyPath="targetId",Cu.queryTargetsIndexName="queryTargetsIndex",Cu.queryTargetsKeyPath=["canonicalId","targetId"];var ku=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};ku.store="targetDocuments",ku.keyPath=["targetId","path"],ku.documentTargetsIndex="documentTargetsIndex",ku.documentTargetsKeyPath=["path","targetId"];var Nu=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Nu.key="targetGlobalKey",Nu.store="targetGlobal";var Au=function(t,e){this.collectionId=t,this.parent=e};function Pu(t){t.createObjectStore(ku.store,{keyPath:ku.keyPath}).createIndex(ku.documentTargetsIndex,ku.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Cu.store,{keyPath:Cu.keyPath}).createIndex(Cu.queryTargetsIndexName,Cu.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Nu.store)}Au.store="collectionParents",Au.keyPath=["collectionId","parent"];var Ou=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Ou.store="clientMetadata",Ou.keyPath="clientId";var xu=(0,i.pr)((0,i.pr)((0,i.pr)([bu.store,wu.store,_u.store,Tu.store,Cu.store,gu.store,Nu.store,ku.store],[Ou.store]),[Su.store]),[Au.store]),Ru=function(){function t(){this.Ro=new vu}return t.prototype.jr=function(t,e){var n=this;if(!this.Ro.has(e)){var r=e.k(),i=e.F();t.Ni((function(){n.Ro.add(e)}));var o={collectionId:r,parent:Bs(i)};return Du(t).put(o)}return Za.resolve()},t.prototype.zi=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Sr(e),""],!1,!0);return Du(t).ts(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Gs(o.parent))}return n}))},t}();function Du(t){return Bu.Kn(t,Au.store)}var Lu=function(){function t(t){this.Po=t}return t.prototype.next=function(){return this.Po+=2,this.Po},t.yo=function(){return new t(0)},t.Vo=function(){return new t(-1)},t}(),Mu=function(){function t(t,e){this.qr=t,this.serializer=e}return t.prototype.po=function(t){var e=this;return this.bo(t).next((function(n){var r=new Lu(n.highestTargetId);return n.highestTargetId=r.next(),e.vo(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.So=function(t){return this.bo(t).next((function(t){return jr.V(new Fr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Do=function(t){return this.bo(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Co=function(t,e,n){var r=this;return this.bo(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.v()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.vo(t,i)}))},t.prototype.No=function(t,e){var n=this;return this.xo(t,e).next((function(){return n.bo(t).next((function(r){return r.targetCount+=1,n.Fo(e,r),n.vo(t,r)}))}))},t.prototype.Oo=function(t,e){return this.xo(t,e)},t.prototype.ko=function(t,e){var n=this;return this.Mo(t,e.targetId).next((function(){return Fu(t).delete(e.targetId)})).next((function(){return n.bo(t)})).next((function(e){return br(e.targetCount>0),e.targetCount-=1,n.vo(t,e)}))},t.prototype.Or=function(t,e,n){var r=this,i=0,o=[];return Fu(t).rs((function(a,s){var u=tu(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.ko(t,u)))})).next((function(){return Za.On(o)})).next((function(){return i}))},t.prototype.Ce=function(t,e){return Fu(t).rs((function(t,n){var r=tu(n);e(r)}))},t.prototype.bo=function(t){return ju(t).get(Nu.key).next((function(t){return br(null!==t),t}))},t.prototype.vo=function(t,e){return ju(t).put(Nu.key,e)},t.prototype.xo=function(t,e){return Fu(t).put(eu(this.serializer,e))},t.prototype.Fo=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.$o=function(t){return this.bo(t).next((function(t){return t.targetCount}))},t.prototype.Lo=function(t,e){var n=Jr(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Fu(t).rs({range:r,index:Cu.queryTargetsIndexName},(function(t,n,r){var o=tu(n);Yr(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.Bo=function(t,e,n){var r=this,i=[],o=Uu(t);return e.forEach((function(e){var a=Bs(e.path);i.push(o.put(new ku(n,a))),i.push(r.qr.qo(t,n,e))})),Za.On(i)},t.prototype.Uo=function(t,e,n){var r=this,i=Uu(t);return Za.forEach(e,(function(e){var o=Bs(e.path);return Za.On([i.delete([n,o]),r.qr.Ko(t,n,e)])}))},t.prototype.Mo=function(t,e){var n=Uu(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.Qo=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Uu(t),i=yi();return r.rs({range:n,ss:!0},(function(t,e,n){var r=Gs(t[1]),o=new zr(r);i=i.add(o)})).next((function(){return i}))},t.prototype.ro=function(t,e){var n=Bs(e.path),r=IDBKeyRange.bound([n],[Sr(n)],!1,!0),i=0;return Uu(t).rs({index:ku.documentTargetsIndex,ss:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Ue=function(t,e){return Fu(t).get(e).next((function(t){return t?tu(t):null}))},t}();function Fu(t){return Bu.Kn(t,Cu.store)}function ju(t){return Bu.Kn(t,Nu.store)}function Uu(t){return Bu.Kn(t,ku.store)}var Vu="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",qu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).eo=e,r.Wo=n,r}return(0,i.ZT)(e,t),e}(xs),Bu=function(){function t(e,n,r,i,o,a,s,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.fn=o,this.window=a,this.document=s,this.jo=c,this.Go=l,this.zo=null,this.Ho=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Yo=null,this.inForeground=!1,this.Jo=null,this.Xo=null,this.Zo=Number.NEGATIVE_INFINITY,this.ta=function(t){return Promise.resolve()},!t.Ln())throw new hr(lr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.qr=new Gu(this,i),this.ea=n+"main",this.serializer=new Hs(u),this.na=new ts(this.ea,10,new yu(this.serializer)),this.sa=new Mu(this.qr,this.serializer),this.ki=new Ru,this.Fi=function(t,e){return new uu(t,e)}(this.serializer,this.ki),this.window&&this.window.localStorage?this.ia=this.window.localStorage:(this.ia=null,!1===l&&vr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.Kn=function(t,e){if(t instanceof qu)return ts.Kn(t.eo,e);throw gr()},t.prototype.start=function(){var t=this;return this.ra().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new hr(lr.FAILED_PRECONDITION,Vu);return t.oa(),t.aa(),t.ca(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.sa.Do(e)}))})).then((function(e){t.zo=new Ls(e,t.jo)})).then((function(){t.Ho=!0})).catch((function(e){return t.na&&t.na.close(),Promise.reject(e)}))},t.prototype.ua=function(t){var e=this;return this.ta=function(n){return(0,i.mG)(e,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){return this.br?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.ha=function(t){var e=this;this.na.jn((function(n){return(0,i.mG)(e,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.la=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.fn.ws((function(){return(0,i.mG)(e,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return this.br?[4,this.ra()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.ra=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Wu(e).put(new Ou(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t._a(e).next((function(e){e||(t.isPrimary=!1,t.fn.Cs((function(){return t.ta(!1)})))}))})).next((function(){return t.fa(e)})).next((function(n){return t.isPrimary&&!n?t.da(e).next((function(){return!1})):!!n&&t.wa(e).next((function(){return!0}))}))})).catch((function(e){if(rs(e))return dr("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return dr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.fn.Cs((function(){return t.ta(e)})),t.isPrimary=e}))},t.prototype._a=function(t){var e=this;return zu(t).get(gu.key).next((function(t){return Za.resolve(e.Ea(t))}))},t.prototype.Ta=function(t){return Wu(t).delete(this.clientId)},t.prototype.Ia=function(){return(0,i.mG)(this,void 0,void 0,(function(){var e,n,r,o,a=this;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return!this.isPrimary||this.ma(this.Zo,18e5)?[3,2]:(this.Zo=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var n=t.Kn(e,Ou.store);return n.ts().next((function(t){var e=a.Aa(t,18e5),r=t.filter((function(t){return-1===e.indexOf(t)}));return Za.forEach(r,(function(t){return n.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=i.sent(),this.ia)for(n=0,r=e;n<r.length;n++)o=r[n],this.ia.removeItem(this.Ra(o.clientId));i.label=2;case 2:return[2]}}))}))},t.prototype.ca=function(){var t=this;this.Xo=this.fn.yn("client_metadata_refresh",4e3,(function(){return t.ra().then((function(){return t.Ia()})).then((function(){return t.ca()}))}))},t.prototype.Ea=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.fa=function(t){var e=this;return this.Go?Za.resolve(!0):zu(t).get(gu.key).next((function(n){if(null!==n&&e.ma(n.leaseTimestampMs,5e3)&&!e.Pa(n.ownerId)){if(e.Ea(n)&&e.networkEnabled)return!0;if(!e.Ea(n)){if(!n.allowTabSynchronization)throw new hr(lr.FAILED_PRECONDITION,Vu);return!1}}return!(!e.networkEnabled||!e.inForeground)||Wu(t).ts().next((function(t){return void 0===e.Aa(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&dr("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.ga=function(){return(0,i.mG)(this,void 0,void 0,(function(){var t=this;return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return this.Ho=!1,this.ya(),this.Xo&&(this.Xo.cancel(),this.Xo=null),this.Va(),this.pa(),[4,this.na.runTransaction("shutdown","readwrite",[gu.store,Ou.store],(function(e){var n=new qu(e,Ls.ir);return t.da(n).next((function(){return t.Ta(n)}))}))];case 1:return e.sent(),this.na.close(),this.ba(),[2]}}))}))},t.prototype.Aa=function(t,e){var n=this;return t.filter((function(t){return n.ma(t.updateTimeMs,e)&&!n.Pa(t.clientId)}))},t.prototype.va=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Wu(e).ts().next((function(e){return t.Aa(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"br",{get:function(){return this.Ho},enumerable:!1,configurable:!0}),t.prototype.Sa=function(t){return nu.Kr(t,this.serializer,this.ki,this.qr)},t.prototype.Da=function(){return this.sa},t.prototype.Ca=function(){return this.Fi},t.prototype.Na=function(){return this.ki},t.prototype.runTransaction=function(t,e,n){var r=this;dr("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.na.runTransaction(t,o,xu,(function(o){return i=new qu(o,r.zo?r.zo.next():Ls.ir),"readwrite-primary"===e?r._a(i).next((function(t){return!!t||r.fa(i)})).next((function(e){if(!e)throw vr("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.fn.Cs((function(){return r.ta(!1)})),new hr(lr.FAILED_PRECONDITION,Os);return n(i)})).next((function(t){return r.wa(i).next((function(){return t}))})):r.xa(i).next((function(){return n(i)}))})).then((function(t){return i.xi(),t}))},t.prototype.xa=function(t){var e=this;return zu(t).get(gu.key).next((function(t){if(null!==t&&e.ma(t.leaseTimestampMs,5e3)&&!e.Pa(t.ownerId)&&!e.Ea(t)&&!(e.Go||e.allowTabSynchronization&&t.allowTabSynchronization))throw new hr(lr.FAILED_PRECONDITION,Vu)}))},t.prototype.wa=function(t){var e=new gu(this.clientId,this.allowTabSynchronization,Date.now());return zu(t).put(gu.key,e)},t.Ln=function(){return ts.Ln()},t.prototype.da=function(t){var e=this,n=zu(t);return n.get(gu.key).next((function(t){return e.Ea(t)?(dr("IndexedDbPersistence","Releasing primary lease."),n.delete(gu.key)):Za.resolve()}))},t.prototype.ma=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(vr("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.oa=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Jo=function(){t.fn.ws((function(){return t.inForeground="visible"===t.document.visibilityState,t.ra()}))},this.document.addEventListener("visibilitychange",this.Jo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Va=function(){this.Jo&&(this.document.removeEventListener("visibilitychange",this.Jo),this.Jo=null)},t.prototype.aa=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Yo=function(){e.ya(),e.fn.ws((function(){return e.ga()}))},this.window.addEventListener("unload",this.Yo))},t.prototype.pa=function(){this.Yo&&(this.window.removeEventListener("unload",this.Yo),this.Yo=null)},t.prototype.Pa=function(t){var e;try{var n=null!==(null===(e=this.ia)||void 0===e?void 0:e.getItem(this.Ra(t)));return dr("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return vr("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.ya=function(){if(this.ia)try{this.ia.setItem(this.Ra(this.clientId),String(Date.now()))}catch(t){vr("Failed to set zombie client id.",t)}},t.prototype.ba=function(){if(this.ia)try{this.ia.removeItem(this.Ra(this.clientId))}catch(t){}},t.prototype.Ra=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function zu(t){return Bu.Kn(t,gu.store)}function Wu(t){return Bu.Kn(t,Ou.store)}var Gu=function(){function t(t,e){this.db=t,this.gr=new qs(this,e)}return t.prototype.Cr=function(t){var e=this.Fa(t);return this.db.Da().$o(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Fa=function(t){var e=0;return this.Fr(t,(function(t){e++})).next((function(){return e}))},t.prototype.Ce=function(t,e){return this.db.Da().Ce(t,e)},t.prototype.Fr=function(t,e){return this.Oa(t,(function(t,n){return e(n)}))},t.prototype.qo=function(t,e,n){return Hu(t,n)},t.prototype.Ko=function(t,e,n){return Hu(t,n)},t.prototype.Or=function(t,e,n){return this.db.Da().Or(t,e,n)},t.prototype.so=function(t,e){return Hu(t,e)},t.prototype.ka=function(t,e){return function(t,e){var n=!1;return su(t).os((function(r){return ru(t,r,e).next((function(t){return t&&(n=!0),Za.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.kr=function(t,e){var n=this,r=this.db.Ca().wo(),i=[],o=0;return this.Oa(t,(function(a,s){if(s<=e){var u=n.ka(t,a).next((function(e){if(!e)return o++,r.bi(t,a).next((function(){return r.pi(a),Uu(t).delete([0,Bs(a.path)])}))}));i.push(u)}})).next((function(){return Za.On(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.st(t.Wo);return this.db.Da().Oo(t,n)},t.prototype.Ma=function(t,e){return Hu(t,e)},t.prototype.Oa=function(t,e){var n,r=Uu(t),i=Ls.ir;return r.rs({index:ku.documentTargetsIndex},(function(t,r){var o=t[0],a=(t[1],r.path),s=r.sequenceNumber;0===o?(i!==Ls.ir&&e(new zr(Gs(n)),i),i=s,n=a):i=Ls.ir})).next((function(){i!==Ls.ir&&e(new zr(Gs(n)),i)}))},t.prototype.$r=function(t){return this.db.Ca().To(t)},t}();function Hu(t,e){return Uu(t).put(function(t,e){return new ku(0,Bs(t.path),e)}(e,t.Wo))}function Ku(t,e){var n=t.projectId;return t.I||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Qu=function(){function t(t,e,n){this.persistence=t,this.$a=e,this.La=new ii(Ir),this.Ba=new Mr((function(t){return Jr(t)}),Yr),this.qa=jr.min(),this.Oi=t.Sa(n),this.Ua=t.Ca(),this.sa=t.Da(),this.Ka=new Rs(this.Ua,this.Oi,this.persistence.Na()),this.$a.Qa(this.Ka)}return t.prototype.vr=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.Mr(n,e.La)}))},t}();function Ju(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o,a;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return n=wr(t),r=n.Oi,o=n.Ka,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var i;return n.Oi.Jr(t).next((function(a){return i=a,r=n.persistence.Sa(e),o=new Rs(n.Ua,r,n.persistence.Na()),r.Jr(t)})).next((function(e){for(var n=[],r=[],a=yi(),s=0,u=i;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var y=0,m=v.mutations;y<m.length;y++){var g=m[y];a=a.add(g.key)}}return o.qi(t,a).next((function(t){return{Wa:t,ja:n,Ga:r}}))}))}))];case 1:return a=i.sent(),[2,(n.Oi=r,n.Ka=o,n.$a.Qa(n.Ka),a)]}}))}))}function Yu(t,e){var n=wr(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Ua.wo({Eo:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),a=Za.resolve();return o.forEach((function(t){a=a.next((function(){return r.bi(e,t)})).next((function(e){var o=e,a=n.Ai.get(t);br(null!==a),(!o||o.version.u(a)<0)&&(o=i.wi(t,o,n))&&r.yi(o,n.mi)}))})),a.next((function(){return t.Oi.Zr(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.Oi.io(t)})).next((function(){return n.Ka.qi(t,r)}))}))}function Xu(t){var e=wr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.sa.So(t)}))}function $u(t,e){var n=wr(t),r=e.nt,i=n.La;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Ua.wo({Eo:!0});i=n.La;var a=[];e.zt.forEach((function(e,o){var s=i.get(o);if(s){a.push(n.sa.Uo(t,e.se,o).next((function(){return n.sa.Bo(t,e.ee,o)})));var u=e.resumeToken;if(u.o()>0){var c=s.it(u,r).st(t.Wo);i=i.ot(o,c),function(t,e,n){return br(e.resumeToken.o()>0),0===t.resumeToken.o()||e.nt.p()-t.nt.p()>=3e8||n.ee.size+n.ne.size+n.se.size>0}(s,c,e)&&a.push(n.sa.Oo(t,c))}}}));var s=li(),u=yi();if(e.Yt.forEach((function(t,e){u=u.add(t)})),a.push(o.getEntries(t,u).next((function(i){e.Yt.forEach((function(u,c){var l=i.get(u);c instanceof va&&c.version.isEqual(jr.min())?(o.pi(u,r),s=s.ot(u,c)):null==l||c.version.u(l.version)>0||0===c.version.u(l.version)&&l.hasPendingWrites?(o.yi(c,r),s=s.ot(u,c)):dr("LocalStore","Ignoring outdated watch update for ",u,". Current version:",l.version," Watch version:",c.version),e.Jt.has(u)&&a.push(n.persistence.qr.Ma(t,u))}))}))),!r.isEqual(jr.min())){var c=n.sa.So(t).next((function(e){return n.sa.Co(t,t.Wo,r)}));a.push(c)}return Za.On(a).next((function(){return o.apply(t)})).next((function(){return n.Ka.Ui(t,s)}))})).then((function(t){return n.La=i,t}))}function Zu(t,e){var n=wr(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.Oi.Hr(t,e)}))}function tc(t,e){var n=wr(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.sa.Lo(t,e).next((function(i){return i?(r=i,Za.resolve(r)):n.sa.po(t).next((function(i){return r=new ti(e,i,0,t.Wo),n.sa.No(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.La.get(t.targetId);return(null===r||t.nt.u(r.nt)>0)&&(n.La=n.La.ot(t.targetId,t),n.Ba.set(e,t.targetId)),t}))}function ec(t,e,n){return(0,i.mG)(this,void 0,void 0,(function(){var r,o,a,s;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:r=wr(t),o=r.La.get(e),a=n?"readwrite":"readwrite-primary",i.label=1;case 1:return i.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",a,(function(t){return r.persistence.qr.removeTarget(t,o)}))];case 2:i.sent(),i.label=3;case 3:return[3,5];case 4:if(!rs(s=i.sent()))throw s;return dr("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.La=r.La.remove(e),r.Ba.delete(o.target),[2]}}))}))}function nc(t,e,n){var r=wr(t),i=jr.min(),o=yi();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=wr(t),i=r.Ba.get(n);return void 0!==i?Za.resolve(r.La.get(i)):r.sa.Lo(e,n)}(r,t,Ca(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.sa.Qo(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.$a.Qi(t,e,n?i:jr.min(),n?o:yi())})).next((function(t){return{documents:t,za:o}}))}))}function rc(t,e){var n=wr(t),r=wr(n.sa),i=n.La.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Ue(t,e).next((function(t){return t?t.target:null}))}))}function ic(t){var e=wr(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=wr(t),i=li(),o=Js(n),a=hu(e),s=IDBKeyRange.lowerBound(o,!0);return a.rs({index:Tu.readTimeIndex,range:s},(function(t,e){var n=Ks(r.serializer,e);i=i.ot(n.key,n),o=e.readTime})).next((function(){return{Ha:i,readTime:Ys(o)}}))}(e.Ua,t,e.qa)})).then((function(t){var n=t.Ha,r=t.readTime;return e.qa=r,n}))}function oc(t){return(0,i.mG)(this,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(n){return[2,(e=wr(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=hu(t),n=jr.min();return e.rs({index:Tu.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Ys(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.qa=t}))]}))}))}function ac(t){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){if(t.code!==lr.FAILED_PRECONDITION||t.message!==Os)throw t;return dr("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}var sc=function(){function t(t,e,n,r,i,o){this.fn=t,this.Ya=n,this.Ja=r,this.Xa=i,this.listener=o,this.state=0,this.Za=0,this.tc=null,this.stream=null,this.ys=new $a(t,e)}return t.prototype.ec=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.nc=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.sc()},t.prototype.stop=function(){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return this.ec()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.ic=function(){this.state=0,this.ys.reset()},t.prototype.rc=function(){var t=this;this.nc()&&null===this.tc&&(this.tc=this.fn.yn(this.Ya,6e4,(function(){return t.oc()})))},t.prototype.ac=function(t){this.cc(),this.stream.send(t)},t.prototype.oc=function(){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){return this.nc()?[2,this.close(0)]:[2]}))}))},t.prototype.cc=function(){this.tc&&(this.tc.cancel(),this.tc=null)},t.prototype.close=function(t,e){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return this.cc(),this.ys.cancel(),this.Za++,3!==t?this.ys.reset():e&&e.code===lr.RESOURCE_EXHAUSTED?(vr(e.toString()),vr("Using maximum backoff delay to prevent overloading the backend."),this.ys.Rn()):e&&e.code===lr.UNAUTHENTICATED&&this.Xa.ri(),null!==this.stream&&(this.uc(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.hc(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.uc=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.lc(this.Za),n=this.Za;this.Xa.getToken().then((function(e){t.Za===n&&t._c(e)}),(function(n){e((function(){var e=new hr(lr.UNKNOWN,"Fetching auth token failed: "+n.message);return t.fc(e)}))}))},t.prototype._c=function(t){var e=this,n=this.lc(this.Za);this.stream=this.dc(t),this.stream.wc((function(){n((function(){return e.state=2,e.listener.wc()}))})),this.stream.hc((function(t){n((function(){return e.fc(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.sc=function(){var t=this;this.state=4,this.ys.Pn((function(){return(0,i.mG)(t,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.fc=function(t){return dr("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.lc=function(t){var e=this;return function(n){e.fn.ws((function(){return e.Za===t?n():(dr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),uc=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,a}return(0,i.ZT)(e,t),e.prototype.dc=function(t){return this.Ja.Ec("Listen",t)},e.prototype.onMessage=function(t){this.ys.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:gr()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Ke?(br(void 0===e||"string"==typeof e),Cr.fromBase64String(e||"")):(br(void 0===e||e instanceof Uint8Array),Cr.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,s=a&&function(t){var e=void 0===t.code?lr.UNKNOWN:ri(t.code);return new hr(e,t.message||"")}(a);n=new Ci(r,i,o,s||null)}else if("documentChange"in e){e.documentChange;var u=e.documentChange;u.document,u.document.name,u.document.updateTime;var c=lo(t,u.document.name),l=ao(u.document.updateTime),h=new la({mapValue:{fields:u.document.fields}}),f=new da(c,l,h,{}),p=u.targetIds||[],d=u.removedTargetIds||[];n=new Ti(p,d,f.key,f)}else if("documentDelete"in e){e.documentDelete;var v=e.documentDelete;v.document;var y=lo(t,v.document),m=v.readTime?ao(v.readTime):jr.min(),g=new va(y,m),b=v.removedTargetIds||[];n=new Ti([],b,g.key,g)}else if("documentRemove"in e){e.documentRemove;var w=e.documentRemove;w.document;var _=lo(t,w.document),E=w.removedTargetIds||[];n=new Ti([],E,_,null)}else{if(!("filter"in e))return gr();e.filter;var I=e.filter;I.targetId;var T=I.count||0,S=new ei(T),C=I.targetId;n=new Si(C,S)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return jr.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?jr.min():e.readTime?ao(e.readTime):jr.min()}(t);return this.listener.Tc(e,n)},e.prototype.Ic=function(t){var e={};e.database=po(this.serializer),e.addTarget=function(t,e){var n,r=e.target;return(n=Xr(r)?{documents:bo(t,r)}:{query:wo(t,r)}).targetId=e.targetId,e.resumeToken.o()>0&&(n.resumeToken=io(t,e.resumeToken)),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return gr()}}(0,e.et);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.ac(e)},e.prototype.mc=function(t){var e={};e.database=po(this.serializer),e.removeTarget=t,this.ac(e)},e}(sc),cc=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,a.Ac=!1,a}return(0,i.ZT)(e,t),Object.defineProperty(e.prototype,"Rc",{get:function(){return this.Ac},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Ac=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.uc=function(){this.Ac&&this.Pc([])},e.prototype.dc=function(t){return this.Ja.Ec("Write",t)},e.prototype.onMessage=function(t){if(br(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Ac){this.ys.reset();var e=function(t,e){return t&&t.length>0?(br(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?ao(t.updateTime):ao(e);n.isEqual(jr.min())&&(n=ao(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new Ko(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=ao(t.commitTime);return this.listener.gc(n,e)}return br(!t.writeResults||0===t.writeResults.length),this.Ac=!0,this.listener.yc()},e.prototype.Vc=function(){var t={};t.database=po(this.serializer),this.ac(t)},e.prototype.Pc=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return mo(e.serializer,t)}))};this.ac(n)},e}(sc),lc=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Ja=n,i.serializer=r,i.bc=!1,i}return(0,i.ZT)(e,t),e.prototype.vc=function(){if(this.bc)throw new hr(lr.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Sc=function(t,e,n){var r=this;return this.vc(),this.credentials.getToken().then((function(i){return r.Ja.Sc(t,e,n,i)})).catch((function(t){throw t.code===lr.UNAUTHENTICATED&&r.credentials.ri(),t}))},e.prototype.Dc=function(t,e,n){var r=this;return this.vc(),this.credentials.getToken().then((function(i){return r.Ja.Dc(t,e,n,i)})).catch((function(t){throw t.code===lr.UNAUTHENTICATED&&r.credentials.ri(),t}))},e.prototype.terminate=function(){this.bc=!1},e}((function(){})),hc=function(){function t(t,e){this.cs=t,this.Cc=e,this.state="Unknown",this.Nc=0,this.xc=null,this.Fc=!0}return t.prototype.Oc=function(){var t=this;0===this.Nc&&(this.kc("Unknown"),this.xc=this.cs.yn("online_state_timeout",1e4,(function(){return t.xc=null,t.Mc("Backend didn't respond within 10 seconds."),t.kc("Offline"),Promise.resolve()})))},t.prototype.$c=function(t){"Online"===this.state?this.kc("Unknown"):(this.Nc++,this.Nc>=1&&(this.Lc(),this.Mc("Connection failed 1 times. Most recent error: "+t.toString()),this.kc("Offline")))},t.prototype.set=function(t){this.Lc(),this.Nc=0,"Online"===t&&(this.Fc=!1),this.kc(t)},t.prototype.kc=function(t){t!==this.state&&(this.state=t,this.Cc(t))},t.prototype.Mc=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Fc?(vr(e),this.Fc=!1):dr("OnlineStateTracker",e)},t.prototype.Lc=function(){null!==this.xc&&(this.xc.cancel(),this.xc=null)},t}(),fc=function(t,e,n,r,o){var a=this;this.Bc=t,this.qc=e,this.cs=n,this.Uc={},this.Kc=[],this.Qc=new Map,this.Wc=new Set,this.jc=[],this.Gc=o,this.Gc.zc((function(t){n.ws((function(){return(0,i.mG)(a,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return _c(this)?(dr("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return(0,i.mG)(this,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return(e=wr(t)).Wc.add(4),[4,dc(e)];case 1:return n.sent(),e.Hc.set("Unknown"),e.Wc.delete(4),[4,pc(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Hc=new hc(n,r)};function pc(t){return(0,i.mG)(this,void 0,void 0,(function(){var e,n;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:if(!_c(t))return[3,4];e=0,n=t.jc,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function dc(t){return(0,i.mG)(this,void 0,void 0,(function(){var e,n;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:e=0,n=t.jc,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function vc(t,e){var n=wr(t);n.Qc.has(e.targetId)||(n.Qc.set(e.targetId,e),wc(n)?bc(n):Mc(n).nc()&&mc(n,e))}function yc(t,e){var n=wr(t),r=Mc(n);n.Qc.delete(e),r.nc()&&gc(n,e),0===n.Qc.size&&(r.nc()?r.rc():_c(n)&&n.Hc.set("Unknown"))}function mc(t,e){t.Yc.me(e.targetId),Mc(t).Ic(e)}function gc(t,e){t.Yc.me(e),Mc(t).mc(e)}function bc(t){t.Yc=new Ni({qe:function(e){return t.Uc.qe(e)},Ue:function(e){return t.Qc.get(e)||null}}),Mc(t).start(),t.Hc.Oc()}function wc(t){return _c(t)&&!Mc(t).ec()&&t.Qc.size>0}function _c(t){return 0===wr(t).Wc.size}function Ec(t){t.Yc=void 0}function Ic(t){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){return t.Qc.forEach((function(e,n){mc(t,e)})),[2]}))}))}function Tc(t,e){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(n){return Ec(t),wc(t)?(t.Hc.$c(e),bc(t)):t.Hc.set("Unknown"),[2]}))}))}function Sc(t,e,n){return(0,i.mG)(this,void 0,void 0,(function(){var r,o,a;return(0,i.Jh)(this,(function(s){switch(s.label){case 0:if(t.Hc.set("Online"),!(e instanceof Ci&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o,a;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:n=e.cause,r=0,o=e.targetIds,i.label=1;case 1:return r<o.length?(a=o[r],t.Qc.has(a)?[4,t.Uc.Jc(a,n)]:[3,3]):[3,5];case 2:i.sent(),t.Qc.delete(a),t.Yc.removeTarget(a),i.label=3;case 3:i.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),dr("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Cc(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Ti?t.Yc.be(e):e instanceof Si?t.Yc.Oe(e):t.Yc.De(e),n.isEqual(jr.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Xu(t.Bc)];case 8:return o=s.sent(),n.u(o)>=0?[4,function(t,e){var n=t.Yc.$e(e);return n.zt.forEach((function(n,r){if(n.resumeToken.o()>0){var i=t.Qc.get(r);i&&t.Qc.set(r,i.it(n.resumeToken,e))}})),n.Ht.forEach((function(e){var n=t.Qc.get(e);if(n){t.Qc.set(e,n.it(Cr.h,n.nt)),gc(t,e);var r=new ti(n.target,e,1,n.sequenceNumber);mc(t,r)}})),t.Uc.Xc(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return dr("RemoteStore","Failed to raise snapshot:",a=s.sent()),[4,Cc(t,a)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function Cc(t,e,n){return(0,i.mG)(this,void 0,void 0,(function(){var r=this;return(0,i.Jh)(this,(function(o){switch(o.label){case 0:if(!rs(e))throw e;return t.Wc.add(1),[4,dc(t)];case 1:return o.sent(),t.Hc.set("Offline"),n||(n=function(){return Xu(t.Bc)}),t.cs.Cs((function(){return(0,i.mG)(r,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return dr("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Wc.delete(1),[4,pc(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function kc(t,e){return e().catch((function(n){return Cc(t,n,e)}))}function Nc(t){return(0,i.mG)(this,void 0,void 0,(function(){var e,n,r,o,a;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:e=wr(t),n=Fc(e),r=e.Kc.length>0?e.Kc[e.Kc.length-1].batchId:-1,i.label=1;case 1:if(!function(t){return _c(t)&&t.Kc.length<10}(e))return[3,7];i.label=2;case 2:return i.trys.push([2,4,,6]),[4,Zu(e.Bc,r)];case 3:return null===(o=i.sent())?(0===e.Kc.length&&n.rc(),[3,7]):(r=o.batchId,function(t,e){t.Kc.push(e);var n=Fc(t);n.nc()&&n.Rc&&n.Pc(e.mutations)}(e,o),[3,6]);case 4:return a=i.sent(),[4,Cc(e,a)];case 5:return i.sent(),[3,6];case 6:return[3,1];case 7:return Ac(e)&&Pc(e),[2]}}))}))}function Ac(t){return _c(t)&&!Fc(t).ec()&&t.Kc.length>0}function Pc(t){Fc(t).start()}function Oc(t){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){return Fc(t).Vc(),[2]}))}))}function xc(t){return(0,i.mG)(this,void 0,void 0,(function(){var e,n,r,o;return(0,i.Jh)(this,(function(i){for(e=Fc(t),n=0,r=t.Kc;n<r.length;n++)o=r[n],e.Pc(o.mutations);return[2]}))}))}function Rc(t,e,n){return(0,i.mG)(this,void 0,void 0,(function(){var r,o;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return r=t.Kc.shift(),o=As.from(r,e,n),[4,kc(t,(function(){return t.Uc.Zc(o)}))];case 1:return i.sent(),[4,Nc(t)];case 2:return i.sent(),[2]}}))}))}function Dc(t,e){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return e&&Fc(t).Rc?[4,function(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return ni(r=e.code)&&r!==lr.ABORTED?(n=t.Kc.shift(),Fc(t).ic(),[4,kc(t,(function(){return t.Uc.tu(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Nc(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Ac(t)&&Pc(t),[2]}}))}))}function Lc(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return n=wr(t),e?(n.Wc.delete(2),[4,pc(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Wc.add(2),[4,dc(n)]);case 3:r.sent(),n.Hc.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Mc(t){var e=this;return t.eu||(t.eu=function(t,e,n){var r=wr(t);return r.vc(),new uc(e,r.Ja,r.credentials,r.serializer,n)}(t.qc,t.cs,{wc:Ic.bind(null,t),hc:Tc.bind(null,t),Tc:Sc.bind(null,t)}),t.jc.push((function(n){return(0,i.mG)(e,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return n?(t.eu.ic(),wc(t)?bc(t):t.Hc.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.eu.stop()];case 2:e.sent(),Ec(t),e.label=3;case 3:return[2]}}))}))}))),t.eu}function Fc(t){var e=this;return t.nu||(t.nu=function(t,e,n){var r=wr(t);return r.vc(),new cc(e,r.Ja,r.credentials,r.serializer,n)}(t.qc,t.cs,{wc:Oc.bind(null,t),hc:Dc.bind(null,t),yc:xc.bind(null,t),gc:Rc.bind(null,t)}),t.jc.push((function(n){return(0,i.mG)(e,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return n?(t.nu.ic(),[4,Nc(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.nu.stop()];case 3:e.sent(),t.Kc.length>0&&(dr("RemoteStore","Stopping write stream with "+t.Kc.length+" pending writes"),t.Kc=[]),e.label=4;case 4:return[2]}}))}))}))),t.nu}var jc=function(){function t(){this.su=new si(Uc.iu),this.ru=new si(Uc.ou)}return t.prototype.P=function(){return this.su.P()},t.prototype.qo=function(t,e){var n=new Uc(t,e);this.su=this.su.add(n),this.ru=this.ru.add(n)},t.prototype.au=function(t,e){var n=this;t.forEach((function(t){return n.qo(t,e)}))},t.prototype.Ko=function(t,e){this.cu(new Uc(t,e))},t.prototype.uu=function(t,e){var n=this;t.forEach((function(t){return n.Ko(t,e)}))},t.prototype.hu=function(t){var e=this,n=new zr(new Vr([])),r=new Uc(n,t),i=new Uc(n,t+1),o=[];return this.ru.xt([r,i],(function(t){e.cu(t),o.push(t.key)})),o},t.prototype.lu=function(){var t=this;this.su.forEach((function(e){return t.cu(e)}))},t.prototype.cu=function(t){this.su=this.su.delete(t),this.ru=this.ru.delete(t)},t.prototype._u=function(t){var e=new zr(new Vr([])),n=new Uc(e,t),r=new Uc(e,t+1),i=yi();return this.ru.xt([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.ro=function(t){var e=new Uc(t,0),n=this.su.Ot(e);return null!==n&&t.isEqual(n.key)},t}(),Uc=function(){function t(t,e){this.key=t,this.fu=e}return t.iu=function(t,e){return zr.D(t.key,e.key)||Ir(t.fu,e.fu)},t.ou=function(t,e){return Ir(t.fu,e.fu)||zr.D(t.key,e.key)},t}();function Vc(t,e){return"firestore_clients_"+t+"_"+e}function qc(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.Zs()&&(r+="_"+e.uid),r}function Bc(t,e){return"firestore_targets_"+t+"_"+e}var zc=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.du=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),a=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(a=new hr(i.error.code,i.error.message)),o?new t(e,n,i.state,a):(vr("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.wu=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Wc=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.du=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new hr(r.error.code,r.error.message)),i?new t(e,r.state,o):(vr("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.wu=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Gc=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.du=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=gi(),a=0;i&&a<r.activeTargetIds.length;++a)i=Hr(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(vr("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Hc=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.du=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(vr("SharedClientState","Failed to parse online state: "+e),null)},t}(),Kc=function(){function t(){this.activeTargetIds=gi()}return t.prototype.Eu=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Tu=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.wu=function(){var t={activeTargetIds:this.activeTargetIds.L(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Qc=function(){function t(t,e,n,r,i){this.window=t,this.fn=e,this.persistenceKey=n,this.Iu=r,this.mu=null,this.Cc=null,this.tr=null,this.Au=this.Ru.bind(this),this.Pu=new ii(Ir),this.br=!1,this.gu=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.yu=Vc(this.persistenceKey,this.Iu),this.Vu=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Pu=this.Pu.ot(this.Iu,new Kc),this.pu=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.bu=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.vu=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Su=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.Au)}return t.Ln=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return(0,i.mG)(this,void 0,void 0,(function(){var t,e,n,r,o,a,s,u,c,l,h,f=this;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return[4,this.mu.va()];case 1:for(t=i.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Iu&&(o=this.getItem(Vc(this.persistenceKey,r)))&&(a=Gc.du(r,o))&&(this.Pu=this.Pu.ot(a.clientId,a));for(this.Du(),(s=this.storage.getItem(this.Su))&&(u=this.Cu(s))&&this.Nu(u),c=0,l=this.gu;c<l.length;c++)h=l[c],this.Ru(h);return this.gu=[],this.window.addEventListener("unload",(function(){return f.ga()})),this.br=!0,[2]}}))}))},t.prototype.sr=function(t){this.setItem(this.Vu,JSON.stringify(t))},t.prototype.xu=function(){return this.Fu(this.Pu)},t.prototype.Ou=function(t){var e=!1;return this.Pu.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.ku=function(t){this.Mu(t,"pending")},t.prototype.$u=function(t,e,n){this.Mu(t,e,n),this.Lu(t)},t.prototype.Bu=function(t){var e="not-current";if(this.Ou(t)){var n=this.storage.getItem(Bc(this.persistenceKey,t));if(n){var r=Wc.du(t,n);r&&(e=r.state)}}return this.qu.Eu(t),this.Du(),e},t.prototype.Uu=function(t){this.qu.Tu(t),this.Du()},t.prototype.Ku=function(t){return this.qu.activeTargetIds.has(t)},t.prototype.Qu=function(t){this.removeItem(Bc(this.persistenceKey,t))},t.prototype.Wu=function(t,e,n){this.ju(t,e,n)},t.prototype.Gu=function(t,e,n){var r=this;e.forEach((function(t){r.Lu(t)})),this.currentUser=t,n.forEach((function(t){r.ku(t)}))},t.prototype.zu=function(t){this.Hu(t)},t.prototype.ga=function(){this.br&&(this.window.removeEventListener("storage",this.Au),this.removeItem(this.yu),this.br=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return dr("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){dr("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){dr("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Ru=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(dr("SharedClientState","EVENT",n.key,n.newValue),n.key===this.yu)return void vr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.fn.Cs((function(){return(0,i.mG)(e,void 0,void 0,(function(){var t,e,r,o,a,s;return(0,i.Jh)(this,(function(i){if(this.br){if(null!==n.key)if(this.pu.test(n.key)){if(null==n.newValue)return t=this.Yu(n.key),[2,this.Ju(t,null)];if(e=this.Xu(n.key,n.newValue))return[2,this.Ju(e.clientId,e)]}else if(this.bu.test(n.key)){if(null!==n.newValue&&(r=this.Zu(n.key,n.newValue)))return[2,this.th(r)]}else if(this.vu.test(n.key)){if(null!==n.newValue&&(o=this.eh(n.key,n.newValue)))return[2,this.nh(o)]}else if(n.key===this.Su){if(null!==n.newValue&&(a=this.Cu(n.newValue)))return[2,this.Nu(a)]}else n.key===this.Vu&&(s=function(t){var e=Ls.ir;if(null!=t)try{var n=JSON.parse(t);br("number"==typeof n),e=n}catch(t){vr("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Ls.ir&&this.tr(s)}else this.gu.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"qu",{get:function(){return this.Pu.get(this.Iu)},enumerable:!1,configurable:!0}),t.prototype.Du=function(){this.setItem(this.yu,this.qu.wu())},t.prototype.Mu=function(t,e,n){var r=new zc(this.currentUser,t,e,n),i=qc(this.persistenceKey,this.currentUser,t);this.setItem(i,r.wu())},t.prototype.Lu=function(t){var e=qc(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Hu=function(t){var e={clientId:this.Iu,onlineState:t};this.storage.setItem(this.Su,JSON.stringify(e))},t.prototype.ju=function(t,e,n){var r=Bc(this.persistenceKey,t),i=new Wc(t,e,n);this.setItem(r,i.wu())},t.prototype.Yu=function(t){var e=this.pu.exec(t);return e?e[1]:null},t.prototype.Xu=function(t,e){var n=this.Yu(t);return Gc.du(n,e)},t.prototype.Zu=function(t,e){var n=this.bu.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return zc.du(new Es(i),r,e)},t.prototype.eh=function(t,e){var n=this.vu.exec(t),r=Number(n[1]);return Wc.du(r,e)},t.prototype.Cu=function(t){return Hc.du(t)},t.prototype.th=function(t){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.mu.sh(t.batchId,t.state,t.error)]:(dr("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.nh=function(t){return this.mu.ih(t.targetId,t.state,t.error)},t.prototype.Ju=function(t,e){var n=this,r=e?this.Pu.ot(t,e):this.Pu.remove(t),i=this.Fu(this.Pu),o=this.Fu(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.mu.rh(a,s).then((function(){n.Pu=r}))},t.prototype.Nu=function(t){this.Pu.get(t.clientId)&&this.Cc(t.onlineState)},t.prototype.Fu=function(t){var e=gi();return t.forEach((function(t,n){e=e.kt(n.activeTargetIds)})),e},t}(),Jc=function(){function t(){this.oh=new Kc,this.ah={},this.Cc=null,this.tr=null}return t.prototype.ku=function(t){},t.prototype.$u=function(t,e,n){},t.prototype.Bu=function(t){return this.oh.Eu(t),this.ah[t]||"not-current"},t.prototype.Wu=function(t,e,n){this.ah[t]=e},t.prototype.Uu=function(t){this.oh.Tu(t)},t.prototype.Ku=function(t){return this.oh.activeTargetIds.has(t)},t.prototype.Qu=function(t){delete this.ah[t]},t.prototype.xu=function(){return this.oh.activeTargetIds},t.prototype.Ou=function(t){return this.oh.activeTargetIds.has(t)},t.prototype.start=function(){return this.oh=new Kc,Promise.resolve()},t.prototype.Gu=function(t,e,n){},t.prototype.zu=function(t){},t.prototype.ga=function(){},t.prototype.sr=function(t){},t}(),Yc=function(t){this.key=t},Xc=function(t){this.key=t},$c=function(){function t(t,e){this.query=t,this.uh=e,this.hh=null,this.te=!1,this.lh=yi(),this.Qt=yi(),this._h=Da(t),this.fh=new bi(this._h)}return Object.defineProperty(t.prototype,"dh",{get:function(){return this.uh},enumerable:!1,configurable:!0}),t.prototype.wh=function(t,e){var n=this,r=e?e.Eh:new wi,i=e?e.fh:this.fh,o=e?e.Qt:this.Qt,a=i,s=!1,u=wa(this.query)&&i.size===this.query.limit?i.last():null,c=_a(this.query)&&i.size===this.query.limit?i.first():null;if(t.ht((function(t,e){var l=i.get(t),h=e instanceof da?e:null;h&&(h=Ra(n.query,h)?h:null);var f=!!l&&n.Qt.has(l.key),p=!!h&&(h.Je||n.Qt.has(h.key)&&h.hasCommittedMutations),d=!1;l&&h?l.data().isEqual(h.data())?f!==p&&(r.track({type:3,doc:h}),d=!0):n.Th(l,h)||(r.track({type:2,doc:h}),d=!0,(u&&n._h(h,u)>0||c&&n._h(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),d=!0):l&&!h&&(r.track({type:1,doc:l}),d=!0,(u||c)&&(s=!0)),d&&(h?(a=a.add(h),o=p?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),wa(this.query)||_a(this.query))for(;a.size>this.query.limit;){var l=wa(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fh:a,Eh:r,Ih:s,Qt:o}},t.prototype.Th=function(t,e){return t.Je&&e.hasCommittedMutations&&!e.Je},t.prototype.Di=function(t,e,n){var r=this,i=this.fh;this.fh=t.fh,this.Qt=t.Qt;var o=t.Eh.Ut();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gr()}};return n(t)-n(e)}(t.type,e.type)||r._h(t.doc,e.doc)})),this.mh(n);var a=e?this.Ah():[],s=0===this.lh.size&&this.te?1:0,u=s!==this.hh;return this.hh=s,0!==o.length||u?{snapshot:new _i(this.query,t.fh,i,o,t.Qt,0===s,u,!1),Rh:a}:{Rh:a}},t.prototype.Ks=function(t){return this.te&&"Offline"===t?(this.te=!1,this.Di({fh:this.fh,Eh:new wi,Qt:this.Qt,Ih:!1},!1)):{Rh:[]}},t.prototype.Ph=function(t){return!this.uh.has(t)&&!!this.fh.has(t)&&!this.fh.get(t).Je},t.prototype.mh=function(t){var e=this;t&&(t.ee.forEach((function(t){return e.uh=e.uh.add(t)})),t.ne.forEach((function(t){})),t.se.forEach((function(t){return e.uh=e.uh.delete(t)})),this.te=t.te)},t.prototype.Ah=function(){var t=this;if(!this.te)return[];var e=this.lh;this.lh=yi(),this.fh.forEach((function(e){t.Ph(e.key)&&(t.lh=t.lh.add(e.key))}));var n=[];return e.forEach((function(e){t.lh.has(e)||n.push(new Xc(e))})),this.lh.forEach((function(t){e.has(t)||n.push(new Yc(t))})),n},t.prototype.gh=function(t){this.uh=t.za,this.lh=yi();var e=this.wh(t.documents);return this.Di(e,!0)},t.prototype.yh=function(){return _i.Gt(this.query,this.fh,this.Qt,0===this.hh)},t}(),Zc=function(t,e,n){this.query=t,this.targetId=e,this.view=n},tl=function(t){this.key=t,this.Vh=!1},el=function(){function t(t,e,n,r,i,o){this.Bc=t,this.ph=e,this.bh=n,this.Sh=r,this.currentUser=i,this.Dh=o,this.Ch={},this.Nh=new Mr((function(t){return Oa(t)}),Pa),this.xh=new Map,this.Fh=[],this.Oh=new ii(zr.D),this.kh=new Map,this.Mh=new jc,this.$h={},this.Lh=new Map,this.Bh=Lu.Vo(),this.onlineState="Unknown",this.qh=void 0}return Object.defineProperty(t.prototype,"Uh",{get:function(){return!0===this.qh},enumerable:!1,configurable:!0}),t}();function nl(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o,a,s,u;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return n=Pl(t),(a=n.Nh.get(e))?(r=a.targetId,n.Sh.Bu(r),o=a.view.yh(),[3,4]):[3,1];case 1:return[4,tc(n.Bc,Ca(e))];case 2:return s=i.sent(),u=n.Sh.Bu(s.targetId),r=s.targetId,[4,rl(n,e,r,"current"===u)];case 3:o=i.sent(),n.Uh&&vc(n.ph,s),i.label=4;case 4:return[2,o]}}))}))}function rl(t,e,n,r){return(0,i.mG)(this,void 0,void 0,(function(){var o,a,s,u,c,l;return(0,i.Jh)(this,(function(h){switch(h.label){case 0:return t.Kh=function(e,n,r){return function(t,e,n,r){return(0,i.mG)(this,void 0,void 0,(function(){var o,a,s;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return(o=e.view.wh(n)).Ih?[4,nc(t.Bc,e.query,!1).then((function(t){var n=t.documents;return e.view.wh(n,o)}))]:[3,2];case 1:o=i.sent(),i.label=2;case 2:return a=r&&r.zt.get(e.targetId),s=e.view.Di(o,t.Uh,a),[2,(yl(t,e.targetId,s.Rh),s.snapshot)]}}))}))}(t,e,n,r)},[4,nc(t.Bc,e,!0)];case 1:return o=h.sent(),a=new $c(e,o.za),s=a.wh(o.documents),u=Ii.Zt(n,r&&"Offline"!==t.onlineState),c=a.Di(s,t.Uh,u),yl(t,n,c.Rh),l=new Zc(e,n,a),[2,(t.Nh.set(e,l),t.xh.has(n)?t.xh.get(n).push(e):t.xh.set(n,[e]),c.snapshot)]}}))}))}function il(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return n=wr(t),r=n.Nh.get(e),(o=n.xh.get(r.targetId)).length>1?[2,(n.xh.set(r.targetId,o.filter((function(t){return!Pa(t,e)}))),void n.Nh.delete(e))]:n.Uh?(n.Sh.Uu(r.targetId),n.Sh.Ou(r.targetId)?[3,2]:[4,ec(n.Bc,r.targetId,!1).then((function(){n.Sh.Qu(r.targetId),yc(n.ph,r.targetId),dl(n,r.targetId)})).catch(ac)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return dl(n,r.targetId),[4,ec(n.Bc,r.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))}function ol(t,e,n){return(0,i.mG)(this,void 0,void 0,(function(){var r,o,a,s;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:r=Ol(t),i.label=1;case 1:return i.trys.push([1,5,,6]),[4,function(t,e){var n,r=wr(t),i=Fr.now(),o=e.reduce((function(t,e){return t.add(e.key)}),yi());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Ka.qi(t,o).next((function(o){n=o;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],l=Zo(c,n.get(c.key));null!=l&&a.push(new ra(c.key,l,fa(l.proto.mapValue),Qo.exists(!0)))}return r.Oi.Wr(t,i,a,e)}))})).then((function(t){var e=t.Ii(n);return{batchId:t.batchId,Ri:e}}))}(r.Bc,e)];case 2:return o=i.sent(),r.Sh.ku(o.batchId),function(t,e,n){var r=t.$h[t.currentUser.ti()];r||(r=new ii(Ir)),r=r.ot(e,n),t.$h[t.currentUser.ti()]=r}(r,o.batchId,n),[4,bl(r,o.Ri)];case 3:return i.sent(),[4,Nc(r.ph)];case 4:return i.sent(),[3,6];case 5:return a=i.sent(),s=ps(a,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function al(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:n=wr(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,$u(n.Bc,e)];case 2:return r=i.sent(),e.zt.forEach((function(t,e){var r=n.kh.get(e);r&&(br(t.ee.size+t.ne.size+t.se.size<=1),t.ee.size>0?r.Vh=!0:t.ne.size>0?br(r.Vh):t.se.size>0&&(br(r.Vh),r.Vh=!1))})),[4,bl(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,ac(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function sl(t,e,n){var r=wr(t);if(r.Uh&&0===n||!r.Uh&&1===n){var i=[];r.Nh.forEach((function(t,n){var r=n.view.Ks(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=wr(t);n.onlineState=e;var r=!1;n.Bs.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Ks(e)&&(r=!0)})),r&&ws(n)}(r.bh,e),i.length&&r.Ch.Tc(i),r.onlineState=e,r.Uh&&r.Sh.zu(e)}}function ul(t,e,n){return(0,i.mG)(this,void 0,void 0,(function(){var r,o,a,s,u,c;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return(r=wr(t)).Sh.Wu(e,"rejected",n),o=r.kh.get(e),(a=o&&o.key)?(s=(s=new ii(zr.D)).ot(a,new va(a,jr.min())),u=yi().add(a),c=new Ei(jr.min(),new Map,new si(Ir),s,u),[4,al(r,c)]):[3,2];case 1:return i.sent(),r.Oh=r.Oh.remove(a),r.kh.delete(e),gl(r),[3,4];case 2:return[4,ec(r.Bc,e,!1).then((function(){return dl(r,e,n)})).catch(ac)];case 3:i.sent(),i.label=4;case 4:return[2]}}))}))}function cl(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:n=wr(t),r=e.batch.batchId,i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Yu(n.Bc,e)];case 2:return o=i.sent(),pl(n,r,null),fl(n,r),n.Sh.$u(r,"acknowledged"),[4,bl(n,o)];case 3:return i.sent(),[3,6];case 4:return[4,ac(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function ll(t,e,n){return(0,i.mG)(this,void 0,void 0,(function(){var r,o;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:r=wr(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,function(t,e){var n=wr(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.Oi.Gr(t,e).next((function(e){return br(null!==e),r=e.keys(),n.Oi.Zr(t,e)})).next((function(){return n.Oi.io(t)})).next((function(){return n.Ka.qi(t,r)}))}))}(r.Bc,e)];case 2:return o=i.sent(),pl(r,e,n),fl(r,e),r.Sh.$u(e,"rejected",n),[4,bl(r,o)];case 3:return i.sent(),[3,6];case 4:return[4,ac(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function hl(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o,a,s;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:_c((n=wr(t)).ph)||dr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,function(t){var e=wr(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.Oi.Yr(t)}))}(n.Bc)];case 2:return-1===(r=i.sent())?[2,void e.resolve()]:((o=n.Lh.get(r)||[]).push(e),n.Lh.set(r,o),[3,4]);case 3:return a=i.sent(),s=ps(a,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function fl(t,e){(t.Lh.get(e)||[]).forEach((function(t){t.resolve()})),t.Lh.delete(e)}function pl(t,e,n){var r=wr(t),i=r.$h[r.currentUser.ti()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.$h[r.currentUser.ti()]=i}}function dl(t,e,n){void 0===n&&(n=null),t.Sh.Uu(e);for(var r=0,i=t.xh.get(e);r<i.length;r++){var o=i[r];t.Nh.delete(o),n&&t.Ch.Qh(o,n)}t.xh.delete(e),t.Uh&&t.Mh.hu(e).forEach((function(e){t.Mh.ro(e)||vl(t,e)}))}function vl(t,e){var n=t.Oh.get(e);null!==n&&(yc(t.ph,n),t.Oh=t.Oh.remove(e),t.kh.delete(n),gl(t))}function yl(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Yc?(t.Mh.qo(o.key,e),ml(t,o)):o instanceof Xc?(dr("SyncEngine","Document no longer in limbo: "+o.key),t.Mh.Ko(o.key,e),t.Mh.ro(o.key)||vl(t,o.key)):gr()}}function ml(t,e){var n=e.key;t.Oh.get(n)||(dr("SyncEngine","New document in limbo: "+n),t.Fh.push(n),gl(t))}function gl(t){for(;t.Fh.length>0&&t.Oh.size<t.Dh;){var e=t.Fh.shift(),n=t.Bh.next();t.kh.set(n,new tl(e)),t.Oh=t.Oh.ot(e,n),vc(t.ph,new ti(Ca(ba(e.path)),n,2,Ls.ir))}}function bl(t,e,n){return(0,i.mG)(this,void 0,void 0,(function(){var r,o,a,s;return(0,i.Jh)(this,(function(u){switch(u.label){case 0:return r=wr(t),o=[],a=[],s=[],r.Nh.P()?[3,3]:(r.Nh.forEach((function(t,i){s.push(r.Kh(i,e,n).then((function(t){if(t){r.Uh&&r.Sh.Wu(i.targetId,t.fromCache?"not-current":"current"),o.push(t);var e=Ds.Zi(i.targetId,t);a.push(e)}})))})),[4,Promise.all(s)]);case 1:return u.sent(),r.Ch.Tc(o),[4,function(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o,a,s,u,c,l,h;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:n=wr(t),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Za.forEach(e,(function(e){return Za.forEach(e.Ji,(function(r){return n.persistence.qr.qo(t,e.targetId,r)})).next((function(){return Za.forEach(e.Xi,(function(r){return n.persistence.qr.Ko(t,e.targetId,r)}))}))}))}))];case 2:return i.sent(),[3,4];case 3:if(!rs(r=i.sent()))throw r;return dr("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(o=0,a=e;o<a.length;o++)s=a[o],u=s.targetId,s.fromCache||(c=n.La.get(u),l=c.nt,h=c.rt(l),n.La=n.La.ot(u,h));return[2]}}))}))}(r.Bc,a)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function wl(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return(n=wr(t)).currentUser.isEqual(e)?[3,3]:(dr("SyncEngine","User change. New user:",e.ti()),[4,Ju(n.Bc,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Lh.forEach((function(t){t.forEach((function(t){t.reject(new hr(lr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Lh.clear()}(n),n.Sh.Gu(e,r.ja,r.Ga),[4,bl(n,r.Wa)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function _l(t,e){var n=wr(t),r=n.kh.get(e);if(r&&r.Vh)return yi().add(r.key);var i=yi(),o=n.xh.get(e);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.Nh.get(u);i=i.kt(c.view.dh)}return i}function El(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return[4,nc((n=wr(t)).Bc,e.query,!0)];case 1:return r=i.sent(),o=e.view.gh(r),[2,(n.Uh&&yl(n,e.targetId,o.Rh),o)]}}))}))}function Il(t,e,n,r){return(0,i.mG)(this,void 0,void 0,(function(){var o,a;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return[4,function(t,e){var n=wr(t),r=wr(n.Oi);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.zr(t,e).next((function(e){return e?n.Ka.qi(t,e):Za.resolve(null)}))}))}((o=wr(t)).Bc,e)];case 1:return null===(a=i.sent())?[3,6]:"pending"!==n?[3,3]:[4,Nc(o.ph)];case 2:return i.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(pl(o,e,r||null),fl(o,e),function(t,e){wr(wr(t).Oi).no(e)}(o.Bc,e)):gr(),i.label=4;case 4:return[4,bl(o,a)];case 5:return i.sent(),[3,7];case 6:dr("SyncEngine","Cannot apply mutation batch with id: "+e),i.label=7;case 7:return[2]}}))}))}function Tl(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o,a,s,u,c,l;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return Pl(n=wr(t)),Ol(n),!0!==e||!0===n.qh?[3,3]:(r=n.Sh.xu(),[4,Sl(n,r.L())]);case 1:return o=i.sent(),n.qh=!0,[4,Lc(n.ph,!0)];case 2:for(i.sent(),a=0,s=o;a<s.length;a++)u=s[a],vc(n.ph,u);return[3,7];case 3:return!1!==e||!1===n.qh?[3,7]:(c=[],l=Promise.resolve(),n.xh.forEach((function(t,e){n.Sh.Ku(e)?c.push(e):l=l.then((function(){return dl(n,e),ec(n.Bc,e,!0)})),yc(n.ph,e)})),[4,l]);case 4:return i.sent(),[4,Sl(n,c)];case 5:return i.sent(),function(t){var e=wr(t);e.kh.forEach((function(t,n){yc(e.ph,n)})),e.Mh.lu(),e.kh=new Map,e.Oh=new ii(zr.D)}(n),n.qh=!1,[4,Lc(n.ph,!1)];case 6:i.sent(),i.label=7;case 7:return[2]}}))}))}function Sl(t,e,n){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o,a,s,u,c,l,h,f,p,d,v,y;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:n=wr(t),r=[],o=[],a=0,s=e,i.label=1;case 1:return a<s.length?(u=s[a],c=void 0,(l=n.xh.get(u))&&0!==l.length?[4,tc(n.Bc,Ca(l[0]))]:[3,7]):[3,13];case 2:c=i.sent(),h=0,f=l,i.label=3;case 3:return h<f.length?(p=f[h],d=n.Nh.get(p),[4,El(n,d)]):[3,6];case 4:(v=i.sent()).snapshot&&o.push(v.snapshot),i.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,rc(n.Bc,u)];case 8:return y=i.sent(),[4,tc(n.Bc,y)];case 9:return c=i.sent(),[4,rl(n,Cl(y),u,!1)];case 10:i.sent(),i.label=11;case 11:r.push(c),i.label=12;case 12:return a++,[3,1];case 13:return[2,(n.Ch.Tc(o),r)]}}))}))}function Cl(t){return ga(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function kl(t){var e=wr(t);return wr(wr(e.Bc).persistence).va()}function Nl(t,e,n,r){return(0,i.mG)(this,void 0,void 0,(function(){var o,a,s;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return(o=wr(t)).qh?(dr("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!o.xh.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,ic(o.Bc)];case 3:return a=i.sent(),s=Ei.Xt(e,"current"===n),[4,bl(o,a,s)];case 4:return i.sent(),[3,8];case 5:return[4,ec(o.Bc,e,!0)];case 6:return i.sent(),dl(o,e,r),[3,8];case 7:gr(),i.label=8;case 8:return[2]}}))}))}function Al(t,e,n){return(0,i.mG)(this,void 0,void 0,(function(){var r,o,a,s,u,c,l,h,f,p;return(0,i.Jh)(this,(function(d){switch(d.label){case 0:if(!(r=Pl(t)).qh)return[3,10];o=0,a=e,d.label=1;case 1:return o<a.length?(s=a[o],r.xh.has(s)?(dr("SyncEngine","Adding an already active target "+s),[3,5]):[4,rc(r.Bc,s)]):[3,6];case 2:return u=d.sent(),[4,tc(r.Bc,u)];case 3:return c=d.sent(),[4,rl(r,Cl(u),c.targetId,!1)];case 4:d.sent(),vc(r.ph,c),d.label=5;case 5:return o++,[3,1];case 6:l=function(t){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return r.xh.has(t)?[4,ec(r.Bc,t,!1).then((function(){yc(r.ph,t),dl(r,t)})).catch(ac)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,f=n,d.label=7;case 7:return h<f.length?(p=f[h],[5,l(p)]):[3,10];case 8:d.sent(),d.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function Pl(t){var e=wr(t);return e.ph.Uc.Xc=al.bind(null,e),e.ph.Uc.qe=_l.bind(null,e),e.ph.Uc.Jc=ul.bind(null,e),e.Ch.Tc=gs.bind(null,e.bh),e.Ch.Qh=bs.bind(null,e.bh),e}function Ol(t){var e=wr(t);return e.ph.Uc.Zc=cl.bind(null,e),e.ph.Uc.tu=ll.bind(null,e),e}var xl=function(){function t(){}return t.prototype.Qa=function(t){this.Wh=t},t.prototype.Qi=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.on.length||1===t.on.length&&t.on[0].field.W())}(e)||n.isEqual(jr.min())?this.jh(t,e):this.Wh.qi(t,r).next((function(a){var s=i.Gh(e,a);return(wa(e)||_a(e))&&i.Ih(e.an,s,r,n)?i.jh(t,e):(pr()<=o.in.DEBUG&&dr("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),xa(e)),i.Wh.Qi(t,e,n).next((function(t){return s.forEach((function(e){t=t.ot(e.key,e)})),t})))}))},t.prototype.Gh=function(t,e){var n=new si(Da(t));return e.forEach((function(e,r){r instanceof da&&Ra(t,r)&&(n=n.add(r))})),n},t.prototype.Ih=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.u(r)>0)},t.prototype.jh=function(t,e){return pr()<=o.in.DEBUG&&dr("IndexFreeQueryEngine","Using full collection scan to execute query:",xa(e)),this.Wh.Qi(t,e,jr.min())},t}(),Rl=function(){function t(t,e){this.ki=t,this.qr=e,this.Oi=[],this.zh=1,this.Hh=new si(Uc.iu)}return t.prototype.Qr=function(t){return Za.resolve(0===this.Oi.length)},t.prototype.Wr=function(t,e,n,r){var i=this.zh;this.zh++,this.Oi.length>0&&this.Oi[this.Oi.length-1];var o=new Ns(i,e,n,r);this.Oi.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.Hh=this.Hh.add(new Uc(u.key,i)),this.ki.jr(t,u.key.path.F())}return Za.resolve(o)},t.prototype.Gr=function(t,e){return Za.resolve(this.Yh(e))},t.prototype.Hr=function(t,e){var n=e+1,r=this.Jh(n),i=r<0?0:r;return Za.resolve(this.Oi.length>i?this.Oi[i]:null)},t.prototype.Yr=function(){return Za.resolve(0===this.Oi.length?-1:this.zh-1)},t.prototype.Jr=function(t){return Za.resolve(this.Oi.slice())},t.prototype.$i=function(t,e){var n=this,r=new Uc(e,0),i=new Uc(e,Number.POSITIVE_INFINITY),o=[];return this.Hh.xt([r,i],(function(t){var e=n.Yh(t.fu);o.push(e)})),Za.resolve(o)},t.prototype.Ki=function(t,e){var n=this,r=new si(Ir);return e.forEach((function(t){var e=new Uc(t,0),i=new Uc(t,Number.POSITIVE_INFINITY);n.Hh.xt([e,i],(function(t){r=r.add(t.fu)}))})),Za.resolve(this.Xh(r))},t.prototype.Hi=function(t,e){var n=e.path,r=n.length+1,i=n;zr.X(i)||(i=i.child(""));var o=new Uc(new zr(i),0),a=new si(Ir);return this.Hh.Ft((function(t){var e=t.key.path;return!!n.M(e)&&(e.length===r&&(a=a.add(t.fu)),!0)}),o),Za.resolve(this.Xh(a))},t.prototype.Xh=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.Yh(t);null!==r&&n.push(r)})),n},t.prototype.Zr=function(t,e){var n=this;br(0===this.Zh(e.batchId,"removed")),this.Oi.shift();var r=this.Hh;return Za.forEach(e.mutations,(function(i){var o=new Uc(i.key,e.batchId);return r=r.delete(o),n.qr.so(t,i.key)})).next((function(){n.Hh=r}))},t.prototype.no=function(t){},t.prototype.ro=function(t,e){var n=new Uc(e,0),r=this.Hh.Ot(n);return Za.resolve(e.isEqual(r&&r.key))},t.prototype.io=function(t){return this.Oi.length,Za.resolve()},t.prototype.Zh=function(t,e){return this.Jh(t)},t.prototype.Jh=function(t){return 0===this.Oi.length?0:t-this.Oi[0].batchId},t.prototype.Yh=function(t){var e=this.Jh(t);return e<0||e>=this.Oi.length?null:this.Oi[e]},t}(),Dl=function(){function t(t,e){this.ki=t,this.tl=e,this.docs=new ii(zr.D),this.size=0}return t.prototype.yi=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.tl(e);return this.docs=this.docs.ot(r,{ho:e,size:a,readTime:n}),this.size+=a-o,this.ki.jr(t,r.path.F())},t.prototype.pi=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.bi=function(t,e){var n=this.docs.get(e);return Za.resolve(n?n.ho:null)},t.prototype.getEntries=function(t,e){var n=this,r=hi();return e.forEach((function(t){var e=n.docs.get(t);r=r.ot(t,e?e.ho:null)})),Za.resolve(r)},t.prototype.Qi=function(t,e,n){for(var r=pi(),i=new zr(e.path.child("")),o=this.docs.ft(i);o.At();){var a=o.It(),s=a.key,u=a.value,c=u.ho,l=u.readTime;if(!e.path.M(s.path))break;l.u(n)<=0||c instanceof da&&Ra(e,c)&&(r=r.ot(c.key,c))}return Za.resolve(r)},t.prototype.el=function(t,e){return Za.forEach(this.docs,(function(t){return e(t)}))},t.prototype.wo=function(t){return new Ll(this)},t.prototype.To=function(t){return Za.resolve(this.size)},t}(),Ll=function(t){function e(e){var n=this;return(n=t.call(this)||this).Io=e,n}return(0,i.ZT)(e,t),e.prototype.Di=function(t){var e=this,n=[];return this.Ri.forEach((function(r,i){i?n.push(e.Io.yi(t,i,e.readTime)):e.Io.pi(r)})),Za.On(n)},e.prototype.vi=function(t,e){return this.Io.bi(t,e)},e.prototype.Si=function(t,e){return this.Io.getEntries(t,e)},e}(Ps),Ml=function(){function t(t){this.persistence=t,this.nl=new Mr((function(t){return Jr(t)}),Yr),this.lastRemoteSnapshotVersion=jr.min(),this.highestTargetId=0,this.sl=0,this.il=new jc,this.targetCount=0,this.rl=Lu.yo()}return t.prototype.Ce=function(t,e){return this.nl.forEach((function(t,n){return e(n)})),Za.resolve()},t.prototype.So=function(t){return Za.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Do=function(t){return Za.resolve(this.sl)},t.prototype.po=function(t){return this.highestTargetId=this.rl.next(),Za.resolve(this.highestTargetId)},t.prototype.Co=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.sl&&(this.sl=e),Za.resolve()},t.prototype.xo=function(t){this.nl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.rl=new Lu(e),this.highestTargetId=e),t.sequenceNumber>this.sl&&(this.sl=t.sequenceNumber)},t.prototype.No=function(t,e){return this.xo(e),this.targetCount+=1,Za.resolve()},t.prototype.Oo=function(t,e){return this.xo(e),Za.resolve()},t.prototype.ko=function(t,e){return this.nl.delete(e.target),this.il.hu(e.targetId),this.targetCount-=1,Za.resolve()},t.prototype.Or=function(t,e,n){var r=this,i=0,o=[];return this.nl.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.nl.delete(a),o.push(r.Mo(t,s.targetId)),i++)})),Za.On(o).next((function(){return i}))},t.prototype.$o=function(t){return Za.resolve(this.targetCount)},t.prototype.Lo=function(t,e){var n=this.nl.get(e)||null;return Za.resolve(n)},t.prototype.Bo=function(t,e,n){return this.il.au(e,n),Za.resolve()},t.prototype.Uo=function(t,e,n){this.il.uu(e,n);var r=this.persistence.qr,i=[];return r&&e.forEach((function(e){i.push(r.so(t,e))})),Za.On(i)},t.prototype.Mo=function(t,e){return this.il.hu(e),Za.resolve()},t.prototype.Qo=function(t,e){var n=this.il._u(e);return Za.resolve(n)},t.prototype.ro=function(t,e){return Za.resolve(this.il.ro(e))},t}(),Fl=function(){function t(t){var e=this;this.ol={},this.zo=new Ls(0),this.Ho=!1,this.Ho=!0,this.qr=t(this),this.sa=new Ml(this),this.ki=new du,this.Fi=function(t,n){return new Dl(t,(function(t){return e.qr.al(t)}))}(this.ki)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.ga=function(){return this.Ho=!1,Promise.resolve()},Object.defineProperty(t.prototype,"br",{get:function(){return this.Ho},enumerable:!1,configurable:!0}),t.prototype.ha=function(){},t.prototype.la=function(){},t.prototype.Na=function(){return this.ki},t.prototype.Sa=function(t){var e=this.ol[t.ti()];return e||(e=new Rl(this.ki,this.qr),this.ol[t.ti()]=e),e},t.prototype.Da=function(){return this.sa},t.prototype.Ca=function(){return this.Fi},t.prototype.runTransaction=function(t,e,n){var r=this;dr("MemoryPersistence","Starting transaction:",t);var i=new jl(this.zo.next());return this.qr.cl(),n(i).next((function(t){return r.qr.ul(i).next((function(){return t}))})).xn().then((function(t){return i.xi(),t}))},t.prototype.hl=function(t,e){return Za.kn(Object.values(this.ol).map((function(n){return function(){return n.ro(t,e)}})))},t}(),jl=function(t){function e(e){var n=this;return(n=t.call(this)||this).Wo=e,n}return(0,i.ZT)(e,t),e}(xs),Ul=function(){function t(t){this.persistence=t,this.ll=new jc,this._l=null}return t.fl=function(e){return new t(e)},Object.defineProperty(t.prototype,"dl",{get:function(){if(this._l)return this._l;throw gr()},enumerable:!1,configurable:!0}),t.prototype.qo=function(t,e,n){return this.ll.qo(n,e),this.dl.delete(n.toString()),Za.resolve()},t.prototype.Ko=function(t,e,n){return this.ll.Ko(n,e),this.dl.add(n.toString()),Za.resolve()},t.prototype.so=function(t,e){return this.dl.add(e.toString()),Za.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.ll.hu(e.targetId).forEach((function(t){return n.dl.add(t.toString())}));var r=this.persistence.Da();return r.Qo(t,e.targetId).next((function(t){t.forEach((function(t){return n.dl.add(t.toString())}))})).next((function(){return r.ko(t,e)}))},t.prototype.cl=function(){this._l=new Set},t.prototype.ul=function(t){var e=this,n=this.persistence.Ca().wo();return Za.forEach(this.dl,(function(r){var i=zr.H(r);return e.wl(t,i).next((function(t){t||n.pi(i)}))})).next((function(){return e._l=null,n.apply(t)}))},t.prototype.Ma=function(t,e){var n=this;return this.wl(t,e).next((function(t){t?n.dl.delete(e.toString()):n.dl.add(e.toString())}))},t.prototype.al=function(t){return 0},t.prototype.wl=function(t,e){var n=this;return Za.kn([function(){return Za.resolve(n.ll.ro(e))},function(){return n.persistence.Da().ro(t,e)},function(){return n.persistence.hl(t,e)}])},t}(),Vl=function(){function t(t){this.El=t.El,this.Tl=t.Tl}return t.prototype.wc=function(t){this.Il=t},t.prototype.hc=function(t){this.ml=t},t.prototype.onMessage=function(t){this.Al=t},t.prototype.close=function(){this.Tl()},t.prototype.send=function(t){this.El(t)},t.prototype.Rl=function(){this.Il()},t.prototype.Pl=function(t){this.ml(t)},t.prototype.gl=function(t){this.Al(t)},t}(),ql={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Bl=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.T=e.T,n}return(0,i.ZT)(e,t),e.prototype.Sl=function(t,e,n,r){return new Promise((function(i,o){var a=new ur;a.listenOnce(ar.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case or.NO_ERROR:var e=a.getResponseJson();dr("Connection","XHR received:",JSON.stringify(e)),i(e);break;case or.TIMEOUT:dr("Connection",'RPC "'+t+'" timed out'),o(new hr(lr.DEADLINE_EXCEEDED,"Request time out"));break;case or.HTTP_ERROR:var n=a.getStatus();if(dr("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(lr).indexOf(e)>=0?e:lr.UNKNOWN}(r.status);o(new hr(s,r.message))}else o(new hr(lr.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new hr(lr.UNAVAILABLE,"Connection failed."));break;default:gr()}}finally{dr("Connection",'RPC "'+t+'" completed.')}}));var s=JSON.stringify(r);a.send(e,"POST",s,n,15)}))},e.prototype.Ec=function(t,e){var n=[this.Vl,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new tr,i={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this._.projectId+"/databases/"+this._.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.T};this.vl(i.initMessageHeaders,e),(0,a.uI)()||(0,a.b$)()||(0,a.d)()||(0,a.w1)()||(0,a.Mn)()||(0,a.ru)()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");dr("Connection","Creating WebChannel: "+o,i);var s=r.createWebChannel(o,i),u=!1,c=!1,l=new Vl({El:function(t){c?dr("Connection","Not sending because WebChannel is closed:",t):(u||(dr("Connection","Opening WebChannel transport."),s.open(),u=!0),dr("Connection","WebChannel sending:",t),s.send(t))},Tl:function(){return s.close()}}),h=function(t,e){s.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return h(sr.EventType.OPEN,(function(){c||dr("Connection","WebChannel transport opened.")})),h(sr.EventType.CLOSE,(function(){c||(c=!0,dr("Connection","WebChannel transport closed"),l.Pl())})),h(sr.EventType.ERROR,(function(t){c||(c=!0,yr("Connection","WebChannel transport errored:",t),l.Pl(new hr(lr.UNAVAILABLE,"The operation could not be completed")))})),h(sr.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];br(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){dr("Connection","WebChannel received error:",i);var o=i.status,a=function(t){var e=$r[t];if(void 0!==e)return ri(e)}(o),u=i.message;void 0===a&&(a=lr.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),c=!0,l.Pl(new hr(a,u)),s.close()}else dr("Connection","WebChannel received:",n),l.gl(n)}})),setTimeout((function(){l.Rl()}),0),l},e}(function(){function t(t){this.yl=t,this._=t._;var e=t.ssl?"https":"http";this.Vl=e+"://"+t.host,this.pl="projects/"+this._.projectId+"/databases/"+this._.database+"/documents"}return t.prototype.Sc=function(t,e,n,r){var i=this.bl(t,e);dr("RestConnection","Sending: ",i,n);var o={};return this.vl(o,r),this.Sl(t,i,o,n).then((function(t){return dr("RestConnection","Received: ",t),t}),(function(e){throw yr("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Dc=function(t,e,n,r){return this.Sc(t,e,n,r)},t.prototype.vl=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.0.1",t["Content-Type"]="text/plain",e)for(var n in e.si)e.si.hasOwnProperty(n)&&(t[n]=e.si[n])},t.prototype.bl=function(t,e){var n=ql[t];return this.Vl+"/v1/"+e+":"+n},t}()),zl=function(){function t(){var t=this;this.Dl=function(){return t.Cl()},this.Nl=function(){return t.xl()},this.Fl=[],this.Ol()}return t.prototype.zc=function(t){this.Fl.push(t)},t.prototype.ga=function(){window.removeEventListener("online",this.Dl),window.removeEventListener("offline",this.Nl)},t.prototype.Ol=function(){window.addEventListener("online",this.Dl),window.addEventListener("offline",this.Nl)},t.prototype.Cl=function(){dr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Fl;t<e.length;t++)(0,e[t])(0)},t.prototype.xl=function(){dr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Fl;t<e.length;t++)(0,e[t])(1)},t.Ln=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Wl=function(){function t(){}return t.prototype.zc=function(t){},t.prototype.ga=function(){},t}();function Gl(t){return new Zi(t,!0)}var Hl=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return this.Sh=this.kl(t),this.persistence=this.Ml(t),[4,this.persistence.start()];case 1:return e.sent(),this.$l=this.Ll(t),this.Bc=this.Bl(t),[2]}}))}))},t.prototype.Ll=function(t){return null},t.prototype.Bl=function(t){return e=this.persistence,n=new xl,r=t.ql,new Qu(e,n,r);var e,n,r},t.prototype.Ml=function(t){return new Fl(Ul.fl)},t.prototype.kl=function(t){return new Jc},t.prototype.terminate=function(){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return this.$l&&this.$l.stop(),[4,this.Sh.ga()];case 1:return t.sent(),[4,this.persistence.ga()];case 2:return t.sent(),[2]}}))}))},t}(),Kl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ul=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,i.ZT)(e,t),e.prototype.initialize=function(e){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,oc(this.Bc)];case 2:return n.sent(),[4,this.Ul.initialize(this,e)];case 3:return n.sent(),[4,Ol(this.Ul.mu)];case 4:return n.sent(),[4,Nc(this.Ul.ph)];case 5:return n.sent(),[2]}}))}))},e.prototype.Ll=function(t){var e=this.persistence.qr.gr;return new Vs(e,t.cs)},e.prototype.Ml=function(t){var e=Ku(t.yl._,t.yl.persistenceKey),n=void 0!==this.cacheSizeBytes?Us.Ir(this.cacheSizeBytes):Us.Rr,r=Gl(t.yl._);return new Bu(this.synchronizeTabs,e,t.clientId,n,t.cs,cs(),ls(),r,this.Sh,!!this.forceOwnership)},e.prototype.kl=function(t){return new Jc},e}(Hl),Ql=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ul=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,i.ZT)(e,t),e.prototype.initialize=function(e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r=this;return(0,i.Jh)(this,(function(o){switch(o.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return o.sent(),n=this.Ul.mu,this.Sh instanceof Qc?(this.Sh.mu={sh:Il.bind(null,n),ih:Nl.bind(null,n),rh:Al.bind(null,n),va:kl.bind(null,n)},[4,this.Sh.start()]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.persistence.ua((function(t){return(0,i.mG)(r,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return[4,Tl(this.Ul.mu,t)];case 1:return e.sent(),this.$l&&(t&&!this.$l.br?this.$l.start(this.Bc):t||this.$l.stop()),[2]}}))}))}))];case 4:return o.sent(),[2]}}))}))},e.prototype.kl=function(t){var e=cs();if(!Qc.Ln(e))throw new hr(lr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Ku(t.yl._,t.yl.persistenceKey);return new Qc(e,t.cs,n,t.clientId,t.ql)},e}(Kl),Jl=function(){function t(){}return t.prototype.initialize=function(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n=this;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return this.Bc?[3,2]:(this.Bc=t.Bc,this.Sh=t.Sh,this.qc=this.Kl(e),this.ph=this.Ql(e),this.bh=this.Wl(e),this.mu=this.jl(e,!t.synchronizeTabs),this.Sh.Cc=function(t){return sl(n.mu,t,1)},this.ph.Uc.Gl=wl.bind(null,this.mu),[4,Lc(this.ph,this.mu.Uh)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.Wl=function(t){return new vs},t.prototype.Kl=function(t){var e,n=Gl(t.yl._),r=(e=t.yl,new Bl(e));return function(t,e,n){return new lc(t,e,n)}(t.credentials,r,n)},t.prototype.Ql=function(t){var e,n,r,i,o,a=this;return e=this.Bc,n=this.qc,r=t.cs,i=function(t){return sl(a.mu,t,0)},o=zl.Ln()?new zl:new Wl,new fc(e,n,r,i,o)},t.prototype.jl=function(t,e){return function(t,e,n,r,i,o,a){var s=new el(t,e,n,r,i,o);return a&&(s.qh=!0),s}(this.Bc,this.ph,this.bh,this.Sh,t.ql,t.Dh,e)},t.prototype.terminate=function(){return function(t){return(0,i.mG)(this,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return e=wr(t),dr("RemoteStore","RemoteStore shutting down."),e.Wc.add(5),[4,dc(e)];case 1:return n.sent(),e.Gc.ga(),e.Hc.set("Unknown"),[2]}}))}))}(this.ph)},t}(),Yl=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.zl(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.zl(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Hl=function(){this.muted=!0},t.prototype.zl=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}();function Xl(t,e,n){if(!n)throw new hr(lr.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function $l(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new hr(lr.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Zl(t,e,n,r){if(!0===e&&!0===r)throw new hr(lr.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function th(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":gr()}function eh(t,e){if(e<=0)throw new hr(lr.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var nh=function(t){for(var e=0;e<t.length;++e)if(0===t[e].length)throw new hr(lr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.Yl=new Br(t)},rh=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,e)||this}return(0,i.ZT)(e,t),e.documentId=function(){return new e(Br.j().B())},e.prototype.isEqual=function(t){return t instanceof e&&this.Yl.isEqual(t.Yl)},e}(nh),ih=new RegExp("[~\\*/\\[\\]]"),oh=function(t){this.Jl=t},ah=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.Xl=function(t){if(2!==t.Zl)throw 1===t.Zl?t.t_(this.Jl+"() can only appear at the top level of your update data"):t.t_(this.Jl+"() cannot be used with set() unless you pass {merge:true}");return t.Qe.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(oh);function sh(t,e,n){return new bh({Zl:3,e_:e.settings.e_,methodName:t.Jl,n_:n},e._,e.serializer,e.ignoreUndefinedProperties)}var uh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.Xl=function(t){return new Ho(t.path,new Fo)},e.prototype.isEqual=function(t){return t instanceof e},e}(oh),ch=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).s_=n,r}return(0,i.ZT)(e,t),e.prototype.Xl=function(t){var e=sh(this,t,!0),n=this.s_.map((function(t){return Sh(t,e)})),r=new jo(n);return new Ho(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(oh),lh=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).s_=n,r}return(0,i.ZT)(e,t),e.prototype.Xl=function(t){var e=sh(this,t,!0),n=this.s_.map((function(t){return Sh(t,e)})),r=new Vo(n);return new Ho(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(oh),hh=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).i_=n,r}return(0,i.ZT)(e,t),e.prototype.Xl=function(t){var e=new Bo(t.serializer,no(t.serializer,this.i_));return new Ho(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(oh),fh=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new hr(lr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new hr(lr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.r_=t,this.o_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.r_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.o_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.r_===t.r_&&this.o_===t.o_},t.prototype.toJSON=function(){return{latitude:this.r_,longitude:this.o_}},t.prototype.g=function(t){return Ir(this.r_,t.r_)||Ir(this.o_,t.o_)},t}(),ph=function(t){this.a_=t},dh=/^__.*__$/,vh=function(t,e,n){this.c_=t,this.u_=e,this.h_=n},yh=function(){function t(t,e,n){this.data=t,this.Qe=e,this.fieldTransforms=n}return t.prototype.l_=function(t,e){var n=[];return null!==this.Qe?n.push(new ra(t,this.data,this.Qe,e)):n.push(new na(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new oa(t,this.fieldTransforms)),n},t}(),mh=function(){function t(t,e,n){this.data=t,this.Qe=e,this.fieldTransforms=n}return t.prototype.l_=function(t,e){var n=[new ra(t,this.data,this.Qe,e)];return this.fieldTransforms.length>0&&n.push(new oa(t,this.fieldTransforms)),n},t}();function gh(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gr()}}var bh=function(){function t(t,e,n,r,i,o){this.settings=t,this._=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.__(),this.fieldTransforms=i||[],this.Qe=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Zl",{get:function(){return this.settings.Zl},enumerable:!1,configurable:!0}),t.prototype.f_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this._,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.Qe)},t.prototype.d_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.f_({path:n,n_:!1});return r.w_(t),r},t.prototype.E_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.f_({path:n,n_:!1});return r.__(),r},t.prototype.T_=function(t){return this.f_({path:void 0,n_:!0})},t.prototype.t_=function(t){return Oh(t,this.settings.methodName,this.settings.I_||!1,this.path,this.settings.e_)},t.prototype.contains=function(t){return void 0!==this.Qe.find((function(e){return t.M(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.M(e.field)}))},t.prototype.__=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.w_(this.path.get(t))},t.prototype.w_=function(t){if(0===t.length)throw this.t_("Document fields must not be empty");if(gh(this.Zl)&&dh.test(t))throw this.t_('Document fields cannot begin and end with "__"')},t}(),wh=function(){function t(t,e,n){this._=t,this.ignoreUndefinedProperties=e,this.serializer=n||Gl(t)}return t.prototype.m_=function(t,e,n,r){return void 0===r&&(r=!1),new bh({Zl:t,methodName:e,e_:n,path:Br.U(),n_:!1,I_:r},this._,this.serializer,this.ignoreUndefinedProperties)},t}();function _h(t,e,n,r,i,o){void 0===o&&(o={});var a=t.m_(o.merge||o.mergeFields?2:0,e,n,i);Nh("Data must be an object, but it was:",a,r);var s,u,c=Ch(r,a);if(o.merge)s=new Go(a.Qe),u=a.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var p=f[h],d=void 0;if(p instanceof nh)d=p.Yl;else{if("string"!=typeof p)throw gr();d=Ph(e,p,n)}if(!a.contains(d))throw new hr(lr.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");xh(l,d)||l.push(d)}s=new Go(l),u=a.fieldTransforms.filter((function(t){return s.Ye(t.field)}))}else s=null,u=a.fieldTransforms;return new yh(new la(c),s,u)}function Eh(t,e,n,r){var i=t.m_(1,e,n);Nh("Data must be an object, but it was:",i,r);var o=[],a=new ha;Dr(r,(function(t,r){var s=Ph(e,t,n),u=i.E_(s);if(r instanceof ah||r instanceof ph&&r.a_ instanceof ah)o.push(s);else{var c=Sh(r,u);null!=c&&(o.push(s),a.set(s,c))}}));var s=new Go(o);return new mh(a.Xe(),s,i.fieldTransforms)}function Ih(t,e,n,r,i,o){var a=t.m_(1,e,n),s=[Ah(e,r,n)],u=[i];if(o.length%2!=0)throw new hr(lr.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(Ah(e,o[c])),u.push(o[c+1]);for(var l=[],h=new ha,f=s.length-1;f>=0;--f)if(!xh(l,s[f])){var p=s[f],d=u[f],v=a.E_(p);if(d instanceof ah||d instanceof ph&&d.a_ instanceof ah)l.push(p);else{var y=Sh(d,v);null!=y&&(l.push(p),h.set(p,y))}}var m=new Go(l);return new mh(h.Xe(),m,a.fieldTransforms)}function Th(t,e,n,r){return void 0===r&&(r=!1),Sh(n,t.m_(r?4:3,e))}function Sh(t,e){if(t instanceof ph&&(t=t.a_),kh(t))return Nh("Unsupported field value:",e,t),Ch(t,e);if(t instanceof oh)return function(t,e){if(!gh(e.Zl))throw e.t_(t.Jl+"() can only be used with update() and set()");if(!e.path)throw e.t_(t.Jl+"() is not currently supported inside arrays");var n=t.Xl(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.Qe.push(e.path),t instanceof Array){if(e.settings.n_&&4!==e.Zl)throw e.t_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=Sh(o[i],e.T_(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return no(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Fr.fromDate(t);return{timestampValue:ro(e.serializer,n)}}if(t instanceof Fr){var r=new Fr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ro(e.serializer,r)}}if(t instanceof fh)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof kr)return{bytesValue:io(e.serializer,t.l)};if(t instanceof vh){var i=e._,o=t.c_;if(!o.isEqual(i))throw e.t_("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:so(t.c_||e._,t.u_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.t_("Unsupported field value: "+th(t))}(t,e)}function Ch(t,e){var n={};return Lr(t)?e.path&&e.path.length>0&&e.Qe.push(e.path):Dr(t,(function(t,r){var i=Sh(r,e.d_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function kh(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Fr||t instanceof fh||t instanceof kr||t instanceof vh||t instanceof oh)}function Nh(t,e,n){if(!kh(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=th(n);throw"an object"===r?e.t_(t+" a custom object"):e.t_(t+" "+r)}}function Ah(t,e,n){if(e instanceof nh)return e.Yl;if("string"==typeof e)return Ph(t,e);throw Oh("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}function Ph(t,e,n){try{return function(t){if(t.search(ih)>=0)throw new hr(lr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(rh.bind.apply(rh,(0,i.pr)([void 0],t.split("."))))}catch(e){throw new hr(lr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).Yl}catch(e){throw Oh((r=e)instanceof Error?r.message:r.toString(),t,!1,void 0,n)}var r}function Oh(t,e,n,r,i){var o=r&&!r.P(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new hr(lr.INVALID_ARGUMENT,(s+=". ")+t+u)}function xh(t,e){return t.some((function(t){return t.isEqual(e)}))}var Rh=function(){function t(t){this.qc=t,this.A_=new Map,this.mutations=[],this.R_=!1,this.P_=null,this.g_=new Set}return t.prototype.y_=function(t){return(0,i.mG)(this,void 0,void 0,(function(){var e,n=this;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:if(this.V_(),this.mutations.length>0)throw new hr(lr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o,a,s,u;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return n=wr(t),r=po(n.serializer)+"/documents",o={documents:e.map((function(t){return co(n.serializer,t)}))},[4,n.Dc("BatchGetDocuments",r,o)];case 1:return a=i.sent(),s=new Map,a.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){br(!!e.found),e.found.name,e.found.updateTime;var n=lo(t,e.found.name),r=ao(e.found.updateTime),i=new la({mapValue:{fields:e.found.fields}});return new da(n,r,i,{})}(t,e):"missing"in e?function(t,e){br(!!e.missing),br(!!e.readTime);var n=lo(t,e.missing),r=ao(e.readTime);return new va(n,r)}(t,e):gr()}(n.serializer,t);s.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=s.get(t.toString());br(!!e),u.push(e)})),u)]}}))}))}(this.qc,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof va||t instanceof da?n.p_(t):gr()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.l_(t,this.Ge(t))),this.g_.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.l_(t,this.b_(t)))}catch(t){this.P_=t}this.g_.add(t.toString())},t.prototype.delete=function(t){this.write([new ua(t,this.Ge(t))]),this.g_.add(t.toString())},t.prototype.commit=function(){return(0,i.mG)(this,void 0,void 0,(function(){var t,e=this;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:if(this.V_(),this.P_)throw this.P_;return t=this.A_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=zr.H(n);e.mutations.push(new ca(r,e.Ge(r)))})),[4,function(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return n=wr(t),r=po(n.serializer)+"/documents",o={writes:e.map((function(t){return mo(n.serializer,t)}))},[4,n.Sc("Commit",r,o)];case 1:return i.sent(),[2]}}))}))}(this.qc,this.mutations)];case 1:return n.sent(),this.R_=!0,[2]}}))}))},t.prototype.p_=function(t){var e;if(t instanceof da)e=t.version;else{if(!(t instanceof va))throw gr();e=jr.min()}var n=this.A_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new hr(lr.ABORTED,"Document version changed between two reads.")}else this.A_.set(t.key.toString(),e)},t.prototype.Ge=function(t){var e=this.A_.get(t.toString());return!this.g_.has(t.toString())&&e?Qo.updateTime(e):Qo.ze()},t.prototype.b_=function(t){var e=this.A_.get(t.toString());if(!this.g_.has(t.toString())&&e){if(e.isEqual(jr.min()))throw new hr(lr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Qo.updateTime(e)}return Qo.exists(!0)},t.prototype.write=function(t){this.V_(),this.mutations=this.mutations.concat(t)},t.prototype.V_=function(){},t}(),Dh=function(){function t(t,e,n,r){this.cs=t,this.qc=e,this.updateFunction=n,this.ls=r,this.v_=5,this.ys=new $a(this.cs,"transaction_retry")}return t.prototype.run=function(){this.S_()},t.prototype.S_=function(){var t=this;this.ys.Pn((function(){return(0,i.mG)(t,void 0,void 0,(function(){var t,e,n=this;return(0,i.Jh)(this,(function(r){return t=new Rh(this.qc),(e=this.D_(t))&&e.then((function(e){n.cs.ws((function(){return t.commit().then((function(){n.ls.resolve(e)})).catch((function(t){n.C_(t)}))}))})).catch((function(t){n.C_(t)})),[2]}))}))}))},t.prototype.D_=function(t){try{var e=this.updateFunction(t);return!Wr(e)&&e.catch&&e.then?e:(this.ls.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.ls.reject(t),null}},t.prototype.C_=function(t){var e=this;this.v_>0&&this.N_(t)?(this.v_-=1,this.cs.ws((function(){return e.S_(),Promise.resolve()}))):this.ls.reject(t)},t.prototype.N_=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!ni(e)}return!1},t}(),Lh=function(){function t(t,e,n){var r=this;this.credentials=t,this.cs=e,this.yl=n,this.user=Es.UNAUTHENTICATED,this.clientId=Er.t(),this.x_=function(){},this.ui=new Xa,this.credentials.oi((function(t){dr("FirestoreClient","Received user=",t.uid),r.user.isEqual(t)||(r.user=t,r.x_(t)),r.ui.resolve()}))}return t.prototype.getConfiguration=function(){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return[4,this.ui.promise];case 1:return[2,(t.sent(),{cs:this.cs,yl:this.yl,clientId:this.clientId,credentials:this.credentials,ql:this.user,Dh:100})]}}))}))},t.prototype.F_=function(t){var e=this;this.x_=t,this.ui.promise.then((function(){return e.x_(e.user)}))},t.prototype.O_=function(){if(this.cs.ps)throw new hr(lr.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.cs.Ds();var e=new Xa;return this.cs.bs((function(){return(0,i.mG)(t,void 0,void 0,(function(){var t,n;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.k_?[4,this.k_.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.M_?[4,this.M_.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.ai(),e.resolve(),[3,6];case 5:return t=r.sent(),n=ps(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function Mh(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r=this;return(0,i.Jh)(this,(function(o){switch(o.label){case 0:return t.cs.Fs(),dr("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),t.F_((function(n){return t.cs.Cs((function(){return(0,i.mG)(r,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return[4,Ju(e.Bc,n)];case 1:return t.sent(),[2]}}))}))}))})),e.persistence.ha((function(){return t.terminate()})),t.M_=e,[2]}}))}))}function Fh(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r;return(0,i.Jh)(this,(function(o){switch(o.label){case 0:return t.cs.Fs(),[4,jh(t)];case 1:return n=o.sent(),dr("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=o.sent(),[4,e.initialize(n,r)];case 3:return o.sent(),t.F_((function(n){return t.cs.Cs((function(){return function(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return(n=wr(t)).cs.Fs(),dr("RemoteStore","RemoteStore received new credentials"),r=_c(n),n.Wc.add(3),[4,dc(n)];case 1:return i.sent(),r&&n.Hc.set("Unknown"),[4,n.Uc.Gl(e)];case 2:return i.sent(),n.Wc.delete(3),[4,pc(n)];case 3:return i.sent(),[2]}}))}))}(e.ph,n)}))})),t.k_=e,[2]}}))}))}function jh(t){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return t.M_?[3,2]:(dr("FirestoreClient","Using default OfflineComponentProvider"),[4,Mh(t,new Hl)]);case 1:e.sent(),e.label=2;case 2:return[2,t.M_]}}))}))}function Uh(t){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return t.k_?[3,2]:(dr("FirestoreClient","Using default OnlineComponentProvider"),[4,Fh(t,new Jl)]);case 1:e.sent(),e.label=2;case 2:return[2,t.k_]}}))}))}function Vh(t){return jh(t).then((function(t){return t.persistence}))}function qh(t){return jh(t).then((function(t){return t.Bc}))}function Bh(t){return Uh(t).then((function(t){return t.ph}))}function zh(t){return Uh(t).then((function(t){return t.mu}))}function Wh(t){return(0,i.mG)(this,void 0,void 0,(function(){var e,n;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return[4,Uh(t)];case 1:return e=r.sent(),[2,((n=e.bh).Us=nl.bind(null,e.mu),n.Ws=il.bind(null,e.mu),n)]}}))}))}function Gh(t,e,n,r){var o=this,a=new Yl(r),s=new _s(e,a,n);return t.cs.ws((function(){return(0,i.mG)(o,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return e=ys,[4,Wh(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){a.Hl(),t.cs.ws((function(){return(0,i.mG)(o,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return e=ms,[4,Wh(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}function Hh(t,e){var n=this,r=new Xa;return t.cs.ws((function(){return(0,i.mG)(n,void 0,void 0,(function(){var n;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return n=ol,[4,zh(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}function Kh(t,e){var n=this,r=new Yl(e);return t.cs.ws((function(){return(0,i.mG)(n,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return e=function(t,e){wr(t).qs.add(e),e.next()},[4,Wh(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Hl(),t.cs.ws((function(){return(0,i.mG)(n,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return e=function(t,e){wr(t).qs.delete(e)},[4,Wh(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}function Qh(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Jh=function(){function t(t,e,n,r){this._=t,this.L_=e,this.B_=n,this.q_=r}return t.prototype.U_=function(t){switch(Li(t)){case 0:return null;case 1:return t.booleanValue;case 2:return zi(t.integerValue||t.doubleValue);case 3:return this.K_(t.timestampValue);case 4:return this.Q_(t);case 5:return t.stringValue;case 6:return this.q_(Wi(t.bytesValue));case 7:return this.W_(t.referenceValue);case 8:return this.j_(t.geoPointValue);case 9:return this.G_(t.arrayValue);case 10:return this.z_(t.mapValue);default:throw gr()}},t.prototype.z_=function(t){var e=this,n={};return Dr(t.fields||{},(function(t,r){n[t]=e.U_(r)})),n},t.prototype.j_=function(t){return new fh(zi(t.latitude),zi(t.longitude))},t.prototype.G_=function(t){var e=this;return(t.values||[]).map((function(t){return e.U_(t)}))},t.prototype.Q_=function(t){switch(this.L_){case"previous":var e=xi(t);return null==e?null:this.U_(e);case"estimate":return this.K_(Ri(t));default:return null}},t.prototype.K_=function(t){var e=Bi(t);return new Fr(e.seconds,e.nanos)},t.prototype.W_=function(t){var e=Vr.q(t);br(xo(e));var n=new xr(e.get(1),e.get(3)),r=new zr(e.N(5));return n.isEqual(this._)||vr("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this._.projectId+"/"+this._.database+") instead."),this.B_(r)},t}(),Yh=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new hr(lr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new hr(lr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Zl("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}();function Xh(t){tf(t);var e=af(t),n=t.H_(),r=new Jl;return $h(e,r,new Ql(r,n.cacheSizeBytes))}function $h(t,e,n){var r=this,o=new Xa;return t.cs.enqueue((function(){return(0,i.mG)(r,void 0,void 0,(function(){var r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,Mh(t,n)];case 1:return i.sent(),[4,Fh(t,e)];case 2:return i.sent(),o.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===lr.FAILED_PRECONDITION||t.code===lr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=i.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),o.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return o.promise}))}function Zh(t){var e=this;if(t.Y_&&!t.J_)throw new hr(lr.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Xa;return t.X_.bs((function(){return(0,i.mG)(e,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return(0,i.mG)(this,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return ts.Ln()?(e=t+"main",[4,ts.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Ku(t.c_,t.Z_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}function tf(t){if(t.Y_||t.J_)throw new hr(lr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var ef="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",nf=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){throw new hr(lr.FAILED_PRECONDITION,ef)},t.prototype.enableMultiTabIndexedDbPersistence=function(t){throw new hr(lr.FAILED_PRECONDITION,ef)},t.prototype.clearIndexedDbPersistence=function(t){throw new hr(lr.FAILED_PRECONDITION,ef)},t}(),rf=function(){function t(){this.enableMultiTabIndexedDbPersistence=Xh.bind(null),this.clearIndexedDbPersistence=Zh.bind(null)}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){tf(t);var n=af(t),r=t.H_(),i=new Jl;return $h(n,i,new Kl(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t,{forceOwnership:e})},t}(),of=function(){function t(e,n,r){var o=this;if(void 0===r&&(r=new nf),this.tf=r,this.ef=null,this.X_=new fs,this.INTERNAL={delete:function(){return(0,i.mG)(o,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return this.nf||sf(this),[4,this.nf.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var a=e;this.ef=a,this.c_=t.sf(a),this.Z_=a.name,this.if=new Ss(n)}else{var s=e;if(!s.projectId)throw new hr(lr.INVALID_ARGUMENT,"Must provide projectId");this.c_=new xr(s.projectId,s.database),this.Z_="[DEFAULT]",this.if=new Ts}this.rf=new Yh({})}return Object.defineProperty(t.prototype,"Y_",{get:function(){return!!this.nf},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"J_",{get:function(){return this.X_.ps},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"af",{get:function(){return this.cf||(this.cf=new wh(this.c_,this.rf.ignoreUndefinedProperties)),this.cf},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.rf),t)).merge;var e=new Yh(t);if(this.nf&&!this.rf.isEqual(e))throw new hr(lr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.rf=e,void 0!==e.credentials&&(this.if=function(t){if(!t)return new Ts;switch(t.type){case"gapi":var e=t.client;return br(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new ks(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new hr(lr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this.rf.host&&yr("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},t.prototype.enableNetwork=function(){return af(this),function(t){var e=this;return t.cs.enqueue((function(){return(0,i.mG)(e,void 0,void 0,(function(){var e,n;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return[4,Vh(t)];case 1:return e=r.sent(),[4,Bh(t)];case 2:return n=r.sent(),[2,(e.la(!0),function(t){var e=wr(t);return e.Wc.delete(0),pc(e)}(n))]}}))}))}))}(this.nf)},t.prototype.disableNetwork=function(){return af(this),function(t){var e=this;return t.cs.enqueue((function(){return(0,i.mG)(e,void 0,void 0,(function(){var e,n;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return[4,Vh(t)];case 1:return e=r.sent(),[4,Bh(t)];case 2:return n=r.sent(),[2,(e.la(!1),function(t){return(0,i.mG)(this,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return(e=wr(t)).Wc.add(0),[4,dc(e)];case 1:return n.sent(),e.Hc.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(this.nf)},t.prototype.enablePersistence=function(t){if(this.nf)throw new hr(lr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var e=!1,n=!1;return t&&Zl("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.tf.enableMultiTabIndexedDbPersistence(this):this.tf.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){return[2,this.tf.clearIndexedDbPersistence(this)]}))}))},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},t.prototype.waitForPendingWrites=function(){return af(this),function(t){var e=this,n=new Xa;return t.cs.ws((function(){return(0,i.mG)(e,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return e=hl,[4,zh(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(this.nf)},t.prototype.onSnapshotsInSync=function(t){if(af(this),Qh(t))return Kh(this.nf,t);var e={next:t};return Kh(this.nf,e)},t.sf=function(t){if(e=t.options,!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new hr(lr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e,n=t.options.projectId;if(!n||"string"!=typeof n)throw new hr(lr.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new xr(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.ef)throw new hr(lr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.ef},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){return Xl("Firestore.collection","path",t),af(this),new wf(Vr.q(t),this,null)},t.prototype.doc=function(t){return Xl("Firestore.doc","path",t),af(this),lf.uf(Vr.q(t),this,null)},t.prototype.collectionGroup=function(t){if(Xl("Firestore.collectionGroup","collectionId",t),t.indexOf("/")>=0)throw new hr(lr.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return af(this),new gf(function(t){return new ma(Vr.U(),t)}(t),this,null)},t.prototype.runTransaction=function(t){var e=this;return function(t,e){var n=this,r=new Xa;return t.cs.ws((function(){return(0,i.mG)(n,void 0,void 0,(function(){var n;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return[4,function(t){return Uh(t).then((function(t){return t.qc}))}(t)];case 1:return n=i.sent(),new Dh(t.cs,n,e,r).run(),[2]}}))}))})),r.promise}(af(this),(function(n){return t(new uf(e,n))}))},t.prototype.batch=function(){return af(this),new cf(this)},t.prototype.H_=function(){return this.rf},t}();function af(t){return t.nf||sf(t),t.nf.O_(),t.nf}function sf(t){var e=t.H_(),n=function(t,e,n){return new Or(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.c_,t.Z_,e);t.nf=new Lh(t.if,t.X_,n)}var uf=function(){function t(t,e){this.hf=t,this.lf=e}return t.prototype.get=function(t){var e=this,n=_f(0,t,this.hf);return this.lf.y_([n.u_]).then((function(t){if(!t||1!==t.length)return gr();var r=t[0];if(r instanceof va)return new ff(e.hf,n.u_,null,!1,!1,n.h_);if(r instanceof da)return new ff(e.hf,n.u_,r,!1,!1,n.h_);throw gr()}))},t.prototype.set=function(t,e,n){var r=_f(0,t,this.hf);n=$l("Transaction.set",n);var i=If(r.h_,e,n),o=_h(this.hf.af,"Transaction.set",r.u_,i,null!==r.h_,n);return this.lf.set(r.u_,o),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return"string"==typeof e||e instanceof rh?(r=_f(0,t,this.hf),i=Ih(this.hf.af,"Transaction.update",r.u_,e,n,o)):(r=_f(0,t,this.hf),i=Eh(this.hf.af,"Transaction.update",r.u_,e)),this.lf.update(r.u_,i),this},t.prototype.delete=function(t){var e=_f(0,t,this.hf);return this.lf.delete(e.u_),this},t}(),cf=function(){function t(t){this.hf=t,this._f=[],this.ff=!1}return t.prototype.set=function(t,e,n){this.df();var r=_f(0,t,this.hf);n=$l("WriteBatch.set",n);var i=If(r.h_,e,n),o=_h(this.hf.af,"WriteBatch.set",r.u_,i,null!==r.h_,n);return this._f=this._f.concat(o.l_(r.u_,Qo.ze())),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.df(),"string"==typeof e||e instanceof rh?(r=_f(0,t,this.hf),i=Ih(this.hf.af,"WriteBatch.update",r.u_,e,n,o)):(r=_f(0,t,this.hf),i=Eh(this.hf.af,"WriteBatch.update",r.u_,e)),this._f=this._f.concat(i.l_(r.u_,Qo.exists(!0))),this},t.prototype.delete=function(t){this.df();var e=_f(0,t,this.hf);return this._f=this._f.concat(new ua(e.u_,Qo.ze())),this},t.prototype.commit=function(){return this.df(),this.ff=!0,this._f.length>0?Hh(af(this.hf),this._f):Promise.resolve()},t.prototype.df=function(){if(this.ff)throw new hr(lr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),lf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n.c_,e,r)||this).u_=e,i.firestore=n,i.h_=r,i.nf=af(n),i}return(0,i.ZT)(e,t),e.uf=function(t,n,r){if(t.length%2!=0)throw new hr(lr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.B()+" has "+t.length);return new e(new zr(t),n,r)},Object.defineProperty(e.prototype,"id",{get:function(){return this.u_.path.k()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new wf(this.u_.path.F(),this.firestore,this.h_)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.u_.path.B()},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){if(Xl("DocumentReference.collection","path",t),!t)throw new hr(lr.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=Vr.q(t);return new wf(this.u_.path.child(e),this.firestore,null)},e.prototype.isEqual=function(t){return t instanceof e&&this.firestore===t.firestore&&this.u_.isEqual(t.u_)&&this.h_===t.h_},e.prototype.set=function(t,e){e=$l("DocumentReference.set",e);var n=If(this.h_,t,e),r=_h(this.firestore.af,"DocumentReference.set",this.u_,n,null!==this.h_,e);return Hh(this.nf,r.l_(this.u_,Qo.ze()))},e.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n="string"==typeof t||t instanceof rh?Ih(this.firestore.af,"DocumentReference.update",this.u_,t,e,r):Eh(this.firestore.af,"DocumentReference.update",this.u_,t),Hh(this.nf,n.l_(this.u_,Qo.exists(!0)))},e.prototype.delete=function(){return Hh(this.nf,[new ua(this.u_,Qo.ze())])},e.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a={includeMetadataChanges:!1},s=0;"object"!=typeof i[s]||Qh(i[s])||(a=i[s],s++);var u={includeMetadataChanges:a.includeMetadataChanges};if(Qh(i[s])){var c=i[s];i[s]=null===(t=c.next)||void 0===t?void 0:t.bind(c),i[s+1]=null===(e=c.error)||void 0===e?void 0:e.bind(c),i[s+2]=null===(n=c.complete)||void 0===n?void 0:n.bind(c)}var l={next:function(t){i[s]&&i[s](r.wf(t))},error:i[s+1],complete:i[s+2]};return Gh(this.nf,ba(this.u_.path),u,l)},e.prototype.get=function(t){var e=this;return t&&"cache"===t.source?function(t,e){var n=this,r=new Xa;return t.cs.ws((function(){return(0,i.mG)(n,void 0,void 0,(function(){var n;return(0,i.Jh)(this,(function(o){switch(o.label){case 0:return n=function(t,e,n){return(0,i.mG)(this,void 0,void 0,(function(){var r,o,a;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,function(t,e){var n=wr(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Ka.Mi(t,e)}))}(t,e)];case 1:return(r=i.sent())instanceof da?n.resolve(r):r instanceof va?n.resolve(null):n.reject(new hr(lr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return o=i.sent(),a=ps(o,"Failed to get document '"+e+" from cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,qh(t)];case 1:return[2,n.apply(void 0,[o.sent(),e,r])]}}))}))})),r.promise}(this.nf,this.u_).then((function(t){return new ff(e.firestore,e.u_,t,!0,t instanceof da&&t.Je,e.h_)})):function(t,e,n){var r=this;void 0===n&&(n={});var o=new Xa;return t.cs.ws((function(){return(0,i.mG)(r,void 0,void 0,(function(){var r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return r=function(t,e,n,r,i){var o=new Yl({next:function(o){e.ws((function(){return ms(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new hr(lr.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new hr(lr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new _s(ba(n.path),o,{includeMetadataChanges:!0,Xs:!0});return ys(t,a)},[4,Wh(t)];case 1:return[2,r.apply(void 0,[i.sent(),t.cs,e,n,o])]}}))}))})),o.promise}(this.nf,this.u_,t).then((function(t){return e.wf(t)}))},e.prototype.withConverter=function(t){return new e(this.u_,this.firestore,t)},e.prototype.wf=function(t){var e=t.docs.get(this.u_);return new ff(this.firestore,this.u_,e,t.fromCache,t.hasPendingWrites,this.h_)},e}(vh),hf=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),ff=function(){function t(t,e,n,r,i,o){this.hf=t,this.u_=e,this.Ef=n,this.Tf=r,this.If=i,this.h_=o}return t.prototype.data=function(t){var e=this;if(void 0===t&&(t={}),this.Ef){if(this.h_){var n=new pf(this.hf,this.u_,this.Ef,this.Tf,this.If,null);return this.h_.fromFirestore(n,t)}return new Jh(this.hf.c_,t.serverTimestamps||"none",(function(t){return new lf(t,e.hf,null)}),(function(t){return new Pr(t)})).U_(this.Ef.rn())}},t.prototype.get=function(t,e){var n=this;if(void 0===e&&(e={}),this.Ef){var r=this.Ef.data().field(Ah("DocumentSnapshot.get",t,this.u_));if(null!==r)return new Jh(this.hf.c_,e.serverTimestamps||"none",(function(t){return new lf(t,n.hf,n.h_)}),(function(t){return new Pr(t)})).U_(r)}},Object.defineProperty(t.prototype,"id",{get:function(){return this.u_.path.k()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new lf(this.u_,this.hf,this.h_)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this.Ef},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new hf(this.If,this.Tf)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&this.hf===e.hf&&this.Tf===e.Tf&&this.u_.isEqual(e.u_)&&(null===this.Ef?null===e.Ef:this.Ef.isEqual(e.Ef))&&this.h_===e.h_},t}(),pf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.data=function(e){return t.prototype.data.call(this,e)},e}(ff);function df(t,e,n){if("string"==typeof n){if(""===n)throw new hr(lr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ta(e)&&-1!==n.indexOf("/"))throw new hr(lr.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Vr.q(n));if(!zr.X(r))throw new hr(lr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Gi(t,new zr(r))}if(n instanceof vh)return Gi(t,n.u_);throw new hr(lr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+th(n)+".")}function vf(t,e){if(!Array.isArray(t)||0===t.length)throw new hr(lr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new hr(lr.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function yf(t,e,n){if(!n.isEqual(e))throw new hr(lr.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function mf(t){if(_a(t)&&0===t.on.length)throw new hr(lr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var gf=function(){function t(t,e,n){this.mf=t,this.firestore=e,this.h_=n}return t.prototype.where=function(e,n,r){var i=Ah("Query.where",e),o=function(t,e,n,r,i,o,a){var s;if(i.W()){if("array-contains"===o||"array-contains-any"===o)throw new hr(lr.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){vf(a,o);for(var u=[],c=0,l=a;c<l.length;c++){var h=l[c];u.push(df(r,t,h))}s={arrayValue:{values:u}}}else s=df(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||vf(a,o),s=Th(n,"Query.where",a,"in"===o||"not-in"===o);var f=La.create(i,o,s);return function(t,e){if(e.hn()){var n=Ia(t);if(null!==n&&!n.isEqual(e.field))throw new hr(lr.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Ea(t);null!==r&&yf(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new hr(lr.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new hr(lr.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(this.mf,0,this.firestore.af,this.firestore.c_,i,n,r);return new t(function(t,e){var n=t.filters.concat([e]);return new ma(t.path,t.collectionGroup,t.on.slice(),n,t.limit,t.an,t.startAt,t.endAt)}(this.mf,o),this.firestore,this.h_)},t.prototype.orderBy=function(e,n){var r;if(void 0===n||"asc"===n)r="asc";else{if("desc"!==n)throw new hr(lr.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r="desc"}var i=Ah("Query.orderBy",e),o=function(t,e,n){if(null!==t.startAt)throw new hr(lr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new hr(lr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Qa(e,n);return function(t,e){if(null===Ea(t)){var n=Ia(t);null!==n&&yf(0,n,e.field)}}(t,r),r}(this.mf,i,r);return new t(function(t,e){var n=t.on.concat([e]);return new ma(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.an,t.startAt,t.endAt)}(this.mf,o),this.firestore,this.h_)},t.prototype.limit=function(e){return eh("Query.limit",e),new t(ka(this.mf,e,"F"),this.firestore,this.h_)},t.prototype.limitToLast=function(e){return eh("Query.limitToLast",e),new t(ka(this.mf,e,"L"),this.firestore,this.h_)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Af("Query.startAt",e,n,!0);return new t(Na(this.mf,i),this.firestore,this.h_)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Af("Query.startAfter",e,n,!1);return new t(Na(this.mf,i),this.firestore,this.h_)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Af("Query.endBefore",e,n,!0);return new t(Aa(this.mf,i),this.firestore,this.h_)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Af("Query.endAt",e,n,!1);return new t(Aa(this.mf,i),this.firestore,this.h_)},t.prototype.isEqual=function(e){return e instanceof t&&this.firestore===e.firestore&&Pa(this.mf,e.mf)&&this.h_===e.h_},t.prototype.withConverter=function(e){return new t(this.mf,this.firestore,e)},t.prototype.Af=function(t,e,n,r){if(e instanceof ff)return function(t,e,n,r,i){if(!r)throw new hr(lr.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=Sa(t);a<s.length;a++){var u=s[a];if(u.field.W())o.push(Gi(e,r.key));else{var c=r.field(u.field);if(Oi(c))throw new hr(lr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.B();throw new hr(lr.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Wa(o,i)}(this.mf,this.firestore.c_,t,e.Ef,r);var i=[e].concat(n);return function(t,e,n,r,i,o){var a=t.on;if(i.length>a.length)throw new hr(lr.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.W()){if("string"!=typeof c)throw new hr(lr.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Ta(t)&&-1!==c.indexOf("/"))throw new hr(lr.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Vr.q(c));if(!zr.X(l))throw new hr(lr.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new zr(l);s.push(Gi(e,h))}else{var f=Th(n,r,c);s.push(f)}}return new Wa(s,o)}(this.mf,this.firestore.c_,this.firestore.af,t,i,r)},t.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a={},s=0;if("object"!=typeof i[s]||Qh(i[s])||(a=i[s],s++),Qh(i[s])){var u=i[s];i[s]=null===(t=u.next)||void 0===t?void 0:t.bind(u),i[s+1]=null===(e=u.error)||void 0===e?void 0:e.bind(u),i[s+2]=null===(n=u.complete)||void 0===n?void 0:n.bind(u)}var c={next:function(t){i[s]&&i[s](new bf(r.firestore,r.mf,t,r.h_))},error:i[s+1],complete:i[s+2]};return mf(this.mf),Gh(af(this.firestore),this.mf,a,c)},t.prototype.get=function(t){var e=this;mf(this.mf);var n=af(this.firestore);return(t&&"cache"===t.source?function(t,e){var n=this,r=new Xa;return t.cs.ws((function(){return(0,i.mG)(n,void 0,void 0,(function(){var n;return(0,i.Jh)(this,(function(o){switch(o.label){case 0:return n=function(t,e,n){return(0,i.mG)(this,void 0,void 0,(function(){var r,o,a,s,u,c;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,nc(t,e,!0)];case 1:return r=i.sent(),o=new $c(e,r.za),a=o.wh(r.documents),s=o.Di(a,!1),n.resolve(s.snapshot),[3,3];case 2:return u=i.sent(),c=ps(u,"Failed to execute query '"+e+" against cache"),n.reject(c),[3,3];case 3:return[2]}}))}))},[4,qh(t)];case 1:return[2,n.apply(void 0,[o.sent(),e,r])]}}))}))})),r.promise}(n,this.mf):function(t,e,n){var r=this;void 0===n&&(n={});var o=new Xa;return t.cs.ws((function(){return(0,i.mG)(r,void 0,void 0,(function(){var r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return r=function(t,e,n,r,i){var o=new Yl({next:function(n){e.ws((function(){return ms(t,a)})),n.fromCache&&"server"===r.source?i.reject(new hr(lr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new _s(n,o,{includeMetadataChanges:!0,Xs:!0});return ys(t,a)},[4,Wh(t)];case 1:return[2,r.apply(void 0,[i.sent(),t.cs,e,n,o])]}}))}))})),o.promise}(n,this.mf,t)).then((function(t){return new bf(e.firestore,e.mf,t,e.h_)}))},t}(),bf=function(){function t(t,e,n,r){this.hf=t,this.Rf=e,this.Pf=n,this.h_=r,this.gf=null,this.yf=null,this.metadata=new hf(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.Pf.docs.P()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.Pf.docs.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.Pf.docs.forEach((function(r){t.call(e,n.Vf(r,n.metadata.fromCache,n.Pf.Qt.has(r.key)))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new gf(this.Rf,this.hf,this.h_)},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=!(!t||!t.includeMetadataChanges);if(e&&this.Pf.jt)throw new hr(lr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.gf&&this.yf===e||(this.gf=function(t,e,n){if(t.Kt.P()){var r=0;return t.docChanges.map((function(e){var i=n(e.doc,t.fromCache,t.Qt.has(e.doc.key));return e.doc,{type:"added",doc:i,oldIndex:-1,newIndex:r++}}))}var i=t.Kt;return t.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var r=n(e.doc,t.fromCache,t.Qt.has(e.doc.key)),o=-1,a=-1;return 0!==e.type&&(o=i.indexOf(e.doc.key),i=i.delete(e.doc.key)),1!==e.type&&(a=(i=i.add(e.doc)).indexOf(e.doc.key)),{type:Ef(e.type),doc:r,oldIndex:o,newIndex:a}}))}(this.Pf,e,this.Vf.bind(this)),this.yf=e),this.gf},t.prototype.isEqual=function(e){return e instanceof t&&this.hf===e.hf&&Pa(this.Rf,e.Rf)&&this.Pf.isEqual(e.Pf)&&this.h_===e.h_},t.prototype.Vf=function(t,e,n){return new pf(this.hf,t.key,t,e,n,this.h_)},t}(),wf=function(t){function e(e,n,r){var i=this;if((i=t.call(this,ba(e),n,r)||this).pf=e,e.length%2!=1)throw new hr(lr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.B()+" has "+e.length);return i}return(0,i.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.mf.path.k()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.mf.path.F();return t.P()?null:new lf(new zr(t),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.mf.path.B()},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){0===arguments.length&&(t=Er.t()),Xl("CollectionReference.doc","path",t);var e=Vr.q(t);return lf.uf(this.mf.path.child(e),this.firestore,this.h_)},e.prototype.add=function(t){var e=this.h_?this.h_.toFirestore(t):t,n=this.doc();return new lf(n.u_,this.firestore,null).set(e).then((function(){return n}))},e.prototype.withConverter=function(t){return new e(this.pf,this.firestore,t)},e}(gf);function _f(t,e,n){var r=function(t,e){if(!(t instanceof e)){if(e.name===t.constructor.name)throw new hr(lr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=th(t);throw new hr(lr.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}(e,lf);if(r.firestore!==n)throw new hr(lr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function Ef(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gr()}}function If(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Tf,Sf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.serverTimestamp=function(){var t=new uh("serverTimestamp");return t.Jl="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new ah("deleteField");return t.Jl="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ch("arrayUnion",t)}.apply(void 0,t);return r.Jl="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new lh("arrayRemove",t)}.apply(void 0,t);return r.Jl="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new hh("increment",t)}(t);return n.Jl="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.a_.isEqual(t.a_)},e}(ph),Cf={Firestore:of,GeoPoint:fh,Timestamp:Fr,Blob:Pr,Transaction:uf,WriteBatch:cf,DocumentReference:lf,DocumentSnapshot:ff,Query:gf,QueryDocumentSnapshot:pf,QuerySnapshot:bf,CollectionReference:wf,FieldPath:rh,FieldValue:Sf,setLogLevel:function(t){var e;e=t,fr.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new cr.wA("firestore",(function(t){return function(t,e){return new of(t,e,new rf)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Cf)))})(Tf=r.Z),Tf.registerVersion("@firebase/firestore","2.0.1");var kf={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Nf=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return(0,i.ZT)(e,t),e}(Error),Af=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}return t.prototype.getAuthToken=function(){return(0,i.mG)(this,void 0,void 0,(function(){var t;return(0,i.Jh)(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getInstanceIdToken=function(){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];try{return[2,this.messaging.getToken()]}catch(t){return[2,void 0]}return[2]}))}))},t.prototype.getContext=function(){return(0,i.mG)(this,void 0,void 0,(function(){var t,e;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},t}();function Pf(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var Of,xf,Rf,Df=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map((function(t){return e.encode(t)}));if("function"==typeof t||"object"==typeof t)return Pf(t,(function(t){return e.encode(t)}));throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"==typeof t||"object"==typeof t?Pf(t,(function(t){return e.decode(t)})):t},t}(),Lf=function(){function t(t,e,n,r,i){var o=this;void 0===r&&(r="us-central1"),this.app_=t,this.fetchImpl=i,this.serializer=new Df,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(o.deleteService())}},this.contextProvider=new Af(e,n),this.cancelAllRequests=new Promise((function(t){o.deleteService=function(){return t()}}));try{var a=new URL(r);this.customDomain=a.origin,this.region="us-central1"}catch(t){this.customDomain=null,this.region=r}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t:null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return(0,i.mG)(this,void 0,void 0,(function(){var r,o;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:n["Content-Type"]="application/json",i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 2:return r=i.sent(),[3,4];case 3:return i.sent(),[2,{status:0,json:null}];case 4:o=null,i.label=5;case 5:return i.trys.push([5,7,,8]),[4,r.json()];case 6:return o=i.sent(),[3,8];case 7:return i.sent(),[3,8];case 8:return[2,{status:r.status,json:o}]}}))}))},t.prototype.call=function(t,e,n){return(0,i.mG)(this,void 0,void 0,(function(){var r,o,a,s,u,c,l,h,f,p,d;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return r=this._url(t),e=this.serializer.encode(e),o={data:e},a={},[4,this.contextProvider.getContext()];case 1:return(s=i.sent()).authToken&&(a.Authorization="Bearer "+s.authToken),s.instanceIdToken&&(a["Firebase-Instance-ID-Token"]=s.instanceIdToken),u=n.timeout||7e4,c=function(t){var e,n=new Promise((function(n,r){e=setTimeout((function(){r(new Nf("deadline-exceeded","deadline-exceeded"))}),t)}));return{timer:e,promise:n}}(u),l=c.timer,h=c.promise,[4,Promise.race([Mf(l,this.postJSON(r,o,a)),h,Mf(l,this.cancelAllRequests)])];case 2:if(!(f=i.sent()))throw new Nf("cancelled","Firebase Functions instance was deleted.");if(p=function(t,e,n){var r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var a=e&&e.error;if(a){var s=a.status;if("string"==typeof s){if(!kf[s])return new Nf("internal","internal");r=kf[s],i=s}var u=a.message;"string"==typeof u&&(i=u),void 0!==(o=a.details)&&(o=n.decode(o))}}catch(t){}return"ok"===r?null:new Nf(r,i,o)}(f.status,f.json,this.serializer))throw p;if(!f.json)throw new Nf("internal","Response is not valid JSON object.");if(void 0===(d=f.json.data)&&(d=f.json.result),void 0===d)throw new Nf("internal","Response is missing data field.");return[2,{data:this.serializer.decode(d)}]}}))}))},t}();function Mf(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}}))}))}Of=r.Z,xf=fetch.bind(self),Rf={Functions:Lf},Of.INTERNAL.registerComponent(new cr.wA("functions",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("messaging");return new Lf(n,r,i,e,xf)}),"PUBLIC").setServiceProps(Rf).setMultipleInstances(!0)),r.Z.registerVersion("@firebase/functions","0.6.1");var Ff,jf=n(259),Uf="w:0.4.19",Vf=((Ff={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Ff["not-registered"]="Firebase Installation is not registered.",Ff["installation-not-found"]="Firebase Installation not found.",Ff["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',Ff["app-offline"]="Could not process request. Application offline.",Ff["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",Ff),qf=new a.LL("installations","Installations",Vf);function Bf(t){return t instanceof a.ZR&&t.code.includes("request-failed")}function zf(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function Wf(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function Gf(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),r=n.error,[2,qf.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function Hf(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function Kf(t,e){var n=e.refreshToken,r=Hf(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}(n)),r}function Qf(t){return(0,i.mG)(this,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}}))}))}function Jf(t,e){var n=e.fid;return(0,i.mG)(this,void 0,void 0,(function(){var e,r,o,a,s,u;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return e=zf(t),r=Hf(t),o={fid:n,authVersion:"FIS_v2",appId:t.appId,sdkVersion:Uf},a={method:"POST",headers:r,body:JSON.stringify(o)},[4,Qf((function(){return fetch(e,a)}))];case 1:return(s=i.sent()).ok?[4,s.json()]:[3,3];case 2:return[2,{fid:(u=i.sent()).fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:Wf(u.authToken)}];case 3:return[4,Gf("Create Installation",s)];case 4:throw i.sent()}}))}))}function Yf(t){return new Promise((function(e){setTimeout(e,t)}))}var Xf=/^[cdef][\w-]{21}$/;function $f(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return(e=t,btoa(String.fromCharCode.apply(String,(0,i.fl)(e))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}(t);return Xf.test(e)?e:""}catch(t){return""}}function Zf(t){return t.appName+"!"+t.appId}var tp=new Map;function ep(t,e){var n=Zf(t);np(n,e),function(t,e){var n=ip();n&&n.postMessage({key:t,fid:e}),op()}(n,e)}function np(t,e){var n,r,o=tp.get(t);if(o)try{for(var a=(0,i.XA)(o),s=a.next();!s.done;s=a.next())(0,s.value)(e)}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}var rp=null;function ip(){return!rp&&"BroadcastChannel"in self&&((rp=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){np(t.data.key,t.data.fid)}),rp}function op(){0===tp.size&&rp&&(rp.close(),rp=null)}var ap,sp="firebase-installations-store",up=null;function cp(){return up||(up=(0,jf.openDb)("firebase-installations-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(sp)}}))),up}function lp(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o,a,s;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return n=Zf(t),[4,cp()];case 1:return r=i.sent(),o=r.transaction(sp,"readwrite"),[4,(a=o.objectStore(sp)).get(n)];case 2:return s=i.sent(),[4,a.put(e,n)];case 3:return i.sent(),[4,o.complete];case 4:return i.sent(),s&&s.fid===e.fid||ep(t,e.fid),[2,e]}}))}))}function hp(t){return(0,i.mG)(this,void 0,void 0,(function(){var e,n,r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return e=Zf(t),[4,cp()];case 1:return n=i.sent(),[4,(r=n.transaction(sp,"readwrite")).objectStore(sp).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function fp(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o,a,s,u;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return n=Zf(t),[4,cp()];case 1:return r=i.sent(),o=r.transaction(sp,"readwrite"),[4,(a=o.objectStore(sp)).get(n)];case 2:return s=i.sent(),void 0!==(u=e(s))?[3,4]:[4,a.delete(n)];case 3:return i.sent(),[3,6];case 4:return[4,a.put(u,n)];case 5:i.sent(),i.label=6;case 6:return[4,o.complete];case 7:return i.sent(),!u||s&&s.fid===u.fid||ep(t,u.fid),[2,u]}}))}))}function pp(t){return(0,i.mG)(this,void 0,void 0,(function(){var e,n,r;return(0,i.Jh)(this,(function(o){switch(o.label){case 0:return[4,fp(t,(function(n){var r=function(t){return yp(t||{fid:$f(),registrationStatus:0})}(n),o=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(qf.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,Jf(t,e)];case 1:return n=i.sent(),[2,lp(t,n)];case 2:return Bf(r=i.sent())&&409===r.customData.serverCode?[4,hp(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,lp(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(t,n)}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:dp(t)}:{installationEntry:e}}(t,r);return e=o.registrationPromise,o.installationEntry}))];case 1:return""!==(n=o.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=o.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}}))}))}function dp(t){return(0,i.mG)(this,void 0,void 0,(function(){var e,n,r,o;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return[4,vp(t)];case 1:e=i.sent(),i.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,Yf(100)];case 3:return i.sent(),[4,vp(t)];case 4:return e=i.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,pp(t)];case 6:return n=i.sent(),r=n.installationEntry,(o=n.registrationPromise)?[2,o]:[2,r];case 7:return[2,e]}}))}))}function vp(t){return fp(t,(function(t){if(!t)throw qf.create("installation-not-found");return yp(t)}))}function yp(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function mp(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return(0,i.mG)(this,void 0,void 0,(function(){var t,o,a,s,u,c;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return t=function(t,e){var n=e.fid;return zf(t)+"/"+n+"/authTokens:generate"}(n,e),o=Kf(n,e),(a=r.getImmediate({optional:!0}))&&o.append("x-firebase-client",a.getPlatformInfoString()),s={installation:{sdkVersion:Uf}},u={method:"POST",headers:o,body:JSON.stringify(s)},[4,Qf((function(){return fetch(t,u)}))];case 1:return(c=i.sent()).ok?[4,c.json()]:[3,3];case 2:return[2,Wf(i.sent())];case 3:return[4,Gf("Generate Auth Token",c)];case 4:throw i.sent()}}))}))}function gp(t,e){return void 0===e&&(e=!1),(0,i.mG)(this,void 0,void 0,(function(){var n,r,o;return(0,i.Jh)(this,(function(a){switch(a.label){case 0:return[4,fp(t.appConfig,(function(r){if(!wp(r))throw qf.create("not-registered");var o,a=r.authToken;if(!e&&(2===(o=a).requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(o)))return r;if(1===a.requestStatus)return n=function(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return[4,bp(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,Yf(100)];case 3:return i.sent(),[4,bp(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,gp(t,e)]:[2,r]}}))}))}(t,e),r;if(!navigator.onLine)throw qf.create("app-offline");var s=function(t){var e={requestStatus:1,requestTime:Date.now()};return(0,i.pi)((0,i.pi)({},t),{authToken:e})}(r);return n=function(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o;return(0,i.Jh)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,8]),[4,mp(t,e)];case 1:return n=a.sent(),o=(0,i.pi)((0,i.pi)({},e),{authToken:n}),[4,lp(t.appConfig,o)];case 2:return a.sent(),[2,n];case 3:return!Bf(r=a.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,hp(t.appConfig)];case 4:return a.sent(),[3,7];case 5:return o=(0,i.pi)((0,i.pi)({},e),{authToken:{requestStatus:0}}),[4,lp(t.appConfig,o)];case 6:a.sent(),a.label=7;case 7:throw r;case 8:return[2]}}))}))}(t,s),s}))];case 1:return r=a.sent(),n?[4,n]:[3,3];case 2:return o=a.sent(),[3,4];case 3:o=r.authToken,a.label=4;case 4:return[2,o]}}))}))}function bp(t){return fp(t,(function(t){if(!wp(t))throw qf.create("not-registered");var e;return 1===(e=t.authToken).requestStatus&&e.requestTime+1e4<Date.now()?(0,i.pi)((0,i.pi)({},t),{authToken:{requestStatus:0}}):t}))}function wp(t){return void 0!==t&&2===t.registrationStatus}function _p(t){return(0,i.mG)(this,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return[4,pp(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}function Ep(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o,a;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return n=function(t,e){var n=e.fid;return zf(t)+"/"+n}(t,e),r=Kf(t,e),o={method:"DELETE",headers:r},[4,Qf((function(){return fetch(n,o)}))];case 1:return(a=i.sent()).ok?[3,3]:[4,Gf("Delete Installation",a)];case 2:throw i.sent();case 3:return[2]}}))}))}function Ip(t){return qf.create("missing-app-config-values",{valueName:t})}!function(t){t.INTERNAL.registerComponent(new cr.wA("installations",(function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw Ip("App Configuration");if(!t.name)throw Ip("App Name");try{for(var r=(0,i.XA)(["projectId","apiKey","appId"]),o=r.next();!o.done;o=r.next()){var a=o.value;if(!t.options[a])throw Ip(a)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(t){return(0,i.mG)(this,void 0,void 0,(function(){var e,n,r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return[4,pp(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):gp(t).catch(console.error),[2,n.fid]}}))}))}(n)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return[4,_p(t.appConfig)];case 1:return n.sent(),[4,gp(t,e)];case 2:return[2,n.sent().token]}}))}))}(n,t)},delete:function(){return function(t){return(0,i.mG)(this,void 0,void 0,(function(){var e,n;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return[4,fp(e=t.appConfig,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw qf.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw qf.create("app-offline");case 3:return[4,Ep(e,n)];case 4:return r.sent(),[4,hp(e)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(n)},onIdChange:function(t){return function(t,e){var n=t.appConfig;return function(t,e){ip();var n=Zf(t),r=tp.get(n);r||(r=new Set,tp.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=Zf(t),r=tp.get(n);r&&(r.delete(e),0===r.size&&tp.delete(n),op())}(n,e)}}(n,t)}}}),"PUBLIC")),t.registerVersion("@firebase/installations","0.4.19")}(r.Z);var Tp,Sp=((ap={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',ap["only-available-in-window"]="This method is available in a Window context.",ap["only-available-in-sw"]="This method is available in a service worker context.",ap["permission-default"]="The notification permission was not granted and dismissed instead.",ap["permission-blocked"]="The notification permission was not granted and blocked instead.",ap["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",ap["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",ap["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",ap["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",ap["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",ap["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",ap["token-update-no-token"]="FCM returned no token when updating the user to push.",ap["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",ap["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",ap["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",ap["invalid-vapid-key"]="The public VAPID key must be a string.",ap["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",ap),Cp=new a.LL("messaging","Messaging",Sp),kp="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";function Np(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,(0,i.fl)(e))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ap(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}!function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"}(Tp||(Tp={}));var Pp="fcm_token_details_db",Op="fcm_token_object_Store";function xp(t){return(0,i.mG)(this,void 0,void 0,(function(){var e,n=this;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!r.sent().map((function(t){return t.name})).includes(Pp))return[2,null];r.label=2;case 2:return e=null,[4,(0,jf.openDb)(Pp,5,(function(r){return(0,i.mG)(n,void 0,void 0,(function(){var n,o,a,s;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return r.oldVersion<2?[2]:r.objectStoreNames.contains(Op)?[4,(n=r.transaction.objectStore(Op)).index("fcmSenderId").get(t)]:[2];case 1:return o=i.sent(),[4,n.clear()];case 2:if(i.sent(),!o)return[2];if(2===r.oldVersion){if(!(a=o).auth||!a.p256dh||!a.endpoint)return[2];e={token:a.fcmToken,createTime:null!==(s=a.createTime)&&void 0!==s?s:Date.now(),subscriptionOptions:{auth:a.auth,p256dh:a.p256dh,endpoint:a.endpoint,swScope:a.swScope,vapidKey:"string"==typeof a.vapidKey?a.vapidKey:Np(a.vapidKey)}}}else(3===r.oldVersion||4===r.oldVersion)&&(e={token:(a=o).fcmToken,createTime:a.createTime,subscriptionOptions:{auth:Np(a.auth),p256dh:Np(a.p256dh),endpoint:a.endpoint,swScope:a.swScope,vapidKey:Np(a.vapidKey)}});return[2]}}))}))}))];case 3:return r.sent().close(),[4,(0,jf.deleteDb)(Pp)];case 4:return r.sent(),[4,(0,jf.deleteDb)("fcm_vapid_details_db")];case 5:return r.sent(),[4,(0,jf.deleteDb)("undefined")];case 6:return r.sent(),[2,Rp(e)?e:null]}}))}))}function Rp(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}var Dp="firebase-messaging-store",Lp=null;function Mp(){return Lp||(Lp=(0,jf.openDb)("firebase-messaging-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(Dp)}}))),Lp}function Fp(t){return(0,i.mG)(this,void 0,void 0,(function(){var e,n,r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return e=Vp(t),[4,Mp()];case 1:return[4,i.sent().transaction(Dp).objectStore(Dp).get(e)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,xp(t.appConfig.senderId)];case 4:return(r=i.sent())?[4,jp(t,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}}))}))}function jp(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return n=Vp(t),[4,Mp()];case 1:return r=i.sent(),[4,(o=r.transaction(Dp,"readwrite")).objectStore(Dp).put(e,n)];case 2:return i.sent(),[4,o.complete];case 3:return i.sent(),[2,e]}}))}))}function Up(t){return(0,i.mG)(this,void 0,void 0,(function(){var e,n,r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return e=Vp(t),[4,Mp()];case 1:return n=i.sent(),[4,(r=n.transaction(Dp,"readwrite")).objectStore(Dp).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function Vp(t){return t.appConfig.appId}function qp(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o,a,s,u;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return[4,Gp(t)];case 1:n=i.sent(),r=Hp(e),o={method:"POST",headers:n,body:JSON.stringify(r)},i.label=2;case 2:return i.trys.push([2,5,,6]),[4,fetch(Wp(t.appConfig),o)];case 3:return[4,i.sent().json()];case 4:return a=i.sent(),[3,6];case 5:throw s=i.sent(),Cp.create("token-subscribe-failed",{errorInfo:s});case 6:if(a.error)throw u=a.error.message,Cp.create("token-subscribe-failed",{errorInfo:u});if(!a.token)throw Cp.create("token-subscribe-no-token");return[2,a.token]}}))}))}function Bp(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o,a,s,u;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return[4,Gp(t)];case 1:n=i.sent(),r=Hp(e.subscriptionOptions),o={method:"PATCH",headers:n,body:JSON.stringify(r)},i.label=2;case 2:return i.trys.push([2,5,,6]),[4,fetch(Wp(t.appConfig)+"/"+e.token,o)];case 3:return[4,i.sent().json()];case 4:return a=i.sent(),[3,6];case 5:throw s=i.sent(),Cp.create("token-update-failed",{errorInfo:s});case 6:if(a.error)throw u=a.error.message,Cp.create("token-update-failed",{errorInfo:u});if(!a.token)throw Cp.create("token-update-no-token");return[2,a.token]}}))}))}function zp(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o,a,s;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return[4,Gp(t)];case 1:n=i.sent(),r={method:"DELETE",headers:n},i.label=2;case 2:return i.trys.push([2,5,,6]),[4,fetch(Wp(t.appConfig)+"/"+e,r)];case 3:return[4,i.sent().json()];case 4:if((o=i.sent()).error)throw a=o.error.message,Cp.create("token-unsubscribe-failed",{errorInfo:a});return[3,6];case 5:throw s=i.sent(),Cp.create("token-unsubscribe-failed",{errorInfo:s});case 6:return[2]}}))}))}function Wp(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+t.projectId+"/registrations"}function Gp(t){var e=t.appConfig,n=t.installations;return(0,i.mG)(this,void 0,void 0,(function(){var t;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}}))}))}function Hp(t){var e=t.p256dh,n=t.auth,r=t.endpoint,i=t.vapidKey,o={web:{endpoint:r,auth:n,p256dh:e}};return i!==kp&&(o.web.applicationPubKey=i),o}function Kp(t,e,n){return(0,i.mG)(this,void 0,void 0,(function(){var r,o,a,s;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:if("granted"!==Notification.permission)throw Cp.create("permission-blocked");return[4,Xp(e,n)];case 1:return r=i.sent(),[4,Fp(t)];case 2:return o=i.sent(),a={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:Np(r.getKey("auth")),p256dh:Np(r.getKey("p256dh"))},o?[3,3]:[2,Yp(t,a)];case 3:if(u=o.subscriptionOptions,l=(c=a).vapidKey===u.vapidKey,h=c.endpoint===u.endpoint,f=c.auth===u.auth,p=c.p256dh===u.p256dh,l&&h&&f&&p)return[3,8];i.label=4;case 4:return i.trys.push([4,6,,7]),[4,zp(t,o.token)];case 5:return i.sent(),[3,7];case 6:return s=i.sent(),console.warn(s),[3,7];case 7:return[2,Yp(t,a)];case 8:return Date.now()>=o.createTime+6048e5?[2,Jp({token:o.token,createTime:Date.now(),subscriptionOptions:a},t,e)]:[2,o.token];case 9:return[2]}var u,c,l,h,f,p}))}))}function Qp(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return[4,Fp(t)];case 1:return(n=i.sent())?[4,zp(t,n.token)]:[3,4];case 2:return i.sent(),[4,Up(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}}))}))}function Jp(t,e,n){return(0,i.mG)(this,void 0,void 0,(function(){var r,o,a;return(0,i.Jh)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,5]),[4,Bp(e,t)];case 1:return r=s.sent(),o=(0,i.pi)((0,i.pi)({},t),{token:r,createTime:Date.now()}),[4,jp(e,o)];case 2:return s.sent(),[2,r];case 3:return a=s.sent(),[4,Qp(e,n)];case 4:throw s.sent(),a;case 5:return[2]}}))}))}function Yp(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return[4,qp(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,jp(t,r)];case 2:return i.sent(),[2,r.token]}}))}))}function Xp(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ap(e)})]}}))}))}function $p(t){return"object"==typeof t&&!!t&&"google.c.a.c_id"in t}function Zp(t){return new Promise((function(e){setTimeout(e,t)}))}var td=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(t){t.waitUntil(e.onPush(t))})),self.addEventListener("pushsubscriptionchange",(function(t){t.waitUntil(e.onSubChange(t))})),self.addEventListener("notificationclick",(function(t){t.waitUntil(e.onNotificationClick(t))}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw Cp.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return(0,i.mG)(this,void 0,void 0,(function(){var n;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,Fp(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null==n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:kp,r.label=2;case 2:return[2,Kp(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},t.prototype.deleteToken=function(){return Qp(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw Cp.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw Cp.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw Cp.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw Cp.create("only-available-in-window")},t.prototype.onMessage=function(){throw Cp.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw Cp.create("only-available-in-window")},t.prototype.onPush=function(t){return(0,i.mG)(this,void 0,void 0,(function(){var e,n,r,o;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return(e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(t){return null}}(t))?[4,id()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(t){return t.some((function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))}(n=i.sent())?[2,rd(n,e)]:(r=!1,e.notification?[4,od(ed(e))]:[3,3]);case 2:i.sent(),r=!0,i.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(o=function(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(e.notification){t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}}(e,t),function(t,e){e.data&&(t.data=e.data)}(e,t),function(t,e){if(e.fcmOptions){t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}}(e,t),e}(e),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(o):this.bgMessageHandler.next(o)),[4,Zp(1e3)]);case 4:return i.sent(),[2]}}))}))},t.prototype.onSubChange=function(t){var e,n;return(0,i.mG)(this,void 0,void 0,(function(){var r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return t.newSubscription?[3,2]:[4,Qp(this.firebaseDependencies,self.registration)];case 1:return i.sent(),[2];case 2:return[4,Fp(this.firebaseDependencies)];case 3:return r=i.sent(),[4,Qp(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,Kp(this.firebaseDependencies,self.registration,null!==(n=null===(e=null==r?void 0:r.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:kp)];case 5:return i.sent(),[2]}}))}))},t.prototype.onNotificationClick=function(t){var e,n;return(0,i.mG)(this,void 0,void 0,(function(){var r,o,a,s,u;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return(r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n.FCM_MSG)?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),(o=function(t){var e,n,r,i=null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action;return i||($p(t.data)?self.location.origin:null)}(r))?(a=new URL(o,self.location.href),s=new URL(self.location.origin),a.host!==s.host?[2]:[4,nd(a)]):[2]):[2];case 1:return(u=i.sent())?[3,4]:[4,self.clients.openWindow(o)];case 2:return u=i.sent(),[4,Zp(3e3)];case 3:return i.sent(),[3,6];case 4:return[4,u.focus()];case 5:u=i.sent(),i.label=6;case 6:return u?(r.messageType=Tp.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,u.postMessage(r)]):[2]}}))}))},t}();function ed(t){var e,n=(0,i.pi)({},t.notification);return n.data=((e={}).FCM_MSG=t,e),n}function nd(t){return(0,i.mG)(this,void 0,void 0,(function(){var e,n,r,o,a,s,u;return(0,i.Jh)(this,(function(c){switch(c.label){case 0:return[4,id()];case 1:e=c.sent();try{for(n=(0,i.XA)(e),r=n.next();!r.done;r=n.next())if(o=r.value,a=new URL(o.url,self.location.href),t.host===a.host)return[2,o]}catch(t){s={error:t}}finally{try{r&&!r.done&&(u=n.return)&&u.call(n)}finally{if(s)throw s.error}}return[2,null]}}))}))}function rd(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=Tp.PUSH_RECEIVED;try{for(var o=(0,i.XA)(t),a=o.next();!a.done;a=o.next())a.value.postMessage(e)}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}function id(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function od(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}var ad=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(t){return e.messageEventListener(t)}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return(0,i.mG)(this,void 0,void 0,(function(){var e,n;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===Tp.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(t){return delete t.messageType,delete t.isFirebaseMessaging,t}(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),$p(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw Cp.create("permission-blocked");return[4,this.updateVapidKey(null==t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null==t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,Kp(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},t.prototype.updateVapidKey=function(t){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=kp),[2]}))}))},t.prototype.updateSwReg=function(t){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw Cp.create("invalid-sw-registration");return this.swRegistration=t,[2]}}))}))},t.prototype.registerDefaultSw=function(){return(0,i.mG)(this,void 0,void 0,(function(){var t,e;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw e=n.sent(),Cp.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}}))}))},t.prototype.deleteToken=function(){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,Qp(this.firebaseDependencies,this.swRegistration)]}}))}))},t.prototype.requestPermission=function(){return(0,i.mG)(this,void 0,void 0,(function(){var t;return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw"denied"===t?Cp.create("permission-blocked"):Cp.create("permission-default")}}))}))},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw Cp.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw Cp.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw Cp.create("invalid-sw-registration");if(this.swRegistration)throw Cp.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw Cp.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw Cp.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return n=function(t){switch(t){case Tp.NOTIFICATION_CLICKED:return"notification_open";case Tp.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:e["google.c.a.c_id"],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},t}();function sd(t){return Cp.create("missing-app-config-values",{valueName:t})}var ud={isSupported:cd};function cd(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}r.Z.INTERNAL.registerComponent(new cr.wA("messaging",(function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw sd("App Configuration Object");if(!t.name)throw sd("App Name");var r=t.options;try{for(var o=(0,i.XA)(["projectId","apiKey","appId","messagingSenderId"]),a=o.next();!a.done;a=o.next()){var s=a.value;if(!r[s])throw sd(s)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!cd())throw Cp.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new td(n):new ad(n)}),"PUBLIC").setServiceProps(ud));var ld="firebasestorage.googleapis.com",hd=function(t){function e(n,r){var i=t.call(this,dd(n),"Firebase Storage: "+r)||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,e.prototype),i}return(0,i.ZT)(e,t),e.prototype.codeEquals=function(t){return dd(t)===this.code},Object.defineProperty(e.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),e}(a.ZR),fd="canceled",pd="invalid-argument";function dd(t){return"storage/"+t}function vd(){return new hd("unknown","An unknown error occurred, please check the error payload for server response.")}function yd(){return new hd(fd,"User canceled the upload/download.")}function md(){return new hd("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function gd(){return new hd("app-deleted","The Firebase app was deleted.")}function bd(t,e){return new hd("invalid-format","String does not match format '"+t+"': "+e)}function wd(t){throw new hd("internal-error","Internal error: "+t)}var _d={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Ed=function(t,e){this.data=t,this.contentType=e||null};function Id(t,e){switch(t){case _d.RAW:return new Ed(Td(e));case _d.BASE64:case _d.BASE64URL:return new Ed(Sd(t,e));case _d.DATA_URL:return new Ed((n=new kd(e)).base64?Sd(_d.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw bd(_d.DATA_URL,"Malformed data URL.")}return Td(e)}(n.rest),new kd(e).contentType)}var n;throw vd()}function Td(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Sd(t,e){switch(t){case _d.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw bd(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case _d.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw bd(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(e)}catch(e){throw bd(t,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var Cd,kd=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw bd(_d.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(r=";base64",(n=i).length>=r.length&&n.substring(n.length-r.length)===r),this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)},Nd={STATE_CHANGED:"state_changed"},Ad="running",Pd="pausing",Od="paused",xd="success",Rd="canceling",Dd="canceled",Ld="error",Md={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Fd(t){switch(t){case Ad:case Pd:case Rd:return Md.RUNNING;case Od:return Md.PAUSED;case xd:return Md.SUCCESS;case Dd:return Md.CANCELED;case Ld:default:return Md.ERROR}}function jd(t){return null!=t}function Ud(t){return"string"==typeof t||t instanceof String}function Vd(t){return qd()&&t instanceof Blob}function qd(){return"undefined"!=typeof Blob}function Bd(t,e,n,r){if(r<e)throw new hd(pd,"Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw new hd(pd,"Invalid value for '"+t+"'. Expected "+n+" or less.")}!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(Cd||(Cd={}));var zd=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Cd.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=Cd.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=Cd.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw wd("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),jd(r))for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return jd(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw wd("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw wd("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw wd("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){jd(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){jd(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},t}(),Wd=function(){function t(){}return t.prototype.createXhrIo=function(){return new zd},t}();function Gd(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Hd(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Gd();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(qd())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}var Kd=function(){function t(t,e){var n=0,r="";Vd(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(Vd(this.data_)){var r=(i=this.data_,o=e,a=n,i.webkitSlice?i.webkitSlice(o,a):i.mozSlice?i.mozSlice(o,a):i.slice?i.slice(o,a):null);return null===r?null:new t(r)}var i,o,a;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(qd()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(Hd.apply(null,r))}var i=e.map((function(t){return Ud(t)?Id(_d.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]})),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}(),Qd=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(n){return new t(e,"")}if(""===n.path)return n;throw new hd("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){var n=null,r="([A-Za-z0-9.\\-_]+)",i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}for(var a=ld.replace(/[.]/g,"\\."),s=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+r+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],u=0;u<s.length;u++){var c=s[u],l=c.regex.exec(e);if(l){var h=l[c.indices.bucket],f=l[c.indices.path];f||(f=""),n=new t(h,f),c.postModify(n);break}}if(null==n)throw function(t){return new hd("invalid-url","Invalid URL '"+t+"'.")}(e);return n},t}();function Jd(t){var e;try{e=JSON.parse(t)}catch(t){return null}return function(t){return"object"==typeof t&&!Array.isArray(t)}(e)?e:null}function Yd(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Xd(t){return"https://"+ld+"/v0"+t}function $d(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}function Zd(t,e){return e}var tv=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Zd},ev=null;function nv(t,e,n){var r=Jd(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new Qd(n,r);return e.makeStorageReference(i)}})}(r,t),r}(t,r,n)}function rv(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var iv=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function ov(t){if(!t)throw vd()}function av(t,e){return function(n,r){var i=nv(t,r,e);return ov(null!==i),i}}function sv(t){return function(e,n){var r,i,o;return 401===e.getStatus()?r=new hd("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(o=t.bucket,r=new hd("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,r=new hd("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function uv(t){var e=sv(t);return function(n,r){var i,o=e(n,r);return 404===n.getStatus()&&(i=t.path,o=new hd("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function cv(t,e,n){var r=Xd(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new iv(r,"GET",av(t,n),i);return o.errorHandler=uv(e),o}function lv(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=Xd(e.bucketOnlyServerUrl()),s=t.maxOperationRetryTime,u=new iv(a,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=Jd(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var a=o[i].replace(/\/$/,""),s=t.makeStorageReference(new Qd(e,a));r.prefixes.push(s)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var l=c[u];s=t.makeStorageReference(new Qd(e,l.name)),r.items.push(s)}return r}(t,e,r)}(t,e,r);return ov(null!==i),i}}(t,e.bucket),s);return u.urlParams=o,u.errorHandler=sv(e),u}function hv(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var fv=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function pv(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){ov(!1)}return ov(!!n&&-1!==(e||["active"]).indexOf(n)),n}var dv=262144;var vv=function(t,e,n){if(function(t){return"function"==typeof t}(t)||jd(e)||jd(n))this.next=t,this.error=e||null,this.complete=n||null;else{var r=t;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}},yv=function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o};function mv(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var gv=function(){function t(t,e,n,r,i,o){var a=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.service_=e,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=Ad,this.errorHandler_=function(t){a.request_=null,a.chunkMultiplier_=1,t.codeEquals(fd)?(a.needToFetchStatus_=!0,a.completeTransitions_()):(a.error_=t,a.transition_(Ld))},this.metadataErrorHandler_=function(t){a.request_=null,t.codeEquals(fd)?a.completeTransitions_():(a.error_=t,a.transition_(Ld))},this.promise_=new Promise((function(t,e){a.resolve_=t,a.reject_=e,a.start_()})),this.promise_.then(null,(function(){}))}return t.prototype.makeProgressCallback_=function(){var t=this,e=this.transferred_;return function(n){return t.updateProgress_(e+n)}},t.prototype.shouldDoResumable_=function(t){return t.size()>262144},t.prototype.start_=function(){this.state_===Ad&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},t.prototype.resolveToken_=function(t){var e=this;this.service_.getAuthToken().then((function(n){switch(e.state_){case Ad:t(n);break;case Rd:e.transition_(Dd);break;case Pd:e.transition_(Od)}}))},t.prototype.createResumable_=function(){var t=this;this.resolveToken_((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=hv(e,r,i),s={name:a.fullPath},u=Xd(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},l=rv(a,n),h=t.maxUploadRetryTime,f=new iv(u,"POST",(function(t){var e;pv(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){ov(!1)}return ov(Ud(e)),e}),h);return f.urlParams=s,f.headers=c,f.body=l,f.errorHandler=sv(e),f}(t.service_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.service_.makeRequest(n,e);t.request_=r,r.getPromise().then((function(e){t.request_=null,t.uploadUrl_=e,t.needToFetchStatus_=!1,t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.fetchStatus_=function(){var t=this,e=this.uploadUrl_;this.resolveToken_((function(n){var r=function(t,e,n,r){var i=t.maxUploadRetryTime,o=new iv(n,"POST",(function(t){var e=pv(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){ov(!1)}n||ov(!1);var i=Number(n);return ov(!isNaN(i)),new fv(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=sv(e),o}(t.service_,t.location_,e,t.blob_),i=t.service_.makeRequest(r,n);t.request_=i,i.getPromise().then((function(e){e=e,t.request_=null,t.updateProgress_(e.current),t.needToFetchStatus_=!1,e.finalized&&(t.needToFetchMetadata_=!0),t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.continueUpload_=function(){var t=this,e=dv*this.chunkMultiplier_,n=new fv(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_((function(i){var o;try{o=function(t,e,n,r,i,o,a,s){var u=new fv(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new hd("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f=h+l,p={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},d=r.slice(h,f);if(null===d)throw md();var v=e.maxUploadRetryTime,y=new iv(n,"POST",(function(t,n){var i,a=pv(t,["active","final"]),s=u.current+l,c=r.size();return i="final"===a?av(e,o)(t,n):null,new fv(s,c,"final"===a,i)}),v);return y.headers=p,y.body=d.uploadData(),y.progressCallback=s||null,y.errorHandler=sv(t),y}(t.location_,t.service_,r,t.blob_,e,t.mappings_,n,t.makeProgressCallback_())}catch(e){return t.error_=e,void t.transition_(Ld)}var a=t.service_.makeRequest(o,i);t.request_=a,a.getPromise().then((function(e){t.increaseMultiplier_(),t.request_=null,t.updateProgress_(e.current),e.finalized?(t.metadata_=e.metadata,t.transition_(xd)):t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.increaseMultiplier_=function(){dv*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},t.prototype.fetchMetadata_=function(){var t=this;this.resolveToken_((function(e){var n=cv(t.service_,t.location_,t.mappings_),r=t.service_.makeRequest(n,e);t.request_=r,r.getPromise().then((function(e){t.request_=null,t.metadata_=e,t.transition_(xd)}),t.metadataErrorHandler_)}))},t.prototype.oneShotUpload_=function(){var t=this;this.resolveToken_((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=hv(e,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+rv(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",h=Kd.getBlob(c,r,l);if(null===h)throw md();var f={name:u.fullPath},p=Xd(o),d=t.maxUploadRetryTime,v=new iv(p,"POST",av(t,n),d);return v.urlParams=f,v.headers=a,v.body=h.uploadData(),v.errorHandler=sv(e),v}(t.service_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.service_.makeRequest(n,e);t.request_=r,r.getPromise().then((function(e){t.request_=null,t.metadata_=e,t.updateProgress_(t.blob_.size()),t.transition_(xd)}),t.errorHandler_)}))},t.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},t.prototype.transition_=function(t){if(this.state_!==t)switch(t){case Rd:case Pd:this.state_=t,null!==this.request_&&this.request_.cancel();break;case Ad:var e=this.state_===Od;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case Od:this.state_=t,this.notifyObservers_();break;case Dd:this.error_=yd(),this.state_=t,this.notifyObservers_();break;case Ld:case xd:this.state_=t,this.notifyObservers_()}},t.prototype.completeTransitions_=function(){switch(this.state_){case Pd:this.transition_(Od);break;case Rd:this.transition_(Dd);break;case Ad:this.start_()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Fd(this.state_);return new yv(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new vv(e,n,r);return this.addObserver_(o),function(){i.removeObserver_(o)}},t.prototype.then=function(t,e){return this.promise_.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},t.prototype.removeObserver_=function(t){var e=this.observers_.indexOf(t);-1!==e&&this.observers_.splice(e,1)},t.prototype.notifyObservers_=function(){var t=this;this.finishPromise_(),this.observers_.slice().forEach((function(e){t.notifyObserver_(e)}))},t.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(Fd(this.state_)){case Md.SUCCESS:mv(this.resolve_.bind(null,this.snapshot))();break;case Md.CANCELED:case Md.ERROR:mv(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},t.prototype.notifyObserver_=function(t){switch(Fd(this.state_)){case Md.RUNNING:case Md.PAUSED:t.next&&mv(t.next.bind(t,this.snapshot))();break;case Md.SUCCESS:t.complete&&mv(t.complete.bind(t))();break;case Md.CANCELED:case Md.ERROR:t.error&&mv(t.error.bind(t,this.error_))();break;default:t.error&&mv(t.error.bind(t,this.error_))()}},t.prototype.resume=function(){var t=this.state_===Od||this.state_===Pd;return t&&this.transition_(Ad),t},t.prototype.pause=function(){var t=this.state_===Ad;return t&&this.transition_(Pd),t},t.prototype.cancel=function(){var t=this.state_===Ad||this.state_===Pd;return t&&this.transition_(Rd),t},t}(),bv=function(){function t(t,e){this.service=t,this.location=e instanceof Qd?e:Qd.makeFromUrl(e)}return t.prototype.toString=function(){return"gs://"+this.location.bucket+"/"+this.location.path},t.prototype.newRef=function(e,n){return new t(e,n)},t.prototype.mappings=function(){return function(){if(ev)return ev;var t=[];t.push(new tv("bucket")),t.push(new tv("generation")),t.push(new tv("metageneration")),t.push(new tv("name","fullPath",!0));var e=new tv("name");e.xform=function(t,e){return function(t){return!Ud(t)||t.length<2?t:Yd(t)}(e)},t.push(e);var n=new tv("size");return n.xform=function(t,e){return jd(e)?Number(e):e},t.push(n),t.push(new tv("timeCreated")),t.push(new tv("updated")),t.push(new tv("md5Hash",null,!0)),t.push(new tv("cacheControl",null,!0)),t.push(new tv("contentDisposition",null,!0)),t.push(new tv("contentEncoding",null,!0)),t.push(new tv("contentLanguage",null,!0)),t.push(new tv("contentType",null,!0)),t.push(new tv("metadata","customMetadata",!0)),ev=t}()},t.prototype.child=function(t){var e=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(this.location.path,t),n=new Qd(this.location.bucket,e);return this.newRef(this.service,n)},Object.defineProperty(t.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this.location.path);if(null===t)return null;var e=new Qd(this.location.bucket,t);return this.newRef(this.service,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){var t=new Qd(this.location.bucket,"");return this.newRef(this.service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return Yd(this.location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this.service},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return void 0===e&&(e=null),this.throwIfRoot_("put"),new gv(this,this.service,this.location,this.mappings(),new Kd(t),e)},t.prototype.putString=function(t,e,n){void 0===e&&(e=_d.RAW),this.throwIfRoot_("putString");var r=Id(e,t),i=Object.assign({},n);return!jd(i.contentType)&&jd(r.contentType)&&(i.contentType=r.contentType),new gv(this,this.service,this.location,this.mappings(),new Kd(r.data,!0),i)},t.prototype.delete=function(){var t=this;return this.throwIfRoot_("delete"),this.service.getAuthToken().then((function(e){var n=function(t,e){var n=Xd(e.fullServerUrl()),r=t.maxOperationRetryTime,i=new iv(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=uv(e),i}(t.service,t.location);return t.service.makeRequest(n,e).getPromise()}))},t.prototype.listAll=function(){var t={prefixes:[],items:[]};return this.listAllHelper(t).then((function(){return t}))},t.prototype.listAllHelper=function(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o,a;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return n={pageToken:e},[4,this.list(n)];case 1:return r=i.sent(),(o=t.prefixes).push.apply(o,r.prefixes),(a=t.items).push.apply(a,r.items),null==r.nextPageToken?[3,3]:[4,this.listAllHelper(t,r.nextPageToken)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))},t.prototype.list=function(t){var e=this,n=t||{};return"number"==typeof n.maxResults&&Bd("options.maxResults",1,1e3,n.maxResults),this.service.getAuthToken().then((function(t){var r=lv(e.service,e.location,"/",n.pageToken,n.maxResults);return e.service.makeRequest(r,t).getPromise()}))},t.prototype.getMetadata=function(){var t=this;return this.throwIfRoot_("getMetadata"),this.service.getAuthToken().then((function(e){var n=cv(t.service,t.location,t.mappings());return t.service.makeRequest(n,e).getPromise()}))},t.prototype.updateMetadata=function(t){var e=this;return this.throwIfRoot_("updateMetadata"),this.service.getAuthToken().then((function(n){var r=function(t,e,n,r){var i=Xd(e.fullServerUrl()),o=rv(n,r),a=t.maxOperationRetryTime,s=new iv(i,"PATCH",av(t,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=uv(e),s}(e.service,e.location,t,e.mappings());return e.service.makeRequest(r,n).getPromise()}))},t.prototype.getDownloadURL=function(){var t=this;return this.throwIfRoot_("getDownloadURL"),this.service.getAuthToken().then((function(e){var n=function(t,e,n){var r=Xd(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new iv(r,"GET",function(t,e){return function(n,r){var i=nv(t,r,e);return ov(null!==i),function(t,e){var n=Jd(e);if(null===n)return null;if(!Ud(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map((function(e){var n=t.bucket,r=t.fullPath;return Xd("/b/"+i(n)+"/o/"+i(r))+$d({alt:"media",token:e})}))[0]}(i,r)}}(t,n),i);return o.errorHandler=uv(e),o}(t.service,t.location,t.mappings());return t.service.makeRequest(n,e).getPromise().then((function(t){if(null===t)throw new hd("no-download-url","The given file does not have any download URLs.");return t}))}))},t.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw function(t){return new hd("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(t)},t}(),wv=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}(),_v=function(){function t(t,e,n,r,i,o,a,s,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,a=n.xhr;if(n.wasSuccessCode)try{var s=t.callback_(a,a.getResponseText());!function(t){return void 0!==t}(s)?i():i(s)}catch(t){o(t)}else null!==a?((r=vd()).serverResponse=a.getResponseText(),t.errorCallback_?o(t.errorCallback_(a,r)):o(r)):n.canceled?o(r=t.appDelete_?gd():yd()):o(r=new hd("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new Ev(!1,null,!0)):this.backoffId_=function(e,n,r){var o=1,a=null,s=!1,u=0;function c(){return 2===u}var l=!1;function h(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];l||(l=!0,n.apply(null,t))}function f(e){a=setTimeout((function(){a=null,function(e,n){if(n)e(!1,new Ev(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===Cd.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var a=-1!==t.successCodes_.indexOf(o);e(!0,new Ev(a,n))}else{var s=n.getErrorCode()===Cd.ABORT;e(!1,new Ev(!1,null,s))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}(p,c())}),e)}function p(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!l)if(t)h.call.apply(h,(0,i.pr)([null,t],e));else{var r;c()||s?h.call.apply(h,(0,i.pr)([null,t],e)):(o<64&&(o*=2),1===u?(u=2,r=0):r=1e3*(o+Math.random()),f(r))}}var d=!1;function v(t){d||(d=!0,l||(null!==a?(t||(u=2),clearTimeout(a),f(0)):t||(u=1)))}return f(0),setTimeout((function(){s=!0,v(!0)}),r),v}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),Ev=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};var Iv=function(){function t(e,n,r,i){var o;this.bucket_=null,this.appId_=null,this.deleted_=!1,this.app_=e,this.authProvider_=n,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e5,this.requests_=new Set,this.pool_=r,this.bucket_=null!=i?Qd.makeFromBucketSpec(i):t.extractBucket_(null===(o=this.app_)||void 0===o?void 0:o.options),this.internals_=new Tv(this)}return t.extractBucket_=function(t){var e=null==t?void 0:t.storageBucket;return null==e?null:Qd.makeFromBucketSpec(e)},t.prototype.getAuthToken=function(){return(0,i.mG)(this,void 0,void 0,(function(){var t,e;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return(t=this.authProvider_.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requests_.forEach((function(t){return t.cancel()})),this.requests_.clear()},t.prototype.makeStorageReference=function(t){return new bv(this,t)},t.prototype.makeRequest=function(t,e){var n=this;if(this.deleted_)return new wv(gd());var i=function(t,e,n,i){var o=$d(t.urlParams),a=t.url+o,s=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(s,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(s,n),function(t){var e=void 0!==r.Z?r.Z.SDK_VERSION:"AppManager";t["X-Firebase-Storage-Version"]="webjs/"+e}(s),new _v(a,t.method,s,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this.appId_,e,this.pool_);return this.requests_.add(i),i.getPromise().then((function(){return n.requests_.delete(i)}),(function(){return n.requests_.delete(i)})),i},t.prototype.ref=function(t){if(/^[A-Za-z]+:\/\//.test(t))throw new hd(pd,"Expected child path but got a URL, use refFromURL instead.");if(null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var e=new bv(this,this.bucket_);return null!=t?e.child(t):e},t.prototype.refFromURL=function(t){if(!/^[A-Za-z]+:\/\//.test(t))throw new hd(pd,"Expected full URL but got a child path, use ref instead.");try{Qd.makeFromUrl(t)}catch(t){throw new hd(pd,"Expected valid full URL but got an invalid one.")}return new bv(this,t)},Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this.maxUploadRetryTime_},enumerable:!1,configurable:!0}),t.prototype.setMaxUploadRetryTime=function(t){Bd("time",0,Number.POSITIVE_INFINITY,t),this.maxUploadRetryTime_=t},Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this.maxOperationRetryTime_},enumerable:!1,configurable:!0}),t.prototype.setMaxOperationRetryTime=function(t){Bd("time",0,Number.POSITIVE_INFINITY,t),this.maxOperationRetryTime_=t},Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!1,configurable:!0}),t}(),Tv=function(){function t(t){this.service_=t}return t.prototype.delete=function(){return this.service_.deleteApp(),Promise.resolve()},t}();function Sv(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new Iv(n,r,new Wd,e)}!function(t){var e={TaskState:Md,TaskEvent:Nd,StringFormat:_d,Storage:Iv,Reference:bv};t.INTERNAL.registerComponent(new cr.wA("storage",Sv,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.4.1")}(r.Z);var Cv,kv,Nv,Av="0.4.4",Pv=Av,Ov="FB-PERF-TRACE-MEASURE",xv="_wt_",Rv="_fcp",Dv="_fid",Lv="@firebase/performance/config",Mv="@firebase/performance/configexpire",Fv="Performance",jv=((Cv={})["trace started"]="Trace {$traceName} was started before.",Cv["trace stopped"]="Trace {$traceName} is not running.",Cv["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",Cv["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",Cv["no window"]="Window is not available.",Cv["no app id"]="App id is not available.",Cv["no project id"]="Project id is not available.",Cv["no api key"]="Api key is not available.",Cv["invalid cc log"]="Attempted to queue invalid cc event",Cv["FB not default"]="Performance can only start when Firebase app instance is the default one.",Cv["RC response not ok"]="RC response is not ok",Cv["invalid attribute name"]="Attribute name {$attributeName} is invalid.",Cv["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",Cv["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",Cv["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",Cv),Uv=new a.LL("performance",Fv,jv),Vv=new o.Yd(Fv);Vv.logLevel=o.in.INFO;var qv,Bv=function(){function t(t){if(this.window=t,!t)throw Uv.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!(0,a.hl)()||(Vv.info("IndexedDB is not supported by current browswer"),!1):(Vv.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver((function(t){for(var n=0,r=t.getEntries();n<r.length;n++){var i=r[n];e(i)}})).observe({entryTypes:[t]})},t.getInstance=function(){return void 0===kv&&(kv=new t(Nv)),kv},t}();function zv(t,e){var n=t.length-e.length;if(n<0||n>1)throw Uv.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var Wv,Gv,Hv=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=zv("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=zv("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw Uv.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw Uv.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw Uv.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===qv&&(qv=new t),qv},t}();function Kv(){return Wv}!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN"}(Gv||(Gv={}));var Qv=["firebase_","google_","ga_"],Jv=new RegExp("^[a-zA-Z]\\w*$");function Yv(){var t=Bv.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function Xv(){switch(Bv.getInstance().document.visibilityState){case"visible":return Gv.VISIBLE;case"hidden":return Gv.HIDDEN;default:return Gv.UNKNOWN}}function $v(){var t=Bv.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}var Zv="Could not fetch config, will use default configs";function ty(t){if(!t)return t;var e=Hv.getInstance(),n=t.entries||{};return void 0!==n.fpr_enabled?e.loggingEnabled="true"===String(n.fpr_enabled):e.loggingEnabled=true,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=ey(e.tracesSamplingRate),e.logNetworkAfterSampling=ey(e.networkRequestsSamplingRate),t}function ey(t){return Math.random()<=t}var ny,ry=1;function iy(){return ry=2,ny=ny||function(){var t=Bv.getInstance().document;return new Promise((function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()}))}().then((function(){return(t=Hv.getInstance().installationsService.getId()).then((function(t){Wv=t})),t;var t})).then((function(t){return function(t){var e=function(){var t=Bv.getInstance().localStorage;if(t){var e=t.getItem(Mv);if(e&&Number(e)>Date.now()){var n=t.getItem(Lv);if(n)try{return JSON.parse(n)}catch(t){return}}}}();return e?(ty(e),Promise.resolve()):function(t){return(e=Hv.getInstance().installationsService.getToken(),e.then((function(t){})),e).then((function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+Hv.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+Hv.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:Hv.getInstance().getAppId(),app_version:Pv,sdk_version:"0.0.1"})});return fetch(r).then((function(t){if(t.ok)return t.json();throw Uv.create("RC response not ok")}))})).catch((function(){Vv.info(Zv)}));var e}(t).then(ty).then((function(t){return function(t){var e=Bv.getInstance().localStorage;t&&e&&(e.setItem(Lv,JSON.stringify(t)),e.setItem(Mv,String(Date.now()+60*Hv.getInstance().configTimeToLive*60*1e3)))}(t)}),(function(){}))}(t)})).then((function(){return oy()}),(function(){return oy()}))}function oy(){ry=3}var ay,sy=1e4,uy=3,cy=[],ly=!1;function hy(t){setTimeout((function(){if(0!==uy)return cy.length?void function(){var t=(0,i.pr)(cy);cy=[];var e=t.map((function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}}));(function(t,e){return function(t){var e=Hv.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then((function(t){return t.ok||Vv.info("Call to Firebase backend failed."),t.json()})).then((function(t){var n=Number(t.nextRequestWaitMillis),r=sy;isNaN(n)||(r=Math.max(n,r));var o=t.logResponseDetails;Array.isArray(o)&&o.length>0&&"RETRY_REQUEST_LATER"===o[0].responseAction&&(cy=(0,i.pr)(e,cy),Vv.info("Retry transport request later.")),uy=3,hy(r)}))})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Hv.getInstance().logSource,log_event:e},t).catch((function(){cy=(0,i.pr)(t,cy),uy--,Vv.info("Tries left: "+uy+"."),hy(sy)}))}():hy(sy)}),t)}function fy(t){if(!t.eventTime||!t.message)throw Uv.create("invalid cc log");cy=(0,i.pr)(cy,[t])}function py(t,e){ay||(ay=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];fy({message:t.apply(void 0,e),eventTime:Date.now()})}}(yy)),ay(t,e)}function dy(t){var e=Hv.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&Bv.getInstance().requiredApisAvailable()&&(t.isAuto&&Xv()!==Gv.VISIBLE||(3===ry?vy(t):iy().then((function(){return vy(t)}),(function(){return vy(t)}))))}function vy(t){if(Kv()){var e=Hv.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout((function(){return py(t,1)}),0)}}function yy(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:my(),network_request_metric:r},JSON.stringify(i)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:my(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,i}function my(){return{google_app_id:Hv.getInstance().getAppId(),app_instance_id:Kv(),web_app_info:{sdk_version:Pv,page_url:Bv.getInstance().getUrl(),service_worker_status:Yv(),visibility_state:Xv(),effective_connection_type:$v()},application_process_state:0}}var gy=["_fp",Rv,Dv],by=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=Bv.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw Uv.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw Uv.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),dy(this)},t.prototype.record=function(t,e,n){if(t<=0)throw Uv.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw Uv.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=(0,i.pi)({},n.attributes)),n&&n.metrics)for(var r=0,o=Object.keys(n.metrics);r<o.length;r++){var a=o[r];isNaN(Number(n.metrics[a]))||(this.counters[a]=Number(Math.floor(n.metrics[a])))}dy(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(!function(t,e){return!(0===t.length||t.length>100)&&(e&&e.startsWith(xv)&&gy.indexOf(t)>-1||!t.startsWith("_"))}(t,this.name))throw Uv.create("invalid custom metric name",{customMetricName:t});var n,r;this.counters[t]=(n=e,(r=Math.floor(n))<n&&Vv.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n=function(t){return!(0===t.length||t.length>40||Qv.some((function(e){return t.startsWith(e)}))||!t.match(Jv))}(t),r=function(t){return 0!==t.length&&t.length<=100}(e);if(n&&r)this.customAttributes[t]=e;else{if(!n)throw Uv.create("invalid attribute name",{attributeName:t});if(!r)throw Uv.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return(0,i.pi)({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=Bv.getInstance().getUrl();if(i){var o=new t(xv+i,!0),a=Math.floor(1e3*Bv.getInstance().getTimeOrigin());if(o.setStartTime(a),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd))),n){var s=n.find((function(t){return"first-paint"===t.name}));s&&s.startTime&&o.putMetric("_fp",Math.floor(1e3*s.startTime));var u=n.find((function(t){return"first-contentful-paint"===t.name}));u&&u.startTime&&o.putMetric(Rv,Math.floor(1e3*u.startTime)),r&&o.putMetric(Dv,Math.floor(1e3*r))}dy(o)}},t.createUserTimingTrace=function(e){dy(new t(e,!1,e))},t}();function wy(t){var e=t;if(e&&void 0!==e.responseStart){var n=Bv.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=Hv.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout((function(){return py(t,0)}),0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}function _y(){Kv()&&(setTimeout((function(){return function(){var t=Bv.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout((function(){by.createOobTrace(e,n),r=void 0}),5e3);t.onFirstInputDelay((function(t){r&&(clearTimeout(r),by.createOobTrace(e,n,t))}))}else by.createOobTrace(e,n)}()}),0),setTimeout((function(){return function(){for(var t=Bv.getInstance(),e=0,n=t.getEntriesByType("resource");e<n.length;e++)wy(n[e]);t.setupObserver("resource",wy)}()}),0),setTimeout((function(){return function(){for(var t=Bv.getInstance(),e=0,n=t.getEntriesByType("measure");e<n.length;e++)Ey(n[e]);t.setupObserver("measure",Ey)}()}),0))}function Ey(t){var e=t.name;e.substring(0,Ov.length)!==Ov&&by.createUserTimingTrace(e)}var Iy=function(){function t(t){this.app=t,Bv.getInstance().requiredApisAvailable()&&(0,a.eu)().then((function(t){t&&(ly||(hy(5500),ly=!0),iy().then(_y,_y))})).catch((function(t){Vv.info("Environment doesn't support IndexedDB: "+t)}))}return t.prototype.trace=function(t){return new by(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return Hv.getInstance().instrumentationEnabled},set:function(t){Hv.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return Hv.getInstance().dataCollectionEnabled},set:function(t){Hv.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}();!function(t){t.INTERNAL.registerComponent(new cr.wA("performance",(function(t){return function(t,e){if("[DEFAULT]"!==t.name)throw Uv.create("FB not default");if("undefined"==typeof window)throw Uv.create("no window");return function(t){Nv=t}(window),Hv.getInstance().firebaseAppInstance=t,Hv.getInstance().installationsService=e,new Iy(t)}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC")),t.registerVersion("@firebase/performance",Av)}(r.Z);var Ty,Sy,Cy="https://www.googletagmanager.com/gtag/js";!function(t){t.EVENT="event",t.SET="set",t.CONFIG="config"}(Ty||(Ty={})),function(t){t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results"}(Sy||(Sy={}));var ky,Ny=new o.Yd("@firebase/analytics");function Ay(t,e,n,r,o,a){return(0,i.mG)(this,void 0,void 0,(function(){var s,u,c,l;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:s=r[o],i.label=1;case 1:return i.trys.push([1,7,,8]),s?[4,e[s]]:[3,3];case 2:return i.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return u=i.sent(),(c=u.find((function(t){return t.measurementId===o})))?[4,e[c.appId]]:[3,6];case 5:i.sent(),i.label=6;case 6:return[3,8];case 7:return l=i.sent(),Ny.error(l),[3,8];case 8:return t(Ty.CONFIG,o,a),[2]}}))}))}function Py(t,e,n,r,o){return(0,i.mG)(this,void 0,void 0,(function(){var a,s,u,c,l,h,f,p;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),a=[],o&&o.send_to?(s=o.send_to,Array.isArray(s)||(s=[s]),[4,Promise.all(n)]):[3,2];case 1:for(u=i.sent(),c=function(t){var n=u.find((function(e){return e.measurementId===t})),r=n&&e[n.appId];if(!r)return a=[],"break";a.push(r)},l=0,h=s;l<h.length&&(f=h[l],"break"!==c(f));l++);i.label=2;case 2:return 0===a.length&&(a=Object.values(e)),[4,Promise.all(a)];case 3:return i.sent(),t(Ty.EVENT,r,o||{}),[3,5];case 4:return p=i.sent(),Ny.error(p),[3,5];case 5:return[2]}}))}))}var Oy=((ky={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",ky["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",ky["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",ky["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",ky["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",ky["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",ky["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",ky["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',ky["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',ky),xy=new a.LL("analytics","Analytics",Oy),Ry=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function Dy(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function Ly(t){var e;return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o,a,s,u,c;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return n=t.appId,r=t.apiKey,o={method:"GET",headers:Dy(r)},a="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(a,o)];case 1:if(200===(s=i.sent()).status||304===s.status)return[3,6];u="",i.label=2;case 2:return i.trys.push([2,4,,5]),[4,s.json()];case 3:return c=i.sent(),(null===(e=c.error)||void 0===e?void 0:e.message)&&(u=c.error.message),[3,5];case 4:return i.sent(),[3,5];case 5:throw xy.create("config-fetch-failed",{httpStatus:s.status,responseMessage:u});case 6:return[2,s.json()]}}))}))}function My(t,e,n,r){var o=e.throttleEndTimeMillis,s=e.backoffCount;return void 0===r&&(r=Ry),(0,i.mG)(this,void 0,void 0,(function(){var e,u,c,l,h,f,p;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:e=t.appId,u=t.measurementId,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,Fy(n,o)];case 2:return i.sent(),[3,4];case 3:if(c=i.sent(),u)return Ny.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+u+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:e,measurementId:u}];throw c;case 4:return i.trys.push([4,6,,7]),[4,Ly(t)];case 5:return l=i.sent(),r.deleteThrottleMetadata(e),[2,l];case 6:if(!function(t){if(!(t instanceof a.ZR&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(h=i.sent())){if(r.deleteThrottleMetadata(e),u)return Ny.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+u+' provided in the "measurementId" field in the local Firebase config. ['+h.message+"]"),[2,{appId:e,measurementId:u}];throw h}return f=503===Number(h.customData.httpStatus)?(0,a.$s)(s,r.intervalMillis,30):(0,a.$s)(s,r.intervalMillis),p={throttleEndTimeMillis:Date.now()+f,backoffCount:s+1},r.setThrottleMetadata(e,p),Ny.debug("Calling attemptFetch again in "+f+" millis"),[2,My(t,p,n,r)];case 7:return[2]}}))}))}function Fy(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(xy.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var jy=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}();var Uy,Vy,qy={},By=[],zy={},Wy="dataLayer",Gy="gtag",Hy=!1;function Ky(t){if(Hy)throw xy.create("already-initialized");t.dataLayerName&&(Wy=t.dataLayerName),t.gtagName&&(Gy=t.gtagName)}function Qy(t,e){!function(){var t=[];if((0,a.ru)()&&t.push("This is a browser extension environment."),(0,a.zI)()||t.push("Cookies are not available."),t.length>0){var e=t.map((function(t,e){return"("+(e+1)+") "+t})).join(" "),n=xy.create("invalid-analytics-context",{errorInfo:e});Ny.warn(n.message)}}();var n=t.options.appId;if(!n)throw xy.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw xy.create("no-api-key");Ny.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=qy[n])throw xy.create("already-exists",{id:n});if(!Hy){(function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(Cy))return r}return null})()||function(t){var e=document.createElement("script");e.src=Cy+"?l="+t,e.async=!0,document.head.appendChild(e)}(Wy),function(t){var e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(Wy);var r=function(t,e,n,r,o){var a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[o]&&"function"==typeof window[o]&&(a=window[o]),window[o]=function(t,e,n,r){return function(o,a,s){return(0,i.mG)(this,void 0,void 0,(function(){var u;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,6,,7]),o!==Ty.EVENT?[3,2]:[4,Py(t,e,n,a,s)];case 1:return i.sent(),[3,5];case 2:return o!==Ty.CONFIG?[3,4]:[4,Ay(t,e,n,r,a,s)];case 3:return i.sent(),[3,5];case 4:t(Ty.SET,a),i.label=5;case 5:return[3,7];case 6:return u=i.sent(),Ny.error(u),[3,7];case 7:return[2]}}))}))}}(a,t,e,n),{gtagCore:a,wrappedGtag:window[o]}}(qy,By,zy,Wy,Gy),o=r.wrappedGtag,s=r.gtagCore;Vy=o,Uy=s,Hy=!0}return qy[n]=function(t,e,n,r,o){return(0,i.mG)(this,void 0,void 0,(function(){var s,u,c,l,h,f,p;return(0,i.Jh)(this,(function(d){switch(d.label){case 0:return(s=function(t,e,n){return void 0===e&&(e=Ry),(0,i.mG)(this,void 0,void 0,(function(){var n,r,o,a,s,u,c=this;return(0,i.Jh)(this,(function(l){if(n=t.options,r=n.appId,o=n.apiKey,a=n.measurementId,!r)throw xy.create("no-app-id");if(!o){if(a)return[2,{measurementId:a,appId:r}];throw xy.create("no-api-key")}return s=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new jy,setTimeout((function(){return(0,i.mG)(c,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){return u.abort(),[2]}))}))}),6e4),[2,My({appId:r,apiKey:o,measurementId:a},s,u,e)]}))}))}(t)).then((function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&Ny.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(t){return Ny.error(t)})),e.push(s),u=function(){return(0,i.mG)(this,void 0,void 0,(function(){var t;return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return(0,a.hl)()?[3,1]:(Ny.warn(xy.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,(0,a.eu)()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),Ny.warn(xy.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(t){return t?r.getId():void 0})),[4,Promise.all([s,u])];case 1:return c=d.sent(),l=c[0],h=c[1],o("js",new Date),(p={}).origin="firebase",p.update=!0,f=p,null!=h&&(f.firebase_id=h),o(Ty.CONFIG,l.measurementId,f),[2,l.measurementId]}}))}))}(t,By,zy,e,Uy),{app:t,logEvent:function(t,e,r){(function(t,e,n,r,o){return(0,i.mG)(this,void 0,void 0,(function(){var a,s;return(0,i.Jh)(this,(function(u){switch(u.label){case 0:return o&&o.global?(t(Ty.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:a=u.sent(),s=(0,i.pi)((0,i.pi)({},r),{send_to:a}),t(Ty.EVENT,n,s),u.label=3;case 3:return[2]}}))}))})(Vy,qy[n],t,e,r).catch((function(t){return Ny.error(t)}))},setCurrentScreen:function(t,e){(function(t,e,n,r){return(0,i.mG)(this,void 0,void 0,(function(){var o;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return r&&r.global?(t(Ty.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:o=i.sent(),t(Ty.CONFIG,o,{update:!0,screen_name:n}),i.label=3;case 3:return[2]}}))}))})(Vy,qy[n],t,e).catch((function(t){return Ny.error(t)}))},setUserId:function(t,e){(function(t,e,n,r){return(0,i.mG)(this,void 0,void 0,(function(){var o;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return r&&r.global?(t(Ty.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:o=i.sent(),t(Ty.CONFIG,o,{update:!0,user_id:n}),i.label=3;case 3:return[2]}}))}))})(Vy,qy[n],t,e).catch((function(t){return Ny.error(t)}))},setUserProperties:function(t,e){(function(t,e,n,r){return(0,i.mG)(this,void 0,void 0,(function(){var o,a,s,u,c;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:if(!r||!r.global)return[3,1];for(o={},a=0,s=Object.keys(n);a<s.length;a++)u=s[a],o["user_properties."+u]=n[u];return t(Ty.SET,o),[2,Promise.resolve()];case 1:return[4,e];case 2:c=i.sent(),t(Ty.CONFIG,c,{update:!0,user_properties:n}),i.label=3;case 3:return[2]}}))}))})(Vy,qy[n],t,e).catch((function(t){return Ny.error(t)}))},setAnalyticsCollectionEnabled:function(t){(function(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}}))}))})(qy[n],t).catch((function(t){return Ny.error(t)}))},INTERNAL:{delete:function(){return delete qy[n],Promise.resolve()}}}}var Jy="analytics";function Yy(){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:if((0,a.ru)())return[2,!1];if(!(0,a.zI)())return[2,!1];if(!(0,a.hl)())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(0,a.eu)()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}!function(t){t.INTERNAL.registerComponent(new cr.wA(Jy,(function(t){return Qy(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:Ky,EventName:Sy,isSupported:Yy})),t.INTERNAL.registerComponent(new cr.wA("analytics-internal",(function(t){try{return{logEvent:t.getProvider(Jy).getImmediate().logEvent}}catch(t){throw xy.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),t.registerVersion("@firebase/analytics","0.6.2")}(r.Z);var Xy,$y=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return(0,i.mG)(this,void 0,void 0,(function(){var e,n,r,o,a;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=i.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return o=i.sent(),a=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===o.status&&a.push(this.storage.setLastSuccessfulFetchResponse(o)),[4,Promise.all(a)];case 3:return i.sent(),[2,o]}}))}))},t}(),Zy=((Xy={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",Xy["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",Xy["registration-api-key"]="Undefined API key. Check Firebase app initialization.",Xy["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",Xy["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",Xy["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",Xy["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",Xy["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",Xy["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",Xy["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',Xy["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',Xy["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",Xy["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",Xy),tm=new a.LL("remoteconfig","Remote Config",Zy),em=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return(0,i.mG)(this,void 0,void 0,(function(){var e,n,r,o,a,s,u,c,l,h,f,p,d,v,y,m,g,b,w;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=i.sent(),n=e[0],r=e[1],o=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",a=o+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},u={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:(void 0===_&&(_=navigator),_.languages&&_.languages[0]||_.language)},c={method:"POST",headers:s,body:JSON.stringify(u)},l=fetch(a,c),h=new Promise((function(e,n){t.signal.addEventListener((function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)}))})),i.label=2;case 2:return i.trys.push([2,5,,6]),[4,Promise.race([l,h])];case 3:return i.sent(),[4,l];case 4:return f=i.sent(),[3,6];case 5:throw p=i.sent(),d="fetch-client-network","AbortError"===p.name&&(d="fetch-timeout"),tm.create(d,{originalErrorMessage:p.message});case 6:if(v=f.status,y=f.headers.get("ETag")||void 0,200!==f.status)return[3,11];b=void 0,i.label=7;case 7:return i.trys.push([7,9,,10]),[4,f.json()];case 8:return b=i.sent(),[3,10];case 9:throw w=i.sent(),tm.create("fetch-client-parse",{originalErrorMessage:w.message});case 10:m=b.entries,g=b.state,i.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===g?v=500:"NO_CHANGE"===g?v=304:"NO_TEMPLATE"!==g&&"EMPTY_CONFIG"!==g||(m={}),304!==v&&200!==v)throw tm.create("fetch-status",{httpStatus:v});return[2,{status:v,eTag:y,config:m}]}var _}))}))},t}(),nm=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}(),rm=["1","true","t","yes","y","on"],im=function(){function t(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"!==this._source&&rm.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},t.prototype.getSource=function(){return this._source},t}(),om=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=o.in.DEBUG;break;case"silent":this._logger.logLevel=o.in.SILENT;break;default:this._logger.logLevel=o.in.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return(0,i.mG)(this,void 0,void 0,(function(){var t,e,n;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),e=t[0],n=t[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){t._isInitializationComplete=!0}))),this._initializePromise},t.prototype.fetch=function(){return(0,i.mG)(this,void 0,void 0,(function(){var t,e,n,r=this;return(0,i.Jh)(this,(function(o){switch(o.label){case 0:t=new nm,setTimeout((function(){return(0,i.mG)(r,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){return t.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return o.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return o.sent(),[3,6];case 4:return e=o.sent(),"fetch-throttle",n=(s=e)instanceof a.ZR&&-1!==s.code.indexOf("fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw o.sent(),e;case 6:return[2]}var s}))}))},t.prototype.fetchAndActivate=function(){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}}))}))},t.prototype.getAll=function(){var t,e,n=this;return(t=this._storageCache.getActiveConfig(),e=this.defaultConfig,void 0===t&&(t={}),void 0===e&&(e={}),Object.keys((0,i.pi)((0,i.pi)({},t),e))).reduce((function(t,e){return t[e]=n.getValue(e),t}),{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new im("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new im("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new im("static"))},t}();function am(t,e){var n=t.target.error||void 0;return tm.create(e,{originalErrorMessage:n&&n.message})}var sm="app_namespace_store",um=function(){function t(t,e,n,r){void 0===r&&(r=new Promise((function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(am(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(sm,{keyPath:"compositeKey"})}}}))),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return(0,i.mG)(this,void 0,void 0,(function(){var e,n=this;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction([sm],"readonly").objectStore(sm),a=n.createCompositeKey(t);try{var s=o.get(a);s.onerror=function(t){i(am(t,"storage-get"))},s.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(t){i(tm.create("storage-get",{originalErrorMessage:t&&t.message}))}}))]}}))}))},t.prototype.set=function(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r=this;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var a=n.transaction([sm],"readwrite").objectStore(sm),s=r.createCompositeKey(t);try{var u=a.put({compositeKey:s,value:e});u.onerror=function(t){o(am(t,"storage-set"))},u.onsuccess=function(){i()}}catch(t){o(tm.create("storage-set",{originalErrorMessage:t&&t.message}))}}))]}}))}))},t.prototype.delete=function(t){return(0,i.mG)(this,void 0,void 0,(function(){var e,n=this;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction([sm],"readwrite").objectStore(sm),a=n.createCompositeKey(t);try{var s=o.delete(a);s.onerror=function(t){i(am(t,"storage-delete"))},s.onsuccess=function(){r()}}catch(t){i(tm.create("storage-delete",{originalErrorMessage:t&&t.message}))}}))]}}))}))},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),cm=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return(0,i.mG)(this,void 0,void 0,(function(){var t,e,n,r,o,a;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(r=i.sent())&&(this.lastFetchStatus=r),[4,e];case 2:return(o=i.sent())&&(this.lastSuccessfulFetchTimestampMillis=o),[4,n];case 3:return(a=i.sent())&&(this.activeConfig=a),[2]}}))}))},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();function lm(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(tm.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var hm,fm=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return(0,i.mG)(this,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}}))}))},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return(0,i.mG)(this,void 0,void 0,(function(){var e,o,s;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return[4,lm(t.signal,n)];case 1:i.sent(),i.label=2;case 2:return i.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=i.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return i.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof a.ZR&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(o=i.sent()))throw o;return s={throttleEndTimeMillis:Date.now()+(0,a.$s)(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(s)];case 6:return i.sent(),[2,this.attemptFetch(t,s)];case 7:return[2]}}))}))},t}(),pm="@firebase/remote-config";(hm=r.Z).INTERNAL.registerComponent(new cr.wA("remoteConfig",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw tm.create("registration-window");var i=n.options,a=i.projectId,s=i.apiKey,u=i.appId;if(!a)throw tm.create("registration-project-id");if(!s)throw tm.create("registration-api-key");if(!u)throw tm.create("registration-app-id");e=e||"firebase";var c=new um(u,n.name,e),l=new cm(c),h=new o.Yd(pm);h.logLevel=o.in.ERROR;var f=new em(r,hm.SDK_VERSION,e,a,s,u),p=new fm(f,c),d=new $y(p,c,l,h),v=new om(n,d,l,c,h);return v.ensureInitialized(),v}),"PUBLIC").setMultipleInstances(!0)),hm.registerVersion(pm,"0.1.30"),r.Z.registerVersion("firebase","8.0.1","app"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),r.Z.registerVersion("firebase","8.0.1"),r.Z.initializeApp({apiKey:"AIzaSyDwAMGj20rH42FROMjb5aq_9JhQatrhumQ",authDomain:"weatherapp-de148.firebaseapp.com",databaseURL:"https://weatherapp-de148.firebaseio.com",projectId:"weatherapp-de148",storageBucket:"weatherapp-de148.appspot.com",messagingSenderId:"1576151366",appId:"1:1576151366:web:efd76958e5df117ac25d47"}),r.Z.analytics();const dm=r.Z;function vm(t){return(vm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ym(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function mm(t,e){return(mm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function gm(t,e){return!e||"object"!==vm(e)&&"function"!=typeof e?bm(t):e}function bm(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wm(t){return(wm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _m=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mm(t,e)}(s,e);var n,r,i,o,a=(i=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=wm(i);if(o){var n=wm(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return gm(this,t)});function s(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=a.call(this,t)).fetchComments=e.fetchComments.bind(bm(e));var n=t.value;return e.state={Arg:n,Comments:[]},e}return n=s,(r=[{key:"fetchComments",value:function(){var t=this,e=[];return dm.database().ref("Comments/"+this.state.Arg).limitToLast(10).on("child_added",(function(n){e.push({key:n.key,user:n.child("user").val(),text:n.child("text").val()}),t.forceUpdate()})),this.setState({Comments:e}),e}},{key:"componentDidMount",value:function(){var t=this.fetchComments();this.setState({Comments:t})}},{key:"render",value:function(){return this.props.t,t.createElement("div",{className:"Comments"},t.createElement("ul",null,this.state.Comments.map((function(e){return t.createElement("li",{key:e.key},t.createElement("div",null,e.user,": ",e.text))}))))}}])&&ym(n.prototype,r),s}(t.Component);function Em(t){return(Em="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Im(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Tm(t,e){return(Tm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Sm(t,e){return!e||"object"!==Em(e)&&"function"!=typeof e?Cm(t):e}function Cm(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function km(t){return(km=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Nm=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Tm(t,e)}(s,e);var n,r,i,o,a=(i=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=km(i);if(o){var n=km(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Sm(this,t)});function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=a.call(this,t)).fetchWeather=e.fetchWeather.bind(Cm(e)),e.sendComment=e.sendComment.bind(Cm(e)),e.handleChange=e.handleChange.bind(Cm(e)),e.onSort=e.onSort.bind(Cm(e)),e.state={Weathers:[],Orderby:"city",Start:"Desc"},e}return n=s,(r=[{key:"fetchWeather",value:function(){var t=this,e=[],n=dm.database().ref("Weather/");return"Desc"==this.state.Start&&n.orderByChild(this.state.Orderby).limitToFirst(100).on("child_added",(function(n){e.push({key:n.key,city:n.child("city").val(),weather:n.child("weather").val(),description:n.child("description").val(),temp:n.child("temp").val()}),t.forceUpdate()})),"Asc"==this.state.Start&&n.orderByChild(this.state.Orderby).limitToLast(100).on("child_added",(function(n){e.push({key:n.key,city:n.child("city").val(),weather:n.child("weather").val(),description:n.child("description").val(),temp:n.child("temp").val()}),t.forceUpdate()})),this.setState({Weathers:e}),e}},{key:"sendComment",value:function(t){t.preventDefault(),console.log("key test "+t.target[0].defaultValue);var e={user:this.state.name,text:this.state.comment};if(""!=this.state.name&&null!=this.state.comment)try{dm.database().ref("Comments/"+t.target[0].defaultValue+"/").push(e)}catch(t){console.log(t)}this.setState({name:"",comment:""}),document.getElementById("commentForm").reset()}},{key:"handleChange",value:function(t){var e,n,r,i=t.target,o=i.name;this.setState((e={},n=o,r=i.value,n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e))}},{key:"onSort",value:function(t){var e="Desc";this.state.Orderby==t.target.value&&("Desc"==this.state.Start&&(e="Asc"),"Asc"==this.state.Start&&(e="Desc")),this.setState({Orderby:t.target.value,Start:e}),this.forceUpdate(),this.fetchWeather()}},{key:"componentDidMount",value:function(){var t=this.fetchWeather();this.setState({Weathers:t})}},{key:"render",value:function(){var e=this;return t.createElement("div",null,t.createElement("h1",null,"All cities"),t.createElement("div",{className:"sorting"},"Sort by:",t.createElement("button",{type:"button",value:"city",onClick:this.onSort},"City ",this.state.Orderby),t.createElement("button",{type:"button",value:"temp",onClick:this.onSort},"Temperature ",this.state.Orderby)),t.createElement("ul",null,this.state.Weathers.map((function(n){return t.createElement("li",{className:"weatherItem",key:n.city},t.createElement("div",null,n.city," - ",n.weather," - ",n.description," - ",n.temp),t.createElement("form",{id:"commentForm",onSubmit:e.sendComment},t.createElement("input",{type:"hidden",name:"key",value:n.key,readOnly:!0}),t.createElement("label",null," User:",t.createElement("input",{type:"text",name:"name",onChange:e.handleChange})),t.createElement("label",null," Comment:",t.createElement("input",{type:"text",name:"comment",onChange:e.handleChange})),t.createElement("input",{type:"submit",value:"Add Comment"})),t.createElement(_m,{value:n.key}))}))))}}])&&Im(n.prototype,r),s}(t.Component);function Am(t){return(Am="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Om(t,e){return(Om=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xm(t,e){return!e||"object"!==Am(e)&&"function"!=typeof e?Rm(t):e}function Rm(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Dm(t){return(Dm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Lm=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Om(t,e)}(s,e);var n,r,i,o,a=(i=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Dm(i);if(o){var n=Dm(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return xm(this,t)});function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=a.call(this,t)).fetchWeather=e.fetchWeather.bind(Rm(e)),e.state={Weathers:[]},e}return n=s,(r=[{key:"fetchWeather",value:function(){var t=this,e=[];return dm.database().ref("Weather/").orderByChild("weather").equalTo("Clouds").on("child_added",(function(n){e.push({city:n.child("city").val(),weather:n.child("weather").val(),description:n.child("description").val(),temp:n.child("temp").val()}),t.forceUpdate()})),this.setState({Weathers:e}),e}},{key:"componentDidMount",value:function(){var t=this.fetchWeather();this.setState({Weathers:t})}},{key:"render",value:function(){return this.props.t,t.createElement("div",null,t.createElement("h1",null,"Cloudy cities"),t.createElement("ul",null,this.state.Weathers.map((function(e){return t.createElement("li",{className:"weatherItem",key:e.city},t.createElement("div",null,e.city),t.createElement("div",null,e.weather))}))))}}])&&Pm(n.prototype,r),s}(t.Component);const Mm=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var Fm=n(649);const jm=function(){return Fm.Z.Date.now()},Um=Fm.Z.Symbol;var Vm=Object.prototype,qm=Vm.hasOwnProperty,Bm=Vm.toString,zm=Um?Um.toStringTag:void 0;var Wm=Object.prototype.toString;var Gm=Um?Um.toStringTag:void 0;const Hm=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Gm&&Gm in Object(t)?function(t){var e=qm.call(t,zm),n=t[zm];try{t[zm]=void 0;var r=!0}catch(t){}var i=Bm.call(t);return r&&(e?t[zm]=n:delete t[zm]),i}(t):function(t){return Wm.call(t)}(t)},Km=function(t){return null!=t&&"object"==typeof t};var Qm=/^\s+|\s+$/g,Jm=/^[-+]0x[0-9a-f]+$/i,Ym=/^0b[01]+$/i,Xm=/^0o[0-7]+$/i,$m=parseInt;const Zm=function(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||Km(t)&&"[object Symbol]"==Hm(t)}(t))return NaN;if(Mm(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Mm(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Qm,"");var n=Ym.test(t);return n||Xm.test(t)?$m(t.slice(2),n?2:8):Jm.test(t)?NaN:+t};var tg=Math.max,eg=Math.min;const ng=function(t,e,n){var r,i,o,a,s,u,c=0,l=!1,h=!1,f=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function p(e){var n=r,o=i;return r=i=void 0,c=e,a=t.apply(o,n)}function d(t){return c=t,s=setTimeout(y,e),l?p(t):a}function v(t){var n=t-u;return void 0===u||n>=e||n<0||h&&t-c>=o}function y(){var t=jm();if(v(t))return m(t);s=setTimeout(y,function(t){var n=e-(t-u);return h?eg(n,o-(t-c)):n}(t))}function m(t){return s=void 0,f&&r?p(t):(r=i=void 0,a)}function g(){var t=jm(),n=v(t);if(r=arguments,i=this,u=t,n){if(void 0===s)return d(u);if(h)return clearTimeout(s),s=setTimeout(y,e),p(u)}return void 0===s&&(s=setTimeout(y,e)),a}return e=Zm(e)||0,Mm(n)&&(l=!!n.leading,o=(h="maxWait"in n)?tg(Zm(n.maxWait)||0,e):o,f="trailing"in n?!!n.trailing:f),g.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=u=i=s=void 0},g.flush=function(){return void 0===s?a:m(jm())},g},rg=function(t,e){return t===e||t!=t&&e!=e},ig=function(t,e){for(var n=t.length;n--;)if(rg(t[n][0],e))return n;return-1};var og=Array.prototype.splice;function ag(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ag.prototype.clear=function(){this.__data__=[],this.size=0},ag.prototype.delete=function(t){var e=this.__data__,n=ig(e,t);return!(n<0||(n==e.length-1?e.pop():og.call(e,n,1),--this.size,0))},ag.prototype.get=function(t){var e=this.__data__,n=ig(e,t);return n<0?void 0:e[n][1]},ag.prototype.has=function(t){return ig(this.__data__,t)>-1},ag.prototype.set=function(t,e){var n=this.__data__,r=ig(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};const sg=ag,ug=function(t){if(!Mm(t))return!1;var e=Hm(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},cg=Fm.Z["__core-js_shared__"];var lg,hg=(lg=/[^.]+$/.exec(cg&&cg.keys&&cg.keys.IE_PROTO||""))?"Symbol(src)_1."+lg:"";var fg=Function.prototype.toString;const pg=function(t){if(null!=t){try{return fg.call(t)}catch(t){}try{return t+""}catch(t){}}return""};var dg=/^\[object .+?Constructor\]$/,vg=Function.prototype,yg=Object.prototype,mg=vg.toString,gg=yg.hasOwnProperty,bg=RegExp("^"+mg.call(gg).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const wg=function(t){return!(!Mm(t)||(e=t,hg&&hg in e))&&(ug(t)?bg:dg).test(pg(t));var e},_g=function(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return wg(n)?n:void 0},Eg=_g(Fm.Z,"Map"),Ig=_g(Object,"create");var Tg=Object.prototype.hasOwnProperty;var Sg=Object.prototype.hasOwnProperty;function Cg(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Cg.prototype.clear=function(){this.__data__=Ig?Ig(null):{},this.size=0},Cg.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Cg.prototype.get=function(t){var e=this.__data__;if(Ig){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return Tg.call(e,t)?e[t]:void 0},Cg.prototype.has=function(t){var e=this.__data__;return Ig?void 0!==e[t]:Sg.call(e,t)},Cg.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Ig&&void 0===e?"__lodash_hash_undefined__":e,this};const kg=Cg,Ng=function(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map};function Ag(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ag.prototype.clear=function(){this.size=0,this.__data__={hash:new kg,map:new(Eg||sg),string:new kg}},Ag.prototype.delete=function(t){var e=Ng(this,t).delete(t);return this.size-=e?1:0,e},Ag.prototype.get=function(t){return Ng(this,t).get(t)},Ag.prototype.has=function(t){return Ng(this,t).has(t)},Ag.prototype.set=function(t,e){var n=Ng(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};const Pg=Ag;function Og(t){var e=this.__data__=new sg(t);this.size=e.size}Og.prototype.clear=function(){this.__data__=new sg,this.size=0},Og.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Og.prototype.get=function(t){return this.__data__.get(t)},Og.prototype.has=function(t){return this.__data__.has(t)},Og.prototype.set=function(t,e){var n=this.__data__;if(n instanceof sg){var r=n.__data__;if(!Eg||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Pg(r)}return n.set(t,e),this.size=n.size,this};const xg=Og;function Rg(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Pg;++e<n;)this.add(t[e])}Rg.prototype.add=Rg.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Rg.prototype.has=function(t){return this.__data__.has(t)};const Dg=Rg,Lg=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1},Mg=function(t,e,n,r,i,o){var a=1&n,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var c=o.get(t);if(c&&o.get(e))return c==e;var l=-1,h=!0,f=2&n?new Dg:void 0;for(o.set(t,e),o.set(e,t);++l<s;){var p=t[l],d=e[l];if(r)var v=a?r(d,p,l,e,t,o):r(p,d,l,t,e,o);if(void 0!==v){if(v)continue;h=!1;break}if(f){if(!Lg(e,(function(t,e){if(a=e,!f.has(a)&&(p===t||i(p,t,n,r,o)))return f.push(e);var a}))){h=!1;break}}else if(p!==d&&!i(p,d,n,r,o)){h=!1;break}}return o.delete(t),o.delete(e),h},Fg=Fm.Z.Uint8Array,jg=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n},Ug=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n};var Vg=Um?Um.prototype:void 0,qg=Vg?Vg.valueOf:void 0;const Bg=Array.isArray;var zg=Object.prototype.propertyIsEnumerable,Wg=Object.getOwnPropertySymbols;const Gg=Wg?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}(Wg(t),(function(e){return zg.call(t,e)})))}:function(){return[]},Hg=function(t){return Km(t)&&"[object Arguments]"==Hm(t)};var Kg=Object.prototype,Qg=Kg.hasOwnProperty,Jg=Kg.propertyIsEnumerable;const Yg=Hg(function(){return arguments}())?Hg:function(t){return Km(t)&&Qg.call(t,"callee")&&!Jg.call(t,"callee")};var Xg=n(123),$g=/^(?:0|[1-9]\d*)$/;const Zg=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&$g.test(t))&&t>-1&&t%1==0&&t<e},tb=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};var eb={};eb["[object Float32Array]"]=eb["[object Float64Array]"]=eb["[object Int8Array]"]=eb["[object Int16Array]"]=eb["[object Int32Array]"]=eb["[object Uint8Array]"]=eb["[object Uint8ClampedArray]"]=eb["[object Uint16Array]"]=eb["[object Uint32Array]"]=!0,eb["[object Arguments]"]=eb["[object Array]"]=eb["[object ArrayBuffer]"]=eb["[object Boolean]"]=eb["[object DataView]"]=eb["[object Date]"]=eb["[object Error]"]=eb["[object Function]"]=eb["[object Map]"]=eb["[object Number]"]=eb["[object Object]"]=eb["[object RegExp]"]=eb["[object Set]"]=eb["[object String]"]=eb["[object WeakMap]"]=!1;var nb=n(585),rb=nb.Z&&nb.Z.isTypedArray;const ib=rb?(ob=rb,function(t){return ob(t)}):function(t){return Km(t)&&tb(t.length)&&!!eb[Hm(t)]};var ob,ab=Object.prototype.hasOwnProperty;const sb=function(t,e){var n=Bg(t),r=!n&&Yg(t),i=!n&&!r&&(0,Xg.Z)(t),o=!n&&!r&&!i&&ib(t),a=n||r||i||o,s=a?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],u=s.length;for(var c in t)!e&&!ab.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Zg(c,u))||s.push(c);return s};var ub=Object.prototype;const cb=function(t,e){return function(n){return t(e(n))}}(Object.keys,Object);var lb=Object.prototype.hasOwnProperty;const hb=function(t){if(n=(e=t)&&e.constructor,e!==("function"==typeof n&&n.prototype||ub))return cb(t);var e,n,r=[];for(var i in Object(t))lb.call(t,i)&&"constructor"!=i&&r.push(i);return r},fb=function(t){return null!=(e=t)&&tb(e.length)&&!ug(e)?sb(t):hb(t);var e},pb=function(t){return function(t,e,n){var r=e(t);return Bg(t)?r:function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}(r,n(t))}(t,fb,Gg)};var db=Object.prototype.hasOwnProperty;const vb=_g(Fm.Z,"DataView"),yb=_g(Fm.Z,"Promise"),mb=_g(Fm.Z,"Set"),gb=_g(Fm.Z,"WeakMap");var bb="[object Map]",wb="[object Promise]",_b="[object Set]",Eb="[object WeakMap]",Ib="[object DataView]",Tb=pg(vb),Sb=pg(Eg),Cb=pg(yb),kb=pg(mb),Nb=pg(gb),Ab=Hm;(vb&&Ab(new vb(new ArrayBuffer(1)))!=Ib||Eg&&Ab(new Eg)!=bb||yb&&Ab(yb.resolve())!=wb||mb&&Ab(new mb)!=_b||gb&&Ab(new gb)!=Eb)&&(Ab=function(t){var e=Hm(t),n="[object Object]"==e?t.constructor:void 0,r=n?pg(n):"";if(r)switch(r){case Tb:return Ib;case Sb:return bb;case Cb:return wb;case kb:return _b;case Nb:return Eb}return e});const Pb=Ab;var Ob="[object Arguments]",xb="[object Array]",Rb="[object Object]",Db=Object.prototype.hasOwnProperty;const Lb=function(t,e,n,r,i,o){var a=Bg(t),s=Bg(e),u=a?xb:Pb(t),c=s?xb:Pb(e),l=(u=u==Ob?Rb:u)==Rb,h=(c=c==Ob?Rb:c)==Rb,f=u==c;if(f&&(0,Xg.Z)(t)){if(!(0,Xg.Z)(e))return!1;a=!0,l=!1}if(f&&!l)return o||(o=new xg),a||ib(t)?Mg(t,e,n,r,i,o):function(t,e,n,r,i,o,a){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new Fg(t),new Fg(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return rg(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=jg;case"[object Set]":var u=1&r;if(s||(s=Ug),t.size!=e.size&&!u)return!1;var c=a.get(t);if(c)return c==e;r|=2,a.set(t,e);var l=Mg(s(t),s(e),r,i,o,a);return a.delete(t),l;case"[object Symbol]":if(qg)return qg.call(t)==qg.call(e)}return!1}(t,e,u,n,r,i,o);if(!(1&n)){var p=l&&Db.call(t,"__wrapped__"),d=h&&Db.call(e,"__wrapped__");if(p||d){var v=p?t.value():t,y=d?e.value():e;return o||(o=new xg),i(v,y,n,r,o)}}return!!f&&(o||(o=new xg),function(t,e,n,r,i,o){var a=1&n,s=pb(t),u=s.length;if(u!=pb(e).length&&!a)return!1;for(var c=u;c--;){var l=s[c];if(!(a?l in e:db.call(e,l)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var f=!0;o.set(t,e),o.set(e,t);for(var p=a;++c<u;){var d=t[l=s[c]],v=e[l];if(r)var y=a?r(v,d,l,e,t,o):r(d,v,l,t,e,o);if(!(void 0===y?d===v||i(d,v,n,r,o):y)){f=!1;break}p||(p="constructor"==l)}if(f&&!p){var m=t.constructor,g=e.constructor;m==g||!("constructor"in t)||!("constructor"in e)||"function"==typeof m&&m instanceof m&&"function"==typeof g&&g instanceof g||(f=!1)}return o.delete(t),o.delete(e),f}(t,e,n,r,i,o))},Mb=function t(e,n,r,i,o){return e===n||(null==e||null==n||!Km(e)&&!Km(n)?e!=e&&n!=n:Lb(e,n,r,i,t,o))},Fb=function(t,e){return Mb(t,e)},jb=function(){};var Ub=n(149),Vb=n(327),qb=n.n(Vb),Bb=n(88),zb=n.n(Bb);function Wb(){return(Wb=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Gb(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Hb(t,e){try{var n=t()}catch(t){return e(t)}return n&&n.then?n.then(void 0,e):n}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var Kb=(0,t.createContext)({base:"",parentPath:"",resolve:function(t){return t},requestOptions:{},onError:jb,onRequest:jb,onResponse:jb,queryParams:{},queryParamStringifyOptions:{}});(function(e){function n(){return e.apply(this,arguments)||this}return Gb(n,e),n.prototype.render=function(){var e=this.props,n=e.children,r=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(e,["children"]);return(0,t.createElement)(Kb.Provider,{value:Wb({onError:jb,onRequest:jb,onResponse:jb,resolve:function(t){return t},requestOptions:{},parentPath:"",queryParams:{},queryParamStringifyOptions:{}},r)},n)},n}(t.Component)).displayName="RestfulProviderContext",Kb.Consumer;var Qb=function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=""),void 0===n&&(n="");var r=Jb(e,n);return""===t&&r.startsWith("/")?r:t.endsWith("/")?""+t.slice(0,-1)+r:""+t+r},Jb=function(t,e){return void 0===t&&(t=""),void 0===e&&(e=""),e.startsWith("/")&&e.length>1?Ub.DB(t,e):""!==e&&"/"!==e?t+"/"+e:t},Yb=function(t){try{return 204===t.status?Promise.resolve({data:void 0,responseError:!1}):(t.headers.get("content-type")||"").includes("application/json")?Promise.resolve(Hb((function(){return Promise.resolve(t.json()).then((function(t){return{data:t,responseError:!1}}))}),(function(t){return{data:t.message,responseError:!0}}))):(t.headers.get("content-type")||"").includes("text/plain")||(t.headers.get("content-type")||"").includes("text/html")?Promise.resolve(Hb((function(){return Promise.resolve(t.text()).then((function(t){return{data:t,responseError:!1}}))}),(function(t){return{data:t.message,responseError:!0}}))):Promise.resolve({data:t,responseError:!1})}catch(t){return Promise.reject(t)}};function Xb(t,e,n,r){void 0===r&&(r={});var i=r,o=i.queryParamOptions,a=i.stripTrailingSlash,s=t.endsWith("/")?t:t+"/",u=e.startsWith("/")?e.slice(1):e,c=Object.keys(n||{}).length?u+"?"+qb().stringify(n,o):u,l=Boolean(c)?Ub.DB(s,c):s;return a&&l.endsWith("/")?l.slice(0,-1):l}(function(e){function n(t){var n;return(n=e.call(this,t)||this).abortController=new AbortController,n.signal=n.abortController.signal,n.state={data:null,response:null,loading:!n.props.lazy,error:null},n.getRequestOptions=function(t,e,r){try{var i=function(t){return o?t:Wb({},e,{},a,{headers:new Headers(Wb({},"boolean"!=typeof r?r:{},{},(e||{}).headers,{},(a||{}).headers))})},o=!1,a=n.props.requestOptions,s=function(){if("function"==typeof a)return Promise.resolve(a(t,"GET")).then((function(t){return o=!0,Wb({},e,{},t,{headers:new Headers(Wb({},"boolean"!=typeof r?r:{},{},(e||{}).headers,{},t.headers))})}))}();return Promise.resolve(s&&s.then?s.then(i):i(s))}catch(t){return Promise.reject(t)}},n.fetch=function(t,e){try{var r=n.props,i=r.base,o=r.__internal_hasExplicitBase,a=r.parentPath,s=r.path,u=r.resolve,c=r.onError,l=r.onRequest,h=r.onResponse;!n.state.error&&n.state.loading||n.setState((function(){return{error:null,loading:!0}}));var f=function(){var t=o?s:Jb(a,s);return Xb(i,t,n.props.queryParams,{stripTrailingSlash:!0,queryParamOptions:n.props.queryParamStringifyOptions})};return Promise.resolve(n.getRequestOptions(f(),e)).then((function(r){var i=new Request(f(),r);return l&&l(i),Hb((function(){return Promise.resolve(fetch(i,{signal:n.signal})).then((function(r){var i=r.clone();return h&&h(r.clone()),Promise.resolve(Yb(r)).then((function(o){var a=o.data,s=o.responseError;if(!n.signal.aborted){if(!r.ok||s){var l={message:"Failed to fetch: "+r.status+" "+r.statusText+(s?" - "+a:""),data:a,status:r.status};return n.setState({loading:!1,error:l,data:null,response:i}),!n.props.localErrorOnly&&c&&c(l,(function(){return n.fetch(t,e)}),r),null}return Promise.resolve(function(t){var e=t.data,n=t.resolve;try{var r=function(){return{data:i,error:o}},i=null,o=null,a=Hb((function(){var t=function(){if(n){var t=function(t){i=t},r=n(e);return r.then?Promise.resolve(r).then(t):t(r)}i=e}();if(t&&t.then)return t.then((function(){}))}),(function(t){i=null,o={message:"RESOLVE_ERROR",data:JSON.stringify(t)}}));return Promise.resolve(a&&a.then?a.then(r):r())}catch(t){return Promise.reject(t)}}({data:a,resolve:u})).then((function(t){return n.setState({loading:!1,data:t.data,error:t.error,response:i}),a}))}}))}))}),(function(t){n.signal.aborted||n.setState({loading:!1,data:null,error:{message:"Failed to fetch: "+t.message,data:t}})}))}))}catch(t){return Promise.reject(t)}},"object"==typeof t.debounce?n.fetch=ng(n.fetch,t.debounce.wait,t.debounce.options):"number"==typeof t.debounce?n.fetch=ng(n.fetch,t.debounce):t.debounce&&(n.fetch=ng(n.fetch)),n}Gb(n,e);var r=n.prototype;return r.componentDidMount=function(){this.props.lazy||this.fetch()},r.componentDidUpdate=function(t){var e=t.base,n=t.parentPath,r=t.path,i=t.resolve,o=t.queryParams,a=t.requestOptions;(e!==this.props.base||n!==this.props.parentPath||r!==this.props.path||!Fb(o,this.props.queryParams)||i&&this.props.resolve&&i.toString()!==this.props.resolve.toString()||a&&this.props.requestOptions&&a.toString()!==this.props.requestOptions.toString())&&(this.props.lazy||this.fetch())},r.componentWillUnmount=function(){this.abortController.abort()},r.render=function(){var e=this.props,n=e.children,r=e.wait,i=e.path,o=e.base,a=e.parentPath,s=this.state,u=s.data,c=s.error,l=s.loading,h=s.response;return r&&null===u&&!c?(0,t.createElement)(t.Fragment,null):n(u,{loading:l,error:c},{refetch:this.fetch},{response:h,absolutePath:Qb(o,a,i)})},n}(t.Component)).defaultProps={base:"",parentPath:"",resolve:function(t){return t},queryParams:{}},(function(t){function e(){var e;return(e=t.apply(this,arguments)||this).state={data:null,previousData:null,loading:!e.props.lazy,lastResponse:null,polling:!e.props.lazy,finished:!1,error:null},e.keepPolling=!e.props.lazy,e.abortController=new AbortController,e.signal=e.abortController.signal,e.isModified=function(t,n){return 304!==t.status&&!zb()(e.state.data,n)},e.getRequestOptions=function(t){return"function"==typeof e.props.requestOptions?e.props.requestOptions(t,"GET"):e.props.requestOptions||{}},e.isResponseOk=function(t){return t.ok||304===t.status},e.cycle=function(){try{if(!e.keepPolling)return Promise.resolve();if(e.props.until&&e.props.until(e.state.data,e.state.lastResponse))return e.stop(),Promise.resolve();var t=e.props,n=t.base,r=t.path,i=t.interval,o=t.wait,a=t.onError,s=t.onRequest,u=t.onResponse,c=e.state.lastPollIndex,l=Xb(n,r,e.props.queryParams,{queryParamOptions:e.props.queryParamStringifyOptions,stripTrailingSlash:!0});return Promise.resolve(e.getRequestOptions(l)).then((function(t){var n=new Request(l,Wb({},t,{headers:Wb({Prefer:"wait="+o+"s;"+(c?"index="+c:"")},t.headers)}));return s&&s(n),Hb((function(){return Promise.resolve(fetch(n,{signal:e.signal})).then((function(t){return u&&u(t.clone()),Promise.resolve(Yb(t)).then((function(n){var r=n.data,o=n.responseError;if(e.keepPolling&&!e.signal.aborted){if(!e.isResponseOk(t)||o){var s={message:"Failed to poll: "+t.status+" "+t.statusText+(o?" - "+r:""),data:r,status:t.status};e.setState({loading:!1,lastResponse:t,error:s}),!e.props.localErrorOnly&&a&&a(s,(function(){return Promise.resolve()}),t)}else e.isModified(t,r)&&e.setState((function(e){return{loading:!1,lastResponse:t,previousData:e.data,data:r,error:null,lastPollIndex:t.headers.get("x-polling-index")||void 0}}));return Promise.resolve(new Promise((function(t){return setTimeout(t,i)}))).then((function(){e.cycle()}))}}))}))}),(function(){}))}))}catch(t){return Promise.reject(t)}},e.start=function(){e.keepPolling=!0,e.state.polling||e.setState((function(){return{polling:!0}})),e.cycle()},e.stop=function(){e.keepPolling=!1,e.setState((function(){return{polling:!1,finished:!0}}))},e}Gb(e,t);var n=e.prototype;return n.componentDidMount=function(){var t=this.props,e=t.path,n=t.lazy;if(void 0===e)throw new Error('[restful-react]: You\'re trying to poll something without a path. Please specify a "path" prop on your Poll component.');n||this.start()},n.componentWillUnmount=function(){this.abortController.abort(),this.stop()},n.render=function(){var t=this.state,e=t.lastResponse,n=t.previousData,r=t.data,i=t.polling,o=t.loading,a=t.error,s=t.finished,u=this.props,c=u.children,l=u.base,h=u.path,f=u.resolve,p={response:e,absolutePath:Qb(l,"",h)},d={polling:i,loading:o,error:a,finished:s},v={stop:this.stop,start:this.start};return c(e&&f?f(r,n):r,d,v,p)},e}(t.Component)).defaultProps={interval:1e3,wait:60,base:"",resolve:function(t){return t},queryParams:{}},(function(t){function e(){var e;return(e=t.apply(this,arguments)||this).state={loading:!1,error:null},e.abortController=new AbortController,e.signal=e.abortController.signal,e.mutate=function(t,n){try{var r=function(r){function i(i){function o(r){return Promise.resolve(Yb(a)).then((function(r){var i=r.data,o=r.responseError;if(!e.signal.aborted){if(!a.ok||o){var s={data:i,message:"Failed to fetch: "+a.status+" "+a.statusText,status:a.status};throw e.setState({error:s,loading:!1}),!e.props.localErrorOnly&&h&&h(s,(function(){return e.mutate(t,n)}),a),s}return e.setState({loading:!1}),e.props.onMutate&&e.props.onMutate(t,i),i}}))}var a,s=new Request(v(),Wb({method:c,body:y},r,{},n,{headers:Wb({"content-type":"object"==typeof t?"application/json":"text/plain"},"function"==typeof l?i.headers:i,{},n?n.headers:{})}));f&&f(s);var u=Hb((function(){return Promise.resolve(fetch(s,{signal:e.signal})).then((function(t){a=t,p&&p(a.clone())}))}),(function(r){var i={message:"Failed to fetch: "+r.message,data:""};throw e.setState({error:i,loading:!1}),!e.props.localErrorOnly&&h&&h(i,(function(){return e.mutate(t,n)})),i}));return u&&u.then?u.then(o):o()}return"function"==typeof l?Promise.resolve("function"==typeof l?l(v(),c,t):(l||{}).headers).then(i):i("function"==typeof l?l(v(),c,t):(l||{}).headers)},i=e.props,o=i.__internal_hasExplicitBase,a=i.base,s=i.parentPath,u=i.path,c=i.verb,l=i.requestOptions,h=i.onError,f=i.onRequest,p=i.onResponse,d=i.pathInlineBodyEncode;e.setState((function(){return{error:null,loading:!0}}));var v=function(){var n="DELETE"===c&&"string"==typeof t?Jb(u,d?d(t):t):u,r=o?n||"":Jb(s,n);return Xb(a,r,e.props.queryParams,{stripTrailingSlash:!0,queryParamOptions:e.props.queryParamStringifyOptions})},y="object"==typeof t?JSON.stringify(t):t;return Promise.resolve("function"==typeof l?Promise.resolve("function"==typeof l?l(v(),c,t):l).then(r):r("function"==typeof l?l(v(),c,t):l))}catch(t){return Promise.reject(t)}},e}Gb(e,t);var n=e.prototype;return n.componentWillUnmount=function(){this.abortController.abort()},n.render=function(){var t=this.props,e=t.children,n=t.path,r=t.base,i=t.parentPath,o=this.state,a=o.error,s=o.loading;return e(this.mutate,{loading:s,error:a},{absolutePath:Qb(r,i,n)})},e}(t.Component)).defaultProps={base:"",parentPath:"",path:"",queryParams:{}};const $b=function(t){fetch("https://ancient-bayou-11788.herokuapp.com/https://samples.openweathermap.org/data/2.5/box/city?bbox=12,32,15,37,10&appid=439d4b804bc8187953eb36d2a8c26a02").then((function(t){return t.json()})).then((function(t){!function(t){console.log("Updating Firebase");var e=t;Object.entries(e.list).map((function(t){var e={city:t[1].name,weather:t[1].weather[0].main,description:t[1].weather[0].description,temp:t[1].main.temp};try{dm.database().ref("Weather/"+t[1].id+"/").set(e)}catch(t){}}))}(t)}))};function Zb(t){return(Zb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ew(t,e){return(ew=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function nw(t,e){return!e||"object"!==Zb(e)&&"function"!=typeof e?rw(t):e}function rw(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iw(t){return(iw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ow=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ew(t,e)}(s,e);var n,r,i,o,a=(i=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=iw(i);if(o){var n=iw(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return nw(this,t)});function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=a.call(this,t)).onClickHandler=e.onClickHandler.bind(rw(e)),e.componentDidMount=e.componentDidMount.bind(rw(e)),e}return n=s,(r=[{key:"componentDidMount",value:function(){$b()}},{key:"onClickHandler",value:function(){this.forceUpdate()}},{key:"render",value:function(){return t.createElement("div",{className:"Weather"},t.createElement("div",null,"Weather App"),t.createElement(Lm,null),t.createElement(Nm,null),t.createElement("button",{type:"button",onClick:this.onClickHandler},"Refresh"))}}])&&tw(n.prototype,r),s}(t.Component);e.render(t.createElement(ow,null),document.getElementById("app"))})()})();